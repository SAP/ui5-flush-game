sap.ui.require.preload({
	"flush/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","sap/ui/model/json/JSONModel","./model/models","./controller/SoundManager","./controller/BadWeather"],function(e,n,t,s,r,o){"use strict";return e.extend("flush.game.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.setModel(s.createDeviceModel(),"device");this.setModel(s.createAppModel(this),"app");var n=new t({mode:"easter"});this.setModel(n,"game");this.getRouter().initialize();this._soundManager=new r;this._soundManager.init();this._badWeather=new o;this._badWeather.init(this);this._preloadFiles()},onAfterRendering:function(){this.getRootControl().addEventDelegate({onAfterRendering:function(){document.getElementsByClassName("loading")[0].style.display="none"}})},filesLoaded:function(){return this._filesLoaded},_preloadFiles:function(){this._filesLoaded=new Promise(function(e){var n=[{src:"flush_logo.png"},{src:"flush_logo_large.png"},{src:"flush_logo_xl.png"},{src:"effect_awesome.png"},{src:"effect_ha_ha_ha_neu.png"},{src:"effect_ohno.png"},{src:"effect_plop.png"},{src:"effect_points.png"},{src:"effect_points_critical.png"},{src:"effect_points_negative.png"},{src:"effect_pow.png"},{src:"effect_lowenergy.png"},{src:"gauge_bg.png"},{src:"energy_bg.png"},{src:"OrangeBefuerchtet.png"},{src:"BlauZaehne.png"},{src:"GrauKeineMeinung.png"},{src:"GruenHoffnungsvoll.png"},{src:"LilaDebatiert.png"},{src:"OrangeBefuerchtet.png"},{src:"RotRenderManagerDroht.png"},{src:"GodMode.png"},{src:"ChickenOut.png"},{src:"SwitchMode.png"},{src:"Boom.png"},{src:"Zing.png"}];var t=new createjs.LoadQueue(false);t.addEventListener("complete",function(){e()}.bind(this));t.loadManifest(n,true,sap.ui.require.toUrl("flush/game/images")+"/")});return this._filesLoaded}})});
},
	"flush/controller/App.controller.js":function(){sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../controls/MessageToastDeluxe","../model/formatter","sap/ui/test/actions/Press","sap/base/util/UriParameters","sap/ui/core/Fragment","sap/ui/thirdparty/jquery"],function(e,t,i,r,n,o,s,a){"use strict";return e.extend("flush.game.controller.App",{formatter:r,onInit:function(){e.prototype.onInit.apply(this,arguments);var i=new o(window.location.href),r=!!i.get("sap-ui-godMode");var n=new t({score:0,progress:1,multiProgress:1,mood:100,godMode:false,mode:"1player",idleTimeReloopIntro:12e4,player1:"images/player1.png",player2:"images/player2.png",flushLogo:"images/flush_logo.png",chickenOut:"images/ChickenOut.png",switchMode:"images/SwitchMode.png"});this.setModel(n,"appView");if(r){this.activateGodMode()}this.ready().then(function(){this._initArcadeControlEvents();this._initEscape();this._initEnter()}.bind(this))},_initArcadeControlEvents:function(){var e=this;n.prototype.executeOnArcade=function(t){if(!t.$().length){return}var i=this.$(t),r=i[0];if(i.length){if(e["__sneakedInTimeout"]){return}this._createAndDispatchMouseEvent("mousedown",r);e["__sneakedInTimeout"]=setTimeout(function(){this._createAndDispatchMouseEvent("mouseup",r);e["__sneakedInTimeout"]=null}.bind(this),200)}};var t=function(e){try{(new n).executeOnArcade(this.byId("app").getCurrentPage().byId("arcadeBoard--"+e))}catch(e){}}.bind(this);document.addEventListener("click",function(e){var i=e.target.getAttribute("id");if(!i&&e.target.parentNode){i=e.target.parentNode.getAttribute("id")}var r=i&&i.split("--").pop().split("-")[0];var n=["a","b","l","r","u","d"];if(n.indexOf(r)===-1){if(e.which===1){t("a")}else if(e.which===2){t("b")}}});var i=function(e){var t=this.byId("app").getCurrentPage(),i=t.getId().split("---").pop();if(i==="home"||i==="multi"){var r=a.Event("keypress");r.ctrlKey=false;var o=t.byId("levels");switch(e){case"ArrowLeft":o.onsapleft(r);break;case"ArrowRight":o.onsapright(r);break;case"ArrowUp":o.onsapup(r);break;case"ArrowDown":o.onsapdown(r);break;case"Enter":try{var o=sap.ui.getCore().byId(document.activeElement.getAttribute("id"));(new n).executeOn(o)}catch(e){}break}}}.bind(this);document.addEventListener("keydown",function(e){switch(e.key){case"ArrowLeft":case"a":t("l");i("ArrowLeft");break;case"ArrowRight":case"d":t("r");i("ArrowRight");break;case"ArrowUp":case"w":t("u");i("ArrowUp");break;case"ArrowDown":case"s":t("d");i("ArrowDown");break;case" ":t("a");i("Enter");break;case"b":t("b");break}}.bind(this))},_initEscape:function(){document.addEventListener("keyup",function(e){var t=this.byId("Escape");if(t&&t.isOpen()){if(e.key==="Escape"||e.key==="5"){t.getBeginButton().firePress()}else{t.getEndButton().firePress()}t.destroy();return}var i=this.byId("SwitchMode");if(i&&i.isOpen()){if(e.key==="Escape"||e.key==="5"||e.key==="1"||e.key==="2"||e.key==="3"){i.getBeginButton().firePress()}else{i.getEndButton().firePress()}i.destroy();return}if(e.key==="1"||e.key==="2"||e.key==="3"||e.key==="Escape"||e.key==="5"){var r=this.byId("app").getCurrentPage(),n=r.getId().split("---").pop();if(n==="intro"&&this.getModel("appView").getProperty("/score")===0){r.getController()._endIntro()}if(e.key==="1"||e.key==="2"||e.key==="3"){var o=this.getModel("appView").getProperty("/mode");if(e.key==="1"&&o==="1player"||e.key==="2"&&o==="2player"){this.getSoundManager().play("coin");return}var a=e.key==="1"?"1player":"2player";if(e.key==="3"){a=o==="1player"?"2player":"1player"}if(n==="game"){var d={formatter:this.formatter,onStay:function(){this.byId("SwitchMode").close()}.bind(this),onLeave:function(){var e=this.byId("app").getCurrentPage();if(e.getId().split("---").pop()==="game"){e.byId("page").end().then(function(){this.onSwitchMode(a)}.bind(this))}else{this.onSwitchMode(a)}this.byId("SwitchMode").close()}.bind(this)};if(!i){s.load({id:this.getView().getId(),name:"flush.game.view.SwitchMode",controller:d}).then(function(e){e.setInitialFocus(e.getBeginButton());this.getView().addDependent(e);e.open()}.bind(this))}else{i.open()}}else{this.onSwitchMode(a)}}else if(e.key==="Escape"||e.key==="5"){var d={formatter:this.formatter,onStay:function(){this.byId("Escape").close()}.bind(this),onLeave:function(){var e=this.byId("app").getCurrentPage();if(e.getId().split("---").pop()==="game"){e.byId("page").end().then(function(){this.reset()}.bind(this))}else{this.reset()}this.byId("Escape").close()}.bind(this)};if(!t){s.load({id:this.getView().getId(),name:"flush.game.view.Escape",controller:d}).then(function(e){e.setInitialFocus(e.getBeginButton());this.getView().addDependent(e);e.open()}.bind(this))}else{t.open()}}}}.bind(this))},_initEnter:function(){var e=function(e){try{(new n).executeOn(e)}catch(e){}}.bind(this);document.addEventListener("keyup",function(t){switch(t.key){case"g":case"h":var i=sap.ui.getCore().byId(document.activeElement.getAttribute("id"));if(i&&i.getMetadata().getName()!=="flush.game.controls.Game"){e(i)}break}})},reset:function(){var e=this.getModel("appView");e.setProperty("/score",0);e.setProperty("/progress",1);e.setProperty("/multiProgress",1);e.setProperty("/mood",100);e.setProperty("/godMode",false);this.getSoundManager().play("Loose");var t=this.byId("app").getCurrentPage(),i=t.getId().split("---").pop();if(i==="intro"){t.getController()._endIntro()}if(this.getModel("appView").getProperty("/mode")==="2player"||i==="multi"||i==="game"&&t.getModel("view").getProperty("/multi")){this.getRouter().navTo("multi");if(i==="multi"){this.getRouter().getRoute("multi").fireEvent("patternMatched")}}else{this.getRouter().navTo("home");if(i==="home"){this.getRouter().getRoute("home").fireEvent("patternMatched")}}},activateGodMode:function(){var e=new i({message:"God mode activated",image:"GodMode.png",duration:5e3,position:"center bottom"});this.ready().then(function(){e.show().then(function(){e.destroy()});this.getBadWeather().stop();this.getSoundManager().stop("thunderLightning");this.getSoundManager().play("Win");var t=this.byId("app").getCurrentPage();if(t.getId().split("---").pop()==="home"){t.getController()._unlockLevels()}}.bind(this));this.getModel("appView").setProperty("/godMode",true);this.getModel("appView").setProperty("/score",9999);this.getModel("appView").setProperty("/mood",3)}})});
},
	"flush/controller/BadWeather.js":function(){sap.ui.define(["sap/ui/base/Object"],function(t){"use strict";return t.extend("flush.game.controller.BadWeather",{init:function(t){this._oComponent=t;this._sMode=this._oComponent.getModel("game").getProperty("/mode")},stop:function(){if(this._sMode==="xmas"){this.stopSnow()}else{this.stopRain()}this.stopLightning()},stopRain:function(){if(this._sMode==="xmas"){return this.stopSnow()}else{this._bStopRain=true;var t=document.getElementById("rain");while(t.firstChild){t.removeChild(t.firstChild)}}},stopSnow:function(){document.getElementById("snow").classList.add("display-none");this._bstopSnow=true},stopLightning:function(){document.getElementById("lightning").classList.add("display-none")},lightning:function(){document.getElementById("lightning").classList.remove("display-none")},rain:function(t){if(this._sMode==="xmas"){return this.snow(t)}this.stopRain();this._bStopRain=false;var e,n=window.innerWidth;switch(t){case"heavy":e=100;break;case"moderate":e=60;break;case"soft":default:e=30;break}function s(t,e){return Math.floor(Math.random()*(e-t+1))+t}for(i=1;i<e;i++){(function(t){setTimeout(function(){if(this._bStopRain){return}var e=s(-100,n);var i=s(-1e3,500);var o=document.getElementById("rain");var a=document.createElement("div");a.classList.add("drop");a.setAttribute("id","drop"+t);a.style.left=e+"px";a.style.top=i+"px";o.appendChild(a)}.bind(this),t*50)}).bind(this)(i)}},snow:function(t){this._bstopSnow=false;document.getElementById("snow").classList.remove("display-none");var e=document.getElementById("snow"),i=e.getContext("2d"),n=window.innerWidth,s=window.innerHeight,o=200,a=[];switch(t){case"heavy":o=150;break;case"moderate":o=100;break;case"soft":default:o=50;break}function h(t,e){var i=5,n=3;this.x=t;this.y=e;this.r=u(0,1);this.a=u(0,Math.PI);this.aStep=.01;this.weight=u(2,i);this.alpha=this.weight/i;this.speed=this.weight/i*n;this.update=function(){this.x+=Math.cos(this.a)*this.r;this.a+=this.aStep;this.y+=this.speed}}function r(){var t=o,e,i,r;while(t--){i=u(0,n,true);r=u(0,s,true);e=new h(i,r);a.push(e)}d();l()}function d(){e.width=n;e.height=s}var l=function(){var t=a.length,e;if(this._bstopSnow){return}i.save();i.setTransform(1,0,0,1,0,0);i.clearRect(0,0,n,s);i.restore();while(t--){e=a[t];e.update();i.beginPath();i.arc(e.x,e.y,e.weight,0,2*Math.PI,false);i.fillStyle="rgba(255, 255, 255, "+e.alpha+")";i.fill();if(e.y>=s){e.y=-e.weight}}requestAnimationFrame(l.bind(this))}.bind(this);function u(t,e,i){var n=Math.random()*(e-t+1)+t;if(i){return Math.floor(n)}else{return n}}r()}})});
},
	"flush/controller/BaseController.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/UIComponent","sap/m/library","sap/ui/core/Fragment"],function(e,t,n,i){"use strict";return e.extend("flush.game.controller.BaseController",{onInit:function(){this._firstRenderingFinished=new Promise(function(e){this._firstRenderingResolve=e}.bind(this))},onAfterRendering:function(){this._firstRenderingResolve()},rendered:function(){return this._firstRenderingFinished},ready:function(){return Promise.all([this.getOwnerComponent().filesLoaded(),this.rendered()])},getRouter:function(){return t.getRouterFor(this)},getSoundManager:function(){return this.getOwnerComponent()._soundManager},getBadWeather:function(){return this.getOwnerComponent()._badWeather},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},onContactPress:function(){n.URLHelper.triggerEmail(this.getOwnerComponent().getModel("app").getProperty("/contact"))},onRepoPress:function(){n.URLHelper.redirect(this.getOwnerComponent().getModel("app").getProperty("/repo"),true)},onHelpPress:function(){n.URLHelper.redirect(this.getOwnerComponent().getModel("app").getProperty("/help"),true)},onArcadeInput:function(e){var t="uuddlrlrba";if(this._konami===undefined){this._konami=t}var n=e.getSource().getId().split("--").pop();if(n===this._konami[0]){this._konami=this._konami.substr(1);if(this._konami.length===0){this.getOwnerComponent().getRootControl().getController().activateGodMode();this._konami=t}}else{this._konami=t}},onSwitchMode:function(e){var t,n;if(typeof e==="string"){n=e}else{t=e.getParameter("item");n=t.getKey()}if(n==="2player"){this.getRouter().navTo("multi")}else{this.getRouter().navTo("home")}this.getSoundManager().play("coin")},_playStory:function(e){var t;if(typeof e==="string"){t=this.byId(e)}else{t=this.byId("page").getDependents()[0]}if(t){return t.play()}else{return{then:function(){}}}},_stopStory:function(e){if(typeof e==="string"){var t=this.byId(e);if(t){t.stop()}}else{if(this.byId("page")){this.byId("page").getDependents().forEach(function(e){if(e instanceof flush.game.controls.MessageToastStory){e.stop()}})}}},onCredits:function(){var e={formatter:this.formatter,onCloseDialog:function(){this.byId("Credits").close()}.bind(this)};if(!this.byId("Credits")){i.load({id:this.getView().getId(),name:"flush.game.view.Credits",controller:e}).then(function(e){e.setInitialFocus(e.getBeginButton());this.getView().addDependent(e);e.open()}.bind(this))}else{this.byId("Credits").open()}}})});
},
	"flush/controller/Game.controller.js":function(){sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/base/util/UriParameters"],function(e,t,r,i){"use strict";return e.extend("flush.game.controller.Game",{formatter:r,onInit:function(){e.prototype.onInit.apply(this,arguments);var r=new t({level:"",multi:false,instructions:"",difficulty:1,title:this.getResourceBundle().getText("gameTitleLoading"),busy:true,player1Energy:0,player2Energy:0,player1Lives:0,player2Lives:0,player1LivesArray:[],player2LivesArray:[]});this.setModel(r,"view");this.getRouter().getRoute("game").attachPatternMatched(this._setLevelSettings,this)},_setLevelSettings:function(e){var t=e.getParameter("arguments");var r=this.getModel("view");r.setProperty("/busy",true);r.setProperty("/level",t.level,null,true);r.setProperty("/difficulty",parseInt(t.difficulty),null,true);r.setProperty("/multi",/multi/i.test(t.level),null,true);r.setProperty("/instructions",this.getResourceBundle().getText("gameInstructions"+t.level),null,true);if(t.level==="WhackABug"){r.setProperty("/timeLimit",45,null,true)}else if(t.level==="Uncontrollable"){r.setProperty("/timeLimit",60,null,true)}else if(t.level==="UncontrollableMultiplayer"){r.setProperty("/timeLimit",60,null,true)}else if(t.level==="PlopARobot"){r.setProperty("/timeLimit",30,null,true)}var l=new i(window.location.href);if(l.get("game-debug")){r.setProperty("/timeLimit",999999,null,true);r.setProperty("/debug",true,null,true)}r.setProperty("/title",this.getResourceBundle().getText("gameTitleLevel",[t.level,t.difficulty]),null,true);this.byId("page").invalidate();this._playStory(t.level);this.getSoundManager().stop("Level");this.getSoundManager().play("Level");r.refresh(true)},_updateLifeBar:function(e){var t=this.getModel("view").getProperty("/player"+e+"Lives");var r=[];for(var i=0;i<t;i++){r.push(1)}this.getModel("view").setProperty("/player"+e+"LivesArray",r)},onLevelInit:function(){this.getModel("view").setProperty("/busy",false);this._updateLifeBar(1);this._updateLifeBar(2);this.getSoundManager().play("roboStart")},onLevelEnd:function(e){clearInterval(this._iInterval);this.getModel("appView").setProperty("/fromGame",true);this.getModel("view").setProperty("/instructions","");if(this.getModel("view").getProperty("/multi")){this.getRouter().getTargets().display("multi",{who:e.getParameter("who"),level:this.getModel("view").getProperty("/level"),difficulty:this.getModel("view").getProperty("/difficulty")});this.getRouter().navTo("multi",undefined,true)}else{this.getRouter().navTo("home")}},onLevelHit:function(e){var t=e.getParameter("who");this._updateLifeBar(t)},onLevelBomb:function(e){var t=e.getParameter("who")},onBack:function(){clearInterval(this._iInterval);this._stopStory();this.getModel("appView").setProperty("/fromGame",true);this.getModel("view").setProperty("/instructions","");this.byId("page").end().then(function(){if(this.getModel("view").getProperty("/multi")){this.getRouter().navTo("multi")}else{this.getRouter().navTo("home")}}.bind(this))}})});
},
	"flush/controller/Home.controller.js":function(){sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter"],function(t,e,i){"use strict";return t.extend("flush.game.controller.Home",{formatter:i,onInit:function(){t.prototype.onInit.apply(this,arguments);var i=new e({instructions:""});this.setModel(i,"view");this.getRouter().getRoute("home").attachPatternMatched(this._onNavigation,this);this.getRouter().attachRouteMatched(function(t){var e=t.getParameter("name");if(e!=="home"){clearTimeout(this._iIdleTimer);clearInterval(this._iFocusInterval)}}.bind(this))},_onNavigation:function(){this._controlWeather(arguments[0]);this._updateGame(arguments[0]);this._unlockLevels(arguments[0]);this._manageIdle(arguments[0]);this._ensureFocus(arguments[0])},_controlWeather:function(){this.ready().then(function(){if(!this.getSoundManager().isPlaying("thunderLightning")){this.getSoundManager().play("thunderLightning")}this.getBadWeather().rain("moderate");this.getBadWeather().lightning()}.bind(this))},_updateGame:function(t){this.getModel("appView").setProperty("/mode","1player");this.ready().then(function(){var t=Math.min(this.getModel("appView").getProperty("/score"),1e4),e=this.getModel("appView").getProperty("/mood");var i=function(){this._playStory("randomQuotes")}.bind(this);if(t===1e4&&!this._bOutroPlayed){this._stopStory();this.getBadWeather().stop();this.getSoundManager().stop("thunderLightning");this._bOutroPlayed=true;this.getRouter().navTo("outro");return}var o=100-Math.max(0,t)/100;this.getModel("appView").setProperty("/mood",o);var n=this.getModel("appView").getProperty("/fromGame");this.getModel("appView").setProperty("/fromGame",false);if(n){if(e-o>0){this.getModel("appView").setProperty("/progress",this.getModel("appView").getProperty("/progress")+1);this._playStory("lucky").then(i);this.getSoundManager().play("Win").then(function(){this.getSoundManager().play("roboWin")}.bind(this))}else if(e-o===0){this._playStory("n00b").then(i);this.getSoundManager().play("Loose").then(function(){this.getSoundManager().play("roboLoose")}.bind(this))}else{this._playStory("fool").then(i);this.getSoundManager().play("Loose").then(function(){this.getSoundManager().play("roboLoose")}.bind(this))}clearTimeout(this._iLockTimer);this._bLockedAfterLevel=true;this._iLockTimer=setTimeout(function(){this._bLockedAfterLevel=false}.bind(this),3e3)}else{this._playStory("intro").then(i)}}.bind(this))},_unlockLevels:function(){this.ready().then(function(){var t=this.getModel("appView"),e=t.getProperty("/progress");if(t.getProperty("/godMode")){e=99999999}var i=this.byId("levels").getTiles();for(var o=0;o<i.length;o++){(function(t){setTimeout(function(){var o=t>=e;i[t].setLocked(o);if(!o){i[t].focus()}}.bind(this),500+t*200)})(o)}}.bind(this))},_manageIdle:function(){clearTimeout(this._iIdleTimer);this._iIdleTimer=setTimeout(function(){this.onIntro()}.bind(this),this.getModel("appView").getProperty("/idleTimeReloopIntro"))},_ensureFocus:function(){clearInterval(this._iFocusInterval);var t=function(){var t=sap.ui.getCore().byId(document.activeElement.getAttribute("id"));if(!t||t.getMetadata().getName().split(".").pop()!=="GameTile"){this.byId("levels").getTiles()[0].focus()}}.bind(this);t();this._iFocusInterval=setInterval(t,2500)},onIntro:function(){this._stopStory();this.getRouter().navTo("intro")},onLevel:function(t){if(this._bLockedAfterLevel){return}this.getSoundManager().play("start");this.getBadWeather().stop();var e=t.getSource();var i=e.getCustomData()[0].getValue(),o=parseInt(e.getCustomData()[1].getValue());this._stopStory();this.getRouter().navTo("game",{level:i,difficulty:o})}})});
},
	"flush/controller/Intro.controller.js":function(){sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/m/MessageBox","../model/formatter"],function(t,e,i,n){"use strict";return t.extend("flush.game.controller.Intro",{formatter:n,onInit:function(){t.prototype.onInit.apply(this,arguments);this._bIntroPlaying=false;var i=new e({score:0,progress:1,godMode:false,intro:[{file:"images/Intro0LogoBg.png"},{file:"images/Intro1Scherbenhaufen.png"},{file:"images/Intro2Blitzschlag.png"},{file:"images/Intro3VerkohlterRM.png"},{file:"images/Intro4RMVerrueckt.png"},{file:"images/Intro5DerHeldmussran.png"}]});this.setModel(i,"view");this.getRouter().getRoute("intro").attachPatternMatched(this._playIntro,this);this.ready().then(function(){try{this.getBadWeather().rain()}catch(t){}}.bind(this))},onCarouselChange:function(t){var e=t.getParameter("newActivePageId");var i=t.getParameter("oldActivePageId");if(this._bCarouselStoryTriggeredChange){this._bCarouselStoryTriggeredChange=false;return}this._bIntroPlaying=false;if(e!==i){var n=parseInt(e.split("-").pop());var r=this._playChapter(n);if(n===5){r.then(function(){this._endIntro()}.bind(this))}}},_flushErrorDialog:function(){i.error("DirtyFlushException",{id:"DirtyFlushException",title:"DirtyFlushException: An error occurred while flushing UI5 controls",details:"@Core.js:1337",actions:[i.Action.CLOSE]});setTimeout(function(){var t=sap.ui.getCore().byId("DirtyFlushException");if(t){t.destroy()}},3e3)},_animateMood:function(){setTimeout(function(){if(!this._bAnimateMood){return}var t=Math.floor(Math.abs(Math.random())*100);this.getModel("appView").setProperty("/mood",t);this._animateMood()}.bind(this),500)},_showIntroBackground(t){var e=this.byId("introBg");e.setActivePage(e.getPages()[t])},_playChapter:function(t){if(!this.byId("page")){return{then:function(){}}}this._stopStory();this._showIntroBackground(t);switch(t){case 0:this.getSoundManager().play("thunderLightning");this.getSoundManager().play("coin",5e3);break;case 1:this.getBadWeather().rain("heavy");this.getBadWeather().lightning();break;case 2:this.getSoundManager().play("thunderHit",0,5e3);this.getModel("appView").setProperty("/mood",50);break;case 3:this.getModel("appView").setProperty("/mood",80);this.getSoundManager().play("growl");setTimeout(function(){this._bAnimateMood=true;this._animateMood()}.bind(this),1500);setTimeout(function(){this._flushErrorDialog()}.bind(this),3e3);break;case 4:this.getSoundManager().play("thunderLightning");this.getSoundManager().play("devil");this.getBadWeather().rain("moderate");break;case 5:this._bAnimateMood=false;this.getModel("appView").setProperty("/mood",100);break}return this._playStory("intro"+t)},_playIntro:function(){var t=window.AudioContext||window.webkitAudioContext||false;if(t&&(new t).state==="suspended"){this.getModel("view").setProperty("/instructions","Please click anywhere to enable the intro sound");document.addEventListener("click",function(){this.getSoundManager().play("thunderLightning");this.getModel("view").setProperty("/instructions","Thanks, enjoy the game!")}.bind(this))}this._bAnimateMood=false;this._bCarouselStoryTriggeredChange=true;this._bIntroPlaying=true;this.byId("introBg").invalidate();this.getModel("appView").setProperty("/mood",1);this.ready().then(function(){this._bCarouselStoryTriggeredChange=true;this._playChapter(0).then(function(){if(!this._bIntroPlaying){return}this._bCarouselStoryTriggeredChange=true;this._playChapter(1).then(function(){if(!this._bIntroPlaying){return}this._bCarouselStoryTriggeredChange=true;this._playChapter(2).then(function(){if(!this._bIntroPlaying){return}this._bCarouselStoryTriggeredChange=true;this._playChapter(3).then(function(){if(!this._bIntroPlaying){return}this._bCarouselStoryTriggeredChange=true;this._playChapter(4).then(function(){if(!this._bIntroPlaying){return}this._bCarouselStoryTriggeredChange=true;this._playChapter(5).then(function(){if(!this._bIntroPlaying){return}this._endIntro()}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this))},_endIntro:function(){this._bAnimateMood=false;this._bIntroPlaying=false;this.getModel("appView").setProperty("/mood",100);this.getSoundManager().stopAllSounds();this.getRouter().navTo("home")},onSkip:function(){this._stopStory();this._endIntro()}})});
},
	"flush/controller/Multi.controller.js":function(){sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter"],function(t,e,i){"use strict";return t.extend("flush.game.controller.Multi",{formatter:i,onInit:function(){t.prototype.onInit.apply(this,arguments);var i=new e({player1wins:0,player2wins:0,instructions:""});this.setModel(i,"view");this.getRouter().getRoute("multi").attachPatternMatched(this._onNavigation,this);this.getRouter().getTarget("multi").attachDisplay(this._onNavigation,this);this.getRouter().attachRouteMatched(function(t){var e=t.getParameter("name");if(e!=="multi"){clearTimeout(this._iIdleTimer);clearInterval(this._iFocusInterval)}}.bind(this))},_onNavigation:function(){this._controlWeather(arguments[0]);this._updateGame(arguments[0]);this._unlockLevels(arguments[0]);this._manageIdle(arguments[0]);this._ensureFocus(arguments[0])},_controlWeather:function(){this.ready().then(function(){if(!this.getSoundManager().isPlaying("thunderLightning")){this.getSoundManager().play("thunderLightning")}this.getBadWeather().rain("moderate");this.getBadWeather().lightning()}.bind(this))},_updateGame:function(t){var e;var i;var a;if(t&&t.getParameter("data")){e=t.getParameter("data").who;i=t.getParameter("data").level;a=parseInt(t.getParameter("data").difficulty)}this.getModel("appView").setProperty("/mode","2player");this.ready().then(function(){var t=function(){this._playStory("randomQuotes")}.bind(this);if(!e&&this.getModel("appView").getProperty("/multiProgress")===1){this._reset()}if(e){this._markLastLevelAsWon(e,i,a);this.getModel("appView").setProperty("/multiProgress",this.getModel("appView").getProperty("/multiProgress")+1);this._playStory("player"+e+"win").then(t);this.getModel("view").setProperty("/player"+e+"wins",this.getModel("view").getProperty("/player"+e+"wins")+1);this._bMatchWon=true;this.getSoundManager().play("Win").then(function(){this.getSoundManager().play("roboWin");this._bMatchWon=false}.bind(this));clearTimeout(this._iLockTimer);this._bLockedAfterLevel=true;this._iLockTimer=setTimeout(function(){this._bLockedAfterLevel=false}.bind(this),3e3)}else{this.getModel("appView").setProperty("/fromGame",false);if(!this._bMatchWon){this._playStory("intro").then(t)}}}.bind(this))},_unlockLevels:function(){this.ready().then(function(){var t=this.getModel("appView"),e=t.getProperty("/multiProgress");if(t.getProperty("/godMode")){e=99999999}var i=this.byId("levels").getTiles();for(var a=0;a<i.length;a++){(function(t){setTimeout(function(){var a=t>=e;i[t].setLocked(a);if(!a){i[t].focus()}}.bind(this),500+t*200)})(a)}}.bind(this))},_markLastLevelAsWon:function(t,e,i){var a=this.getModel("appView");var r=this.byId("levels").getTiles();r.some(function(a){if(e===a.getCustomData()[0].getValue()&&i===parseInt(a.getCustomData()[1].getValue())){a.removeStyleClass("player"+(t===1?2:1)+"win");a.addStyleClass("player"+t+"win");return true}})},_reset:function(){this.getModel("view").setProperty("/player1wins",0);this.getModel("view").setProperty("/player2wins",0);var t=this.byId("levels").getTiles();for(var e=0;e<t.length;e++){t[e].removeStyleClass("player1win");t[e].removeStyleClass("player2win")}},_manageIdle:function(){clearTimeout(this._iIdleTimer);this._iIdleTimer=setTimeout(function(){this.onIntro()}.bind(this),this.getModel("appView").getProperty("/idleTimeReloopIntro"))},_ensureFocus:function(){clearInterval(this._iFocusInterval);var t=function(){var t=sap.ui.getCore().byId(document.activeElement.getAttribute("id"));if(!t||t.getMetadata().getName().split(".").pop()!=="GameTile"){this.byId("levels").getTiles()[0].focus()}}.bind(this);t();this._iFocusInterval=setInterval(t,2500)},onIntro:function(){this._stopStory();this.getRouter().navTo("intro")},onLevel:function(t){if(this._bLockedAfterLevel){return}this.getSoundManager().play("start");this.getBadWeather().stop();var e=t.getSource();var i=e.getCustomData()[0].getValue(),a=parseInt(e.getCustomData()[1].getValue());this._stopStory();this.getRouter().navTo("game",{level:i,difficulty:a})}})});
},
	"flush/controller/Outro.controller.js":function(){sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/m/MessageBox","../model/formatter"],function(t,o,e,i){"use strict";return t.extend("flush.game.controller.Outro",{formatter:i,onInit:function(){t.prototype.onInit.apply(this,arguments);var e=new o({score:0,progress:1,godMode:false,outro:"images/Outro.png"});this.setModel(e,"view");this.getRouter().getRoute("outro").attachPatternMatched(this._playOutro,this)},_winErrorDialog:function(){e.error("WinException",{id:"WinException",title:'Error: "Win" is not defined',details:"@Core.js:1337",actions:[e.Action.CLOSE]});setTimeout(function(){var t=sap.ui.getCore().byId("WinException");if(t){sap.ui.getCore().byId("WinException").destroy()}this.getRouter().navTo("home")}.bind(this),1e4)},_playOutro:function(){this.getBadWeather().stop();this.getSoundManager().play("Cheer");this._playStory("outro").then(function(){this._winErrorDialog();this.getSoundManager().play("gameOver")}.bind(this))},onBack:function(){this._stopStory();this.getRouter().navTo("home")}})});
},
	"flush/controller/SoundManager.js":function(){sap.ui.define(["sap/ui/base/Object","sap/base/util/UriParameters","sap/base/Log"],function(o,n,e){"use strict";return o.extend("flush.game.controller.SoundManager",{init:function(){createjs.Sound.on("fileload",this._loadHandler,this);this._aPlayingSounds=[];this._oSounds={thunderHit:"RenderManagerVomBlitzGetroffenDonner.mp3",thunderLightning:"ThunderLightning.mp3",coin:"243020__plasterbrain__game-start.mp3",growl:"RenderManagerGrowl.mp3",wind:"Windpfeifen.mp3",hammer:"hammer.mp3",badHit:"badHit.mp3",goodHit:"goodHit.mp3",Raketenduese:"Raketenduese.mp3",Adlerschrei:"344445__reidedo__ram-mouth-hawk-rev-v1.mp3",Cheer:"Audience_mixdown.mp3",Win:"beep_win.mp3",Loose:"beep_loose.mp3",Level:"Musik_Tristan.mp3",big_bomb:"sounds_multiplayer/Bomb.mp3",devil:"RenderManagerLachtTeuflisch.mp3",start:"start_any_gamelevel.mp3",roboStart:"robovoice_start.mp3",roboLoose:"robovoice_loose.mp3",roboWin:"robovoice_win.mp3",gameOver:"game_over2.mp3",laser:"sounds_multiplayer/Lasershot.mp3",shoot:"344310__musiclegends__laser-shoot.mp3",Controlshot:"sounds_multiplayer/Controlshot.mp3",laserHitsControl:"sounds_multiplayer/laser_hits_control.mp3",laserHitsRobot:"sounds_multiplayer/laser_hits_robot.mp3",shootingCharge1:"sounds_multiplayer/LoadControlGun.mp3",shootingCharge2:"sounds_multiplayer/LoadControlGun.mp3"};this._loadSounds()},_loadSounds:function(){this._oSoundResolve={};this._oSoundPromises={};Object.keys(this._oSounds).forEach(function(o){this._oSoundPromises[o]=new Promise(function(n){this._oSoundResolve[o]=n;var e=sap.ui.require.toUrl("flush/game/sounds")+"/"+this._oSounds[o];createjs.Sound.registerSound(e,o)}.bind(this))}.bind(this))},_loadHandler:function(o){this._oSoundResolve[o.id]();e.info("Loaded sound: "+o.src)},_removePlayingSound:function(o){for(var n=0;n<this._aPlayingSounds.length;n++){if(this._aPlayingSounds[n]===o.target){this._aPlayingSounds.splice(n,1);return}}},isPlaying:function(o){for(var n=0;n<this._aPlayingSounds.length;n++){if(this._aPlayingSounds[n].id===o){return true}}return false},stop:function(o){this._oSoundPromises[o].then(function(){for(var n=0;n<this._aPlayingSounds.length;n++){if(this._aPlayingSounds[n].id===o){this._aPlayingSounds[n].stop();this._aPlayingSounds.splice(n,1)}}}.bind(this))},stopAllSounds:function(){createjs.Sound.stop()},play:function(o,e,i,s){var t=new n(window.location.href);if(t.get("sound")==="false"){return new Promise(function(o){setTimeout(o,500)})}var r=function(o,n){var e=createjs.Sound.play(o);e.id=o;e.on("complete",n);e.on("complete",this._removePlayingSound,this);this._aPlayingSounds.push(e);if(s){e.volume=s}}.bind(this);return new Promise(function(n){this._oSoundPromises[o].then(function(){if(e){setTimeout(function(){r(o,n)},e)}else{r(o,n)}if(i){setTimeout(function(){this.stop(o);n()}.bind(this),i)}}.bind(this))}.bind(this))}})});
},
	"flush/controls/ControlManager.js":function(){sap.ui.define(["sap/base/Log","sap/ui/core/Control"],function(e,t){"use strict";return t.extend("flush.game.controls.ControlManager",{metadata:{defaultAggregation:"content",aggregations:{content:{type:"sap.ui.core.Control",multiple:true}}},updateAllControlImages:function(e){var t=[];this.getContent().forEach(function(o){t.push(this.updateControlImage(o),e)}.bind(this));return Promise.all(t)},updateControlImage:function(t,o){if(!t||!t.getDomRef()){e.info("There are controls with no DOMRef!");return Promise.resolve()}else{if(t.setBlocked){t.setBlocked(false)}if(!t._image||o){return domtoimage.toPngCacheId(t.getDomRef()).then(function(e){t._dataUrl=e;var o=new Image;o.src=e;t._image=o;if(t.setBlocked){t.setBlocked(true)}}).then(function(){return domtoimage.toPngCacheId(t.getDomRef(),undefined,"Blocked").then(function(e){t._dataUrlBlocked=e;var o=new Image;o.src=e;t._imageBlocked=o})}).catch(function(t){e.error("oops, something went wrong!",t)})}else{return Promise.resolve()}}},renderer:function(e,t){e.write("<div");e.writeControlData(t);e.writeClasses();e.write(">");var o=t.getContent();var n=o.length;for(var r=0;r<n;r++){e.renderControl(o[r])}e.write("</div>")}})});
},
	"flush/controls/Game.js":function(){sap.ui.define(["sap/m/Page","sap/ui/Device","sap/ui/core/HTML","sap/m/Image","../controls/MessageToastDeluxe"],function(e,t,i,n,r){"use strict";var a=e.extend("flush.game.controls.Game",{metadata:{properties:{level:{type:"string",defaultValue:"Demo"},difficulty:{type:"int",defaultValue:1},score:{type:"int",defaultValue:0},timeLimit:{type:"int",defaultValue:0},player1Lives:{type:"int",defaultValue:0},player2Lives:{type:"int",defaultValue:0},player1Energy:{type:"float",defaultValue:0},player2Energy:{type:"float",defaultValue:0}},events:{init:{},end:{who:{type:"int"}},hit:{who:{type:"int"}},bomb:{who:{type:"int"}}}},init:function(){var e=new i(this.getId()+"-canvas",{content:'<canvas class="game sapMFocusable" width="'+(t.system.desktop?"1270px":t.resize.width)+'" height="'+(t.system.desktop?"720px":t.resize.height-120+"px")+'" tabindex="0"></canvas>'});this.addContent(e);var n=new i("debugCanvas",{content:'<canvas width="'+(t.system.desktop?"1270px":"100vw")+'" height="'+(t.system.desktop?"720px":t.resize.height-120+"px")+'" style="display:none"></canvas>'});this.addContent(n)},setLevel:function(e){this._updateCanvasSize();if(e){this.setProperty("level",e);this._loadLevel()}return this},getFocusDomRef:function(){return this.getContent()[0].$()[0]},_updateCanvasSize:function(){var e=document.getElementsByClassName("game")[0];if(e){e.setAttribute("width",t.system.desktop?"1270px":document.body.offsetWidth);e.setAttribute("height",t.system.desktop?"720px":document.body.offsetHeight-120+"px")}},_getRandomPosition:function(){var e=["begin","end"];var t=["top","center","bottom"];var i=Math.floor(Math.abs(Math.random())*e.length);var n=Math.floor(Math.abs(Math.random())*t.length);return e[i]+" "+t[n]},_timedGameLoop:function(){var e=parseInt(this.getModel("view").getProperty("/remainingTime")),t;if(!this._bLevelRunning){return}if(e===16){t=new r({number:"Hurry",image:"effect_points_negative.png",duration:1,position:"center center"});this.getParent().byId("remainingTime").setState("Warning")}else if(e===6){t=new r({number:"Panic",image:"effect_points_negative.png",duration:1,position:"center center"});this.getParent().byId("remainingTime").setState("Error")}else if(e===1){t=new r({number:"Over!",image:"effect_points_critical.png",duration:1,position:"center center"})}if(t){this.addDependent(t);t.show().then(function(){t.destroy()})}if(e<=0){this.getModel("view").setProperty("/remainingTime",0);this.end();if(this.getProperty("level").match(/multi/i)){var i=Math.max(0,this.getProperty("player1Lives"));var n=Math.max(0,this.getProperty("player2Lives"));if(i!==n){var a=i>n?1:2;this.fireEnd({who:a})}else{this.fireEnd()}}else{this.fireEnd()}return}this.getModel("view").setProperty("/remainingTime",this.getModel("view").getProperty("/remainingTime")-1);this._iLevelTimer=setTimeout(function(){this._timedGameLoop()}.bind(this),1e3)},_initMultiPlayer:function(){this.setProperty("player1Energy",0,true);this.setProperty("player2Energy",0,true);this._iMultiEnergyLoop=setInterval(function(){this.setProperty("player1Energy",Math.min(100,this.getPlayer1Energy()+.5),true);this.setProperty("player2Energy",Math.min(100,this.getPlayer2Energy()+.5),true)}.bind(this),80);this.setProperty("player1Lives",5,true);this.setProperty("player2Lives",5,true)},getPlayerEnergySegment:function(e){var t,i={1:16.5,2:33,3:49.5,4:66,5:82.5,6:99.9,7:101},n;if(e!==undefined){if(e===1){t=this.getPlayer1Energy()}else if(e===2){t=this.getPlayer2Energy()}}var r;var a=false;Object.keys(i).forEach(function(e){r=i[e];if(t<r&&!a){n=e;a=true}});return n},initTimeLimit:function(){this.getModel("view").setProperty("/remainingTime",this.getProperty("timeLimit"));this.getParent().byId("remainingTime").setState("None");this._bLevelRunning=true;this._timedGameLoop()},getSoundManager:function(){if(!this._oSoundManager){this._oSoundManager=this.getParent().getController().getSoundManager()}return this._oSoundManager},triggerEvent:function(e,t,i){switch(e){case"start":a=new r({number:"Fight!",image:"effect_points_critical.png",duration:1,position:"center center"});break;case"Awesome":var n=Math.random()>.3333?"effect_awesome.png":"effect_pow.png";if(Math.random()<=.3333){n="effect_plop.png"}var a=new r({message:"",image:n,duration:1,position:this._getRandomPosition()});this.getSoundManager().play("goodHit",undefined,undefined,.5);break;case"Ohno":var a=new r({message:"",image:"effect_ohno.png",duration:1e3,position:i?i[0]+" "+i[1]:"end center"});this.getSoundManager().play("badHit",undefined,undefined,.5);break;case"Haha":var a=new r({message:"",image:"effect_ha_ha_ha_neu.png",duration:1e3,position:i?i[0]+" "+i[1]:"end center"});if(!this.getSoundManager().isPlaying("devil")){this.getSoundManager().play("devil")}this.getSoundManager().play("badHit");break;case"Points":var a=new r({message:"",number:t,image:"effect_points.png",duration:1,jitter:100,position:i?i[0]+" "+i[1]:"begin center"});break;case"PointsNegative":var a=new r({message:"",number:t,image:"effect_points_negative.png",duration:3,jitter:100,position:i?i[0]+" "+i[1]:"end center"});break;case"PointsCritical":var a=new r({message:"",number:t,image:"effect_points_critical.png",duration:3,jitter:100,position:i?i[0]+" "+i[1]:"center center"});break;case"LowEnergy":var a=new r({message:"",number:t,image:"effect_lowenergy.png",duration:3,jitter:100,position:i?i[0]+" "+i[1]:"center center"});break;case"Bomb":var a=new r({message:"",number:t,image:Math.random()<=.5?"effect_pow.png":"Boom.png",duration:3,jitter:100,position:i?i[0]+" "+i[1]:"center center"});break;case"Laser":var a=new r({message:"",number:t,image:"Zing.png",duration:3,jitter:100,position:i?i[0]+" "+i[1]:"begin center"});break;case"PickPhoenix":var s="CheckBox";switch(t){case 2:s="Switch";break;case 3:s="Button";break;case 4:s="Select";break;case 5:s="Progress";break;case 6:s="Slider";break;case 7:s="Tile";break}var a=new r({number:s,image:"effect_points_critical.png",duration:3,jitter:100,position:i?i[0]+" "+i[1]:"center center"});break}this.addDependent(a);a.show().then(function(){a.destroy()})},score:function(e,t){this.setProperty("score",this.getProperty("score")+e,true);if(e>=0){this.triggerEvent("Points",e,t)}else{this.triggerEvent("PointsNegative",e,t)}},hit:function(e){var t=Math.max(0,this.getProperty("player"+e+"Lives")-1);this.setProperty("player"+e+"Lives",t,true);this.triggerEvent("Haha",undefined,[e===1?"begin":"end","center"]);this.fireHit({who:e});if(t===0){this.end();this.fireEnd({who:e===1?2:1})}},hasBombEnergy:function(e){var t=this.getProperty("player"+e+"Energy");return t===100},bomb:function(e){var t=this.getProperty("player"+e+"Energy");if(t<100){this.triggerEvent("LowEnergy",undefined,[e===1?"begin":"end","center"])}else{this.setProperty("player"+e+"Energy",0,true);this.triggerEvent("Bomb",undefined,[e===1?"begin":"end","center"]);this.fireBomb({who:e})}},onBeforeRendering:function(){this.addStyleClass(this.getLevel())},onAfterRendering:function(){setTimeout(function(){this.focus()}.bind(this),0)},setTimeLimit:function(e){this.setProperty("timeLimit",e,true)},_loadLevel:function(){var e=this.getLevel(),t=this.getDifficulty();var i=function(){sap.ui.require(["flush/game/levels/"+e+"/Level"],function(e){var i=this.getParent();var n=i.byId(this.getId()+"-canvas");var r=sap.ui.getCore().byId("debugCanvas");var a=[n,r];this._oLevel=new e(this,a,i.byId("controlManager"));this._oLevel.setDifficulty(t);this._oLevel.init().then(function(){setTimeout(function(){this.triggerEvent("start")}.bind(this),1e3);if(this.getProperty("level").match(/multi/i)){this._initMultiPlayer()}this.fireInit();if(this.getTimeLimit()&&!this._bLevelRunning){this.initTimeLimit()}this._bLevelRunning=true}.bind(this))}.bind(this))}.bind(this);if(this._oLevel){this._bLevelRunning=false;clearTimeout(this._iLevelTimer);this._oLevel.exit().then(function(){this._oLevel.destroy();setTimeout(function(){i()},0)}.bind(this))}else{i()}},end:function(){this._bLevelRunning=false;clearTimeout(this._iLevelTimer);clearInterval(this._iMultiEnergyLoop);return this._oLevel.exit()},renderer:function(e,t){sap.m.PageRenderer.render(e,t)}});var s=a.prototype.invalidate;a.prototype.invalidate=function(e){if(e&&e.getMetadata().getName()==="flush.game.controls.ControlManager"){return}else{s.apply(this,arguments)}};return a});
},
	"flush/controls/GameTile.js":function(){sap.ui.define(["sap/m/CustomTile","sap/ui/core/Icon","sap/ui/Device","sap/m/CustomTileRenderer","sap/ui/thirdparty/jquery"],function(e,t,i,n){"use strict";return e.extend("flush.game.controls.GameTile",{metadata:{properties:{locked:{type:"boolean",defaultValue:true}},events:{press2:{}}},init:function(){this.addStyleClass("gameTile")},exit:function(){if(this._lockedIcon){this._lockedIcon.destroy();this._lockedIcon=null}},onBeforeRendering:function(){this.toggleStyleClass("locked",this.getLocked())},setLocked:function(e){this.setProperty("locked",e,true);this.$().find(".sapUiIcon").animate({opacity:e?1:0,top:e?"0":"-=50",height:e?"inherit":"toggle"},500,function(){this.$().find(".sapUiIcon").css("display",e?"block":"none");this.toggleStyleClass("locked",this.getLocked())}.bind(this))},ontap:function(e){if(!this.getLocked()){this.firePress()}},onsapenter:function(e){this.ontap(e)},onAfterRendering:function(){e.prototype.onAfterRendering.apply(this,arguments);this.$().append('<div class="locker"></div>');if(!this._lockedIcon){this._lockedIcon=new t({src:"sap-icon://locked",color:"#f2d249",size:i.system.phone?"5.5rem":"7rem",width:i.system.phone?"135px":"200px",height:i.system.phone?"135px":"190px"})}var n=sap.ui.getCore().createRenderManager(),o=this.$("cnt")[0];n.renderControl(this._lockedIcon);n.flush(this.$().find(".locker")[0]);n.destroy()},renderer:function(e,t){n.render(e,t)}})});
},
	"flush/controls/MessageToastDeluxe.js":function(){sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/core/Control","sap/m/MessageToast","sap/ui/Device"],function(e,t,s,i){"use strict";sap.m.MessageToast._validateDockPosition=function(){};var a=0;return t.extend("flush.game.controls.MessageToastDeluxe",{metadata:{properties:{image:{type:"string"},position:{type:"string",defaultValue:"left top"},duration:{type:"int",defaultValue:3e3},width:{type:"sap.ui.core.CSSSize",defaultValue:"15em"},message:{type:"string",defaultValue:""},number:{type:"string",defaultValue:""},jitter:{type:"int",defaultValue:0},quote:{type:"boolean",defaultValue:false},speaker:{type:"string",defaultValue:""}}},init:function(){this._EFFECT_DEFAULT_SIZE=200;this._MAX_GAME_HEIGHT=770;this._MESSAGETOAST_WIDTH=288;this._HEADER_HEIGHT=50;this._fallbackSizes={"flush_logo_large.png":[427,179],"flush_logo_xl.png":[909,332],"effect_awesome.png":[381,271],"effect_ha_ha_ha_neu.png":[344,259],"effect_ohno.png":[234,236],"effect_plop.png":[250,256],"effect_points.png":[200,167],"effect_points_critical.png":[200,167],"effect_points_negative.png":[200,167],"effect_pow.png":[300,138],"effect_lowenergy.png":[200,160],"Boom.png":[400,179],"Zing.png":[400,299],"GodMode.png":[839,391],"BlauZaehne.png":[162,191],"GrauKeineMeinung.png":[162,191],"GruenHoffnungsvoll.png":[162,191],"LilaDebatiert.png":[162,191],"OrangeBefuerchtet.png":[162,191],"RotRenderManagerDroht.png":[162,191]}},_getFallbackSize:function(e){if(this._fallbackSizes[e]){return this._fallbackSizes[e]}else{return[this._EFFECT_DEFAULT_SIZE,this._EFFECT_DEFAULT_SIZE]}},_sneakInImage:function(){var e=document.getElementsByClassName("sapMMessageToast"),t=e.item(e.length-1),s=this._getFallbackSize(this.getImage());var a=document.createElement("img");a.setAttribute("src",sap.ui.require.toUrl("flush/game/images")+"/"+this.getImage());a.classList.add("messageToastDeluxeImage");if(i.resize.width<s[0]){var n=s[0];s[0]=i.resize.width*.9;s[1]=s[1]*s[0]/n}else if(i.resize.height<s[1]){var n=s[1];s[1]=Math.min(i.resize.height*.9,this._MAX_GAME_HEIGHT);s[0]=s[1]*s[0]/n}a.width=s[0];a.height=s[1];if(this.getMessage()){a.style.left=(t.offsetWidth-(a.width||s[0]))/2+"px";a.style.bottom=t.offsetHeight+"px"}else{var g=(a.height||s[1])/-2-this._HEADER_HEIGHT;if(this.getPosition().split(" ").pop()==="bottom"){g/=2}a.style.left=(a.width||s[0])/-2+"px";a.style.bottom=g+"px"}t.appendChild(a)},_sneakInNumber:function(){var t=document.getElementsByClassName("sapMMessageToast"),s=t.item(t.length-1),i=this._getFallbackSize(this.getImage()),a=s.getElementsByTagName("img")[0];var n=document.createElement("span");n.classList.add("messageToastDeluxeNumber");if(this.getNumber()<0){n.classList.add("negative")}n.appendChild(document.createTextNode(this.getNumber()));n.style.left=(a.width||i[0])/-2+"px";n.style.bottom=-30-this._HEADER_HEIGHT+"px";s.appendChild(n);e(s).animate({top:"-=200"})},show:function(){return new Promise(function(e,t){if(this.getMessage()||this.getImage()){var n=this.getMessage();if(this.getQuote()){n='"'+n+'"'}if(this.getSpeaker()){n=this.getSpeaker()+": "+n}var g=this.getWidth();if(!this.getMessage()){g="0"}var l=this.getPosition();var h=0;if(this.getParent()&&this.getParent().getParent()&&this.getParent().getParent().$().offset()){h=this.getParent().getParent().$().offset().left;a=h}else if(a){h=a}var o=-64;var r=l.split(" ");if(r[0]==="end"||r==="right"){h*=-1}else if(r[0]==="left"||r[0]==="begin"){}else if(r[0]==="center"){h=0}else{h+=parseInt(r[0]);l="begin top"}if(r[1]==="top"){o*=-2}else if(r[1]==="center"){o*=-1}else if(r[1]==="bottom"){}else{l="begin top";o=parseInt(r[1])}var f=document.getElementsByClassName("flush")[0].getBoundingClientRect().left||16;if(f>this._MESSAGETOAST_WIDTH/2){f-=this._MESSAGETOAST_WIDTH/2}if(typeof r[0]==="string"||typeof r[1]==="string"){if(r[0]==="begin"){r[0]=f}else if(r[0]==="center"){r[0]=i.resize.width/2-(this.getMessage()?this._MESSAGETOAST_WIDTH/2:0)}else if(r[0]==="end"){r[0]=i.resize.width-this._MESSAGETOAST_WIDTH-f}else{r[0]=parseInt(r[0])}if(r[1]==="top"){r[1]=0}else if(r[1]==="center"){r[1]=Math.min(i.resize.height,this._MAX_GAME_HEIGHT)/2}else if(r[1]==="bottom"){r[1]=Math.min(i.resize.height,this._MAX_GAME_HEIGHT)-100}else{r[1]=parseInt(r[1])}if(this.getMessage()&&this.getImage()){r[1]+=this._HEADER_HEIGHT}else{r[1]-=this._HEADER_HEIGHT/2}l={left:r[0],top:r[1]}}if(this.getJitter()){h+=Math.floor(Math.abs(Math.random())*this.getJitter());o+=Math.floor(Math.abs(Math.random())*this.getJitter()/2)}s.show(n,{at:l,duration:this.getDuration(),width:g,onClose:e});var p=document.getElementsByClassName("sapMMessageToast"),u=p.item(p.length-1);u.classList.add("flush");if(!this.getMessage()){u.classList.add("transparent")}if(this.getImage()){this._sneakInImage()}if(this.getNumber()){this._sneakInNumber()}}else{setTimeout(function(){e()},this.getDuration())}}.bind(this))}})});
},
	"flush/controls/MessageToastStory.js":function(){sap.ui.define(["sap/ui/core/Control","../controls/MessageToastDeluxe"],function(t){"use strict";return t.extend("flush.game.controls.MessageToastStory",{metadata:{properties:{random:{type:"boolean",defaultValue:false},delay:{type:"boolean",defaultValue:0},loop:{type:"boolean",defaultValue:false}},defaultAggregation:"steps",aggregations:{steps:{type:"flush.game.controls.MessageToastDeluxe",multiple:true}}},_shuffleArray:function(t){for(var e=t.length-1;e>0;e--){var s=Math.floor(Math.random()*(e+1));var i=t[e];t[e]=t[s];t[s]=i}},play:function(){var t=this.getAggregation("steps");if(this.isPlaying()){this.stop()}if(this.getRandom()){this._shuffleArray(t)}this._bStopped=false;this._playAll(t.reverse());this._oPlaying=new Promise(function(t,e){this._fnResolve=t}.bind(this));return this._oPlaying},isPlaying:function(){return!this._bStopped},stop:function(){this._bStopped=true;this._killLastToast();return this._oPlaying},_killLastToast:function(){var t=document.getElementsByClassName("sapMMessageToast");if(t.length){t.item(t.length-1).remove()}},_playAll:function(t){if(t.length===0||this._bStopped){if(this.getLoop()&&!this._bStopped){this.play()}if(!this._bStopped){this._fnResolve()}return}var e=t.pop();e.show().then(function(){if(this.getDelay()){setTimeout(function(){this._playAll(t)}.bind(this),this.getDelay())}else{this._playAll(t)}}.bind(this))}})});
},
	"flush/i18n/i18n.properties":'# App information\nappTitle=Flush!\nappDescription=Defeat the Evil Render Manager\n\n# Intro View\nintroTitle=Intro\n\n# Home view\nhomeTitle=Flush!\n\n# Game view\ngameTitleLoading=Loading...\ngameTitleLevel={0} - {1}\ngameInstructionsPlopARobot=Hit the Render Manager as often as you can!\ngameInstructionsWhackABug=Whack the Render Manager\'s bugs but spare your friends!\ngameInstructionsUncontrollable=Evade the controls and don\'t get hurt to score points!\ngameInstructionsUncontrollableMultiplayer=Throw controls at each other and see who\'s the last robot standing!\\n(Player 1: WASD - Space B V | Player 2: Arrows - Enter , 0)\n\n# Outro\noutroTitle=Congratulations\n\n# Escape\nescapeTitle=Do you really want to leave this world?',
	"flush/i18n/i18n_en.properties":'# App information\nappTitle=Flush!\nappDescription=Defeat the Evil Render Manager\n\n# Intro View\nintroTitle=Intro\n\n# Home view\nhomeTitle=Flush!\n\n# Game view\ngameTitleLoading=Loading...\ngameTitleLevel={0} - {1}\ngameInstructionsPlopARobot=Hit the Render Manager as often as you can!\ngameInstructionsWhackABug=Whack the Render Manager\'s bugs but spare your friends!\ngameInstructionsUncontrollable=Evade the controls and don\'t get hurt to score points!\ngameInstructionsUncontrollableMultiplayer=Throw controls at each other and see who\'s the last robot standing!\\n(Player 1: WASD - Space B V | Player 2: Arrows - Enter , 0)\n\n# Outro\noutroTitle=Congratulations\n\n# Escape\nescapeTitle=Do you really want to leave this world?',
	"flush/i18n/i18n_en_US.properties":'# App information\nappTitle=Flush!\nappDescription=Defeat the Evil Render Manager\n\n# Intro View\nintroTitle=Intro\n\n# Home view\nhomeTitle=Flush!\n\n# Game view\ngameTitleLoading=Loading...\ngameTitleLevel={0} - {1}\ngameInstructionsPlopARobot=Hit the Render Manager as often as you can!\ngameInstructionsWhackABug=Whack the Render Manager\'s bugs but spare your friends!\ngameInstructionsUncontrollable=Evade the controls and don\'t get hurt to score points!\ngameInstructionsUncontrollableMultiplayer=Throw controls at each other and see who\'s the last robot standing!\\n(Player 1: WASD - Space B V | Player 2: Arrows - Enter , 0)\n\n# Outro\noutroTitle=Congratulations\n\n# Escape\nescapeTitle=Do you really want to leave this world?',
	"flush/levels/PlopARobot/Level.js":function(){sap.ui.define(["sap/ui/base/Object"],function(e){"use strict";var t,i,a,r;var s={b2Vec2:Box2D.Common.Math.b2Vec2,b2BodyDef:Box2D.Dynamics.b2BodyDef,b2Body:Box2D.Dynamics.b2Body,b2FixtureDef:Box2D.Dynamics.b2FixtureDef,b2Fixture:Box2D.Dynamics.b2Fixture,b2World:Box2D.Dynamics.b2World,b2MassData:Box2D.Collision.Shapes.b2MassData,b2PolygonShape:Box2D.Collision.Shapes.b2PolygonShape,b2CircleShape:Box2D.Collision.Shapes.b2CircleShape,b2DebugDraw:Box2D.Dynamics.b2DebugDraw};var o=false;var n=false;var h=25;var d=20;var u=32;var l=.7;var c,m,f,y,v;return e.extend("flush.game.levels.PlopARobot",{constructor:function(e,t,i){if(o===false){o=true;this._oGame=e;this._oCanvas=t[0];this._oControlManager=i;this._boundKeyDown=this._fnKeyDown.bind(this);this._boundKeyUp=this._fnKeyUp.bind(this);this._keyboardInputX=0;this._keyboardInputY=0}},init:function(){return new Promise(function(e){this._fnInitResolve=e;if(o===true&&n===false){n=true;var r=[{src:"CodiBlau.png",id:"codi0"},{src:"CodiGruen.png",id:"codi1"},{src:"CodiLila.png",id:"codi2"},{src:"CodiOrange.png",id:"codi3"},{src:"RenderManagerRot.png",id:"render0"},{src:"hammer.png",id:"hammer"}];a=new createjs.LoadQueue(false);a.addEventListener("complete",this.onLoadingCompleted.bind(this));a.loadManifest(r,true,sap.ui.require.toUrl("flush/game/levels/PlopARobot/assets")+"/");t=this._oCanvas.$().width();i=this._oCanvas.$().height();document.addEventListener("keydown",this._boundKeyDown);document.addEventListener("keyup",this._boundKeyUp)}}.bind(this))},setupPhysics:function(){v=new s.b2World(new s.b2Vec2(0,20),true);var e=new s.b2FixtureDef;e.density=1;e.friction=.5;e.restitution=0;e.shape=new s.b2PolygonShape;e.shape.SetAsBox(t/u*.6,10/u);var a=new s.b2BodyDef;a.type=s.b2Body.b2_staticBody;a.position.x=t/2/u;a.position.y=(i+10)/u;v.CreateBody(a).CreateFixture(e)},exit:function(){return new Promise(function(e,t){if(r){r.removeAllChildren();createjs.Ticker.removeAllEventListeners();createjs.Tween.removeAllTweens();r=null}document.removeEventListener("keydown",this._boundKeyDown);document.removeEventListener("keyup",this._boundKeyUp);e()}.bind(this))},setDifficulty:function(e){this._iDifficulty=Math.min(e,50);this._difficultyFactor=.2+.7/e},onLoadingCompleted:function(){r=new createjs.Stage(this._oCanvas.getId());createjs.Touch.enable(r);r.autoClear=false;r.alpha=1;setTimeout(function(){o=false;n=false},3e3);f=[];y=0;createjs.Ticker.addEventListener("tick",createjs.Tween);this.myCursor=new createjs.Bitmap(a.getResult("hammer"));this.myCursor.mouseEnabled=false;r.addChild(this.myCursor);r.mouseX=this._oCanvas.$().width()/2;r.mouseY=this._oCanvas.$().height()/2;r.addChild(new createjs.Shape).graphics.beginFill("#5C89A1").drawRect(0,0,t,i);var e=new createjs.SpriteSheetBuilder;var s=new lib.Balls;s.actionsEnabled=false;s.circle.visible=false;e.addMovieClip(s,null,l);m=e.build();c=[];for(var h=0,d=m.getNumFrames();h<d;h++){s.gotoAndStop(h);c.push({frame:h,radius:s.circle.scaleX*100*l/2})}this.setupPhysics();createjs.Ticker.setFPS(30);createjs.Ticker.useRAF=true;createjs.Ticker.timingMode=createjs.Ticker.RAF;this._oControlManager.updateAllControlImages().then(function(){createjs.Ticker.addEventListener("tick",this.tick.bind(this))}.bind(this));this._fnInitResolve()},_fnKeyDown:function(e){var t=e.key;if(t===" "||t==="Enter"){this.boom();return}switch(t){case"ArrowLeft":case"a":this._iIntervalLeft=setInterval(function(){this._keyboardInputX-=h}.bind(this),d);break;case"ArrowRight":case"d":this._iIntervalRight=setInterval(function(){this._keyboardInputX+=h}.bind(this),d);break;case"ArrowUp":case"w":this._iIntervalUp=setInterval(function(){this._keyboardInputY-=h}.bind(this),d);break;case"ArrowDown":case"s":this._iIntervalDown=setInterval(function(){this._keyboardInputY+=h}.bind(this),d);break}},_fnKeyUp:function(e){switch(e.key){case"ArrowLeft":case"a":clearInterval(this._iIntervalLeft);break;case"ArrowRight":case"d":clearInterval(this._iIntervalRight);break;case"ArrowUp":case"w":clearInterval(this._iIntervalUp);break;case"ArrowDown":case"s":clearInterval(this._iIntervalDown);break}},_hammered:function(){createjs.Tween.get(this.myCursor).to({rotation:60,rotationDir:-1},100).to({rotation:30},100).to({rotation:10,rotationDir:-1},100)},tick:function(e){v.Step(e.delta/1e3,10,10);if(y++%2==0&&v.GetBodyCount()<t*i/(125*125)/(l*l)){this.resetBall(this.addBall(0))}for(var a=v.GetBodyList();a;a=a.GetNext()){var s=a.userData;if(!s){continue}var o=a.GetPosition();var n=s.sprite;n.x=o.x*u;n.y=o.y*u;n.rotation=a.GetAngle()/Math.PI*180;if(s.type!=0){n.alpha-=.03}if(n.y>i||n.x<-s.radius*1.5||n.x>t+s.radius*1.5||n.alpha<=0){this.resetBall(s)}}this.removeBalls();if(this._previousMouseX!==r.mouseX){this.myCursor.x=r.mouseX-120}else{this.myCursor.x+=this._keyboardInputX;this._keyboardInputX=0}if(this._previousMouseY!==r.mouseY){this.myCursor.y=r.mouseY-80}else{this.myCursor.y+=this._keyboardInputY;this._keyboardInputY=0}this._previousMouseX=r.mouseX;this._previousMouseY=r.mouseY;this.myCursor.x=Math.max(0,this.myCursor.x);this.myCursor.x=Math.min(this.myCursor.x,this._oCanvas.$().width()-75);this.myCursor.y=Math.max(0,this.myCursor.y);this.myCursor.y=Math.min(this.myCursor.y,this._oCanvas.$().height()-75);r.setChildIndex(this.myCursor,r.getNumChildren()-1);r.update(e)},addBall:function(e,t){t=t||1;var i=Math.max(this._iDifficulty/10,1)*.75;t*=1/i;var o=c[Math.random()*2+e*2|0];var n=o.radius*l*t;var h=new s.b2FixtureDef;h.density=.1;h.friction=.5;h.restitution=.6;h.shape=new s.b2CircleShape(o.radius/u);var d=new s.b2BodyDef;d.type=s.b2Body.b2_dynamicBody;var f=v.CreateBody(d);f.CreateFixture(h);var y;if(e<=1){if(Math.random()<this._difficultyFactor){var b=Math.floor(Math.random()*2*Math.max(this._iDifficulty/10,1));y=new createjs.Bitmap(a.getResult("render"+b))}else if(Math.random()<.3){var p=this._oControlManager.getContent();var C=p[Math.floor(Math.abs(Math.random())*p.length)];y=new createjs.Bitmap(C._image)}else{var _=Math.floor(Math.random()*4*Math.max(this._iDifficulty/10,1));y=new createjs.Bitmap(a.getResult("codi"+_))}}else{y=new createjs.Sprite(m);y.gotoAndStop(o.frame)}y.scaleX=y.scaleY=t;if(e===0){y.addEventListener("mousedown",this.boom.bind(this))}r.addChild(y);var g={def:o,fixDef:h,bodyDef:d,body:f,sprite:y,radius:n,type:e};f.userData=y.userData=g;return g},resetBall:function(e){var i=e.body;if(e.type===0){i.SetPositionAndAngle(new s.b2Vec2(Math.random()*t/u|0,-(e.radius*2+100*l)/u),0);i.SetLinearVelocity(new s.b2Vec2(Math.random()*20-10),0);i.SetAngularVelocity(0)}},removeBall:function(e){f.push(e)},removeBalls:function e(){while(f.length){var t=f.pop();v.DestroyBody(t.body);r.removeChild(t.sprite);t.body=null}},boom:function(e){var t=false;var i;var a;if(!e){var o=r.getObjectsUnderPoint(this.myCursor.x+120,this.myCursor.y+80);for(var n=0;n<o.length;n++){if(o[n].image){i=o[n].userData;a=[this.myCursor.x+120,this.myCursor.y+80];if(o[n].image.src.indexOf("Codi")>=0){t=true;break}}}}else{t=e.currentTarget.image.src.indexOf("Codi")>=0;i=e.target.userData;a=[e.rawX,e.rawY]}if(!i){return}this._oGame.getSoundManager().play("hammer");this._hammered();if(t){this._oGame.triggerEvent("Ohno");this._oGame.score(-100*this._iDifficulty/5,a)}else{this._oGame.triggerEvent("Awesome");this._oGame.score(100*this._iDifficulty/10,a)}this.resetBall(i);var h=(50+l*400)/u;var d=l*l*120;var c=a[0]/u;var m=a[1]/u;var f=i.def.frame;for(var n=0;n<8;n++){var y=Math.random()*.7+.5;var b=Math.random()*Math.PI*2;var p=i.radius*(.5+Math.random()*.5);var C=c+Math.cos(b)*p/u;var _=m+Math.sin(b)*p/u;var g=this.addBall(Math.random()<.3?3:f+1,y);if(g){g.body.SetPositionAndAngle(new s.b2Vec2(C,_),b)}}for(var w=v.GetBodyList();w;w=w.GetNext()){i=w.userData;if(!i){continue}var D=w.GetPosition();var M=D.x-c;var x=D.y-m;var p=Math.sqrt(M*M+x*x);if(p>=h){continue}var B=(h-p)/h*d*(i.type==0?1:.01);var b=Math.atan2(x,M);w.ApplyImpulse(new s.b2Vec2(Math.cos(b)*B,Math.sin(b)*B),D)}}})});
},
	"flush/levels/Uncontrollable/Level.js":function(){sap.ui.define(["sap/ui/base/Object","sap/ui/Device"],function(e,t){"use strict";var i,a,s,n,o,r,h,l,d,u,c,m,v;var y,g;var p=false;var _=30;var f=100;var b=20;var w=30;var x=60;var k=6;var T;var D;var L;var A;var S;var B;var M;var C=[];var P;var E;var O=3;var j=true;var G={PLAYER:1,PLAYERBOTTOM:2,RENDERMANAGER:3,CONTROL:4};var R={POLYGON:1,CIRCLE:2};var I;var F=[];var Y=Box2D.Common.Math.b2Vec2;var X=Box2D.Dynamics.b2BodyDef;var V=Box2D.Dynamics.b2Body;var N=Box2D.Dynamics.b2FixtureDef;var U=Box2D.Dynamics.b2World;var W=Box2D.Collision.Shapes.b2PolygonShape;var $=Box2D.Collision.Shapes.b2CircleShape;var q=Box2D.Dynamics.b2DebugDraw;var H=Box2D.Dynamics.b2ContactListener;var Q={spawnGameObject:function(e,t,a){var s;if(e.spriteSheet){s=new createjs.Sprite(e.spriteSheet,e.spriteSheetAnimation);s.spriteSheetAnimation=e.spriteSheetAnimation}else if(e.assetId){s=new createjs.Bitmap(n.getResult(e.assetId))}else if(e.control){s=new createjs.Bitmap;s.image=e.control._image}if(e.width)s.width=e.width;if(e.height)s.height=e.height;if(e.x)s.x=e.x;if(e.y)s.y=e.y;if(e.regX){s.regX=e.regX}else{s.regX=parseInt(e.width/2)}if(e.regY){s.regY=e.regY}else{s.regY=parseInt(e.height/2)}if(e.scaleX)s.scaleX=e.scaleX;if(e.scaleY)s.scaleY=e.scaleY;if(e.control)s.control=e.control;if(e.assetId)s.assetId=e.assetId;if(e.snapToPixel)s.snapToPixel=e.snapToPixel;if(e.mouseEnabled)s.mouseEnabled=e.mouseEnabled;if(e.gameObjectType)s.gameObjectType=e.gameObjectType;if(e.shapeType)s.shapeType=e.shapeType;if(e.density)s.density=e.density;if(e.isStaticBody)s.isStaticBody=e.isStaticBody;if(e.gameObjectType==G.PLAYER){a=s;y=a}i.addChild(s);if(e.hasBox2dBody===true){return z.createGameObjectBodyAndActor(s,t)}return s}};var z=function(){var e=1,n=20,r=1/n;var T=Date.now();var S=0;var B=[];var O=[];var j=[];var Q=true;var z=function(){I=new U(new Y(0,6),true);var i=new q;i.SetSprite(h);i.SetDrawScale(_);i.SetFillAlpha(.7);i.SetLineThickness(1);i.SetFlags(q.e_shapeBit|q.e_jointBit);I.SetDebugDraw(i);var n=function(e){var i=e[0],a=e[1];if(Math.abs(g.GetLinearVelocity().y)<6&&g.GetPosition().y>(t.system.phone&&t.orientation.landscape?k/2:k)){g.ApplyForce(new Y(0,a*f*5),g.GetPosition());P=Date.now();C.push(g.GetPosition().x);if(C.length>3){var s=0;for(var n=0;n<C.length-2;n++){s+=C[n+1]-C[n]}if(Math.abs(s)>2){E=Date.now();p=false}}if(C.length>10){C.shift()}}g.ApplyForce(new Y(i*f,i*f),g.GetPosition());g.SetLinearDamping(.5);g.SetFixedRotation(true)};d=function(e){switch(e.key){case"ArrowLeft":case"a":this._movement[0]=-1;break;case"ArrowRight":case"d":this._movement[0]=1;break;case"ArrowUp":case"w":if(!D.getSoundManager().isPlaying("Raketenduese")){D.getSoundManager().play("Raketenduese",undefined,undefined,.5)}y.gotoAndPlay("fly");this._movement[1]=-1;break;case"ArrowDown":case"s":this._movement[0]=1;break;case" ":break;case"Enter":break}if(this._movement[0]||this._movement[1]){clearInterval(this._iIntervalMove);this._iIntervalMove=setInterval(function(){n(this._movement)}.bind(this),b)}}.bind(this);u=function(e){switch(e.key){case"ArrowLeft":case"a":this._movement[0]=0;clearInterval(this._iIntervalMove);break;case"ArrowRight":case"d":this._movement[0]=0;clearInterval(this._iIntervalMove);break;case"ArrowUp":case"w":D.getSoundManager().stop("Raketenduese");y.gotoAndPlay("run");this._movement[1]=0;clearInterval(this._iIntervalMove);break;case"ArrowDown":case"s":this._movement[0]=0;clearInterval(this._iIntervalMove);break;case" ":break;case"Enter":break}}.bind(this);this.shakeMagnet=function(){if(!this._bShakeRunning){this._bShakeRunning=true;createjs.Tween.get(l).to({scaleX:1.2,scaleY:1.2},50).to({rotation:l.rotation+25,rotationDir:-1},50).to({scaleX:1,scaleY:1},50).to({rotation:l.rotation},50).to({scaleX:.8,scaleY:.8},50).to({rotation:l.rotation+25,rotationDir:-1},50).to({scaleX:1,scaleY:1},50).to({rotation:l.rotation},50);setTimeout(function(){this._bShakeRunning=false}.bind(this),400)}}.bind(this);this.calculateMouseMovement=function(e){var t=e.offsetX||e.targetTouches[0].clientX;var i=e.offsetY||e.targetTouches[0].clientY;if(t<y.x+50){this._movement[0]=-1}else{this._movement[0]=1}if(i<y.y+50){this._movement[1]=-1;if(!D.getSoundManager().isPlaying("Raketenduese")){D.getSoundManager().play("Raketenduese",undefined,undefined,.5)}y.gotoAndPlay("fly")}else{this._movement[1]=1;D.getSoundManager().stop("Raketenduese");y.gotoAndPlay("run")}}.bind(this);c=function(e){if(this._bLastDownStillActive){return}setTimeout(function(){this._bLastDownStillActive=false}.bind(this),20);this._bLastDownStillActive=true;this._bMousePressed=true;this.shakeMagnet();this.calculateMouseMovement(e);if(this._movement[0]||this._movement[1]){clearInterval(this._iIntervalMove);n(this._movement);this._iIntervalMove=setInterval(function(){n(this._movement)}.bind(this),e.targetTouches?x:w)}if(!D.getSoundManager().isPlaying("shootingCharge1")){D.getSoundManager().play("shootingCharge1")}}.bind(this);m=function(e){if(this._bMousePressed){this.shakeMagnet();this.calculateMouseMovement(e)}}.bind(this);v=function(){this._bMousePressed=false;clearInterval(this._iIntervalMove);this._movement=[0,0];D.getSoundManager().stop("shootingCharge1");D.getSoundManager().stop("Raketenduese");y.gotoAndPlay("run")}.bind(this);this._movement=[0,0];document.addEventListener("keydown",d);document.addEventListener("keyup",u);o.addEventListener("mousedown",c);o.addEventListener("mousemove",m);o.addEventListener("mouseup",v);o.addEventListener("touchdown",c);o.addEventListener("touchmove",c);o.addEventListener("touchend",v);o.addEventListener("mousedown",c);o.addEventListener("mousemove",m);o.addEventListener("mouseup",v);o.addEventListener("touchdown",c);o.addEventListener("touchmove",c);o.addEventListener("touchend",v);var r=new H;r.BeginContact=function(e){if(e.GetFixtureA().m_body.m_userData&&e.GetFixtureB().m_body.m_userData&&e.GetFixtureA().m_body.m_userData.skin&&e.GetFixtureB().m_body.m_userData.skin&&(e.GetFixtureA().m_body.m_userData.skin.gameObjectType===G.PLAYER&&!e.GetFixtureA().m_userData&&e.GetFixtureB().m_body.m_userData.skin.gameObjectType===G.CONTROL||e.GetFixtureB().m_body.m_userData.skin.gameObjectType===G.PLAYER&&!e.GetFixtureB().m_userData&&e.GetFixtureA().m_body.m_userData.skin.gameObjectType===G.CONTROL)){if(Q){Q=false;A=setTimeout(function(){Q=true},500);D.score(-100*L/10,[g.GetPosition().x*_+25,g.GetPosition().y*_+25]);D.triggerEvent("Haha");M=Date.now()}}};I.SetContactListener(r);var T=new N;T.density=.3;T.restitution=.5;T.shape=new W;T.shape.SetAsBox(a/_,e/_);var S=new X;S.type=V.b2_staticBody;S.position.x=0;S.position.y=s/_;var B=I.CreateBody(S);B.CreateFixture(T);var O=new N;O.shape=new W;O.shape.SetAsBox(e/_,s/_);var j=new X;j.type=V.b2_staticBody;j.position.x=0;j.position.y=s/_;var R=I.CreateBody(j);R.CreateFixture(O)};var J=function(e,t){this.body=e;this.skin=t;this.update=function(){this.skin.rotation=this.body.GetAngle()*(180/Math.PI);this.skin.x=this.body.GetWorldCenter().x*_;this.skin.y=this.body.GetWorldCenter().y*_};F.push(this)};var K=function(e,t){var i=new N;i.density=e.density;i.restitution=.1;var a=new X;if(e.shapeType==R.POLYGON){i.shape=new W;if(e.gameObjectType==G.PLAYER){i.shape.SetAsBox(e.width/_/2,(e.height-30)/_/2)}else{i.shape.SetAsBox(e.width/_/2,e.height/_/2)}a.position.x=(e.x+e.width/2)/_;a.position.y=(e.y+e.height/2)/_}if(e.shapeType==R.CIRCLE){i.shape=new $(e.width/2/_);a.position.x=e.x/_;a.position.y=e.y/_}if(e.isStaticBody===true){a.type=V.b2_staticBody}else{a.type=V.b2_dynamicBody}var s=I.CreateBody(a);s.skin=e;if(e.gameObjectType==G.PLAYER){t=s;g=t}if(e.gameObjectType==G.PLAYER){var n=new N;n.density=e.density;n.restitution=.1;n.shape=new W;n.shape.SetAsOrientedBox(e.width/_/2,1/_/2,new Y(0,e.height/2/_));n.userData=true;s.CreateFixture(n)}var o=s.CreateFixture(i);o.skin=e;if(e.gameObjectType==G.CONTROL){var r=2*L/10;var h=Math.random()*r+1.5;s.ApplyImpulse(new Y(-4*s.m_mass*h,-4.3*s.m_mass*h*.6),s.GetPosition())}var l=new J(s,e);s.SetUserData(l);if(e.gameObjectType==G.CONTROL||e.assetId==="ALVTable"){O.push(s)}else{j.push(s)}return s};var Z=function(e){if(e){i.removeChild(e.skin);F.splice(F.indexOf(e),1)}};var ee=function(){var e=Date.now();var t=e-T;S+=t;T=e;while(S>=n){for(var i=0,a=B.length;i<a;i++){Z(B[i].GetUserData());B[i].SetUserData(null);I.DestroyBody(B[i])}B=[];for(var i=0,a=F.length;i<a;i++){F[i].update()}I.Step(r,10,10);S-=n;I.ClearForces();I.m_debugDraw.m_sprite.graphics.clear();I.DrawDebugData();if(O.length>30){B.push(O[0]);O.splice(0,1)}}};var te=function(e){if(e){r=0}else{r=1/n}T=Date.now()};return{setup:z,update:ee,createGameObjectBodyAndActor:K,pauseResume:te}}();return e.extend("flush.game.levels.Uncontrollable",{constructor:function(e,t,i){D=e;this._oCanvas=t[0];this._oDebugCanvas=t[0];this._oControlManager=i},tick:function(e){if(Math.random()<.1){C.shift()}if(j){var t=e.delta/1e3;this._skyline1.x=this._skyline1.x-t*30;if(this._skyline1.x+this._skyline1.image.width*this._skyline1.scaleX<=0){this._skyline1.x=1238}if(this._skyline1.x<=-a){this._skyline1.x=0}this._skyline2.x=this._skyline2.x-t*30;if(this._skyline2.x+this._skyline2.image.width*this._skyline2.scaleX<=0){this._skyline2.x=1238}if(this._skyline2.x<=0){this._skyline2.x=a}var n=e.delta/1e3;this._hill1.x=this._hill1.x-n*60;if(this._hill1.x+this._hill1.image.width*this._hill1.scaleX<=0){this._hill1.x=1464}if(this._hill1.x<=-a){this._hill1.x=0}this._hill2.x=this._hill2.x-n*60;if(this._hill2.x+this._hill2.image.width*this._hill2.scaleX<=0){this._hill2.x=1464}if(this._hill2.x<=0){this._hill2.x=a}z.update();i.update();O++;var r=Math.floor(60-L*2);if(O%r===0){O=0;var h=this._oControlManager.getContent();var d=h[Math.floor(Math.abs(Math.random())*h.length)];D.getSoundManager().play("Controlshot");Q.spawnGameObject({gameObjectType:G.CONTROL,shapeType:R.POLYGON,control:d,width:d._image.width,height:d._image.height,x:a,y:s-300,snapToPixel:true,mouseEnabled:false,density:1,isStaticBody:false,hasBox2dBody:true},this._playerBody,this._player)}}l.x=i.mouseX;l.y=i.mouseY;l.x=Math.max(0,l.x);l.x=Math.min(l.x,o.width-75);l.y=Math.max(0,l.y);l.y=Math.min(l.y,o.height-75);if(i.mouseX===0&&i.mouseY===0){l.x=-200;l.y=-200}var u=y.x+50-l.x-50;var c=y.y+75-l.y-80;l.rotation=Math.atan2(u,c*-1)*180/Math.PI;i.setChildIndex(l,i.getNumChildren()-1)},dropTable:function(){if(this._oALVTable){if(this._oALVTable.GetUserData()){i.removeChild(this._oALVTable.GetUserData().skin);F.splice(F.indexOf(this._oALVTable.GetUserData()),1)}this._oALVTable.SetUserData(null);I.DestroyBody(this._oALVTable)}this._oALVTable=Q.spawnGameObject({assetId:"ALVTable",shapeType:R.POLYGON,width:500,height:373,x:g.GetPosition().x*_-250,y:s-800,snapToPixel:true,mouseEnabled:false,density:15,isStaticBody:false,hasBox2dBody:true},this._playerBody,this._player);this._oALVTable.ApplyImpulse(new Y(Math.random()*5,10),this._oALVTable.GetPosition())},init:function(){return new Promise(function(e,t){T=e;o=this._oCanvas.getDomRef();r=this._oDebugCanvas.getDomRef();h=r.getContext("2d");createjs.MotionGuidePlugin.install();i=new createjs.Stage(o);createjs.Touch.enable(i);i.snapPixelsEnabled=true;a=this._oCanvas.$().width();s=this._oCanvas.$().height();z.setup();var l=function(){S=setTimeout(function(){var e=Date.now()-M;var t=Date.now()-P;e=Math.floor(e/1e3);t=Math.floor(t/1e3);if(t<3&&e>0){D.score(Math.max(10,e*100*L/20),[g.GetPosition().x*_-25,g.GetPosition().y*_+25]);D.triggerEvent("Awesome")}l()},3e3)};P=Date.now()-3e3;M=Date.now()+3e3;l();var d=function(){B=setTimeout(function(){var e=(Date.now()-E)/1e3;if(e>3&&!p){D.triggerEvent("PointsCritical","Move!",[g.GetPosition().x*_-25,g.GetPosition().y*_+25]);p=true}if(e>6){setTimeout(function(){D.score(-1e3,[g.GetPosition().x*_-25,g.GetPosition().y*_+25]);D.triggerEvent("Ohno");E=Date.now()+5e3;p=false},1e3);this.dropTable();D.getSoundManager().play("devil");D.getSoundManager().play("shoot")}d()}.bind(this),3e3)}.bind(this);E=Date.now()+1e4;d();var u=sap.ui.require.toUrl("flush/game/levels/Uncontrollable/assets");n=new createjs.LoadQueue(false);n.on("complete",this.onLoadingCompleted,this);n.crossOrigin="";n.loadFile({id:"robot",src:u+"/robo.png"});n.loadFile({id:"skyline",src:u+"/skyline.png"});n.loadFile({id:"playerSprite",src:u+"/spritesheet_CodiFaehrtUndSpringt.png"});n.loadFile({id:"phoenix",src:u+"/phoenix.png"});n.loadFile({id:"cloud",src:u+"/clouds.png"});n.loadFile({id:"hill",src:u+"/hill.png"});n.loadFile({id:"ALVTable",src:u+"/ALVTable.png"});n.loadFile({id:"magnet",src:u+"/magnet.png"})}.bind(this))},onLoadingCompleted:function(){createjs.Ticker.addEventListener("tick",createjs.Tween);this._hill1=new createjs.Bitmap(n.getResult("hill"));this._hill1.width=1464;this._hill1.height=768;this._hill1.alpha=.1;this._hill1.x=0;this._hill1.y=s-this._hill1.height+80;i.addChild(this._hill1);this._hill2=new createjs.Bitmap(n.getResult("hill"));this._hill2.width=1464;this._hill2.height=768;this._hill2.alpha=.1;this._hill2.x=a+194;this._hill2.y=s-this._hill2.height+80;i.addChild(this._hill2);this._skyline1=new createjs.Bitmap(n.getResult("skyline"));this._skyline1.width=1238;this._skyline1.height=475;this._skyline1.alpha=.3;this._skyline1.x=0;this._skyline1.y=s-this._skyline1.height+7;i.addChild(this._skyline1);this._skyline2=new createjs.Bitmap(n.getResult("skyline"));this._skyline2.width=1238;this._skyline2.height=475;this._skyline2.alpha=.3;this._skyline2.x=a;this._skyline2.y=s-this._skyline2.height+7;i.addChild(this._skyline2);l=new createjs.Bitmap(n.getResult("magnet"));l.regX=52;l.regY=83;l.mouseEnabled=false;i.addChild(l);Q.spawnGameObject({spriteSheet:new createjs.SpriteSheet({framerate:1,images:[n.getResult("playerSprite")],frames:{height:153,count:28,width:99,spacing:10},animations:{run:[0,0,"stay",1.5],jump:[20,26],fly:[27,27]}}),spriteSheetAnimation:"run",gameObjectType:G.PLAYER,shapeType:R.POLYGON,width:"99",height:"143",x:100,y:s-2e3,snapToPixel:true,mouseEnabled:false,density:1,isStaticBody:false,hasBox2dBody:true});this._robot=new createjs.Bitmap(n.getResult("robot"));this._robot.x=a-186;this._robot.y=s-143;i.addChild(this._robot);var e=new createjs.Bitmap(n.getResult("phoenix"));e.scaleX=-1;e.regY=250;e.regX=200;i.addChild(e);createjs.Tween.get(e).to({guide:{path:[-200,-200,0,200,400,200,600,200,800,-200]}},7e3);var t=new createjs.Bitmap(n.getResult("cloud"));t.y=-50;t.scaleX=1.240234375;t.alpha=.5;i.addChild(t);this._oControlManager.updateAllControlImages().then(function(){createjs.Ticker.setFPS(30);createjs.Ticker.addEventListener("tick",this.tick.bind(this));T();D.getSoundManager().play("Adlerschrei")}.bind(this))},exit:function(){return new Promise(function(e,t){if(i){i.removeAllChildren();createjs.Ticker.removeAllEventListeners();createjs.Tween.removeAllTweens();i=null}clearTimeout(A);clearTimeout(S);clearTimeout(B);document.removeEventListener("keydown",d);document.removeEventListener("keyup",u);o.removeEventListener("mousedown",c);o.removeEventListener("mousemove",m);o.removeEventListener("mouseup",v);o.removeEventListener("touchdown",c);o.removeEventListener("touchmove",m);o.removeEventListener("touchend",v);e()}.bind(this))},setDifficulty:function(e){L=Math.min(e,50)}})});
},
	"flush/levels/UncontrollableMultiplayer/Level.js":function(){sap.ui.define(["sap/ui/base/Object","./physics/box2DHelper","./helper/time","./helper/random","sap/ui/model/json/JSONModel"],function(e,t,a,i,s){"use strict";var r,n,o,l,h;var d=[];var g=[[0,0],[0,0]];return e.extend("flush.game.levels.UncontrollableMultiplayer",{constructor:function(e,t,a){this.oGame=e;this.oCanvas=t[0];this.oDebugCanvas=t[1];this.oControlManager=a},init:function(){return new Promise((e,i)=>{l=this.oCanvas.getDomRef();h=this.oDebugCanvas.getDomRef();createjs.MotionGuidePlugin.install();this.stage=new createjs.Stage(l);this.stage.snapPixelsEnabled=true;r=this.oCanvas.$().width();n=this.oCanvas.$().height();var d=function(e,i){if(e){var s=t.playerSkin(e-1);if(!s.recoveringFromHit&&!i.blocked&&!(i.createdBy===e&&Date.now()-i.createdAt<500)){s.recoveringFromHit=true;a.setTimeout(function(){if(s){s.recoveringFromHit=false;s.gotoAndPlay("stay")}},2e3);if(s.currentAnimation==="fly"){s.gotoAndPlay("flyHit")}else{s.gotoAndPlay("stayHit")}if(!jQuery.sap.getUriParameters().get("game-debug")){this.oGame.hit(e)}this.oGame.getSoundManager().play("goodHit");this.oGame.getSoundManager().play("badHit");this.oGame.getSoundManager().play("hammer")}}}.bind(this);var g=function(e,a){a.image=o.getResult("phoenix"+(e===1?"Blue":"Red"));t.playerSkin(e-1).playerLvl++;this.oGame.getSoundManager().play("goodHit");this.oGame.triggerEvent("PickPhoenix",t.playerSkin(e-1).playerLvl,[e===1?"begin":"end","center"])}.bind(this);var c=function(e,t){if(this.stage&&e){this.stage.removeChild(e.skin);t.splice(t.indexOf(e),1)}}.bind(this);t.init(l,h,d,g,this._iDifficulty,c,this.oGame.getSoundManager());o=new createjs.LoadQueue(false);var y=sap.ui.require.toUrl("flush/game/levels/UncontrollableMultiplayer")+"/";var u=new s;u.attachRequestCompleted(t=>{var a=t.getSource().getData();o.loadManifest(a,true,y+"assets/");o.on("complete",()=>{this.onLoadingCompleted().then(e)},this)});u.loadData(y+"levelManifest.json")})},onLoadingCompleted:function(){var e=o.getResult("hill");var s={width:1464,height:768,y:n-768+80,alpha:.1};this._hill1=new createjs.Bitmap(e);Object.assign(this._hill1,s,{x:0});this.stage.addChild(this._hill1);this._hill2=new createjs.Bitmap(e);Object.assign(this._hill2,s,{x:r+194});this.stage.addChild(this._hill2);var l={1:"bgLasVegas",2:"bgBarcelona",3:"bgUI5",4:"bgSkyline",5:"bgWolkenkratzer",6:"bgBaeume",7:"bgSpinne"};var h=l[i.getInt(1,8).toString()];var c=o.getResult(h);var y={width:1238,height:475,y:n-475+7,alpha:.5};this._skyline1=new createjs.Bitmap(c);this.stage.addChild(Object.assign(this._skyline1,y,{x:0}));this._skyline2=new createjs.Bitmap(c);this.stage.addChild(Object.assign(this._skyline2,y,{x:r}));var u=function(e){return{spriteSheet:new createjs.SpriteSheet({framerate:1,images:["Stay","Fly","FlyHit1","FlyHit2","FlyHit3","FlyHit4","StayHit1","StayHit2","StayHit3","StayHit4"].map(function(t){return o.getResult(e+t)}),frames:{height:350,count:10,width:280,regX:90,regY:90},animations:{stay:[0,0],fly:[1,1],flyHit:[2,5,"flyHit",.5],stayHit:[6,9,"stayHit",.5]}}),spriteSheetAnimation:"stay",gameObjectType:t.types.gameObjects.PLAYER,shapeType:t.types.shapes.POLYGON,width:133,scaleX:133/200,height:200,scaleY:200/300,y:0,snapToPixel:true,mouseEnabled:false,density:1,isStaticBody:false,hasBox2dBody:true,playerLvl:1,directionChanges:0}};var m={x:0,playerNumber:1};this.spawnGameObject(Object.assign(m,u("robotBlue")));var f={x:r-133,playerNumber:2};this.spawnGameObject(Object.assign(f,u("robotRed")));var p={width:256,height:316,alpha:1,scaleX:.4,scaleY:.4,y:0};var b=Object.assign(new createjs.Bitmap(o.getResult("bomb1")),p,{x:5});this.stage.addChild(b);b.image=o.getResult("bomb"+this.oGame.getPlayerEnergySegment(1));var v=Object.assign(new createjs.Bitmap(o.getResult("bomb1")),p,{x:r-115});this.stage.addChild(v);v.image=o.getResult("bomb"+this.oGame.getPlayerEnergySegment(2));a.setInterval(function(){b.image=o.getResult("bomb"+this.oGame.getPlayerEnergySegment(1));v.image=o.getResult("bomb"+this.oGame.getPlayerEnergySegment(2))}.bind(this),300);var k=new createjs.Bitmap(o.getResult("cloud"));k.y=-50;k.scaleX=1.240234375;k.alpha=.5;this.stage.addChild(k);var w=new createjs.Bitmap(o.getResult("phoenix"));w.scaleX=-1;w.regY=250;w.regX=200;this.stage.addChild(w);w.visible=true;this.oGame.getSoundManager().play("Adlerschrei");a.setInterval(()=>{createjs.Tween.get(w).to({guide:{path:[-400,-200,-200,-100,0,0,200,100,400,200,600,200,800,100,1e3,0,1200,-200]}},6e3);a.setTimeout(()=>{this.spawnGameObject({gameObjectType:t.types.gameObjects.CONTROLPACKAGE,assetId:"phoenixGrey",width:100,height:100,scaleX:100/933,scaleY:100/974,regX:933/2,regY:974/2,x:r/2,y:100,snapToPixel:true,mouseEnabled:false,density:1,isStaticBody:false,hasBox2dBody:true,shapeType:t.types.shapes.CIRCLE})},4e3)},1e4);return this.oControlManager.updateAllControlImages().then(()=>{createjs.Ticker.setFPS(30);this.tickFn=this.tick.bind(this);createjs.Ticker.addEventListener("tick",this.tickFn);var e=[];var i=false;var s=false;var r=t.playerSkin(0);var n=t.playerSkin(1);this.fnKeyDown=function(e){function i(){jQuery("#flush---game--page-canvas").toggleClass("display-none");jQuery("#debugCanvas").toggleClass("display-inline")}switch(e.key){case"a":g[0][0]=-1;break;case"ArrowLeft":g[1][0]=-1;break;case"d":g[0][0]=1;break;case"ArrowRight":g[1][0]=1;break;case"w":var s=t.playerSkin(0);if(s&&!this.oGame.getSoundManager().isPlaying("Raketenduese")){this.oGame.getSoundManager().play("Raketenduese",undefined,undefined,.7)}if(s.recoveringFromHit){s.gotoAndPlay("flyHit")}else{s.gotoAndPlay("fly")}g[0][1]=-1;break;case"ArrowUp":var s=t.playerSkin(1);if(s&&!this.oGame.getSoundManager().isPlaying("Raketenduese")){this.oGame.getSoundManager().play("Raketenduese",undefined,undefined,.7)}if(s.recoveringFromHit){s.gotoAndPlay("flyHit")}else{s.gotoAndPlay("fly")}g[1][1]=-1;break;case"s":g[0][1]=1;break;case"ArrowDown":g[1][1]=1;break;case"v":var s=t.playerSkin(0);if(s&&!this._laserPlayer1Block){this.spawnLaserParticle(1);this._laserPlayer1Block=true;a.setTimeout(function(){this._laserPlayer1Block=false}.bind(this),3e3)}break;case"0":var s=t.playerSkin(1);if(s&&!this._laserPlayer2Block){this.spawnLaserParticle(2);this._laserPlayer2Block=true;a.setTimeout(function(){this._laserPlayer2Block=false}.bind(this),3e3)}break;case"Enter":var s=t.playerSkin(1);if(s&&!d[1]){this.oGame.getSoundManager().play("shootingCharge1");d[1]=new Date;s.arm.gotoAndPlay(2)}break;case" ":var s=t.playerSkin(0);if(s&&!d[0]){this.oGame.getSoundManager().play("shootingCharge2");d[0]=new Date;s.arm.gotoAndPlay(2)}break;case"t":i();break}}.bind(this);this.fnKeyUp=function(e){switch(e.key){case"a":g[0][0]=g[0][0]!==1?0:1;break;case"ArrowLeft":g[1][0]=g[1][0]!==1?0:1;break;case"d":g[0][0]=g[0][0]!==-1?0:-1;break;case"ArrowRight":g[1][0]=g[1][0]!==-1?0:-1;break;case"w":var a=t.playerSkin(0);if(a){this.oGame.getSoundManager().stop("Raketenduese");if(a.recoveringFromHit){a.gotoAndPlay("stayHit")}else{a.gotoAndPlay("stay")}}g[0][1]=g[0][1]!==1?0:1;break;case"ArrowUp":var a=t.playerSkin(1);if(a){this.oGame.getSoundManager().stop("Raketenduese");if(a.recoveringFromHit){a.gotoAndPlay("stayHit")}else{a.gotoAndPlay("stay")}}g[1][1]=g[1][1]!==1?0:1;break;case"s":g[0][1]=g[0][1]!==-1?0:-1;break;case"ArrowDown":g[1][1]=g[1][1]!==-1?0:-1;break;case"v":break;case"0":break;case"Enter":var a=t.playerSkin(1);if(a){this.oGame.getSoundManager().stop("shootingCharge1");a.arm.gotoAndPlay("default");this.throwControl(2,Date.now()-d[1]);d[1]=false}break;case" ":var a=t.playerSkin(0);if(a){this.oGame.getSoundManager().stop("shootingCharge2");a.arm.gotoAndPlay("default");this.throwControl(1,Date.now()-d[0]);d[0]=false}break;case"b":var a=t.playerSkin(0);if(a){this.throwBomb(1)}break;case",":var a=t.playerSkin(1);if(a){this.throwBomb(2)}break}}.bind(this);document.addEventListener("keydown",this.fnKeyDown);document.addEventListener("keyup",this.fnKeyUp);setTimeout(()=>{this.throwControl(1,3e3/this._iDifficulty);this.throwControl(2,3e3/this._iDifficulty)},1e3)})},spawnGameObject:function(e){var i;if(e.spriteSheet){i=new createjs.Sprite(e.spriteSheet,e.spriteSheetAnimation)}else if(e.assetId){i=new createjs.Bitmap(o.getResult(e.assetId))}else if(e.control){i=new createjs.Bitmap;i.image=e.control._image;a.setTimeout(()=>{if(i&&i.image){i.image=e.control._imageBlocked;i.blocked=true}},2e3)}if(e.regX){i.regX=e.regX}else{i.regX=parseInt(e.width/2,10)}if(e.regY){i.regY=e.regY}else{i.regY=parseInt(e.height/2,10)}Object.keys(e).forEach(function(t){i[t]=e[t]});this.stage.addChild(i);if(e.spriteSheet){var s="blue";if(e.playerNumber===2){s="red"}var r=new createjs.SpriteSheet({framerate:1,images:[1,2,3,4,5,6,7,8].map(function(e){return o.getResult(s+"Arm"+e)}),frames:{height:150,count:8,width:200},animations:{default:[0,0],loading:[1,7,"loading",30]}});var n=new createjs.Sprite(r,"default");n.scaleX=.66;n.scaleY=.66;this.stage.addChild(n);i.arm=n}if(e.hasBox2dBody===true){return t.createGameObjectBodyAndActor(i,this._iDifficulty)}return i},updateDirection:function(e,t){if(e.x>=t.x){e.direction=-1;t.direction=1}else{e.direction=1;t.direction=-1}if(e.playerNumber===1&&(e.direction===1&&e.scaleX<0||e.direction===-1&&e.scaleX>0)||e.playerNumber===2&&(e.direction===-1&&e.scaleX<0||e.direction===1&&e.scaleX>0)){e.scaleX*=-1;e.arm.scaleX*=-1;e.directionChanges+=1}},throwControl:function(e,i){var s=this.oControlManager.getContent();var r=t.playerSkin(e-1).playerLvl;var n=s[r>s.length?s.length-1:r-1];var o=t.playerSkin(0);var l=t.playerSkin(1);var h=e===1?o:l;var d=e===1?l:o;this.updateDirection(h,d);if(!h.controlThrowingCooldown){h.controlThrowingCooldown=true;a.setTimeout(function(){if(h){h.controlThrowingCooldown=false}},200);var g=h.x;var c=h.y;if(h.direction===-1){g-=h.width/2+n._image.width;g-10}this.oGame.getSoundManager().play("Controlshot");this.spawnGameObject({gameObjectType:t.types.gameObjects.CONTROL,shapeType:t.types.shapes.POLYGON,control:n,width:n._image.width,height:n._image.height,x:g,y:c,snapToPixel:true,mouseEnabled:false,density:1,isStaticBody:false,hasBox2dBody:true,direction:h.direction,createdBy:e,createdAt:Date.now(),loadedTime:i})}},throwBomb:function(e){if(this.oGame.hasBombEnergy(e)){t.applyBombEffect(this.oGame.getSoundManager());this.oGame.getSoundManager().play("shoot")}else{this.oGame.getSoundManager().play("badHit")}this.oGame.bomb(e)},updateRobotArms:function(){t.playerSkin().forEach(function(e){var t=0;if(e.currentAnimation==="flyHit"||e.currentAnimation==="stayHit"){e.arm.visible=false;return}else if(e.currentAnimation==="fly"){t=-15}e.arm.visible=true;var a=1;if(e.directionChanges%2===1){a=-1}if(e.direction===1){e.arm.x=e.x-70*a;e.arm.y=e.y-20+t}else{e.arm.x=e.x-70*a;e.arm.y=e.y-20+t}})},tick:function(e){var a=e.delta/1e3;this._skyline1.x=this._skyline1.x-a*30;if(this._skyline1.x+this._skyline1.image.width*this._skyline1.scaleX<=0){this._skyline1.x=1238}if(this._skyline1.x<=-r){this._skyline1.x=0}this._skyline2.x=this._skyline2.x-a*30;if(this._skyline2.x+this._skyline2.image.width*this._skyline2.scaleX<=0){this._skyline2.x=1238}if(this._skyline2.x<=0){this._skyline2.x=r}var i=e.delta/1e3;this._hill1.x=this._hill1.x-i*60;if(this._hill1.x+this._hill1.image.width*this._hill1.scaleX<=0){this._hill1.x=1464}if(this._hill1.x<=-r){this._hill1.x=0}this._hill2.x=this._hill2.x-i*60;if(this._hill2.x+this._hill2.image.width*this._hill2.scaleX<=0){this._hill2.x=1464}if(this._hill2.x<=0){this._hill2.x=r}this.fnMove(g,a);t.update();if(this.stage){this.updateRobotArms();this.stage.update()}},fnMove:function(e,a){e.forEach(function(e,i){var s=t.playerBody(i).GetPosition();var n=t.playerSkin(i);if(s&&s.x!==undefined&&s.y!==undefined){var o=e[0],l=e[1];var h=t.playerBody(i).GetLinearVelocity();h.x=o*a*200;if(o>0){h.x=Math.min(h.x,10);if(i===0&&n.x+n.width/2>r/2){h.x=0}}else if(o<0){h.x=Math.max(h.x,-10);if(i===1&&n.x-n.width/2<r/2){h.x=0}}if(o===0){h.x=0}h.y=h.y+l*a*50;if(l===0||n.y<=50||n.recoveringFromHit){h.y=1}else if(l>0){h.y=Math.min(h.y,10)}else if(l<0){h.y=Math.max(h.y,-10)}if(jQuery.sap.getUriParameters().get("debug-move")){jQuery.sap.log("velocity x: "+h.x+", velocity y:"+h.y+", direction x:"+o+", direction y:"+l)}t.playerBody(i).SetFixedRotation(true);t.playerBody(i).SetLinearVelocity(h)}})},spawnLaserParticle:function(e){var i=(new Date).getTime();var s;var r=t.playerSkin(0);var n=t.playerSkin(1);var o=e===1?r:n;var l=e===1?n:r;this.updateDirection(o,l);var h=a.setInterval(function(){s=(new Date).getTime();if(s-i>=1e3){clearInterval(h)}else{this.oGame.getSoundManager().play("laser");var a={assetId:e===1?"laser_blue":"laser_red",gameObjectType:t.types.gameObjects.LASERPARTICLE,shapeType:t.types.shapes.POLYGON,width:71.5,height:67.5,x:o.direction===1?o.x-25:o.x-160,y:o.y-50,regX:0,regY:33.75,snapToPixel:true,mouseEnabled:false,density:1,isStaticBody:false,hasBox2dBody:true,direction:o.direction,createdBy:e,createdAt:Date.now()};this.spawnGameObject(a)}}.bind(this),150)},exit:function(){return new Promise(function(e,i){if(this.stage){createjs.Tween.removeAllTweens();this.stage.removeAllChildren();createjs.Ticker.removeAllEventListeners();t.destroy();delete this.stage}a.clearAll();document.removeEventListener("keydown",this.fnKeyDown);document.removeEventListener("keyup",this.fnKeyUp);e()}.bind(this))},setDifficulty:function(e){this._iDifficulty=Math.min(e,50)}})});
},
	"flush/levels/UncontrollableMultiplayer/helper/random.js":function(){sap.ui.define([],function(){"use strict";return{getInt:function(t,n){t=Math.ceil(t);n=Math.floor(n);return Math.floor(Math.random()*(n-t))+t}}});
},
	"flush/levels/UncontrollableMultiplayer/helper/time.js":function(){sap.ui.define(function(){"use strict";return{timeouts:[],intervals:[],setTimeout:function(t,e){var i=setTimeout(t,e);this.timeouts.push(i);return i},setInterval:function(t,e){var i=setInterval(t,e);this.intervals.push(i);return i},clearAllTimeout:function(){for(var t=0;t<this.timeouts.length;t++){window.clearTimeout(this.timeouts[t])}this.timeouts=[]},clearAllIntervals:function(){for(var t=0;t<this.intervals.length;t++){window.clearInterval(this.intervals[t])}this.intervals=[]},clearAll:function(){this.clearAllTimeout();this.clearAllIntervals()}}});
},
	"flush/levels/UncontrollableMultiplayer/levelManifest.json":'{"manifest":[{"id":"bgSkyline","src":"skyline.png"},{"id":"robotBlueStay","src":"b1.png"},{"id":"robotBlueFly","src":"b8.png"},{"id":"robotBlueFlyHit1","src":"b14.png"},{"id":"robotBlueFlyHit2","src":"b15.png"},{"id":"robotBlueFlyHit3","src":"b16.png"},{"id":"robotBlueFlyHit4","src":"b17.png"},{"id":"robotBlueStayHit1","src":"b20.png"},{"id":"robotBlueStayHit2","src":"b21.png"},{"id":"robotBlueStayHit3","src":"b22.png"},{"id":"robotBlueStayHit4","src":"b23.png"},{"id":"blueArm1","src":"b_arm_1.png"},{"id":"blueArm2","src":"b_arm_2.png"},{"id":"blueArm3","src":"b_arm_3.png"},{"id":"blueArm4","src":"b_arm_4.png"},{"id":"blueArm5","src":"b_arm_5.png"},{"id":"blueArm6","src":"b_arm_6.png"},{"id":"blueArm7","src":"b_arm_7.png"},{"id":"blueArm8","src":"b_arm_8.png"},{"id":"redArm1","src":"r_arm_1.png"},{"id":"redArm2","src":"r_arm_2.png"},{"id":"redArm3","src":"r_arm_3.png"},{"id":"redArm4","src":"r_arm_4.png"},{"id":"redArm5","src":"r_arm_5.png"},{"id":"redArm6","src":"r_arm_6.png"},{"id":"redArm7","src":"r_arm_7.png"},{"id":"redArm8","src":"r_arm_8.png"},{"id":"robotRedFlyHit1","src":"r14.png"},{"id":"robotRedFlyHit2","src":"r15.png"},{"id":"robotRedFlyHit3","src":"r16.png"},{"id":"robotRedFlyHit4","src":"r17.png"},{"id":"robotRedStayHit1","src":"r20.png"},{"id":"robotRedStayHit2","src":"r21.png"},{"id":"robotRedStayHit3","src":"r22.png"},{"id":"robotRedStayHit4","src":"r23.png"},{"id":"robotRedStay","src":"r1.png"},{"id":"robotRedFly","src":"r8.png"},{"id":"phoenix","src":"phoenix.png"},{"id":"cloud","src":"clouds.png"},{"id":"hill","src":"hill.png"},{"id":"laser","src":"laserbeamsmall.png"},{"id":"laser_blue","src":"laser_blue.png"},{"id":"laser_red","src":"laser_red.png"},{"id":"phoenixBlue","src":"phoenix_blue.png"},{"id":"phoenixGrey","src":"phoenix_grey.png"},{"id":"phoenixRed","src":"phoenix_red.png"},{"id":"bgSpinne","src":"Spinne.png"},{"id":"bgWolkenkratzer","src":"Wolkenkratzer.png"},{"id":"bgUI5","src":"UI5.png"},{"id":"bgLasVegas","src":"LasVegas.png"},{"id":"bgBarcelona","src":"Barcelona.png"},{"id":"bgBaeume","src":"Baeume.png"},{"id":"bgTropfsteinhoele","src":"Tropfsteinhoele.png"},{"id":"bomb1","src":"weappon_charging_1.png"},{"id":"bomb2","src":"weappon_charging_2.png"},{"id":"bomb3","src":"weappon_charging_3.png"},{"id":"bomb4","src":"weappon_charging_4.png"},{"id":"bomb5","src":"weappon_charging_5.png"},{"id":"bomb6","src":"weappon_charging_6.png"},{"id":"bomb7","src":"weappon_charging_7.png"}]}',
	"flush/levels/UncontrollableMultiplayer/physics/box2DHelper.js":function(){sap.ui.define(["sap/ui/base/EventProvider","./../helper/time"],function(e,t){"use strict";var a={PLAYER:1,PLAYERBOTTOM:2,RENDERMANAGER:3,CONTROL:4,LASERPARTICLE:5,LEFTWALL:6,RIGHTWALL:7,FLOOR:8,ROOF:9,CONTROLPACKAGE:10};var i={POLYGON:1,CIRCLE:2};var r,n,o;var s=1,y=20,p=1/y;var b=30;var d=Date.now();var u=0;var c=[];var h=[];var l=[];var v={};var O=[];var f;var m=function(){};var D=function(){};var T=function(){};var A={};var L;var B=[];var R=Box2D.Common.Math.b2Vec2;var C=Box2D.Dynamics.b2BodyDef;var g=Box2D.Dynamics.b2Body;var G=Box2D.Dynamics.b2FixtureDef;var x=Box2D.Dynamics.b2World;var w=Box2D.Collision.Shapes.b2PolygonShape;var E=Box2D.Collision.Shapes.b2CircleShape;var S=Box2D.Dynamics.b2DebugDraw;var k=Box2D.Dynamics.b2ContactListener;var P=function(e,i,y,p,d,u,h){r=e.width;n=e.height;o=i.getContext("2d");m=y;D=u;T=p;h=h;f=d;L=new x(new R(0,3),true);var l=new S;l.SetSprite(o);l.SetDrawScale(b);l.SetFillAlpha(.7);l.SetLineThickness(1);l.SetFlags(S.e_shapeBit|S.e_jointBit);L.SetDebugDraw(l);var v=new G;v.density=1;v.restitution=.5;v.shape=new w;v.shape.SetAsBox(r/b,s/b);var O=new C;O.type=g.b2_staticBody;O.position.x=0;O.position.y=-1e3/b;O.userData={gameObjectType:a.ROOF};var A=L.CreateBody(O);A.CreateFixture(v);var B=new G;B.density=1;B.restitution=.5;B.shape=new w;B.shape.SetAsBox(r/b,s/b);var E=new C;E.type=g.b2_staticBody;E.position.x=0;E.position.y=n/b;E.userData={gameObjectType:a.FLOOR};var P=L.CreateBody(E);P.CreateFixture(B);var j=new G;j.shape=new w;j.density=1;j.shape.SetAsBox(s/b,n+1e3/b);var N=new C;N.type=g.b2_staticBody;N.position.x=0;N.position.y=n/b;N.userData={gameObjectType:a.LEFTWALL};var U=L.CreateBody(N);U.CreateFixture(j);var F=new G;F.shape=new w;F.density=1;F.shape.SetAsBox(s/b,n+1e3/b);var Y=new C;Y.type=g.b2_staticBody;Y.position.x=r/b;Y.position.y=n/b;Y.userData={gameObjectType:a.RIGHTWALL};var I=L.CreateBody(Y);I.CreateFixture(F);var _=new k;_.BeginContact=function(e){var i=e.GetFixtureA();var r=e.GetFixtureB();var n={a:{fixture:i,body:i.GetBody(),skin:i.GetBody()&&i.GetBody().skin},b:{fixture:r,body:r.GetBody(),skin:r.GetBody()&&r.GetBody().skin}};n.a.type=n.a.fixture&&n.a.fixture.GetUserData()&&n.a.fixture.GetUserData().gameObjectType||n.a.body&&n.a.body.GetUserData()&&n.a.body.GetUserData().gameObjectType;n.b.type=n.b.fixture&&n.b.fixture.GetUserData()&&n.b.fixture.GetUserData().gameObjectType||n.b.body&&n.b.body.GetUserData()&&n.b.body.GetUserData().gameObjectType;if(n.a.body.GetUserData()&&n.a.body.GetUserData().gameObjectType&&n.a.body.GetUserData().gameObjectType===a.PLAYER&&n.a.type!==a.PLAYERBOTTOM&&n.b.type===a.CONTROL||n.b.body.GetUserData()&&n.b.body.GetUserData().gameObjectType&&n.b.body.GetUserData().gameObjectType===a.PLAYER&&n.b.type!==a.PLAYERBOTTOM&&n.a.type===a.CONTROL){var o=n.a.type===a.CONTROL?n.a.skin:n.b.skin;m(n.a.skin&&n.a.skin.playerNumber||n.b.skin&&n.b.skin.playerNumber,o);return}if(n.a.type===a.LASERPARTICLE||n.b.type===a.LASERPARTICLE){var s=n.a.type===a.LASERPARTICLE;var y=n.b.type===a.LASERPARTICLE;if(s&&y){if(n.a.body&&n.a.body.m_userData!==undefined){c.push(n.a.body)}if(n.b.body&&n.b.body.m_userData!==undefined){c.push(n.b.body)}}else{var p=s?n.a:n.b;var b=s?n.b:n.a;if(b.type===a.PLAYER&&b.skin&&b.skin.playerNumber&&p.skin&&p.skin.createdBy&&p.skin.createdBy!==b.skin.playerNumber){if(p.body.m_userData!==undefined){c.push(p.body)}}if(b.type===a.CONTROL&&b.body.m_userData!==undefined){h.play("laserHitsControl");c.push(b.body)}}}if((n.a.type===a.PLAYER||n.a.type===a.PLAYERBOTTOM)&&n.b.type===a.CONTROLPACKAGE&&!n.b.body.GetUserData().collected){n.b.body.GetUserData().collected=true;T(n.a.skin.playerNumber,n.b.skin);t.setTimeout(function(){c.push(n.b.body)},1e3)}else if((n.b.type===a.PLAYER||n.a.type===a.PLAYERBOTTOM)&&n.a.type===a.CONTROLPACKAGE&&!n.a.body.GetUserData().collected){n.a.body.GetUserData().collected=true;T(n.b.skin.playerNumber,n.a.skin);t.setTimeout(function(){if(n.a.body&&n.a.body.GetUserData()!==null){c.push(n.a.body)}},1e3)}};L.SetContactListener(_)};var j=function(e,t){this.body=e;this.skin=t;this.update=function(){this.skin.rotation=this.body.GetAngle()*(180/Math.PI);this.skin.x=this.body.GetWorldCenter().x*b;this.skin.y=this.body.GetWorldCenter().y*b};B.push(this)};var N=function(e,t){var r=new G;r.density=e.density;r.restitution=.1;var n=new C;if(e.shapeType==i.POLYGON){r.shape=new w;if(e.gameObjectType==a.PLAYER){r.shape.SetAsBox(e.width/b/2,(e.height-30)/b/2)}else{r.shape.SetAsBox(e.width/b/2,e.height/b/2)}n.position.x=(e.x+e.width/2)/b;n.position.y=(e.y+e.height/2)/b}if(e.shapeType==i.CIRCLE){r.shape=new E(e.width/2/b);n.position.x=e.x/b;n.position.y=e.y/b}if(e.isStaticBody===true){n.type=g.b2_staticBody}else{n.type=g.b2_dynamicBody}var o=L.CreateBody(n);o.skin=e;if(e.gameObjectType==a.LASERPARTICLE){o.SetFixedRotation(true);o.ApplyForce(new R(0,-3),new R(0,1));o.ApplyImpulse(new R(e.direction*75,-2),o.GetPosition());O.push({body:o,skin:e})}if(e.gameObjectType==a.PLAYER){v[e.playerNumber-1]={body:o,skin:e}}if(e.gameObjectType==a.PLAYER){var s=new G;s.density=e.density;s.restitution=.1;s.shape=new w;s.shape.SetAsOrientedBox(e.width/b/2,13/b,new R(0,e.height/2/b));s.userData={gameObjectType:a.PLAYERBOTTOM};o.CreateFixture(s)}var y=o.CreateFixture(r);y.skin=e;if(e.gameObjectType==a.CONTROL){var p=Math.min(e.loadedTime/1e3,3);o.ApplyImpulse(new R(p*25*e.direction*t*o.m_mass/10,0),o.GetPosition())}var d=new j(o,e);var u={actor:d,gameObjectType:e.gameObjectType};if(e.gameObjectType===a.CONTROLPACKAGE){u.collected=false}if(e.gameObjectType===a.CONTROL||e.gameObjectType===a.CONTROLPACKAGE){o.objSkin=e;h.push(o)}else{l.push(o)}o.SetUserData(u);return o};var U=function(){var e=Date.now();var t=e-d;u+=t;d=e;while(u>=y){for(var a=0,i=c.length;a<i;a++){D(c[a].GetUserData()&&c[a].GetUserData().actor,B);c[a].SetUserData(null);L.DestroyBody(c[a])}c=[];for(var a=0,i=B.length;a<i;a++){B[a].update()}L.Step(p,10,10);u-=y;L.ClearForces();L.m_debugDraw.m_sprite.graphics.clear();L.DrawDebugData();if(h.length>30){c.push(h[0]);h.splice(0,1)}}};var F=function(){for(var e=0;e<h.length;e++){c.push(h[e])}};var Y=function(e){function a(e,t){e=Math.ceil(e);t=Math.floor(t);return Math.floor(Math.random()*(t-e))+e}function i(i,r,n){var o=1/n;function s(e){var a=t.setInterval(function(){i[e].objSkin.alpha-=o;if(i[e].objSkin.alpha<=0){clearInterval(a);c.push(i[e])}},r*1e3/n)}for(var y=0;y<i.length;y++){i[y].ApplyImpulse(new R(a(50,200)*f,a(3e3,5e3)*f),i[y].GetPosition());e.play("big_bomb");s(y)}}i(h,.5,50)};var I=function(e){if(e){p=0}else{p=1/y}d=Date.now()};var _=function(){};return{init:P,applyBombEffect:Y,update:U,createGameObjectBodyAndActor:N,pauseResume:I,playerBody:function(e){return v[String(e)].body},playerSkin:function(e){if(e!==undefined){return v[String(e)].skin}else{return Object.keys(v).map(function(e){return v[e].skin})}},removeAllControls:F,types:{gameObjects:a,shapes:i},destroy:_}});
},
	"flush/levels/WhackABug/Level.js":function(){sap.ui.define(["sap/ui/base/Object","sap/ui/Device"],function(t,e){"use strict";var s;var i=[152,594,1052,154,593,1053];var a=[87,150,86,560,463,560];var r=false;var o=25;var h=20;return t.extend("flush.game.levels.WhackABug",{constructor:function(t,e){this._oGame=t;this._oCanvas=e[0];this._boundKeyDown=this._fnKeyDown.bind(this);this._boundKeyUp=this._fnKeyUp.bind(this);this._keyboardInputX=0;this._keyboardInputY=0;this._iScaleFactor=1},init:function(){return new Promise(function(t,e){this._fnInitResolve=t;this.stage=new createjs.Stage(this._oCanvas.getId());createjs.Touch.enable(this.stage);var i=[{src:"bg.png",id:"bg"},{src:"Gut1.png",id:"gut1"},{src:"Gut2.png",id:"gut2"},{src:"Gut3.png",id:"gut3"},{src:"Gut4.png",id:"gut4"},{src:"Gut5.png",id:"gut5"},{src:"Gut6.png",id:"gut6"},{src:"Boese1.png",id:"boese1"},{src:"Boese2.png",id:"boese2"},{src:"hammer.png",id:"hammer"}];this.stage.mouseEventsEnabled=true;s=new createjs.LoadQueue(false);s.addEventListener("complete",this.onLoadingCompleted.bind(this));s.loadManifest(i,true,sap.ui.require.toUrl("flush/game/levels/WhackABug/assets")+"/");document.addEventListener("keydown",this._boundKeyDown);document.addEventListener("keyup",this._boundKeyUp)}.bind(this))},exit:function(){return new Promise(function(t,e){if(this.stage){this.stage.removeAllChildren();createjs.Ticker.removeAllEventListeners();createjs.Tween.removeAllTweens();this.stage=null}document.removeEventListener("keydown",this._boundKeyDown);document.removeEventListener("keyup",this._boundKeyUp);t()}.bind(this))},setDifficulty:function(t){this._iDifficulty=Math.min(t,50)},onLoadingCompleted:function(){var t=new createjs.Bitmap(s.getResult("bg"));if(e.system.phone){if(document.body.offsetWidth<document.body.offsetHeight){this._iScaleFactor=.97}else{this._iScaleFactor=.635}}t.scaleX=this._iScaleFactor;t.scaleY=this._iScaleFactor;this.stage.addChild(t);this.myCursor=new createjs.Bitmap(s.getResult("hammer"));this.myCursor.mouseEnabled=false;this.stage.addChild(this.myCursor);this.stage.mouseX=this._oCanvas.$().width()/2;this.stage.mouseY=this._oCanvas.$().height()/2;createjs.Ticker.timingMode=createjs.Ticker.RAF;createjs.Ticker.setInterval(25);createjs.Ticker.setFPS(40);createjs.Ticker.addEventListener("tick",createjs.Tween);createjs.Ticker.addEventListener("tick",function(t){this.stage.update();if(this._previousMouseX!==this.stage.mouseX){this.myCursor.x=this.stage.mouseX-120}else{this.myCursor.x+=this._keyboardInputX;this._keyboardInputX=0}if(this._previousMouseY!==this.stage.mouseY){this.myCursor.y=this.stage.mouseY-80}else{this.myCursor.y+=this._keyboardInputY;this._keyboardInputY=0}this._previousMouseX=this.stage.mouseX;this._previousMouseY=this.stage.mouseY;this.myCursor.x=Math.max(0,this.myCursor.x);this.myCursor.x=Math.min(this.myCursor.x,this._oCanvas.$().width()-75);this.myCursor.y=Math.max(0,this.myCursor.y);this.myCursor.y=Math.min(this.myCursor.y,this._oCanvas.$().height()-75);this.stage.setChildIndex(this.myCursor,this.stage.getNumChildren()-1)}.bind(this));this.stage.on("click",this._hammered.bind(this));this.showGoodBug();this.showBadBug();this._fnInitResolve()},_fnKeyDown:function(t){var e=t.key;if(e===" "||e==="Enter"){this.bugKeyboard();return}switch(e){case"ArrowLeft":case"a":this._iIntervalLeft=setInterval(function(){this._keyboardInputX-=o}.bind(this),h);break;case"ArrowRight":case"d":this._iIntervalRight=setInterval(function(){this._keyboardInputX+=o}.bind(this),h);break;case"ArrowUp":case"w":this._iIntervalUp=setInterval(function(){this._keyboardInputY-=o}.bind(this),h);break;case"ArrowDown":case"s":this._iIntervalDown=setInterval(function(){this._keyboardInputY+=o}.bind(this),h);break}},_fnKeyUp:function(t){switch(t.key){case"ArrowLeft":case"a":clearInterval(this._iIntervalLeft);break;case"ArrowRight":case"d":clearInterval(this._iIntervalRight);break;case"ArrowUp":case"w":clearInterval(this._iIntervalUp);break;case"ArrowDown":case"s":clearInterval(this._iIntervalDown);break}},_hammered:function(){createjs.Tween.get(this.myCursor).to({rotation:60,rotationDir:-1},100).to({rotation:30},100).to({rotation:10,rotationDir:-1},100)},bugKeyboard:function(){var t;this._hammered();var e=this.stage.getObjectsUnderPoint(this.myCursor.x+120,this.myCursor.y+80);for(var s=0;s<e.length;s++){if(e[s].image){t=[this.myCursor.x+120,this.myCursor.y+80];if(e[s].image.src.indexOf("Boese")>=0){this.badBugHit({rawX:t[0],rawY:t[1]})}else if(e[s].image.src.indexOf("Gut")>=0){this.goodBugHit({rawX:t[0],rawY:t[1]})}}}},showBadBug:function(){var t=Math.floor(Math.random()*i.length);if(t!==this.randomPos&&i[t]*this._iScaleFactor<document.body.offsetWidth&&a[t]*this._iScaleFactor<document.body.offsetHeight){if(this.lastBadBug!=null){this.lastBadBug.removeAllEventListeners();this.stage.removeChild(this.lastBadBug);this.lastBadBug=null}var e=Math.floor(Math.random()*2*Math.max(this._iDifficulty/10,1));this.badBug=new createjs.Bitmap(s.getResult("boese"+e));this.badBug.scaleX=this._iScaleFactor;this.badBug.scaleY=this._iScaleFactor;this.badBug.x=i[t]*this._iScaleFactor;this.badBug.y=a[t]*this._iScaleFactor-(r?18:0);this.stage.addChild(this.badBug);this.badBug.on("click",this.badBugHit.bind(this));this.lastBadBug=this.badBug;this.lastBadBug.scaleY*=.3;this.lastBadBug.y+=42*this._iScaleFactor;var o=4e3/(1.5+this._iDifficulty/5);createjs.Tween.get(this.lastBadBug).to({scaleY:1*this._iScaleFactor,y:a[t]*this._iScaleFactor-(r?18:0)},200).wait(o).call(function(){this.showBadBug()}.bind(this))}else{this.showBadBug()}},badBugHit:function(t){this._oGame.getSoundManager().play("hammer");this._oGame.triggerEvent("Awesome");this._oGame.score(100*this._iDifficulty/10,[t.rawX,t.rawY]);this.lastBadBug.removeAllEventListeners();this.stage.removeChild(this.lastBadBug);this.lastBadBug=null},showGoodBug:function(){this.randomPos=Math.floor(Math.random()*i.length);if(i[this.randomPos]*this._iScaleFactor<document.body.offsetWidth&&a[this.randomPos]*this._iScaleFactor<document.body.offsetHeight){if(this.lastBug!=null){this.lastBug.removeAllEventListeners();this.stage.removeChild(this.lastBug);this.lastBug=null}var t=Math.floor(Math.random()*6*Math.max(this._iDifficulty/10,1));this.bug=new createjs.Bitmap(s.getResult("gut"+t));this.bug.scaleX=this._iScaleFactor;this.bug.scaleY=this._iScaleFactor;this.bug.x=i[this.randomPos]*this._iScaleFactor;this.bug.y=a[this.randomPos]*this._iScaleFactor;this.stage.addChild(this.bug);this.bug.on("click",this.goodBugHit.bind(this));this.lastBug=this.bug;this.lastBug.scaleY*=.4;this.lastBug.y+=42*this._iScaleFactor;var e=6e3/(1+this._iDifficulty/4);createjs.Tween.get(this.lastBug).to({scaleY:1*this._iScaleFactor,y:a[this.randomPos]*this._iScaleFactor},200).wait(e).call(function(){this.showGoodBug()}.bind(this))}else{this.showGoodBug()}},goodBugHit:function(t){this._oGame.getSoundManager().play("hammer");this._oGame.triggerEvent("Ohno");this._oGame.score(-100*this._iDifficulty/5,[t.rawX,t.rawY]);this.lastBug.removeAllEventListeners();this.stage.removeChild(this.lastBug);this.lastBug=null}})});
},
	"flush/loading.js":function(){(function(){var n=["Checking Faulty Circuits","Charging Chromatic Laser","Rebooting AI Core System","Instantiating Evil Robot Army","Polishing communication antenna","Booting up sound system","Inspecting Software Bugs","Analyzing Data Lake","Taming Render Manager","Updating Fusion Drive"];function t(){setTimeout(function(){var a=Math.floor(Math.random()*n.length);document.getElementsByClassName("status")[0].innerHTML=n[a];n.splice(a,1);if(n.length>0){t()}},300+Math.random()*500)}t()})();
},
	"flush/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"flush","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"1.0.0"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json"},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"rootView":{"viewName":"flush.game.view.App","type":"XML","async":true,"id":"app"},"dependencies":{"minUI5Version":"1.60.0","libs":{"sap.ui.core":{},"sap.m":{},"sap.ui.layout":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"flush.game.i18n.i18n"}}},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","viewPath":"flush.game.view","controlId":"app","controlAggregation":"pages","async":true},"routes":[{"pattern":"home","name":"home","target":"home"},{"pattern":"multi","name":"multi","target":"multi"},{"pattern":"Game/{level}/:difficulty:","name":"game","target":"game"},{"pattern":"Outro","name":"outro","target":"outro"},{"pattern":"","name":"intro","target":"intro"}],"targets":{"home":{"viewId":"home","viewName":"Home"},"multi":{"viewId":"multi","viewName":"Multi"},"intro":{"viewId":"intro","viewName":"Intro"},"game":{"viewId":"game","viewName":"Game"},"outro":{"viewId":"outro","viewName":"Outro"}}},"resources":{"css":[{"uri":"css/style.css"}],"js":[{"uri":"thirdparty/createjs.min.js"},{"uri":"thirdparty/dom-to-image.min.js"},{"uri":"thirdparty/Box2D.js"},{"uri":"thirdparty/balls.js"}]}}}',
	"flush/model/formatter.js":function(){sap.ui.define([],function(){"use strict";return{pictureUrl:function(e){return sap.ui.require.toUrl("flush/game/"+e)},moodText:function(e){var i="Relaxed";if(e>5&&e<10){i="Calm"}else if(e<20){i="Moderate"}else if(e<30){i="Annoyed"}else if(e<50){i="Rude"}else if(e<70){i="Aggressive"}else if(e<90){i="Violent"}else if(e<95){i="Desastrous"}else{i="Killing Spree"}return i}}});
},
	"flush/model/models.js":function(){sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";var t="/sap.ui/custom/";return{createDeviceModel:function(){var t=new e(n);t.setDefaultBindingMode("OneWay");return t},createAppModel:function(n){var r=new e;["help","repo","contact"].forEach(function(e){var i=n.getManifestEntry(t+e);r.setProperty("/"+e,i)}.bind(this));return r}}});
},
	"flush/thirdparty/Box2D.js":'/*\n* Copyright (c) 2006-2007 Erin Catto http://www.gphysics.com\n*\n* This software is provided \'as-is\', without any express or implied\n* warranty.  In no event will the authors be held liable for any damages\n* arising from the use of this software.\n* Permission is granted to anyone to use this software for any purpose,\n* including commercial applications, and to alter it and redistribute it\n* freely, subject to the following restrictions:\n* 1. The origin of this software must not be misrepresented; you must not\n* claim that you wrote the original software. If you use this software\n* in a product, an acknowledgment in the product documentation would be\n* appreciated but is not required.\n* 2. Altered source versions must be plainly marked as such, and must not be\n* misrepresented as being the original software.\n* 3. This notice may not be removed or altered from any source distribution.\n*/\nvar Box2D={};(function(t,i){if(!(Object.prototype.defineProperty instanceof Function)&&Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function){Object.defineProperty=function(t,i,o){if(o.get instanceof Function)t.__defineGetter__(i,o.get);if(o.set instanceof Function)t.__defineSetter__(i,o.set)}}function o(){}t.inherit=function(t,i){var e=t;o.prototype=i.prototype;t.prototype=new o;t.prototype.constructor=e};t.generateCallback=function t(i,o){return function(){o.apply(i,arguments)}};t.NVector=function t(o){if(o===i)o=0;var e=new Array(o||0);for(var n=0;n<o;++n)e[n]=0;return e};t.is=function t(o,e){if(o===null)return false;if(e instanceof Function&&o instanceof e)return true;if(o.constructor.__implements!=i&&o.constructor.__implements[e])return true;return false};t.parseUInt=function(t){return Math.abs(parseInt(t))}})(Box2D);var Vector=Array;var Vector_a2j_Number=Box2D.NVector;if(typeof Box2D==="undefined")Box2D={};if(typeof Box2D.Collision==="undefined")Box2D.Collision={};if(typeof Box2D.Collision.Shapes==="undefined")Box2D.Collision.Shapes={};if(typeof Box2D.Common==="undefined")Box2D.Common={};if(typeof Box2D.Common.Math==="undefined")Box2D.Common.Math={};if(typeof Box2D.Dynamics==="undefined")Box2D.Dynamics={};if(typeof Box2D.Dynamics.Contacts==="undefined")Box2D.Dynamics.Contacts={};if(typeof Box2D.Dynamics.Controllers==="undefined")Box2D.Dynamics.Controllers={};if(typeof Box2D.Dynamics.Joints==="undefined")Box2D.Dynamics.Joints={};(function(){Box2D.Collision.IBroadPhase="Box2D.Collision.IBroadPhase";function t(){t.b2AABB.apply(this,arguments)}Box2D.Collision.b2AABB=t;function i(){i.b2Bound.apply(this,arguments)}Box2D.Collision.b2Bound=i;function o(){o.b2BoundValues.apply(this,arguments);if(this.constructor===o)this.b2BoundValues.apply(this,arguments)}Box2D.Collision.b2BoundValues=o;function e(){e.b2Collision.apply(this,arguments)}Box2D.Collision.b2Collision=e;function n(){n.b2ContactID.apply(this,arguments);if(this.constructor===n)this.b2ContactID.apply(this,arguments)}Box2D.Collision.b2ContactID=n;function s(){s.b2ContactPoint.apply(this,arguments)}Box2D.Collision.b2ContactPoint=s;function r(){r.b2Distance.apply(this,arguments)}Box2D.Collision.b2Distance=r;function a(){a.b2DistanceInput.apply(this,arguments)}Box2D.Collision.b2DistanceInput=a;function l(){l.b2DistanceOutput.apply(this,arguments)}Box2D.Collision.b2DistanceOutput=l;function m(){m.b2DistanceProxy.apply(this,arguments)}Box2D.Collision.b2DistanceProxy=m;function c(){c.b2DynamicTree.apply(this,arguments);if(this.constructor===c)this.b2DynamicTree.apply(this,arguments)}Box2D.Collision.b2DynamicTree=c;function h(){h.b2DynamicTreeBroadPhase.apply(this,arguments)}Box2D.Collision.b2DynamicTreeBroadPhase=h;function _(){_.b2DynamicTreeNode.apply(this,arguments)}Box2D.Collision.b2DynamicTreeNode=_;function p(){p.b2DynamicTreePair.apply(this,arguments)}Box2D.Collision.b2DynamicTreePair=p;function y(){y.b2Manifold.apply(this,arguments);if(this.constructor===y)this.b2Manifold.apply(this,arguments)}Box2D.Collision.b2Manifold=y;function u(){u.b2ManifoldPoint.apply(this,arguments);if(this.constructor===u)this.b2ManifoldPoint.apply(this,arguments)}Box2D.Collision.b2ManifoldPoint=u;function x(){x.b2Point.apply(this,arguments)}Box2D.Collision.b2Point=x;function f(){f.b2RayCastInput.apply(this,arguments);if(this.constructor===f)this.b2RayCastInput.apply(this,arguments)}Box2D.Collision.b2RayCastInput=f;function v(){v.b2RayCastOutput.apply(this,arguments)}Box2D.Collision.b2RayCastOutput=v;function d(){d.b2Segment.apply(this,arguments)}Box2D.Collision.b2Segment=d;function b(){b.b2SeparationFunction.apply(this,arguments)}Box2D.Collision.b2SeparationFunction=b;function D(){D.b2Simplex.apply(this,arguments);if(this.constructor===D)this.b2Simplex.apply(this,arguments)}Box2D.Collision.b2Simplex=D;function B(){B.b2SimplexCache.apply(this,arguments)}Box2D.Collision.b2SimplexCache=B;function C(){C.b2SimplexVertex.apply(this,arguments)}Box2D.Collision.b2SimplexVertex=C;function A(){A.b2TimeOfImpact.apply(this,arguments)}Box2D.Collision.b2TimeOfImpact=A;function S(){S.b2TOIInput.apply(this,arguments)}Box2D.Collision.b2TOIInput=S;function w(){w.b2WorldManifold.apply(this,arguments);if(this.constructor===w)this.b2WorldManifold.apply(this,arguments)}Box2D.Collision.b2WorldManifold=w;function g(){g.ClipVertex.apply(this,arguments)}Box2D.Collision.ClipVertex=g;function M(){M.Features.apply(this,arguments)}Box2D.Collision.Features=M;function V(){V.b2CircleShape.apply(this,arguments);if(this.constructor===V)this.b2CircleShape.apply(this,arguments)}Box2D.Collision.Shapes.b2CircleShape=V;function I(){I.b2EdgeChainDef.apply(this,arguments);if(this.constructor===I)this.b2EdgeChainDef.apply(this,arguments)}Box2D.Collision.Shapes.b2EdgeChainDef=I;function G(){G.b2EdgeShape.apply(this,arguments);if(this.constructor===G)this.b2EdgeShape.apply(this,arguments)}Box2D.Collision.Shapes.b2EdgeShape=G;function L(){L.b2MassData.apply(this,arguments)}Box2D.Collision.Shapes.b2MassData=L;function J(){J.b2PolygonShape.apply(this,arguments);if(this.constructor===J)this.b2PolygonShape.apply(this,arguments)}Box2D.Collision.Shapes.b2PolygonShape=J;function F(){F.b2Shape.apply(this,arguments);if(this.constructor===F)this.b2Shape.apply(this,arguments)}Box2D.Collision.Shapes.b2Shape=F;Box2D.Common.b2internal="Box2D.Common.b2internal";function P(){P.b2Color.apply(this,arguments);if(this.constructor===P)this.b2Color.apply(this,arguments)}Box2D.Common.b2Color=P;function R(){R.b2Settings.apply(this,arguments)}Box2D.Common.b2Settings=R;function T(){T.b2Mat22.apply(this,arguments);if(this.constructor===T)this.b2Mat22.apply(this,arguments)}Box2D.Common.Math.b2Mat22=T;function k(){k.b2Mat33.apply(this,arguments);if(this.constructor===k)this.b2Mat33.apply(this,arguments)}Box2D.Common.Math.b2Mat33=k;function N(){N.b2Math.apply(this,arguments)}Box2D.Common.Math.b2Math=N;function z(){z.b2Sweep.apply(this,arguments)}Box2D.Common.Math.b2Sweep=z;function E(){E.b2Transform.apply(this,arguments);if(this.constructor===E)this.b2Transform.apply(this,arguments)}Box2D.Common.Math.b2Transform=E;function j(){j.b2Vec2.apply(this,arguments);if(this.constructor===j)this.b2Vec2.apply(this,arguments)}Box2D.Common.Math.b2Vec2=j;function O(){O.b2Vec3.apply(this,arguments);if(this.constructor===O)this.b2Vec3.apply(this,arguments)}Box2D.Common.Math.b2Vec3=O;function U(){U.b2Body.apply(this,arguments);if(this.constructor===U)this.b2Body.apply(this,arguments)}Box2D.Dynamics.b2Body=U;function q(){q.b2BodyDef.apply(this,arguments);if(this.constructor===q)this.b2BodyDef.apply(this,arguments)}Box2D.Dynamics.b2BodyDef=q;function K(){K.b2ContactFilter.apply(this,arguments)}Box2D.Dynamics.b2ContactFilter=K;function W(){W.b2ContactImpulse.apply(this,arguments)}Box2D.Dynamics.b2ContactImpulse=W;function X(){X.b2ContactListener.apply(this,arguments)}Box2D.Dynamics.b2ContactListener=X;function Z(){Z.b2ContactManager.apply(this,arguments);if(this.constructor===Z)this.b2ContactManager.apply(this,arguments)}Box2D.Dynamics.b2ContactManager=Z;function H(){H.b2DebugDraw.apply(this,arguments);if(this.constructor===H)this.b2DebugDraw.apply(this,arguments)}Box2D.Dynamics.b2DebugDraw=H;function Y(){Y.b2DestructionListener.apply(this,arguments)}Box2D.Dynamics.b2DestructionListener=Y;function Q(){Q.b2FilterData.apply(this,arguments)}Box2D.Dynamics.b2FilterData=Q;function $(){$.b2Fixture.apply(this,arguments);if(this.constructor===$)this.b2Fixture.apply(this,arguments)}Box2D.Dynamics.b2Fixture=$;function tt(){tt.b2FixtureDef.apply(this,arguments);if(this.constructor===tt)this.b2FixtureDef.apply(this,arguments)}Box2D.Dynamics.b2FixtureDef=tt;function it(){it.b2Island.apply(this,arguments);if(this.constructor===it)this.b2Island.apply(this,arguments)}Box2D.Dynamics.b2Island=it;function ot(){ot.b2TimeStep.apply(this,arguments)}Box2D.Dynamics.b2TimeStep=ot;function et(){et.b2World.apply(this,arguments);if(this.constructor===et)this.b2World.apply(this,arguments)}Box2D.Dynamics.b2World=et;function nt(){nt.b2CircleContact.apply(this,arguments)}Box2D.Dynamics.Contacts.b2CircleContact=nt;function st(){st.b2Contact.apply(this,arguments);if(this.constructor===st)this.b2Contact.apply(this,arguments)}Box2D.Dynamics.Contacts.b2Contact=st;function rt(){rt.b2ContactConstraint.apply(this,arguments);if(this.constructor===rt)this.b2ContactConstraint.apply(this,arguments)}Box2D.Dynamics.Contacts.b2ContactConstraint=rt;function at(){at.b2ContactConstraintPoint.apply(this,arguments)}Box2D.Dynamics.Contacts.b2ContactConstraintPoint=at;function lt(){lt.b2ContactEdge.apply(this,arguments)}Box2D.Dynamics.Contacts.b2ContactEdge=lt;function mt(){mt.b2ContactFactory.apply(this,arguments);if(this.constructor===mt)this.b2ContactFactory.apply(this,arguments)}Box2D.Dynamics.Contacts.b2ContactFactory=mt;function ct(){ct.b2ContactRegister.apply(this,arguments)}Box2D.Dynamics.Contacts.b2ContactRegister=ct;function ht(){ht.b2ContactResult.apply(this,arguments)}Box2D.Dynamics.Contacts.b2ContactResult=ht;function _t(){_t.b2ContactSolver.apply(this,arguments);if(this.constructor===_t)this.b2ContactSolver.apply(this,arguments)}Box2D.Dynamics.Contacts.b2ContactSolver=_t;function pt(){pt.b2EdgeAndCircleContact.apply(this,arguments)}Box2D.Dynamics.Contacts.b2EdgeAndCircleContact=pt;function yt(){yt.b2NullContact.apply(this,arguments);if(this.constructor===yt)this.b2NullContact.apply(this,arguments)}Box2D.Dynamics.Contacts.b2NullContact=yt;function ut(){ut.b2PolyAndCircleContact.apply(this,arguments)}Box2D.Dynamics.Contacts.b2PolyAndCircleContact=ut;function xt(){xt.b2PolyAndEdgeContact.apply(this,arguments)}Box2D.Dynamics.Contacts.b2PolyAndEdgeContact=xt;function ft(){ft.b2PolygonContact.apply(this,arguments)}Box2D.Dynamics.Contacts.b2PolygonContact=ft;function vt(){vt.b2PositionSolverManifold.apply(this,arguments);if(this.constructor===vt)this.b2PositionSolverManifold.apply(this,arguments)}Box2D.Dynamics.Contacts.b2PositionSolverManifold=vt;function dt(){dt.b2BuoyancyController.apply(this,arguments)}Box2D.Dynamics.Controllers.b2BuoyancyController=dt;function bt(){bt.b2ConstantAccelController.apply(this,arguments)}Box2D.Dynamics.Controllers.b2ConstantAccelController=bt;function Dt(){Dt.b2ConstantForceController.apply(this,arguments)}Box2D.Dynamics.Controllers.b2ConstantForceController=Dt;function Bt(){Bt.b2Controller.apply(this,arguments)}Box2D.Dynamics.Controllers.b2Controller=Bt;function Ct(){Ct.b2ControllerEdge.apply(this,arguments)}Box2D.Dynamics.Controllers.b2ControllerEdge=Ct;function At(){At.b2GravityController.apply(this,arguments)}Box2D.Dynamics.Controllers.b2GravityController=At;function St(){St.b2TensorDampingController.apply(this,arguments)}Box2D.Dynamics.Controllers.b2TensorDampingController=St;function wt(){wt.b2DistanceJoint.apply(this,arguments);if(this.constructor===wt)this.b2DistanceJoint.apply(this,arguments)}Box2D.Dynamics.Joints.b2DistanceJoint=wt;function gt(){gt.b2DistanceJointDef.apply(this,arguments);if(this.constructor===gt)this.b2DistanceJointDef.apply(this,arguments)}Box2D.Dynamics.Joints.b2DistanceJointDef=gt;function Mt(){Mt.b2FrictionJoint.apply(this,arguments);if(this.constructor===Mt)this.b2FrictionJoint.apply(this,arguments)}Box2D.Dynamics.Joints.b2FrictionJoint=Mt;function Vt(){Vt.b2FrictionJointDef.apply(this,arguments);if(this.constructor===Vt)this.b2FrictionJointDef.apply(this,arguments)}Box2D.Dynamics.Joints.b2FrictionJointDef=Vt;function It(){It.b2GearJoint.apply(this,arguments);if(this.constructor===It)this.b2GearJoint.apply(this,arguments)}Box2D.Dynamics.Joints.b2GearJoint=It;function Gt(){Gt.b2GearJointDef.apply(this,arguments);if(this.constructor===Gt)this.b2GearJointDef.apply(this,arguments)}Box2D.Dynamics.Joints.b2GearJointDef=Gt;function Lt(){Lt.b2Jacobian.apply(this,arguments)}Box2D.Dynamics.Joints.b2Jacobian=Lt;function Jt(){Jt.b2Joint.apply(this,arguments);if(this.constructor===Jt)this.b2Joint.apply(this,arguments)}Box2D.Dynamics.Joints.b2Joint=Jt;function Ft(){Ft.b2JointDef.apply(this,arguments);if(this.constructor===Ft)this.b2JointDef.apply(this,arguments)}Box2D.Dynamics.Joints.b2JointDef=Ft;function Pt(){Pt.b2JointEdge.apply(this,arguments)}Box2D.Dynamics.Joints.b2JointEdge=Pt;function Rt(){Rt.b2LineJoint.apply(this,arguments);if(this.constructor===Rt)this.b2LineJoint.apply(this,arguments)}Box2D.Dynamics.Joints.b2LineJoint=Rt;function Tt(){Tt.b2LineJointDef.apply(this,arguments);if(this.constructor===Tt)this.b2LineJointDef.apply(this,arguments)}Box2D.Dynamics.Joints.b2LineJointDef=Tt;function kt(){kt.b2MouseJoint.apply(this,arguments);if(this.constructor===kt)this.b2MouseJoint.apply(this,arguments)}Box2D.Dynamics.Joints.b2MouseJoint=kt;function Nt(){Nt.b2MouseJointDef.apply(this,arguments);if(this.constructor===Nt)this.b2MouseJointDef.apply(this,arguments)}Box2D.Dynamics.Joints.b2MouseJointDef=Nt;function zt(){zt.b2PrismaticJoint.apply(this,arguments);if(this.constructor===zt)this.b2PrismaticJoint.apply(this,arguments)}Box2D.Dynamics.Joints.b2PrismaticJoint=zt;function Et(){Et.b2PrismaticJointDef.apply(this,arguments);if(this.constructor===Et)this.b2PrismaticJointDef.apply(this,arguments)}Box2D.Dynamics.Joints.b2PrismaticJointDef=Et;function jt(){jt.b2PulleyJoint.apply(this,arguments);if(this.constructor===jt)this.b2PulleyJoint.apply(this,arguments)}Box2D.Dynamics.Joints.b2PulleyJoint=jt;function Ot(){Ot.b2PulleyJointDef.apply(this,arguments);if(this.constructor===Ot)this.b2PulleyJointDef.apply(this,arguments)}Box2D.Dynamics.Joints.b2PulleyJointDef=Ot;function Ut(){Ut.b2RevoluteJoint.apply(this,arguments);if(this.constructor===Ut)this.b2RevoluteJoint.apply(this,arguments)}Box2D.Dynamics.Joints.b2RevoluteJoint=Ut;function qt(){qt.b2RevoluteJointDef.apply(this,arguments);if(this.constructor===qt)this.b2RevoluteJointDef.apply(this,arguments)}Box2D.Dynamics.Joints.b2RevoluteJointDef=qt;function Kt(){Kt.b2WeldJoint.apply(this,arguments);if(this.constructor===Kt)this.b2WeldJoint.apply(this,arguments)}Box2D.Dynamics.Joints.b2WeldJoint=Kt;function Wt(){Wt.b2WeldJointDef.apply(this,arguments);if(this.constructor===Wt)this.b2WeldJointDef.apply(this,arguments)}Box2D.Dynamics.Joints.b2WeldJointDef=Wt})();Box2D.postDefs=[];(function(){var t=Box2D.Collision.Shapes.b2CircleShape,i=Box2D.Collision.Shapes.b2EdgeChainDef,o=Box2D.Collision.Shapes.b2EdgeShape,e=Box2D.Collision.Shapes.b2MassData,n=Box2D.Collision.Shapes.b2PolygonShape,s=Box2D.Collision.Shapes.b2Shape,r=Box2D.Common.b2Color,a=Box2D.Common.b2internal,l=Box2D.Common.b2Settings,m=Box2D.Common.Math.b2Mat22,c=Box2D.Common.Math.b2Mat33,h=Box2D.Common.Math.b2Math,_=Box2D.Common.Math.b2Sweep,p=Box2D.Common.Math.b2Transform,y=Box2D.Common.Math.b2Vec2,u=Box2D.Common.Math.b2Vec3,x=Box2D.Collision.b2AABB,f=Box2D.Collision.b2Bound,v=Box2D.Collision.b2BoundValues,d=Box2D.Collision.b2Collision,b=Box2D.Collision.b2ContactID,D=Box2D.Collision.b2ContactPoint,B=Box2D.Collision.b2Distance,C=Box2D.Collision.b2DistanceInput,A=Box2D.Collision.b2DistanceOutput,S=Box2D.Collision.b2DistanceProxy,w=Box2D.Collision.b2DynamicTree,g=Box2D.Collision.b2DynamicTreeBroadPhase,M=Box2D.Collision.b2DynamicTreeNode,V=Box2D.Collision.b2DynamicTreePair,I=Box2D.Collision.b2Manifold,G=Box2D.Collision.b2ManifoldPoint,L=Box2D.Collision.b2Point,J=Box2D.Collision.b2RayCastInput,F=Box2D.Collision.b2RayCastOutput,P=Box2D.Collision.b2Segment,R=Box2D.Collision.b2SeparationFunction,T=Box2D.Collision.b2Simplex,k=Box2D.Collision.b2SimplexCache,N=Box2D.Collision.b2SimplexVertex,z=Box2D.Collision.b2TimeOfImpact,E=Box2D.Collision.b2TOIInput,j=Box2D.Collision.b2WorldManifold,O=Box2D.Collision.ClipVertex,U=Box2D.Collision.Features,q=Box2D.Collision.IBroadPhase;x.b2AABB=function(){this.lowerBound=new y;this.upperBound=new y};x.prototype.IsValid=function(){var t=this.upperBound.x-this.lowerBound.x;var i=this.upperBound.y-this.lowerBound.y;var o=t>=0&&i>=0;o=o&&this.lowerBound.IsValid()&&this.upperBound.IsValid();return o};x.prototype.GetCenter=function(){return new y((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)};x.prototype.GetExtents=function(){return new y((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)};x.prototype.Contains=function(t){var i=true;i=i&&this.lowerBound.x<=t.lowerBound.x;i=i&&this.lowerBound.y<=t.lowerBound.y;i=i&&t.upperBound.x<=this.upperBound.x;i=i&&t.upperBound.y<=this.upperBound.y;return i};x.prototype.RayCast=function(t,i){var o=-Number.MAX_VALUE;var e=Number.MAX_VALUE;var n=i.p1.x;var s=i.p1.y;var r=i.p2.x-i.p1.x;var a=i.p2.y-i.p1.y;var l=Math.abs(r);var m=Math.abs(a);var c=t.normal;var h=0;var _=0;var p=0;var y=0;var u=0;{if(l<Number.MIN_VALUE){if(n<this.lowerBound.x||this.upperBound.x<n)return false}else{h=1/r;_=(this.lowerBound.x-n)*h;p=(this.upperBound.x-n)*h;u=-1;if(_>p){y=_;_=p;p=y;u=1}if(_>o){c.x=u;c.y=0;o=_}e=Math.min(e,p);if(o>e)return false}}{if(m<Number.MIN_VALUE){if(s<this.lowerBound.y||this.upperBound.y<s)return false}else{h=1/a;_=(this.lowerBound.y-s)*h;p=(this.upperBound.y-s)*h;u=-1;if(_>p){y=_;_=p;p=y;u=1}if(_>o){c.y=u;c.x=0;o=_}e=Math.min(e,p);if(o>e)return false}}t.fraction=o;return true};x.prototype.TestOverlap=function(t){var i=t.lowerBound.x-this.upperBound.x;var o=t.lowerBound.y-this.upperBound.y;var e=this.lowerBound.x-t.upperBound.x;var n=this.lowerBound.y-t.upperBound.y;if(i>0||o>0)return false;if(e>0||n>0)return false;return true};x.Combine=function(t,i){var o=new x;o.Combine(t,i);return o};x.prototype.Combine=function(t,i){this.lowerBound.x=Math.min(t.lowerBound.x,i.lowerBound.x);this.lowerBound.y=Math.min(t.lowerBound.y,i.lowerBound.y);this.upperBound.x=Math.max(t.upperBound.x,i.upperBound.x);this.upperBound.y=Math.max(t.upperBound.y,i.upperBound.y)};f.b2Bound=function(){};f.prototype.IsLower=function(){return(this.value&1)==0};f.prototype.IsUpper=function(){return(this.value&1)==1};f.prototype.Swap=function(t){var i=this.value;var o=this.proxy;var e=this.stabbingCount;this.value=t.value;this.proxy=t.proxy;this.stabbingCount=t.stabbingCount;t.value=i;t.proxy=o;t.stabbingCount=e};v.b2BoundValues=function(){};v.prototype.b2BoundValues=function(){this.lowerValues=new Vector_a2j_Number;this.lowerValues[0]=0;this.lowerValues[1]=0;this.upperValues=new Vector_a2j_Number;this.upperValues[0]=0;this.upperValues[1]=0};d.b2Collision=function(){};d.ClipSegmentToLine=function(t,i,o,e){if(e===undefined)e=0;var n;var s=0;n=i[0];var r=n.v;n=i[1];var a=n.v;var l=o.x*r.x+o.y*r.y-e;var m=o.x*a.x+o.y*a.y-e;if(l<=0)t[s++].Set(i[0]);if(m<=0)t[s++].Set(i[1]);if(l*m<0){var c=l/(l-m);n=t[s];var h=n.v;h.x=r.x+c*(a.x-r.x);h.y=r.y+c*(a.y-r.y);n=t[s];var _;if(l>0){_=i[0];n.id=_.id}else{_=i[1];n.id=_.id}++s}return s};d.EdgeSeparation=function(t,i,o,e,n){if(o===undefined)o=0;var s=parseInt(t.m_vertexCount);var r=t.m_vertices;var a=t.m_normals;var l=parseInt(e.m_vertexCount);var m=e.m_vertices;var c;var h;c=i.R;h=a[o];var _=c.col1.x*h.x+c.col2.x*h.y;var p=c.col1.y*h.x+c.col2.y*h.y;c=n.R;var y=c.col1.x*_+c.col1.y*p;var u=c.col2.x*_+c.col2.y*p;var x=0;var f=Number.MAX_VALUE;for(var v=0;v<l;++v){h=m[v];var d=h.x*y+h.y*u;if(d<f){f=d;x=v}}h=r[o];c=i.R;var b=i.position.x+(c.col1.x*h.x+c.col2.x*h.y);var D=i.position.y+(c.col1.y*h.x+c.col2.y*h.y);h=m[x];c=n.R;var B=n.position.x+(c.col1.x*h.x+c.col2.x*h.y);var C=n.position.y+(c.col1.y*h.x+c.col2.y*h.y);B-=b;C-=D;var A=B*_+C*p;return A};d.FindMaxSeparation=function(t,i,o,e,n){var s=parseInt(i.m_vertexCount);var r=i.m_normals;var a;var l;l=n.R;a=e.m_centroid;var m=n.position.x+(l.col1.x*a.x+l.col2.x*a.y);var c=n.position.y+(l.col1.y*a.x+l.col2.y*a.y);l=o.R;a=i.m_centroid;m-=o.position.x+(l.col1.x*a.x+l.col2.x*a.y);c-=o.position.y+(l.col1.y*a.x+l.col2.y*a.y);var h=m*o.R.col1.x+c*o.R.col1.y;var _=m*o.R.col2.x+c*o.R.col2.y;var p=0;var y=-Number.MAX_VALUE;for(var u=0;u<s;++u){a=r[u];var x=a.x*h+a.y*_;if(x>y){y=x;p=u}}var f=d.EdgeSeparation(i,o,p,e,n);var v=parseInt(p-1>=0?p-1:s-1);var b=d.EdgeSeparation(i,o,v,e,n);var D=parseInt(p+1<s?p+1:0);var B=d.EdgeSeparation(i,o,D,e,n);var C=0;var A=0;var S=0;if(b>f&&b>B){S=-1;C=v;A=b}else if(B>f){S=1;C=D;A=B}else{t[0]=p;return f}while(true){if(S==-1)p=C-1>=0?C-1:s-1;else p=C+1<s?C+1:0;f=d.EdgeSeparation(i,o,p,e,n);if(f>A){C=p;A=f}else{break}}t[0]=C;return A};d.FindIncidentEdge=function(t,i,o,e,n,s){if(e===undefined)e=0;var r=parseInt(i.m_vertexCount);var a=i.m_normals;var l=parseInt(n.m_vertexCount);var m=n.m_vertices;var c=n.m_normals;var h;var _;h=o.R;_=a[e];var p=h.col1.x*_.x+h.col2.x*_.y;var y=h.col1.y*_.x+h.col2.y*_.y;h=s.R;var u=h.col1.x*p+h.col1.y*y;y=h.col2.x*p+h.col2.y*y;p=u;var x=0;var f=Number.MAX_VALUE;for(var v=0;v<l;++v){_=c[v];var d=p*_.x+y*_.y;if(d<f){f=d;x=v}}var b;var D=parseInt(x);var B=parseInt(D+1<l?D+1:0);b=t[0];_=m[D];h=s.R;b.v.x=s.position.x+(h.col1.x*_.x+h.col2.x*_.y);b.v.y=s.position.y+(h.col1.y*_.x+h.col2.y*_.y);b.id.features.referenceEdge=e;b.id.features.incidentEdge=D;b.id.features.incidentVertex=0;b=t[1];_=m[B];h=s.R;b.v.x=s.position.x+(h.col1.x*_.x+h.col2.x*_.y);b.v.y=s.position.y+(h.col1.y*_.x+h.col2.y*_.y);b.id.features.referenceEdge=e;b.id.features.incidentEdge=B;b.id.features.incidentVertex=1};d.MakeClipPointVector=function(){var t=new Vector(2);t[0]=new O;t[1]=new O;return t};d.CollidePolygons=function(t,i,o,e,n){var s;t.m_pointCount=0;var r=i.m_radius+e.m_radius;var a=0;d.s_edgeAO[0]=a;var m=d.FindMaxSeparation(d.s_edgeAO,i,o,e,n);a=d.s_edgeAO[0];if(m>r)return;var c=0;d.s_edgeBO[0]=c;var h=d.FindMaxSeparation(d.s_edgeBO,e,n,i,o);c=d.s_edgeBO[0];if(h>r)return;var _;var p;var y;var u;var x=0;var f=0;var v=.98;var b=.001;var D;if(h>v*m+b){_=e;p=i;y=n;u=o;x=c;t.m_type=I.e_faceB;f=1}else{_=i;p=e;y=o;u=n;x=a;t.m_type=I.e_faceA;f=0}var B=d.s_incidentEdge;d.FindIncidentEdge(B,_,y,x,p,u);var C=parseInt(_.m_vertexCount);var A=_.m_vertices;var S=A[x];var w;if(x+1<C){w=A[parseInt(x+1)]}else{w=A[0]}var g=d.s_localTangent;g.Set(w.x-S.x,w.y-S.y);g.Normalize();var M=d.s_localNormal;M.x=g.y;M.y=-g.x;var V=d.s_planePoint;V.Set(.5*(S.x+w.x),.5*(S.y+w.y));var G=d.s_tangent;D=y.R;G.x=D.col1.x*g.x+D.col2.x*g.y;G.y=D.col1.y*g.x+D.col2.y*g.y;var L=d.s_tangent2;L.x=-G.x;L.y=-G.y;var J=d.s_normal;J.x=G.y;J.y=-G.x;var F=d.s_v11;var P=d.s_v12;F.x=y.position.x+(D.col1.x*S.x+D.col2.x*S.y);F.y=y.position.y+(D.col1.y*S.x+D.col2.y*S.y);P.x=y.position.x+(D.col1.x*w.x+D.col2.x*w.y);P.y=y.position.y+(D.col1.y*w.x+D.col2.y*w.y);var R=J.x*F.x+J.y*F.y;var T=-G.x*F.x-G.y*F.y+r;var k=G.x*P.x+G.y*P.y+r;var N=d.s_clipPoints1;var z=d.s_clipPoints2;var E=0;E=d.ClipSegmentToLine(N,B,L,T);if(E<2)return;E=d.ClipSegmentToLine(z,N,G,k);if(E<2)return;t.m_localPlaneNormal.SetV(M);t.m_localPoint.SetV(V);var j=0;for(var O=0;O<l.b2_maxManifoldPoints;++O){s=z[O];var U=J.x*s.v.x+J.y*s.v.y-R;if(U<=r){var q=t.m_points[j];D=u.R;var K=s.v.x-u.position.x;var W=s.v.y-u.position.y;q.m_localPoint.x=K*D.col1.x+W*D.col1.y;q.m_localPoint.y=K*D.col2.x+W*D.col2.y;q.m_id.Set(s.id);q.m_id.features.flip=f;++j}}t.m_pointCount=j};d.CollideCircles=function(t,i,o,e,n){t.m_pointCount=0;var s;var r;s=o.R;r=i.m_p;var a=o.position.x+(s.col1.x*r.x+s.col2.x*r.y);var l=o.position.y+(s.col1.y*r.x+s.col2.y*r.y);s=n.R;r=e.m_p;var m=n.position.x+(s.col1.x*r.x+s.col2.x*r.y);var c=n.position.y+(s.col1.y*r.x+s.col2.y*r.y);var h=m-a;var _=c-l;var p=h*h+_*_;var y=i.m_radius+e.m_radius;if(p>y*y){return}t.m_type=I.e_circles;t.m_localPoint.SetV(i.m_p);t.m_localPlaneNormal.SetZero();t.m_pointCount=1;t.m_points[0].m_localPoint.SetV(e.m_p);t.m_points[0].m_id.key=0};d.CollidePolygonAndCircle=function(t,i,o,e,n){t.m_pointCount=0;var s;var r=0;var a=0;var l=0;var m=0;var c;var h;h=n.R;c=e.m_p;var _=n.position.x+(h.col1.x*c.x+h.col2.x*c.y);var p=n.position.y+(h.col1.y*c.x+h.col2.y*c.y);r=_-o.position.x;a=p-o.position.y;h=o.R;var y=r*h.col1.x+a*h.col1.y;var u=r*h.col2.x+a*h.col2.y;var x=0;var f=0;var v=-Number.MAX_VALUE;var d=i.m_radius+e.m_radius;var b=parseInt(i.m_vertexCount);var D=i.m_vertices;var B=i.m_normals;for(var C=0;C<b;++C){c=D[C];r=y-c.x;a=u-c.y;c=B[C];var A=c.x*r+c.y*a;if(A>d){return}if(A>v){v=A;f=C}}var S=parseInt(f);var w=parseInt(S+1<b?S+1:0);var g=D[S];var M=D[w];if(v<Number.MIN_VALUE){t.m_pointCount=1;t.m_type=I.e_faceA;t.m_localPlaneNormal.SetV(B[f]);t.m_localPoint.x=.5*(g.x+M.x);t.m_localPoint.y=.5*(g.y+M.y);t.m_points[0].m_localPoint.SetV(e.m_p);t.m_points[0].m_id.key=0;return}var V=(y-g.x)*(M.x-g.x)+(u-g.y)*(M.y-g.y);var G=(y-M.x)*(g.x-M.x)+(u-M.y)*(g.y-M.y);if(V<=0){if((y-g.x)*(y-g.x)+(u-g.y)*(u-g.y)>d*d)return;t.m_pointCount=1;t.m_type=I.e_faceA;t.m_localPlaneNormal.x=y-g.x;t.m_localPlaneNormal.y=u-g.y;t.m_localPlaneNormal.Normalize();t.m_localPoint.SetV(g);t.m_points[0].m_localPoint.SetV(e.m_p);t.m_points[0].m_id.key=0}else if(G<=0){if((y-M.x)*(y-M.x)+(u-M.y)*(u-M.y)>d*d)return;t.m_pointCount=1;t.m_type=I.e_faceA;t.m_localPlaneNormal.x=y-M.x;t.m_localPlaneNormal.y=u-M.y;t.m_localPlaneNormal.Normalize();t.m_localPoint.SetV(M);t.m_points[0].m_localPoint.SetV(e.m_p);t.m_points[0].m_id.key=0}else{var L=.5*(g.x+M.x);var J=.5*(g.y+M.y);v=(y-L)*B[S].x+(u-J)*B[S].y;if(v>d)return;t.m_pointCount=1;t.m_type=I.e_faceA;t.m_localPlaneNormal.x=B[S].x;t.m_localPlaneNormal.y=B[S].y;t.m_localPlaneNormal.Normalize();t.m_localPoint.Set(L,J);t.m_points[0].m_localPoint.SetV(e.m_p);t.m_points[0].m_id.key=0}};d.TestOverlap=function(t,i){var o=i.lowerBound;var e=t.upperBound;var n=o.x-e.x;var s=o.y-e.y;o=t.lowerBound;e=i.upperBound;var r=o.x-e.x;var a=o.y-e.y;if(n>0||s>0)return false;if(r>0||a>0)return false;return true};Box2D.postDefs.push(function(){Box2D.Collision.b2Collision.s_incidentEdge=d.MakeClipPointVector();Box2D.Collision.b2Collision.s_clipPoints1=d.MakeClipPointVector();Box2D.Collision.b2Collision.s_clipPoints2=d.MakeClipPointVector();Box2D.Collision.b2Collision.s_edgeAO=new Vector_a2j_Number(1);Box2D.Collision.b2Collision.s_edgeBO=new Vector_a2j_Number(1);Box2D.Collision.b2Collision.s_localTangent=new y;Box2D.Collision.b2Collision.s_localNormal=new y;Box2D.Collision.b2Collision.s_planePoint=new y;Box2D.Collision.b2Collision.s_normal=new y;Box2D.Collision.b2Collision.s_tangent=new y;Box2D.Collision.b2Collision.s_tangent2=new y;Box2D.Collision.b2Collision.s_v11=new y;Box2D.Collision.b2Collision.s_v12=new y;Box2D.Collision.b2Collision.b2CollidePolyTempVec=new y;Box2D.Collision.b2Collision.b2_nullFeature=255});b.b2ContactID=function(){this.features=new U};b.prototype.b2ContactID=function(){this.features._m_id=this};b.prototype.Set=function(t){this.key=t._key};b.prototype.Copy=function(){var t=new b;t.key=this.key;return t};Object.defineProperty(b.prototype,"key",{enumerable:false,configurable:true,get:function(){return this._key}});Object.defineProperty(b.prototype,"key",{enumerable:false,configurable:true,set:function(t){if(t===undefined)t=0;this._key=t;this.features._referenceEdge=this._key&255;this.features._incidentEdge=(this._key&65280)>>8&255;this.features._incidentVertex=(this._key&16711680)>>16&255;this.features._flip=(this._key&4278190080)>>24&255}});D.b2ContactPoint=function(){this.position=new y;this.velocity=new y;this.normal=new y;this.id=new b};B.b2Distance=function(){};B.Distance=function(t,i,o){++B.b2_gjkCalls;var e=o.proxyA;var n=o.proxyB;var s=o.transformA;var r=o.transformB;var a=B.s_simplex;a.ReadCache(i,e,s,n,r);var m=a.m_vertices;var c=20;var _=B.s_saveA;var p=B.s_saveB;var u=0;var x=a.GetClosestPoint();var f=x.LengthSquared();var v=f;var d=0;var b;var D=0;while(D<c){u=a.m_count;for(d=0;d<u;d++){_[d]=m[d].indexA;p[d]=m[d].indexB}switch(a.m_count){case 1:break;case 2:a.Solve2();break;case 3:a.Solve3();break;default:l.b2Assert(false)}if(a.m_count==3){break}b=a.GetClosestPoint();v=b.LengthSquared();if(v>f){}f=v;var C=a.GetSearchDirection();if(C.LengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE){break}var A=m[a.m_count];A.indexA=e.GetSupport(h.MulTMV(s.R,C.GetNegative()));A.wA=h.MulX(s,e.GetVertex(A.indexA));A.indexB=n.GetSupport(h.MulTMV(r.R,C));A.wB=h.MulX(r,n.GetVertex(A.indexB));A.w=h.SubtractVV(A.wB,A.wA);++D;++B.b2_gjkIters;var S=false;for(d=0;d<u;d++){if(A.indexA==_[d]&&A.indexB==p[d]){S=true;break}}if(S){break}++a.m_count}B.b2_gjkMaxIters=h.Max(B.b2_gjkMaxIters,D);a.GetWitnessPoints(t.pointA,t.pointB);t.distance=h.SubtractVV(t.pointA,t.pointB).Length();t.iterations=D;a.WriteCache(i);if(o.useRadii){var w=e.m_radius;var g=n.m_radius;if(t.distance>w+g&&t.distance>Number.MIN_VALUE){t.distance-=w+g;var M=h.SubtractVV(t.pointB,t.pointA);M.Normalize();t.pointA.x+=w*M.x;t.pointA.y+=w*M.y;t.pointB.x-=g*M.x;t.pointB.y-=g*M.y}else{b=new y;b.x=.5*(t.pointA.x+t.pointB.x);b.y=.5*(t.pointA.y+t.pointB.y);t.pointA.x=t.pointB.x=b.x;t.pointA.y=t.pointB.y=b.y;t.distance=0}}};Box2D.postDefs.push(function(){Box2D.Collision.b2Distance.s_simplex=new T;Box2D.Collision.b2Distance.s_saveA=new Vector_a2j_Number(3);Box2D.Collision.b2Distance.s_saveB=new Vector_a2j_Number(3)});C.b2DistanceInput=function(){};A.b2DistanceOutput=function(){this.pointA=new y;this.pointB=new y};S.b2DistanceProxy=function(){};S.prototype.Set=function(i){switch(i.GetType()){case s.e_circleShape:{var o=i instanceof t?i:null;this.m_vertices=new Vector(1,true);this.m_vertices[0]=o.m_p;this.m_count=1;this.m_radius=o.m_radius}break;case s.e_polygonShape:{var e=i instanceof n?i:null;this.m_vertices=e.m_vertices;this.m_count=e.m_vertexCount;this.m_radius=e.m_radius}break;default:l.b2Assert(false)}};S.prototype.GetSupport=function(t){var i=0;var o=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y;for(var e=1;e<this.m_count;++e){var n=this.m_vertices[e].x*t.x+this.m_vertices[e].y*t.y;if(n>o){i=e;o=n}}return i};S.prototype.GetSupportVertex=function(t){var i=0;var o=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y;for(var e=1;e<this.m_count;++e){var n=this.m_vertices[e].x*t.x+this.m_vertices[e].y*t.y;if(n>o){i=e;o=n}}return this.m_vertices[i]};S.prototype.GetVertexCount=function(){return this.m_count};S.prototype.GetVertex=function(t){if(t===undefined)t=0;l.b2Assert(0<=t&&t<this.m_count);return this.m_vertices[t]};w.b2DynamicTree=function(){};w.prototype.b2DynamicTree=function(){this.m_root=null;this.m_freeList=null;this.m_path=0;this.m_insertionCount=0};w.prototype.CreateProxy=function(t,i){var o=this.AllocateNode();var e=l.b2_aabbExtension;var n=l.b2_aabbExtension;o.aabb.lowerBound.x=t.lowerBound.x-e;o.aabb.lowerBound.y=t.lowerBound.y-n;o.aabb.upperBound.x=t.upperBound.x+e;o.aabb.upperBound.y=t.upperBound.y+n;o.userData=i;this.InsertLeaf(o);return o};w.prototype.DestroyProxy=function(t){this.RemoveLeaf(t);this.FreeNode(t)};w.prototype.MoveProxy=function(t,i,o){l.b2Assert(t.IsLeaf());if(t.aabb.Contains(i)){return false}this.RemoveLeaf(t);var e=l.b2_aabbExtension+l.b2_aabbMultiplier*(o.x>0?o.x:-o.x);var n=l.b2_aabbExtension+l.b2_aabbMultiplier*(o.y>0?o.y:-o.y);t.aabb.lowerBound.x=i.lowerBound.x-e;t.aabb.lowerBound.y=i.lowerBound.y-n;t.aabb.upperBound.x=i.upperBound.x+e;t.aabb.upperBound.y=i.upperBound.y+n;this.InsertLeaf(t);return true};w.prototype.Rebalance=function(t){if(t===undefined)t=0;if(this.m_root==null)return;for(var i=0;i<t;i++){var o=this.m_root;var e=0;while(o.IsLeaf()==false){o=this.m_path>>e&1?o.child2:o.child1;e=e+1&31}++this.m_path;this.RemoveLeaf(o);this.InsertLeaf(o)}};w.prototype.GetFatAABB=function(t){return t.aabb};w.prototype.GetUserData=function(t){return t.userData};w.prototype.Query=function(t,i){if(this.m_root==null)return;var o=new Vector;var e=0;o[e++]=this.m_root;while(e>0){var n=o[--e];if(n.aabb.TestOverlap(i)){if(n.IsLeaf()){var s=t(n);if(!s)return}else{o[e++]=n.child1;o[e++]=n.child2}}}};w.prototype.RayCast=function(t,i){if(this.m_root==null)return;var o=i.p1;var e=i.p2;var n=h.SubtractVV(o,e);n.Normalize();var s=h.CrossFV(1,n);var r=h.AbsV(s);var a=i.maxFraction;var l=new x;var m=0;var c=0;{m=o.x+a*(e.x-o.x);c=o.y+a*(e.y-o.y);l.lowerBound.x=Math.min(o.x,m);l.lowerBound.y=Math.min(o.y,c);l.upperBound.x=Math.max(o.x,m);l.upperBound.y=Math.max(o.y,c)}var _=new Vector;var p=0;_[p++]=this.m_root;while(p>0){var y=_[--p];if(y.aabb.TestOverlap(l)==false){continue}var u=y.aabb.GetCenter();var f=y.aabb.GetExtents();var v=Math.abs(s.x*(o.x-u.x)+s.y*(o.y-u.y))-r.x*f.x-r.y*f.y;if(v>0)continue;if(y.IsLeaf()){var d=new J;d.p1=i.p1;d.p2=i.p2;d.maxFraction=i.maxFraction;a=t(d,y);if(a==0)return;if(a>0){m=o.x+a*(e.x-o.x);c=o.y+a*(e.y-o.y);l.lowerBound.x=Math.min(o.x,m);l.lowerBound.y=Math.min(o.y,c);l.upperBound.x=Math.max(o.x,m);l.upperBound.y=Math.max(o.y,c)}}else{_[p++]=y.child1;_[p++]=y.child2}}};w.prototype.AllocateNode=function(){if(this.m_freeList){var t=this.m_freeList;this.m_freeList=t.parent;t.parent=null;t.child1=null;t.child2=null;return t}return new M};w.prototype.FreeNode=function(t){t.parent=this.m_freeList;this.m_freeList=t};w.prototype.InsertLeaf=function(t){++this.m_insertionCount;if(this.m_root==null){this.m_root=t;this.m_root.parent=null;return}var i=t.aabb.GetCenter();var o=this.m_root;if(o.IsLeaf()==false){do{var e=o.child1;var n=o.child2;var s=Math.abs((e.aabb.lowerBound.x+e.aabb.upperBound.x)/2-i.x)+Math.abs((e.aabb.lowerBound.y+e.aabb.upperBound.y)/2-i.y);var r=Math.abs((n.aabb.lowerBound.x+n.aabb.upperBound.x)/2-i.x)+Math.abs((n.aabb.lowerBound.y+n.aabb.upperBound.y)/2-i.y);if(s<r){o=e}else{o=n}}while(o.IsLeaf()==false)}var a=o.parent;var l=this.AllocateNode();l.parent=a;l.userData=null;l.aabb.Combine(t.aabb,o.aabb);if(a){if(o.parent.child1==o){a.child1=l}else{a.child2=l}l.child1=o;l.child2=t;o.parent=l;t.parent=l;do{if(a.aabb.Contains(l.aabb))break;a.aabb.Combine(a.child1.aabb,a.child2.aabb);l=a;a=a.parent}while(a)}else{l.child1=o;l.child2=t;o.parent=l;t.parent=l;this.m_root=l}};w.prototype.RemoveLeaf=function(t){if(t==this.m_root){this.m_root=null;return}var i=t.parent;var o=i.parent;var e;if(i.child1==t){e=i.child2}else{e=i.child1}if(o){if(o.child1==i){o.child1=e}else{o.child2=e}e.parent=o;this.FreeNode(i);while(o){var n=o.aabb;o.aabb=x.Combine(o.child1.aabb,o.child2.aabb);if(n.Contains(o.aabb))break;o=o.parent}}else{this.m_root=e;e.parent=null;this.FreeNode(i)}};g.b2DynamicTreeBroadPhase=function(){this.m_tree=new w;this.m_moveBuffer=new Vector;this.m_pairBuffer=new Vector;this.m_pairCount=0};g.prototype.CreateProxy=function(t,i){var o=this.m_tree.CreateProxy(t,i);++this.m_proxyCount;this.BufferMove(o);return o};g.prototype.DestroyProxy=function(t){this.UnBufferMove(t);--this.m_proxyCount;this.m_tree.DestroyProxy(t)};g.prototype.MoveProxy=function(t,i,o){var e=this.m_tree.MoveProxy(t,i,o);if(e){this.BufferMove(t)}};g.prototype.TestOverlap=function(t,i){var o=this.m_tree.GetFatAABB(t);var e=this.m_tree.GetFatAABB(i);return o.TestOverlap(e)};g.prototype.GetUserData=function(t){return this.m_tree.GetUserData(t)};g.prototype.GetFatAABB=function(t){return this.m_tree.GetFatAABB(t)};g.prototype.GetProxyCount=function(){return this.m_proxyCount};g.prototype.UpdatePairs=function(t){var i=this;i.m_pairCount=0;var o=0,e;for(o=0;o<i.m_moveBuffer.length;++o){e=i.m_moveBuffer[o];function n(t){if(t==e)return true;if(i.m_pairCount==i.m_pairBuffer.length){i.m_pairBuffer[i.m_pairCount]=new V}var o=i.m_pairBuffer[i.m_pairCount];o.proxyA=t<e?t:e;o.proxyB=t>=e?t:e;++i.m_pairCount;return true}var s=i.m_tree.GetFatAABB(e);i.m_tree.Query(n,s)}i.m_moveBuffer.length=0;for(var o=0;o<i.m_pairCount;){var r=i.m_pairBuffer[o];var a=i.m_tree.GetUserData(r.proxyA);var l=i.m_tree.GetUserData(r.proxyB);t(a,l);++o;while(o<i.m_pairCount){var m=i.m_pairBuffer[o];if(m.proxyA!=r.proxyA||m.proxyB!=r.proxyB){break}++o}}};g.prototype.Query=function(t,i){this.m_tree.Query(t,i)};g.prototype.RayCast=function(t,i){this.m_tree.RayCast(t,i)};g.prototype.Validate=function(){};g.prototype.Rebalance=function(t){if(t===undefined)t=0;this.m_tree.Rebalance(t)};g.prototype.BufferMove=function(t){this.m_moveBuffer[this.m_moveBuffer.length]=t};g.prototype.UnBufferMove=function(t){var i=parseInt(this.m_moveBuffer.indexOf(t));this.m_moveBuffer.splice(i,1)};g.prototype.ComparePairs=function(t,i){return 0};g.__implements={};g.__implements[q]=true;M.b2DynamicTreeNode=function(){this.aabb=new x};M.prototype.IsLeaf=function(){return this.child1==null};V.b2DynamicTreePair=function(){};I.b2Manifold=function(){this.m_pointCount=0};I.prototype.b2Manifold=function(){this.m_points=new Vector(l.b2_maxManifoldPoints);for(var t=0;t<l.b2_maxManifoldPoints;t++){this.m_points[t]=new G}this.m_localPlaneNormal=new y;this.m_localPoint=new y};I.prototype.Reset=function(){for(var t=0;t<l.b2_maxManifoldPoints;t++){(this.m_points[t]instanceof G?this.m_points[t]:null).Reset()}this.m_localPlaneNormal.SetZero();this.m_localPoint.SetZero();this.m_type=0;this.m_pointCount=0};I.prototype.Set=function(t){this.m_pointCount=t.m_pointCount;for(var i=0;i<l.b2_maxManifoldPoints;i++){(this.m_points[i]instanceof G?this.m_points[i]:null).Set(t.m_points[i])}this.m_localPlaneNormal.SetV(t.m_localPlaneNormal);this.m_localPoint.SetV(t.m_localPoint);this.m_type=t.m_type};I.prototype.Copy=function(){var t=new I;t.Set(this);return t};Box2D.postDefs.push(function(){Box2D.Collision.b2Manifold.e_circles=1;Box2D.Collision.b2Manifold.e_faceA=2;Box2D.Collision.b2Manifold.e_faceB=4});G.b2ManifoldPoint=function(){this.m_localPoint=new y;this.m_id=new b};G.prototype.b2ManifoldPoint=function(){this.Reset()};G.prototype.Reset=function(){this.m_localPoint.SetZero();this.m_normalImpulse=0;this.m_tangentImpulse=0;this.m_id.key=0};G.prototype.Set=function(t){this.m_localPoint.SetV(t.m_localPoint);this.m_normalImpulse=t.m_normalImpulse;this.m_tangentImpulse=t.m_tangentImpulse;this.m_id.Set(t.m_id)};L.b2Point=function(){this.p=new y};L.prototype.Support=function(t,i,o){if(i===undefined)i=0;if(o===undefined)o=0;return this.p};L.prototype.GetFirstVertex=function(t){return this.p};J.b2RayCastInput=function(){this.p1=new y;this.p2=new y};J.prototype.b2RayCastInput=function(t,i,o){if(t===undefined)t=null;if(i===undefined)i=null;if(o===undefined)o=1;if(t)this.p1.SetV(t);if(i)this.p2.SetV(i);this.maxFraction=o};F.b2RayCastOutput=function(){this.normal=new y};P.b2Segment=function(){this.p1=new y;this.p2=new y};P.prototype.TestSegment=function(t,i,o,e){if(e===undefined)e=0;var n=o.p1;var s=o.p2.x-n.x;var r=o.p2.y-n.y;var a=this.p2.x-this.p1.x;var l=this.p2.y-this.p1.y;var m=l;var c=-a;var h=100*Number.MIN_VALUE;var _=-(s*m+r*c);if(_>h){var p=n.x-this.p1.x;var y=n.y-this.p1.y;var u=p*m+y*c;if(0<=u&&u<=e*_){var x=-s*y+r*p;if(-h*_<=x&&x<=_*(1+h)){u/=_;var f=Math.sqrt(m*m+c*c);m/=f;c/=f;t[0]=u;i.Set(m,c);return true}}}return false};P.prototype.Extend=function(t){this.ExtendForward(t);this.ExtendBackward(t)};P.prototype.ExtendForward=function(t){var i=this.p2.x-this.p1.x;var o=this.p2.y-this.p1.y;var e=Math.min(i>0?(t.upperBound.x-this.p1.x)/i:i<0?(t.lowerBound.x-this.p1.x)/i:Number.POSITIVE_INFINITY,o>0?(t.upperBound.y-this.p1.y)/o:o<0?(t.lowerBound.y-this.p1.y)/o:Number.POSITIVE_INFINITY);this.p2.x=this.p1.x+i*e;this.p2.y=this.p1.y+o*e};P.prototype.ExtendBackward=function(t){var i=-this.p2.x+this.p1.x;var o=-this.p2.y+this.p1.y;var e=Math.min(i>0?(t.upperBound.x-this.p2.x)/i:i<0?(t.lowerBound.x-this.p2.x)/i:Number.POSITIVE_INFINITY,o>0?(t.upperBound.y-this.p2.y)/o:o<0?(t.lowerBound.y-this.p2.y)/o:Number.POSITIVE_INFINITY);this.p1.x=this.p2.x+i*e;this.p1.y=this.p2.y+o*e};R.b2SeparationFunction=function(){this.m_localPoint=new y;this.m_axis=new y};R.prototype.Initialize=function(t,i,o,e,n){this.m_proxyA=i;this.m_proxyB=e;var s=parseInt(t.count);l.b2Assert(0<s&&s<3);var r;var a;var m;var c;var _;var p;var u=0;var x=0;var f=0;var v=0;var d=0;var b=0;var D;var B;var C=0;var A=0;if(s==1){this.m_type=R.e_points;r=this.m_proxyA.GetVertex(t.indexA[0]);c=this.m_proxyB.GetVertex(t.indexB[0]);B=r;D=o.R;u=o.position.x+(D.col1.x*B.x+D.col2.x*B.y);x=o.position.y+(D.col1.y*B.x+D.col2.y*B.y);B=c;D=n.R;f=n.position.x+(D.col1.x*B.x+D.col2.x*B.y);v=n.position.y+(D.col1.y*B.x+D.col2.y*B.y);this.m_axis.x=f-u;this.m_axis.y=v-x;this.m_axis.Normalize()}else if(t.indexB[0]==t.indexB[1]){this.m_type=R.e_faceA;a=this.m_proxyA.GetVertex(t.indexA[0]);m=this.m_proxyA.GetVertex(t.indexA[1]);c=this.m_proxyB.GetVertex(t.indexB[0]);this.m_localPoint.x=.5*(a.x+m.x);this.m_localPoint.y=.5*(a.y+m.y);this.m_axis=h.CrossVF(h.SubtractVV(m,a),1);this.m_axis.Normalize();B=this.m_axis;D=o.R;d=D.col1.x*B.x+D.col2.x*B.y;b=D.col1.y*B.x+D.col2.y*B.y;B=this.m_localPoint;D=o.R;u=o.position.x+(D.col1.x*B.x+D.col2.x*B.y);x=o.position.y+(D.col1.y*B.x+D.col2.y*B.y);B=c;D=n.R;f=n.position.x+(D.col1.x*B.x+D.col2.x*B.y);v=n.position.y+(D.col1.y*B.x+D.col2.y*B.y);C=(f-u)*d+(v-x)*b;if(C<0){this.m_axis.NegativeSelf()}}else if(t.indexA[0]==t.indexA[0]){this.m_type=R.e_faceB;_=this.m_proxyB.GetVertex(t.indexB[0]);p=this.m_proxyB.GetVertex(t.indexB[1]);r=this.m_proxyA.GetVertex(t.indexA[0]);this.m_localPoint.x=.5*(_.x+p.x);this.m_localPoint.y=.5*(_.y+p.y);this.m_axis=h.CrossVF(h.SubtractVV(p,_),1);this.m_axis.Normalize();B=this.m_axis;D=n.R;d=D.col1.x*B.x+D.col2.x*B.y;b=D.col1.y*B.x+D.col2.y*B.y;B=this.m_localPoint;D=n.R;f=n.position.x+(D.col1.x*B.x+D.col2.x*B.y);v=n.position.y+(D.col1.y*B.x+D.col2.y*B.y);B=r;D=o.R;u=o.position.x+(D.col1.x*B.x+D.col2.x*B.y);x=o.position.y+(D.col1.y*B.x+D.col2.y*B.y);C=(u-f)*d+(x-v)*b;if(C<0){this.m_axis.NegativeSelf()}}else{a=this.m_proxyA.GetVertex(t.indexA[0]);m=this.m_proxyA.GetVertex(t.indexA[1]);_=this.m_proxyB.GetVertex(t.indexB[0]);p=this.m_proxyB.GetVertex(t.indexB[1]);var S=h.MulX(o,r);var w=h.MulMV(o.R,h.SubtractVV(m,a));var g=h.MulX(n,c);var M=h.MulMV(n.R,h.SubtractVV(p,_));var V=w.x*w.x+w.y*w.y;var I=M.x*M.x+M.y*M.y;var G=h.SubtractVV(M,w);var L=w.x*G.x+w.y*G.y;var J=M.x*G.x+M.y*G.y;var F=w.x*M.x+w.y*M.y;var P=V*I-F*F;C=0;if(P!=0){C=h.Clamp((F*J-L*I)/P,0,1)}var T=(F*C+J)/I;if(T<0){T=0;C=h.Clamp((F-L)/V,0,1)}r=new y;r.x=a.x+C*(m.x-a.x);r.y=a.y+C*(m.y-a.y);c=new y;c.x=_.x+C*(p.x-_.x);c.y=_.y+C*(p.y-_.y);if(C==0||C==1){this.m_type=R.e_faceB;this.m_axis=h.CrossVF(h.SubtractVV(p,_),1);this.m_axis.Normalize();this.m_localPoint=c;B=this.m_axis;D=n.R;d=D.col1.x*B.x+D.col2.x*B.y;b=D.col1.y*B.x+D.col2.y*B.y;B=this.m_localPoint;D=n.R;f=n.position.x+(D.col1.x*B.x+D.col2.x*B.y);v=n.position.y+(D.col1.y*B.x+D.col2.y*B.y);B=r;D=o.R;u=o.position.x+(D.col1.x*B.x+D.col2.x*B.y);x=o.position.y+(D.col1.y*B.x+D.col2.y*B.y);A=(u-f)*d+(x-v)*b;if(C<0){this.m_axis.NegativeSelf()}}else{this.m_type=R.e_faceA;this.m_axis=h.CrossVF(h.SubtractVV(m,a),1);this.m_localPoint=r;B=this.m_axis;D=o.R;d=D.col1.x*B.x+D.col2.x*B.y;b=D.col1.y*B.x+D.col2.y*B.y;B=this.m_localPoint;D=o.R;u=o.position.x+(D.col1.x*B.x+D.col2.x*B.y);x=o.position.y+(D.col1.y*B.x+D.col2.y*B.y);B=c;D=n.R;f=n.position.x+(D.col1.x*B.x+D.col2.x*B.y);v=n.position.y+(D.col1.y*B.x+D.col2.y*B.y);A=(f-u)*d+(v-x)*b;if(C<0){this.m_axis.NegativeSelf()}}}};R.prototype.Evaluate=function(t,i){var o;var e;var n;var s;var r;var a;var m=0;var c;switch(this.m_type){case R.e_points:{o=h.MulTMV(t.R,this.m_axis);e=h.MulTMV(i.R,this.m_axis.GetNegative());n=this.m_proxyA.GetSupportVertex(o);s=this.m_proxyB.GetSupportVertex(e);r=h.MulX(t,n);a=h.MulX(i,s);m=(a.x-r.x)*this.m_axis.x+(a.y-r.y)*this.m_axis.y;return m}case R.e_faceA:{c=h.MulMV(t.R,this.m_axis);r=h.MulX(t,this.m_localPoint);e=h.MulTMV(i.R,c.GetNegative());s=this.m_proxyB.GetSupportVertex(e);a=h.MulX(i,s);m=(a.x-r.x)*c.x+(a.y-r.y)*c.y;return m}case R.e_faceB:{c=h.MulMV(i.R,this.m_axis);a=h.MulX(i,this.m_localPoint);o=h.MulTMV(t.R,c.GetNegative());n=this.m_proxyA.GetSupportVertex(o);r=h.MulX(t,n);m=(r.x-a.x)*c.x+(r.y-a.y)*c.y;return m}default:l.b2Assert(false);return 0}};Box2D.postDefs.push(function(){Box2D.Collision.b2SeparationFunction.e_points=1;Box2D.Collision.b2SeparationFunction.e_faceA=2;Box2D.Collision.b2SeparationFunction.e_faceB=4});T.b2Simplex=function(){this.m_v1=new N;this.m_v2=new N;this.m_v3=new N;this.m_vertices=new Vector(3)};T.prototype.b2Simplex=function(){this.m_vertices[0]=this.m_v1;this.m_vertices[1]=this.m_v2;this.m_vertices[2]=this.m_v3};T.prototype.ReadCache=function(t,i,o,e,n){l.b2Assert(0<=t.count&&t.count<=3);var s;var r;this.m_count=t.count;var a=this.m_vertices;for(var m=0;m<this.m_count;m++){var c=a[m];c.indexA=t.indexA[m];c.indexB=t.indexB[m];s=i.GetVertex(c.indexA);r=e.GetVertex(c.indexB);c.wA=h.MulX(o,s);c.wB=h.MulX(n,r);c.w=h.SubtractVV(c.wB,c.wA);c.a=0}if(this.m_count>1){var _=t.metric;var p=this.GetMetric();if(p<.5*_||2*_<p||p<Number.MIN_VALUE){this.m_count=0}}if(this.m_count==0){c=a[0];c.indexA=0;c.indexB=0;s=i.GetVertex(0);r=e.GetVertex(0);c.wA=h.MulX(o,s);c.wB=h.MulX(n,r);c.w=h.SubtractVV(c.wB,c.wA);this.m_count=1}};T.prototype.WriteCache=function(t){t.metric=this.GetMetric();t.count=Box2D.parseUInt(this.m_count);var i=this.m_vertices;for(var o=0;o<this.m_count;o++){t.indexA[o]=Box2D.parseUInt(i[o].indexA);t.indexB[o]=Box2D.parseUInt(i[o].indexB)}};T.prototype.GetSearchDirection=function(){switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:{var t=h.SubtractVV(this.m_v2.w,this.m_v1.w);var i=h.CrossVV(t,this.m_v1.w.GetNegative());if(i>0){return h.CrossFV(1,t)}else{return h.CrossVF(t,1)}}default:l.b2Assert(false);return new y}};T.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:l.b2Assert(false);return new y;case 1:return this.m_v1.w;case 2:return new y(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:l.b2Assert(false);return new y}};T.prototype.GetWitnessPoints=function(t,i){switch(this.m_count){case 0:l.b2Assert(false);break;case 1:t.SetV(this.m_v1.wA);i.SetV(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x;t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y;i.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x;i.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:i.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x;i.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:l.b2Assert(false);break}};T.prototype.GetMetric=function(){switch(this.m_count){case 0:l.b2Assert(false);return 0;case 1:return 0;case 2:return h.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return h.CrossVV(h.SubtractVV(this.m_v2.w,this.m_v1.w),h.SubtractVV(this.m_v3.w,this.m_v1.w));default:l.b2Assert(false);return 0}};T.prototype.Solve2=function(){var t=this.m_v1.w;var i=this.m_v2.w;var o=h.SubtractVV(i,t);var e=-(t.x*o.x+t.y*o.y);if(e<=0){this.m_v1.a=1;this.m_count=1;return}var n=i.x*o.x+i.y*o.y;if(n<=0){this.m_v2.a=1;this.m_count=1;this.m_v1.Set(this.m_v2);return}var s=1/(n+e);this.m_v1.a=n*s;this.m_v2.a=e*s;this.m_count=2};T.prototype.Solve3=function(){var t=this.m_v1.w;var i=this.m_v2.w;var o=this.m_v3.w;var e=h.SubtractVV(i,t);var n=h.Dot(t,e);var s=h.Dot(i,e);var r=s;var a=-n;var l=h.SubtractVV(o,t);var m=h.Dot(t,l);var c=h.Dot(o,l);var _=c;var p=-m;var y=h.SubtractVV(o,i);var u=h.Dot(i,y);var x=h.Dot(o,y);var f=x;var v=-u;var d=h.CrossVV(e,l);var b=d*h.CrossVV(i,o);var D=d*h.CrossVV(o,t);var B=d*h.CrossVV(t,i);if(a<=0&&p<=0){this.m_v1.a=1;this.m_count=1;return}if(r>0&&a>0&&B<=0){var C=1/(r+a);this.m_v1.a=r*C;this.m_v2.a=a*C;this.m_count=2;return}if(_>0&&p>0&&D<=0){var A=1/(_+p);this.m_v1.a=_*A;this.m_v3.a=p*A;this.m_count=2;this.m_v2.Set(this.m_v3);return}if(r<=0&&v<=0){this.m_v2.a=1;this.m_count=1;this.m_v1.Set(this.m_v2);return}if(_<=0&&f<=0){this.m_v3.a=1;this.m_count=1;this.m_v1.Set(this.m_v3);return}if(f>0&&v>0&&b<=0){var S=1/(f+v);this.m_v2.a=f*S;this.m_v3.a=v*S;this.m_count=2;this.m_v1.Set(this.m_v3);return}var w=1/(b+D+B);this.m_v1.a=b*w;this.m_v2.a=D*w;this.m_v3.a=B*w;this.m_count=3};k.b2SimplexCache=function(){this.indexA=new Vector_a2j_Number(3);this.indexB=new Vector_a2j_Number(3)};N.b2SimplexVertex=function(){};N.prototype.Set=function(t){this.wA.SetV(t.wA);this.wB.SetV(t.wB);this.w.SetV(t.w);this.a=t.a;this.indexA=t.indexA;this.indexB=t.indexB};z.b2TimeOfImpact=function(){};z.TimeOfImpact=function(t){++z.b2_toiCalls;var i=t.proxyA;var o=t.proxyB;var e=t.sweepA;var n=t.sweepB;l.b2Assert(e.t0==n.t0);l.b2Assert(1-e.t0>Number.MIN_VALUE);var s=i.m_radius+o.m_radius;var r=t.tolerance;var a=0;var m=1e3;var c=0;var _=0;z.s_cache.count=0;z.s_distanceInput.useRadii=false;for(;;){e.GetTransform(z.s_xfA,a);n.GetTransform(z.s_xfB,a);z.s_distanceInput.proxyA=i;z.s_distanceInput.proxyB=o;z.s_distanceInput.transformA=z.s_xfA;z.s_distanceInput.transformB=z.s_xfB;B.Distance(z.s_distanceOutput,z.s_cache,z.s_distanceInput);if(z.s_distanceOutput.distance<=0){a=1;break}z.s_fcn.Initialize(z.s_cache,i,z.s_xfA,o,z.s_xfB);var p=z.s_fcn.Evaluate(z.s_xfA,z.s_xfB);if(p<=0){a=1;break}if(c==0){if(p>s){_=h.Max(s-r,.75*s)}else{_=h.Max(p-r,.02*s)}}if(p-_<.5*r){if(c==0){a=1;break}break}var y=a;{var u=a;var x=1;var f=p;e.GetTransform(z.s_xfA,x);n.GetTransform(z.s_xfB,x);var v=z.s_fcn.Evaluate(z.s_xfA,z.s_xfB);if(v>=_){a=1;break}var d=0;for(;;){var b=0;if(d&1){b=u+(_-f)*(x-u)/(v-f)}else{b=.5*(u+x)}e.GetTransform(z.s_xfA,b);n.GetTransform(z.s_xfB,b);var D=z.s_fcn.Evaluate(z.s_xfA,z.s_xfB);if(h.Abs(D-_)<.025*r){y=b;break}if(D>_){u=b;f=D}else{x=b;v=D}++d;++z.b2_toiRootIters;if(d==50){break}}z.b2_toiMaxRootIters=h.Max(z.b2_toiMaxRootIters,d)}if(y<(1+100*Number.MIN_VALUE)*a){break}a=y;c++;++z.b2_toiIters;if(c==m){break}}z.b2_toiMaxIters=h.Max(z.b2_toiMaxIters,c);return a};Box2D.postDefs.push(function(){Box2D.Collision.b2TimeOfImpact.b2_toiCalls=0;Box2D.Collision.b2TimeOfImpact.b2_toiIters=0;Box2D.Collision.b2TimeOfImpact.b2_toiMaxIters=0;Box2D.Collision.b2TimeOfImpact.b2_toiRootIters=0;Box2D.Collision.b2TimeOfImpact.b2_toiMaxRootIters=0;Box2D.Collision.b2TimeOfImpact.s_cache=new k;Box2D.Collision.b2TimeOfImpact.s_distanceInput=new C;Box2D.Collision.b2TimeOfImpact.s_xfA=new p;Box2D.Collision.b2TimeOfImpact.s_xfB=new p;Box2D.Collision.b2TimeOfImpact.s_fcn=new R;Box2D.Collision.b2TimeOfImpact.s_distanceOutput=new A});E.b2TOIInput=function(){this.proxyA=new S;this.proxyB=new S;this.sweepA=new _;this.sweepB=new _};j.b2WorldManifold=function(){this.m_normal=new y};j.prototype.b2WorldManifold=function(){this.m_points=new Vector(l.b2_maxManifoldPoints);for(var t=0;t<l.b2_maxManifoldPoints;t++){this.m_points[t]=new y}};j.prototype.Initialize=function(t,i,o,e,n){if(o===undefined)o=0;if(n===undefined)n=0;if(t.m_pointCount==0){return}var s=0;var r;var a;var l=0;var m=0;var c=0;var h=0;var _=0;var p=0;switch(t.m_type){case I.e_circles:{a=i.R;r=t.m_localPoint;var y=i.position.x+a.col1.x*r.x+a.col2.x*r.y;var u=i.position.y+a.col1.y*r.x+a.col2.y*r.y;a=e.R;r=t.m_points[0].m_localPoint;var x=e.position.x+a.col1.x*r.x+a.col2.x*r.y;var f=e.position.y+a.col1.y*r.x+a.col2.y*r.y;var v=x-y;var d=f-u;var b=v*v+d*d;if(b>Number.MIN_VALUE*Number.MIN_VALUE){var D=Math.sqrt(b);this.m_normal.x=v/D;this.m_normal.y=d/D}else{this.m_normal.x=1;this.m_normal.y=0}var B=y+o*this.m_normal.x;var C=u+o*this.m_normal.y;var A=x-n*this.m_normal.x;var S=f-n*this.m_normal.y;this.m_points[0].x=.5*(B+A);this.m_points[0].y=.5*(C+S)}break;case I.e_faceA:{a=i.R;r=t.m_localPlaneNormal;l=a.col1.x*r.x+a.col2.x*r.y;m=a.col1.y*r.x+a.col2.y*r.y;a=i.R;r=t.m_localPoint;c=i.position.x+a.col1.x*r.x+a.col2.x*r.y;h=i.position.y+a.col1.y*r.x+a.col2.y*r.y;this.m_normal.x=l;this.m_normal.y=m;for(s=0;s<t.m_pointCount;s++){a=e.R;r=t.m_points[s].m_localPoint;_=e.position.x+a.col1.x*r.x+a.col2.x*r.y;p=e.position.y+a.col1.y*r.x+a.col2.y*r.y;this.m_points[s].x=_+.5*(o-(_-c)*l-(p-h)*m-n)*l;this.m_points[s].y=p+.5*(o-(_-c)*l-(p-h)*m-n)*m}}break;case I.e_faceB:{a=e.R;r=t.m_localPlaneNormal;l=a.col1.x*r.x+a.col2.x*r.y;m=a.col1.y*r.x+a.col2.y*r.y;a=e.R;r=t.m_localPoint;c=e.position.x+a.col1.x*r.x+a.col2.x*r.y;h=e.position.y+a.col1.y*r.x+a.col2.y*r.y;this.m_normal.x=-l;this.m_normal.y=-m;for(s=0;s<t.m_pointCount;s++){a=i.R;r=t.m_points[s].m_localPoint;_=i.position.x+a.col1.x*r.x+a.col2.x*r.y;p=i.position.y+a.col1.y*r.x+a.col2.y*r.y;this.m_points[s].x=_+.5*(n-(_-c)*l-(p-h)*m-o)*l;this.m_points[s].y=p+.5*(n-(_-c)*l-(p-h)*m-o)*m}}break}};O.ClipVertex=function(){this.v=new y;this.id=new b};O.prototype.Set=function(t){this.v.SetV(t.v);this.id.Set(t.id)};U.Features=function(){};Object.defineProperty(U.prototype,"referenceEdge",{enumerable:false,configurable:true,get:function(){return this._referenceEdge}});Object.defineProperty(U.prototype,"referenceEdge",{enumerable:false,configurable:true,set:function(t){if(t===undefined)t=0;this._referenceEdge=t;this._m_id._key=this._m_id._key&4294967040|this._referenceEdge&255}});Object.defineProperty(U.prototype,"incidentEdge",{enumerable:false,configurable:true,get:function(){return this._incidentEdge}});Object.defineProperty(U.prototype,"incidentEdge",{enumerable:false,configurable:true,set:function(t){if(t===undefined)t=0;this._incidentEdge=t;this._m_id._key=this._m_id._key&4294902015|this._incidentEdge<<8&65280}});Object.defineProperty(U.prototype,"incidentVertex",{enumerable:false,configurable:true,get:function(){return this._incidentVertex}});Object.defineProperty(U.prototype,"incidentVertex",{enumerable:false,configurable:true,set:function(t){if(t===undefined)t=0;this._incidentVertex=t;this._m_id._key=this._m_id._key&4278255615|this._incidentVertex<<16&16711680}});Object.defineProperty(U.prototype,"flip",{enumerable:false,configurable:true,get:function(){return this._flip}});Object.defineProperty(U.prototype,"flip",{enumerable:false,configurable:true,set:function(t){if(t===undefined)t=0;this._flip=t;this._m_id._key=this._m_id._key&16777215|this._flip<<24&4278190080}})})();(function(){var t=Box2D.Common.b2Color,i=Box2D.Common.b2internal,o=Box2D.Common.b2Settings,e=Box2D.Collision.Shapes.b2CircleShape,n=Box2D.Collision.Shapes.b2EdgeChainDef,s=Box2D.Collision.Shapes.b2EdgeShape,r=Box2D.Collision.Shapes.b2MassData,a=Box2D.Collision.Shapes.b2PolygonShape,l=Box2D.Collision.Shapes.b2Shape,m=Box2D.Common.Math.b2Mat22,c=Box2D.Common.Math.b2Mat33,h=Box2D.Common.Math.b2Math,_=Box2D.Common.Math.b2Sweep,p=Box2D.Common.Math.b2Transform,y=Box2D.Common.Math.b2Vec2,u=Box2D.Common.Math.b2Vec3,x=Box2D.Dynamics.b2Body,f=Box2D.Dynamics.b2BodyDef,v=Box2D.Dynamics.b2ContactFilter,d=Box2D.Dynamics.b2ContactImpulse,b=Box2D.Dynamics.b2ContactListener,D=Box2D.Dynamics.b2ContactManager,B=Box2D.Dynamics.b2DebugDraw,C=Box2D.Dynamics.b2DestructionListener,A=Box2D.Dynamics.b2FilterData,S=Box2D.Dynamics.b2Fixture,w=Box2D.Dynamics.b2FixtureDef,g=Box2D.Dynamics.b2Island,M=Box2D.Dynamics.b2TimeStep,V=Box2D.Dynamics.b2World,I=Box2D.Collision.b2AABB,G=Box2D.Collision.b2Bound,L=Box2D.Collision.b2BoundValues,J=Box2D.Collision.b2Collision,F=Box2D.Collision.b2ContactID,P=Box2D.Collision.b2ContactPoint,R=Box2D.Collision.b2Distance,T=Box2D.Collision.b2DistanceInput,k=Box2D.Collision.b2DistanceOutput,N=Box2D.Collision.b2DistanceProxy,z=Box2D.Collision.b2DynamicTree,E=Box2D.Collision.b2DynamicTreeBroadPhase,j=Box2D.Collision.b2DynamicTreeNode,O=Box2D.Collision.b2DynamicTreePair,U=Box2D.Collision.b2Manifold,q=Box2D.Collision.b2ManifoldPoint,K=Box2D.Collision.b2Point,W=Box2D.Collision.b2RayCastInput,X=Box2D.Collision.b2RayCastOutput,Z=Box2D.Collision.b2Segment,H=Box2D.Collision.b2SeparationFunction,Y=Box2D.Collision.b2Simplex,Q=Box2D.Collision.b2SimplexCache,$=Box2D.Collision.b2SimplexVertex,tt=Box2D.Collision.b2TimeOfImpact,it=Box2D.Collision.b2TOIInput,ot=Box2D.Collision.b2WorldManifold,et=Box2D.Collision.ClipVertex,nt=Box2D.Collision.Features,st=Box2D.Collision.IBroadPhase;Box2D.inherit(e,Box2D.Collision.Shapes.b2Shape);e.prototype.__super=Box2D.Collision.Shapes.b2Shape.prototype;e.b2CircleShape=function(){Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments);this.m_p=new y};e.prototype.Copy=function(){var t=new e;t.Set(this);return t};e.prototype.Set=function(t){this.__super.Set.call(this,t);if(Box2D.is(t,e)){var i=t instanceof e?t:null;this.m_p.SetV(i.m_p)}};e.prototype.TestPoint=function(t,i){var o=t.R;var e=t.position.x+(o.col1.x*this.m_p.x+o.col2.x*this.m_p.y);var n=t.position.y+(o.col1.y*this.m_p.x+o.col2.y*this.m_p.y);e=i.x-e;n=i.y-n;return e*e+n*n<=this.m_radius*this.m_radius};e.prototype.RayCast=function(t,i,o){var e=o.R;var n=o.position.x+(e.col1.x*this.m_p.x+e.col2.x*this.m_p.y);var s=o.position.y+(e.col1.y*this.m_p.x+e.col2.y*this.m_p.y);var r=i.p1.x-n;var a=i.p1.y-s;var l=r*r+a*a-this.m_radius*this.m_radius;var m=i.p2.x-i.p1.x;var c=i.p2.y-i.p1.y;var h=r*m+a*c;var _=m*m+c*c;var p=h*h-_*l;if(p<0||_<Number.MIN_VALUE){return false}var y=-(h+Math.sqrt(p));if(0<=y&&y<=i.maxFraction*_){y/=_;t.fraction=y;t.normal.x=r+y*m;t.normal.y=a+y*c;t.normal.Normalize();return true}return false};e.prototype.ComputeAABB=function(t,i){var o=i.R;var e=i.position.x+(o.col1.x*this.m_p.x+o.col2.x*this.m_p.y);var n=i.position.y+(o.col1.y*this.m_p.x+o.col2.y*this.m_p.y);t.lowerBound.Set(e-this.m_radius,n-this.m_radius);t.upperBound.Set(e+this.m_radius,n+this.m_radius)};e.prototype.ComputeMass=function(t,i){if(i===undefined)i=0;t.mass=i*o.b2_pi*this.m_radius*this.m_radius;t.center.SetV(this.m_p);t.I=t.mass*(.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))};e.prototype.ComputeSubmergedArea=function(t,i,o,e){if(i===undefined)i=0;var n=h.MulX(o,this.m_p);var s=-(h.Dot(t,n)-i);if(s<-this.m_radius+Number.MIN_VALUE){return 0}if(s>this.m_radius){e.SetV(n);return Math.PI*this.m_radius*this.m_radius}var r=this.m_radius*this.m_radius;var a=s*s;var l=r*(Math.asin(s/this.m_radius)+Math.PI/2)+s*Math.sqrt(r-a);var m=-2/3*Math.pow(r-a,1.5)/l;e.x=n.x+t.x*m;e.y=n.y+t.y*m;return l};e.prototype.GetLocalPosition=function(){return this.m_p};e.prototype.SetLocalPosition=function(t){this.m_p.SetV(t)};e.prototype.GetRadius=function(){return this.m_radius};e.prototype.SetRadius=function(t){if(t===undefined)t=0;this.m_radius=t};e.prototype.b2CircleShape=function(t){if(t===undefined)t=0;this.__super.b2Shape.call(this);this.m_type=l.e_circleShape;this.m_radius=t};n.b2EdgeChainDef=function(){};n.prototype.b2EdgeChainDef=function(){this.vertexCount=0;this.isALoop=true;this.vertices=[]};Box2D.inherit(s,Box2D.Collision.Shapes.b2Shape);s.prototype.__super=Box2D.Collision.Shapes.b2Shape.prototype;s.b2EdgeShape=function(){Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments);this.s_supportVec=new y;this.m_v1=new y;this.m_v2=new y;this.m_coreV1=new y;this.m_coreV2=new y;this.m_normal=new y;this.m_direction=new y;this.m_cornerDir1=new y;this.m_cornerDir2=new y};s.prototype.TestPoint=function(t,i){return false};s.prototype.RayCast=function(t,i,o){var e;var n=i.p2.x-i.p1.x;var s=i.p2.y-i.p1.y;e=o.R;var r=o.position.x+(e.col1.x*this.m_v1.x+e.col2.x*this.m_v1.y);var a=o.position.y+(e.col1.y*this.m_v1.x+e.col2.y*this.m_v1.y);var l=o.position.y+(e.col1.y*this.m_v2.x+e.col2.y*this.m_v2.y)-a;var m=-(o.position.x+(e.col1.x*this.m_v2.x+e.col2.x*this.m_v2.y)-r);var c=100*Number.MIN_VALUE;var h=-(n*l+s*m);if(h>c){var _=i.p1.x-r;var p=i.p1.y-a;var y=_*l+p*m;if(0<=y&&y<=i.maxFraction*h){var u=-n*p+s*_;if(-c*h<=u&&u<=h*(1+c)){y/=h;t.fraction=y;var x=Math.sqrt(l*l+m*m);t.normal.x=l/x;t.normal.y=m/x;return true}}}return false};s.prototype.ComputeAABB=function(t,i){var o=i.R;var e=i.position.x+(o.col1.x*this.m_v1.x+o.col2.x*this.m_v1.y);var n=i.position.y+(o.col1.y*this.m_v1.x+o.col2.y*this.m_v1.y);var s=i.position.x+(o.col1.x*this.m_v2.x+o.col2.x*this.m_v2.y);var r=i.position.y+(o.col1.y*this.m_v2.x+o.col2.y*this.m_v2.y);if(e<s){t.lowerBound.x=e;t.upperBound.x=s}else{t.lowerBound.x=s;t.upperBound.x=e}if(n<r){t.lowerBound.y=n;t.upperBound.y=r}else{t.lowerBound.y=r;t.upperBound.y=n}};s.prototype.ComputeMass=function(t,i){if(i===undefined)i=0;t.mass=0;t.center.SetV(this.m_v1);t.I=0};s.prototype.ComputeSubmergedArea=function(t,i,o,e){if(i===undefined)i=0;var n=new y(t.x*i,t.y*i);var s=h.MulX(o,this.m_v1);var r=h.MulX(o,this.m_v2);var a=h.Dot(t,s)-i;var l=h.Dot(t,r)-i;if(a>0){if(l>0){return 0}else{s.x=-l/(a-l)*s.x+a/(a-l)*r.x;s.y=-l/(a-l)*s.y+a/(a-l)*r.y}}else{if(l>0){r.x=-l/(a-l)*s.x+a/(a-l)*r.x;r.y=-l/(a-l)*s.y+a/(a-l)*r.y}else{}}e.x=(n.x+s.x+r.x)/3;e.y=(n.y+s.y+r.y)/3;return.5*((s.x-n.x)*(r.y-n.y)-(s.y-n.y)*(r.x-n.x))};s.prototype.GetLength=function(){return this.m_length};s.prototype.GetVertex1=function(){return this.m_v1};s.prototype.GetVertex2=function(){return this.m_v2};s.prototype.GetCoreVertex1=function(){return this.m_coreV1};s.prototype.GetCoreVertex2=function(){return this.m_coreV2};s.prototype.GetNormalVector=function(){return this.m_normal};s.prototype.GetDirectionVector=function(){return this.m_direction};s.prototype.GetCorner1Vector=function(){return this.m_cornerDir1};s.prototype.GetCorner2Vector=function(){return this.m_cornerDir2};s.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1};s.prototype.Corner2IsConvex=function(){return this.m_cornerConvex2};s.prototype.GetFirstVertex=function(t){var i=t.R;return new y(t.position.x+(i.col1.x*this.m_coreV1.x+i.col2.x*this.m_coreV1.y),t.position.y+(i.col1.y*this.m_coreV1.x+i.col2.y*this.m_coreV1.y))};s.prototype.GetNextEdge=function(){return this.m_nextEdge};s.prototype.GetPrevEdge=function(){return this.m_prevEdge};s.prototype.Support=function(t,i,o){if(i===undefined)i=0;if(o===undefined)o=0;var e=t.R;var n=t.position.x+(e.col1.x*this.m_coreV1.x+e.col2.x*this.m_coreV1.y);var s=t.position.y+(e.col1.y*this.m_coreV1.x+e.col2.y*this.m_coreV1.y);var r=t.position.x+(e.col1.x*this.m_coreV2.x+e.col2.x*this.m_coreV2.y);var a=t.position.y+(e.col1.y*this.m_coreV2.x+e.col2.y*this.m_coreV2.y);if(n*i+s*o>r*i+a*o){this.s_supportVec.x=n;this.s_supportVec.y=s}else{this.s_supportVec.x=r;this.s_supportVec.y=a}return this.s_supportVec};s.prototype.b2EdgeShape=function(t,i){this.__super.b2Shape.call(this);this.m_type=l.e_edgeShape;this.m_prevEdge=null;this.m_nextEdge=null;this.m_v1=t;this.m_v2=i;this.m_direction.Set(this.m_v2.x-this.m_v1.x,this.m_v2.y-this.m_v1.y);this.m_length=this.m_direction.Normalize();this.m_normal.Set(this.m_direction.y,-this.m_direction.x);this.m_coreV1.Set(-o.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-o.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y);this.m_coreV2.Set(-o.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-o.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y);this.m_cornerDir1=this.m_normal;this.m_cornerDir2.Set(-this.m_normal.x,-this.m_normal.y)};s.prototype.SetPrevEdge=function(t,i,o,e){this.m_prevEdge=t;this.m_coreV1=i;this.m_cornerDir1=o;this.m_cornerConvex1=e};s.prototype.SetNextEdge=function(t,i,o,e){this.m_nextEdge=t;this.m_coreV2=i;this.m_cornerDir2=o;this.m_cornerConvex2=e};r.b2MassData=function(){this.mass=0;this.center=new y(0,0);this.I=0};Box2D.inherit(a,Box2D.Collision.Shapes.b2Shape);a.prototype.__super=Box2D.Collision.Shapes.b2Shape.prototype;a.b2PolygonShape=function(){Box2D.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments)};a.prototype.Copy=function(){var t=new a;t.Set(this);return t};a.prototype.Set=function(t){this.__super.Set.call(this,t);if(Box2D.is(t,a)){var i=t instanceof a?t:null;this.m_centroid.SetV(i.m_centroid);this.m_vertexCount=i.m_vertexCount;this.Reserve(this.m_vertexCount);for(var o=0;o<this.m_vertexCount;o++){this.m_vertices[o].SetV(i.m_vertices[o]);this.m_normals[o].SetV(i.m_normals[o])}}};a.prototype.SetAsArray=function(t,i){if(i===undefined)i=0;var o=new Vector;var e=0,n;for(e=0;e<t.length;++e){n=t[e];o.push(n)}this.SetAsVector(o,i)};a.AsArray=function(t,i){if(i===undefined)i=0;var o=new a;o.SetAsArray(t,i);return o};a.prototype.SetAsVector=function(t,i){if(i===undefined)i=0;if(i==0)i=t.length;o.b2Assert(2<=i);this.m_vertexCount=i;this.Reserve(i);var e=0;for(e=0;e<this.m_vertexCount;e++){this.m_vertices[e].SetV(t[e])}for(e=0;e<this.m_vertexCount;++e){var n=parseInt(e);var s=parseInt(e+1<this.m_vertexCount?e+1:0);var r=h.SubtractVV(this.m_vertices[s],this.m_vertices[n]);o.b2Assert(r.LengthSquared()>Number.MIN_VALUE);this.m_normals[e].SetV(h.CrossVF(r,1));this.m_normals[e].Normalize()}this.m_centroid=a.ComputeCentroid(this.m_vertices,this.m_vertexCount)};a.AsVector=function(t,i){if(i===undefined)i=0;var o=new a;o.SetAsVector(t,i);return o};a.prototype.SetAsBox=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;this.m_vertexCount=4;this.Reserve(4);this.m_vertices[0].Set(-t,-i);this.m_vertices[1].Set(t,-i);this.m_vertices[2].Set(t,i);this.m_vertices[3].Set(-t,i);this.m_normals[0].Set(0,-1);this.m_normals[1].Set(1,0);this.m_normals[2].Set(0,1);this.m_normals[3].Set(-1,0);this.m_centroid.SetZero()};a.AsBox=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;var o=new a;o.SetAsBox(t,i);return o};a.prototype.SetAsOrientedBox=function(t,i,o,e){if(t===undefined)t=0;if(i===undefined)i=0;if(o===undefined)o=null;if(e===undefined)e=0;this.m_vertexCount=4;this.Reserve(4);this.m_vertices[0].Set(-t,-i);this.m_vertices[1].Set(t,-i);this.m_vertices[2].Set(t,i);this.m_vertices[3].Set(-t,i);this.m_normals[0].Set(0,-1);this.m_normals[1].Set(1,0);this.m_normals[2].Set(0,1);this.m_normals[3].Set(-1,0);this.m_centroid=o;var n=new p;n.position=o;n.R.Set(e);for(var s=0;s<this.m_vertexCount;++s){this.m_vertices[s]=h.MulX(n,this.m_vertices[s]);this.m_normals[s]=h.MulMV(n.R,this.m_normals[s])}};a.AsOrientedBox=function(t,i,o,e){if(t===undefined)t=0;if(i===undefined)i=0;if(o===undefined)o=null;if(e===undefined)e=0;var n=new a;n.SetAsOrientedBox(t,i,o,e);return n};a.prototype.SetAsEdge=function(t,i){this.m_vertexCount=2;this.Reserve(2);this.m_vertices[0].SetV(t);this.m_vertices[1].SetV(i);this.m_centroid.x=.5*(t.x+i.x);this.m_centroid.y=.5*(t.y+i.y);this.m_normals[0]=h.CrossVF(h.SubtractVV(i,t),1);this.m_normals[0].Normalize();this.m_normals[1].x=-this.m_normals[0].x;this.m_normals[1].y=-this.m_normals[0].y};a.AsEdge=function(t,i){var o=new a;o.SetAsEdge(t,i);return o};a.prototype.TestPoint=function(t,i){var o;var e=t.R;var n=i.x-t.position.x;var s=i.y-t.position.y;var r=n*e.col1.x+s*e.col1.y;var a=n*e.col2.x+s*e.col2.y;for(var l=0;l<this.m_vertexCount;++l){o=this.m_vertices[l];n=r-o.x;s=a-o.y;o=this.m_normals[l];var m=o.x*n+o.y*s;if(m>0){return false}}return true};a.prototype.RayCast=function(t,i,o){var e=0;var n=i.maxFraction;var s=0;var r=0;var a;var l;s=i.p1.x-o.position.x;r=i.p1.y-o.position.y;a=o.R;var m=s*a.col1.x+r*a.col1.y;var c=s*a.col2.x+r*a.col2.y;s=i.p2.x-o.position.x;r=i.p2.y-o.position.y;a=o.R;var h=s*a.col1.x+r*a.col1.y;var _=s*a.col2.x+r*a.col2.y;var p=h-m;var y=_-c;var u=parseInt(-1);for(var x=0;x<this.m_vertexCount;++x){l=this.m_vertices[x];s=l.x-m;r=l.y-c;l=this.m_normals[x];var f=l.x*s+l.y*r;var v=l.x*p+l.y*y;if(v==0){if(f<0){return false}}else{if(v<0&&f<e*v){e=f/v;u=x}else if(v>0&&f<n*v){n=f/v}}if(n<e-Number.MIN_VALUE){return false}}if(u>=0){t.fraction=e;a=o.R;l=this.m_normals[u];t.normal.x=a.col1.x*l.x+a.col2.x*l.y;t.normal.y=a.col1.y*l.x+a.col2.y*l.y;return true}return false};a.prototype.ComputeAABB=function(t,i){var o=i.R;var e=this.m_vertices[0];var n=i.position.x+(o.col1.x*e.x+o.col2.x*e.y);var s=i.position.y+(o.col1.y*e.x+o.col2.y*e.y);var r=n;var a=s;for(var l=1;l<this.m_vertexCount;++l){e=this.m_vertices[l];var m=i.position.x+(o.col1.x*e.x+o.col2.x*e.y);var c=i.position.y+(o.col1.y*e.x+o.col2.y*e.y);n=n<m?n:m;s=s<c?s:c;r=r>m?r:m;a=a>c?a:c}t.lowerBound.x=n-this.m_radius;t.lowerBound.y=s-this.m_radius;t.upperBound.x=r+this.m_radius;t.upperBound.y=a+this.m_radius};a.prototype.ComputeMass=function(t,i){if(i===undefined)i=0;if(this.m_vertexCount==2){t.center.x=.5*(this.m_vertices[0].x+this.m_vertices[1].x);t.center.y=.5*(this.m_vertices[0].y+this.m_vertices[1].y);t.mass=0;t.I=0;return}var o=0;var e=0;var n=0;var s=0;var r=0;var a=0;var l=1/3;for(var m=0;m<this.m_vertexCount;++m){var c=this.m_vertices[m];var h=m+1<this.m_vertexCount?this.m_vertices[parseInt(m+1)]:this.m_vertices[0];var _=c.x-r;var p=c.y-a;var y=h.x-r;var u=h.y-a;var x=_*u-p*y;var f=.5*x;n+=f;o+=f*l*(r+c.x+h.x);e+=f*l*(a+c.y+h.y);var v=r;var d=a;var b=_;var D=p;var B=y;var C=u;var A=l*(.25*(b*b+B*b+B*B)+(v*b+v*B))+.5*v*v;var S=l*(.25*(D*D+C*D+C*C)+(d*D+d*C))+.5*d*d;s+=x*(A+S)}t.mass=i*n;o*=1/n;e*=1/n;t.center.Set(o,e);t.I=i*s};a.prototype.ComputeSubmergedArea=function(t,i,o,e){if(i===undefined)i=0;var n=h.MulTMV(o.R,t);var s=i-h.Dot(t,o.position);var a=new Vector_a2j_Number;var l=0;var m=parseInt(-1);var c=parseInt(-1);var _=false;var p=0;for(p=0;p<this.m_vertexCount;++p){a[p]=h.Dot(n,this.m_vertices[p])-s;var u=a[p]<-Number.MIN_VALUE;if(p>0){if(u){if(!_){m=p-1;l++}}else{if(_){c=p-1;l++}}}_=u}switch(l){case 0:if(_){var x=new r;this.ComputeMass(x,1);e.SetV(h.MulX(o,x.center));return x.mass}else{return 0}break;case 1:if(m==-1){m=this.m_vertexCount-1}else{c=this.m_vertexCount-1}break}var f=parseInt((m+1)%this.m_vertexCount);var v=parseInt((c+1)%this.m_vertexCount);var d=(0-a[m])/(a[f]-a[m]);var b=(0-a[c])/(a[v]-a[c]);var D=new y(this.m_vertices[m].x*(1-d)+this.m_vertices[f].x*d,this.m_vertices[m].y*(1-d)+this.m_vertices[f].y*d);var B=new y(this.m_vertices[c].x*(1-b)+this.m_vertices[v].x*b,this.m_vertices[c].y*(1-b)+this.m_vertices[v].y*b);var C=0;var A=new y;var S=this.m_vertices[f];var w;p=f;while(p!=v){p=(p+1)%this.m_vertexCount;if(p==v)w=B;else w=this.m_vertices[p];var g=.5*((S.x-D.x)*(w.y-D.y)-(S.y-D.y)*(w.x-D.x));C+=g;A.x+=g*(D.x+S.x+w.x)/3;A.y+=g*(D.y+S.y+w.y)/3;S=w}A.Multiply(1/C);e.SetV(h.MulX(o,A));return C};a.prototype.GetVertexCount=function(){return this.m_vertexCount};a.prototype.GetVertices=function(){return this.m_vertices};a.prototype.GetNormals=function(){return this.m_normals};a.prototype.GetSupport=function(t){var i=0;var o=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y;for(var e=1;e<this.m_vertexCount;++e){var n=this.m_vertices[e].x*t.x+this.m_vertices[e].y*t.y;if(n>o){i=e;o=n}}return i};a.prototype.GetSupportVertex=function(t){var i=0;var o=this.m_vertices[0].x*t.x+this.m_vertices[0].y*t.y;for(var e=1;e<this.m_vertexCount;++e){var n=this.m_vertices[e].x*t.x+this.m_vertices[e].y*t.y;if(n>o){i=e;o=n}}return this.m_vertices[i]};a.prototype.Validate=function(){return false};a.prototype.b2PolygonShape=function(){this.__super.b2Shape.call(this);this.m_type=l.e_polygonShape;this.m_centroid=new y;this.m_vertices=new Vector;this.m_normals=new Vector};a.prototype.Reserve=function(t){if(t===undefined)t=0;for(var i=parseInt(this.m_vertices.length);i<t;i++){this.m_vertices[i]=new y;this.m_normals[i]=new y}};a.ComputeCentroid=function(t,i){if(i===undefined)i=0;var o=new y;var e=0;var n=0;var s=0;var r=1/3;for(var a=0;a<i;++a){var l=t[a];var m=a+1<i?t[parseInt(a+1)]:t[0];var c=l.x-n;var h=l.y-s;var _=m.x-n;var p=m.y-s;var u=c*p-h*_;var x=.5*u;e+=x;o.x+=x*r*(n+l.x+m.x);o.y+=x*r*(s+l.y+m.y)}o.x*=1/e;o.y*=1/e;return o};a.ComputeOBB=function(t,i,o){if(o===undefined)o=0;var e=0;var n=new Vector(o+1);for(e=0;e<o;++e){n[e]=i[e]}n[o]=n[0];var s=Number.MAX_VALUE;for(e=1;e<=o;++e){var r=n[parseInt(e-1)];var a=n[e].x-r.x;var l=n[e].y-r.y;var m=Math.sqrt(a*a+l*l);a/=m;l/=m;var c=-l;var h=a;var _=Number.MAX_VALUE;var p=Number.MAX_VALUE;var y=-Number.MAX_VALUE;var u=-Number.MAX_VALUE;for(var x=0;x<o;++x){var f=n[x].x-r.x;var v=n[x].y-r.y;var d=a*f+l*v;var b=c*f+h*v;if(d<_)_=d;if(b<p)p=b;if(d>y)y=d;if(b>u)u=b}var D=(y-_)*(u-p);if(D<.95*s){s=D;t.R.col1.x=a;t.R.col1.y=l;t.R.col2.x=c;t.R.col2.y=h;var B=.5*(_+y);var C=.5*(p+u);var A=t.R;t.center.x=r.x+(A.col1.x*B+A.col2.x*C);t.center.y=r.y+(A.col1.y*B+A.col2.y*C);t.extents.x=.5*(y-_);t.extents.y=.5*(u-p)}}};Box2D.postDefs.push(function(){Box2D.Collision.Shapes.b2PolygonShape.s_mat=new m});l.b2Shape=function(){};l.prototype.Copy=function(){return null};l.prototype.Set=function(t){this.m_radius=t.m_radius};l.prototype.GetType=function(){return this.m_type};l.prototype.TestPoint=function(t,i){return false};l.prototype.RayCast=function(t,i,o){return false};l.prototype.ComputeAABB=function(t,i){};l.prototype.ComputeMass=function(t,i){if(i===undefined)i=0};l.prototype.ComputeSubmergedArea=function(t,i,o,e){if(i===undefined)i=0;return 0};l.TestOverlap=function(t,i,o,e){var n=new T;n.proxyA=new N;n.proxyA.Set(t);n.proxyB=new N;n.proxyB.Set(o);n.transformA=i;n.transformB=e;n.useRadii=true;var s=new Q;s.count=0;var r=new k;R.Distance(r,s,n);return r.distance<10*Number.MIN_VALUE};l.prototype.b2Shape=function(){this.m_type=l.e_unknownShape;this.m_radius=o.b2_linearSlop};Box2D.postDefs.push(function(){Box2D.Collision.Shapes.b2Shape.e_unknownShape=parseInt(-1);Box2D.Collision.Shapes.b2Shape.e_circleShape=0;Box2D.Collision.Shapes.b2Shape.e_polygonShape=1;Box2D.Collision.Shapes.b2Shape.e_edgeShape=2;Box2D.Collision.Shapes.b2Shape.e_shapeTypeCount=3;Box2D.Collision.Shapes.b2Shape.e_hitCollide=1;Box2D.Collision.Shapes.b2Shape.e_missCollide=0;Box2D.Collision.Shapes.b2Shape.e_startsInsideCollide=parseInt(-1)})})();(function(){var t=Box2D.Common.b2Color,i=Box2D.Common.b2internal,o=Box2D.Common.b2Settings,e=Box2D.Common.Math.b2Mat22,n=Box2D.Common.Math.b2Mat33,s=Box2D.Common.Math.b2Math,r=Box2D.Common.Math.b2Sweep,a=Box2D.Common.Math.b2Transform,l=Box2D.Common.Math.b2Vec2,m=Box2D.Common.Math.b2Vec3;t.b2Color=function(){this._r=0;this._g=0;this._b=0};t.prototype.b2Color=function(t,i,o){if(t===undefined)t=0;if(i===undefined)i=0;if(o===undefined)o=0;this._r=Box2D.parseUInt(255*s.Clamp(t,0,1));this._g=Box2D.parseUInt(255*s.Clamp(i,0,1));this._b=Box2D.parseUInt(255*s.Clamp(o,0,1))};t.prototype.Set=function(t,i,o){if(t===undefined)t=0;if(i===undefined)i=0;if(o===undefined)o=0;this._r=Box2D.parseUInt(255*s.Clamp(t,0,1));this._g=Box2D.parseUInt(255*s.Clamp(i,0,1));this._b=Box2D.parseUInt(255*s.Clamp(o,0,1))};Object.defineProperty(t.prototype,"r",{enumerable:false,configurable:true,set:function(t){if(t===undefined)t=0;this._r=Box2D.parseUInt(255*s.Clamp(t,0,1))}});Object.defineProperty(t.prototype,"g",{enumerable:false,configurable:true,set:function(t){if(t===undefined)t=0;this._g=Box2D.parseUInt(255*s.Clamp(t,0,1))}});Object.defineProperty(t.prototype,"b",{enumerable:false,configurable:true,set:function(t){if(t===undefined)t=0;this._b=Box2D.parseUInt(255*s.Clamp(t,0,1))}});Object.defineProperty(t.prototype,"color",{enumerable:false,configurable:true,get:function(){return this._r<<16|this._g<<8|this._b}});o.b2Settings=function(){};o.b2MixFriction=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;return Math.sqrt(t*i)};o.b2MixRestitution=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;return t>i?t:i};o.b2Assert=function(t){if(!t){throw"Assertion Failed"}};Box2D.postDefs.push(function(){Box2D.Common.b2Settings.VERSION="2.1alpha";Box2D.Common.b2Settings.USHRT_MAX=65535;Box2D.Common.b2Settings.b2_pi=Math.PI;Box2D.Common.b2Settings.b2_maxManifoldPoints=2;Box2D.Common.b2Settings.b2_aabbExtension=.1;Box2D.Common.b2Settings.b2_aabbMultiplier=2;Box2D.Common.b2Settings.b2_polygonRadius=2*o.b2_linearSlop;Box2D.Common.b2Settings.b2_linearSlop=.005;Box2D.Common.b2Settings.b2_angularSlop=2/180*o.b2_pi;Box2D.Common.b2Settings.b2_toiSlop=8*o.b2_linearSlop;Box2D.Common.b2Settings.b2_maxTOIContactsPerIsland=32;Box2D.Common.b2Settings.b2_maxTOIJointsPerIsland=32;Box2D.Common.b2Settings.b2_velocityThreshold=1;Box2D.Common.b2Settings.b2_maxLinearCorrection=.2;Box2D.Common.b2Settings.b2_maxAngularCorrection=8/180*o.b2_pi;Box2D.Common.b2Settings.b2_maxTranslation=2;Box2D.Common.b2Settings.b2_maxTranslationSquared=o.b2_maxTranslation*o.b2_maxTranslation;Box2D.Common.b2Settings.b2_maxRotation=.5*o.b2_pi;Box2D.Common.b2Settings.b2_maxRotationSquared=o.b2_maxRotation*o.b2_maxRotation;Box2D.Common.b2Settings.b2_contactBaumgarte=.2;Box2D.Common.b2Settings.b2_timeToSleep=.5;Box2D.Common.b2Settings.b2_linearSleepTolerance=.01;Box2D.Common.b2Settings.b2_angularSleepTolerance=2/180*o.b2_pi})})();(function(){var t=Box2D.Collision.b2AABB,i=Box2D.Common.b2Color,o=Box2D.Common.b2internal,e=Box2D.Common.b2Settings,n=Box2D.Common.Math.b2Mat22,s=Box2D.Common.Math.b2Mat33,r=Box2D.Common.Math.b2Math,a=Box2D.Common.Math.b2Sweep,l=Box2D.Common.Math.b2Transform,m=Box2D.Common.Math.b2Vec2,c=Box2D.Common.Math.b2Vec3;n.b2Mat22=function(){this.col1=new m;this.col2=new m};n.prototype.b2Mat22=function(){this.SetIdentity()};n.FromAngle=function(t){if(t===undefined)t=0;var i=new n;i.Set(t);return i};n.FromVV=function(t,i){var o=new n;o.SetVV(t,i);return o};n.prototype.Set=function(t){if(t===undefined)t=0;var i=Math.cos(t);var o=Math.sin(t);this.col1.x=i;this.col2.x=-o;this.col1.y=o;this.col2.y=i};n.prototype.SetVV=function(t,i){this.col1.SetV(t);this.col2.SetV(i)};n.prototype.Copy=function(){var t=new n;t.SetM(this);return t};n.prototype.SetM=function(t){this.col1.SetV(t.col1);this.col2.SetV(t.col2)};n.prototype.AddM=function(t){this.col1.x+=t.col1.x;this.col1.y+=t.col1.y;this.col2.x+=t.col2.x;this.col2.y+=t.col2.y};n.prototype.SetIdentity=function(){this.col1.x=1;this.col2.x=0;this.col1.y=0;this.col2.y=1};n.prototype.SetZero=function(){this.col1.x=0;this.col2.x=0;this.col1.y=0;this.col2.y=0};n.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)};n.prototype.GetInverse=function(t){var i=this.col1.x;var o=this.col2.x;var e=this.col1.y;var n=this.col2.y;var s=i*n-o*e;if(s!=0){s=1/s}t.col1.x=s*n;t.col2.x=-s*o;t.col1.y=-s*e;t.col2.y=s*i;return t};n.prototype.Solve=function(t,i,o){if(i===undefined)i=0;if(o===undefined)o=0;var e=this.col1.x;var n=this.col2.x;var s=this.col1.y;var r=this.col2.y;var a=e*r-n*s;if(a!=0){a=1/a}t.x=a*(r*i-n*o);t.y=a*(e*o-s*i);return t};n.prototype.Abs=function(){this.col1.Abs();this.col2.Abs()};s.b2Mat33=function(){this.col1=new c;this.col2=new c;this.col3=new c};s.prototype.b2Mat33=function(t,i,o){if(t===undefined)t=null;if(i===undefined)i=null;if(o===undefined)o=null;if(!t&&!i&&!o){this.col1.SetZero();this.col2.SetZero();this.col3.SetZero()}else{this.col1.SetV(t);this.col2.SetV(i);this.col3.SetV(o)}};s.prototype.SetVVV=function(t,i,o){this.col1.SetV(t);this.col2.SetV(i);this.col3.SetV(o)};s.prototype.Copy=function(){return new s(this.col1,this.col2,this.col3)};s.prototype.SetM=function(t){this.col1.SetV(t.col1);this.col2.SetV(t.col2);this.col3.SetV(t.col3)};s.prototype.AddM=function(t){this.col1.x+=t.col1.x;this.col1.y+=t.col1.y;this.col1.z+=t.col1.z;this.col2.x+=t.col2.x;this.col2.y+=t.col2.y;this.col2.z+=t.col2.z;this.col3.x+=t.col3.x;this.col3.y+=t.col3.y;this.col3.z+=t.col3.z};s.prototype.SetIdentity=function(){this.col1.x=1;this.col2.x=0;this.col3.x=0;this.col1.y=0;this.col2.y=1;this.col3.y=0;this.col1.z=0;this.col2.z=0;this.col3.z=1};s.prototype.SetZero=function(){this.col1.x=0;this.col2.x=0;this.col3.x=0;this.col1.y=0;this.col2.y=0;this.col3.y=0;this.col1.z=0;this.col2.z=0;this.col3.z=0};s.prototype.Solve22=function(t,i,o){if(i===undefined)i=0;if(o===undefined)o=0;var e=this.col1.x;var n=this.col2.x;var s=this.col1.y;var r=this.col2.y;var a=e*r-n*s;if(a!=0){a=1/a}t.x=a*(r*i-n*o);t.y=a*(e*o-s*i);return t};s.prototype.Solve33=function(t,i,o,e){if(i===undefined)i=0;if(o===undefined)o=0;if(e===undefined)e=0;var n=this.col1.x;var s=this.col1.y;var r=this.col1.z;var a=this.col2.x;var l=this.col2.y;var m=this.col2.z;var c=this.col3.x;var h=this.col3.y;var _=this.col3.z;var p=n*(l*_-m*h)+s*(m*c-a*_)+r*(a*h-l*c);if(p!=0){p=1/p}t.x=p*(i*(l*_-m*h)+o*(m*c-a*_)+e*(a*h-l*c));t.y=p*(n*(o*_-e*h)+s*(e*c-i*_)+r*(i*h-o*c));t.z=p*(n*(l*e-m*o)+s*(m*i-a*e)+r*(a*o-l*i));return t};r.b2Math=function(){};r.IsValid=function(t){if(t===undefined)t=0;return isFinite(t)};r.Dot=function(t,i){return t.x*i.x+t.y*i.y};r.CrossVV=function(t,i){return t.x*i.y-t.y*i.x};r.CrossVF=function(t,i){if(i===undefined)i=0;var o=new m(i*t.y,-i*t.x);return o};r.CrossFV=function(t,i){if(t===undefined)t=0;var o=new m(-t*i.y,t*i.x);return o};r.MulMV=function(t,i){var o=new m(t.col1.x*i.x+t.col2.x*i.y,t.col1.y*i.x+t.col2.y*i.y);return o};r.MulTMV=function(t,i){var o=new m(r.Dot(i,t.col1),r.Dot(i,t.col2));return o};r.MulX=function(t,i){var o=r.MulMV(t.R,i);o.x+=t.position.x;o.y+=t.position.y;return o};r.MulXT=function(t,i){var o=r.SubtractVV(i,t.position);var e=o.x*t.R.col1.x+o.y*t.R.col1.y;o.y=o.x*t.R.col2.x+o.y*t.R.col2.y;o.x=e;return o};r.AddVV=function(t,i){var o=new m(t.x+i.x,t.y+i.y);return o};r.SubtractVV=function(t,i){var o=new m(t.x-i.x,t.y-i.y);return o};r.Distance=function(t,i){var o=t.x-i.x;var e=t.y-i.y;return Math.sqrt(o*o+e*e)};r.DistanceSquared=function(t,i){var o=t.x-i.x;var e=t.y-i.y;return o*o+e*e};r.MulFV=function(t,i){if(t===undefined)t=0;var o=new m(t*i.x,t*i.y);return o};r.AddMM=function(t,i){var o=n.FromVV(r.AddVV(t.col1,i.col1),r.AddVV(t.col2,i.col2));return o};r.MulMM=function(t,i){var o=n.FromVV(r.MulMV(t,i.col1),r.MulMV(t,i.col2));return o};r.MulTMM=function(t,i){var o=new m(r.Dot(t.col1,i.col1),r.Dot(t.col2,i.col1));var e=new m(r.Dot(t.col1,i.col2),r.Dot(t.col2,i.col2));var s=n.FromVV(o,e);return s};r.Abs=function(t){if(t===undefined)t=0;return t>0?t:-t};r.AbsV=function(t){var i=new m(r.Abs(t.x),r.Abs(t.y));return i};r.AbsM=function(t){var i=n.FromVV(r.AbsV(t.col1),r.AbsV(t.col2));return i};r.Min=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;return t<i?t:i};r.MinV=function(t,i){var o=new m(r.Min(t.x,i.x),r.Min(t.y,i.y));return o};r.Max=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;return t>i?t:i};r.MaxV=function(t,i){var o=new m(r.Max(t.x,i.x),r.Max(t.y,i.y));return o};r.Clamp=function(t,i,o){if(t===undefined)t=0;if(i===undefined)i=0;if(o===undefined)o=0;return t<i?i:t>o?o:t};r.ClampV=function(t,i,o){return r.MaxV(i,r.MinV(t,o))};r.Swap=function(t,i){var o=t[0];t[0]=i[0];i[0]=o};r.Random=function(){return Math.random()*2-1};r.RandomRange=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;var o=Math.random();o=(i-t)*o+t;return o};r.NextPowerOfTwo=function(t){if(t===undefined)t=0;t|=t>>1&2147483647;t|=t>>2&1073741823;t|=t>>4&268435455;t|=t>>8&16777215;t|=t>>16&65535;return t+1};r.IsPowerOfTwo=function(t){if(t===undefined)t=0;var i=t>0&&(t&t-1)==0;return i};Box2D.postDefs.push(function(){Box2D.Common.Math.b2Math.b2Vec2_zero=new m(0,0);Box2D.Common.Math.b2Math.b2Mat22_identity=n.FromVV(new m(1,0),new m(0,1));Box2D.Common.Math.b2Math.b2Transform_identity=new l(r.b2Vec2_zero,r.b2Mat22_identity)});a.b2Sweep=function(){this.localCenter=new m;this.c0=new m;this.c=new m};a.prototype.Set=function(t){this.localCenter.SetV(t.localCenter);this.c0.SetV(t.c0);this.c.SetV(t.c);this.a0=t.a0;this.a=t.a;this.t0=t.t0};a.prototype.Copy=function(){var t=new a;t.localCenter.SetV(this.localCenter);t.c0.SetV(this.c0);t.c.SetV(this.c);t.a0=this.a0;t.a=this.a;t.t0=this.t0;return t};a.prototype.GetTransform=function(t,i){if(i===undefined)i=0;t.position.x=(1-i)*this.c0.x+i*this.c.x;t.position.y=(1-i)*this.c0.y+i*this.c.y;var o=(1-i)*this.a0+i*this.a;t.R.Set(o);var e=t.R;t.position.x-=e.col1.x*this.localCenter.x+e.col2.x*this.localCenter.y;t.position.y-=e.col1.y*this.localCenter.x+e.col2.y*this.localCenter.y};a.prototype.Advance=function(t){if(t===undefined)t=0;if(this.t0<t&&1-this.t0>Number.MIN_VALUE){var i=(t-this.t0)/(1-this.t0);this.c0.x=(1-i)*this.c0.x+i*this.c.x;this.c0.y=(1-i)*this.c0.y+i*this.c.y;this.a0=(1-i)*this.a0+i*this.a;this.t0=t}};l.b2Transform=function(){this.position=new m;this.R=new n};l.prototype.b2Transform=function(t,i){if(t===undefined)t=null;if(i===undefined)i=null;if(t){this.position.SetV(t);this.R.SetM(i)}};l.prototype.Initialize=function(t,i){this.position.SetV(t);this.R.SetM(i)};l.prototype.SetIdentity=function(){this.position.SetZero();this.R.SetIdentity()};l.prototype.Set=function(t){this.position.SetV(t.position);this.R.SetM(t.R)};l.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)};m.b2Vec2=function(){};m.prototype.b2Vec2=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;this.x=t;this.y=i};m.prototype.SetZero=function(){this.x=0;this.y=0};m.prototype.Set=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;this.x=t;this.y=i};m.prototype.SetV=function(t){this.x=t.x;this.y=t.y};m.prototype.GetNegative=function(){return new m(-this.x,-this.y)};m.prototype.NegativeSelf=function(){this.x=-this.x;this.y=-this.y};m.Make=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;return new m(t,i)};m.prototype.Copy=function(){return new m(this.x,this.y)};m.prototype.Add=function(t){this.x+=t.x;this.y+=t.y};m.prototype.Subtract=function(t){this.x-=t.x;this.y-=t.y};m.prototype.Multiply=function(t){if(t===undefined)t=0;this.x*=t;this.y*=t};m.prototype.MulM=function(t){var i=this.x;this.x=t.col1.x*i+t.col2.x*this.y;this.y=t.col1.y*i+t.col2.y*this.y};m.prototype.MulTM=function(t){var i=r.Dot(this,t.col1);this.y=r.Dot(this,t.col2);this.x=i};m.prototype.CrossVF=function(t){if(t===undefined)t=0;var i=this.x;this.x=t*this.y;this.y=-t*i};m.prototype.CrossFV=function(t){if(t===undefined)t=0;var i=this.x;this.x=-t*this.y;this.y=t*i};m.prototype.MinV=function(t){this.x=this.x<t.x?this.x:t.x;this.y=this.y<t.y?this.y:t.y};m.prototype.MaxV=function(t){this.x=this.x>t.x?this.x:t.x;this.y=this.y>t.y?this.y:t.y};m.prototype.Abs=function(){if(this.x<0)this.x=-this.x;if(this.y<0)this.y=-this.y};m.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};m.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y};m.prototype.Normalize=function(){var t=Math.sqrt(this.x*this.x+this.y*this.y);if(t<Number.MIN_VALUE){return 0}var i=1/t;this.x*=i;this.y*=i;return t};m.prototype.IsValid=function(){return r.IsValid(this.x)&&r.IsValid(this.y)};c.b2Vec3=function(){};c.prototype.b2Vec3=function(t,i,o){if(t===undefined)t=0;if(i===undefined)i=0;if(o===undefined)o=0;this.x=t;this.y=i;this.z=o};c.prototype.SetZero=function(){this.x=this.y=this.z=0};c.prototype.Set=function(t,i,o){if(t===undefined)t=0;if(i===undefined)i=0;if(o===undefined)o=0;this.x=t;this.y=i;this.z=o};c.prototype.SetV=function(t){this.x=t.x;this.y=t.y;this.z=t.z};c.prototype.GetNegative=function(){return new c(-this.x,-this.y,-this.z)};c.prototype.NegativeSelf=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z};c.prototype.Copy=function(){return new c(this.x,this.y,this.z)};c.prototype.Add=function(t){this.x+=t.x;this.y+=t.y;this.z+=t.z};c.prototype.Subtract=function(t){this.x-=t.x;this.y-=t.y;this.z-=t.z};c.prototype.Multiply=function(t){if(t===undefined)t=0;this.x*=t;this.y*=t;this.z*=t}})();(function(){var t=Box2D.Dynamics.Controllers.b2ControllerEdge,i=Box2D.Common.Math.b2Mat22,o=Box2D.Common.Math.b2Mat33,e=Box2D.Common.Math.b2Math,n=Box2D.Common.Math.b2Sweep,s=Box2D.Common.Math.b2Transform,r=Box2D.Common.Math.b2Vec2,a=Box2D.Common.Math.b2Vec3,l=Box2D.Common.b2Color,m=Box2D.Common.b2internal,c=Box2D.Common.b2Settings,h=Box2D.Collision.b2AABB,_=Box2D.Collision.b2Bound,p=Box2D.Collision.b2BoundValues,y=Box2D.Collision.b2Collision,u=Box2D.Collision.b2ContactID,x=Box2D.Collision.b2ContactPoint,f=Box2D.Collision.b2Distance,v=Box2D.Collision.b2DistanceInput,d=Box2D.Collision.b2DistanceOutput,b=Box2D.Collision.b2DistanceProxy,D=Box2D.Collision.b2DynamicTree,B=Box2D.Collision.b2DynamicTreeBroadPhase,C=Box2D.Collision.b2DynamicTreeNode,A=Box2D.Collision.b2DynamicTreePair,S=Box2D.Collision.b2Manifold,w=Box2D.Collision.b2ManifoldPoint,g=Box2D.Collision.b2Point,M=Box2D.Collision.b2RayCastInput,V=Box2D.Collision.b2RayCastOutput,I=Box2D.Collision.b2Segment,G=Box2D.Collision.b2SeparationFunction,L=Box2D.Collision.b2Simplex,J=Box2D.Collision.b2SimplexCache,F=Box2D.Collision.b2SimplexVertex,P=Box2D.Collision.b2TimeOfImpact,R=Box2D.Collision.b2TOIInput,T=Box2D.Collision.b2WorldManifold,k=Box2D.Collision.ClipVertex,N=Box2D.Collision.Features,z=Box2D.Collision.IBroadPhase,E=Box2D.Collision.Shapes.b2CircleShape,j=Box2D.Collision.Shapes.b2EdgeChainDef,O=Box2D.Collision.Shapes.b2EdgeShape,U=Box2D.Collision.Shapes.b2MassData,q=Box2D.Collision.Shapes.b2PolygonShape,K=Box2D.Collision.Shapes.b2Shape,W=Box2D.Dynamics.b2Body,X=Box2D.Dynamics.b2BodyDef,Z=Box2D.Dynamics.b2ContactFilter,H=Box2D.Dynamics.b2ContactImpulse,Y=Box2D.Dynamics.b2ContactListener,Q=Box2D.Dynamics.b2ContactManager,$=Box2D.Dynamics.b2DebugDraw,tt=Box2D.Dynamics.b2DestructionListener,it=Box2D.Dynamics.b2FilterData,ot=Box2D.Dynamics.b2Fixture,et=Box2D.Dynamics.b2FixtureDef,nt=Box2D.Dynamics.b2Island,st=Box2D.Dynamics.b2TimeStep,rt=Box2D.Dynamics.b2World,at=Box2D.Dynamics.Contacts.b2CircleContact,lt=Box2D.Dynamics.Contacts.b2Contact,mt=Box2D.Dynamics.Contacts.b2ContactConstraint,ct=Box2D.Dynamics.Contacts.b2ContactConstraintPoint,ht=Box2D.Dynamics.Contacts.b2ContactEdge,_t=Box2D.Dynamics.Contacts.b2ContactFactory,pt=Box2D.Dynamics.Contacts.b2ContactRegister,yt=Box2D.Dynamics.Contacts.b2ContactResult,ut=Box2D.Dynamics.Contacts.b2ContactSolver,xt=Box2D.Dynamics.Contacts.b2EdgeAndCircleContact,ft=Box2D.Dynamics.Contacts.b2NullContact,vt=Box2D.Dynamics.Contacts.b2PolyAndCircleContact,dt=Box2D.Dynamics.Contacts.b2PolyAndEdgeContact,bt=Box2D.Dynamics.Contacts.b2PolygonContact,Dt=Box2D.Dynamics.Contacts.b2PositionSolverManifold,Bt=Box2D.Dynamics.Controllers.b2Controller,Ct=Box2D.Dynamics.Joints.b2DistanceJoint,At=Box2D.Dynamics.Joints.b2DistanceJointDef,St=Box2D.Dynamics.Joints.b2FrictionJoint,wt=Box2D.Dynamics.Joints.b2FrictionJointDef,gt=Box2D.Dynamics.Joints.b2GearJoint,Mt=Box2D.Dynamics.Joints.b2GearJointDef,Vt=Box2D.Dynamics.Joints.b2Jacobian,It=Box2D.Dynamics.Joints.b2Joint,Gt=Box2D.Dynamics.Joints.b2JointDef,Lt=Box2D.Dynamics.Joints.b2JointEdge,Jt=Box2D.Dynamics.Joints.b2LineJoint,Ft=Box2D.Dynamics.Joints.b2LineJointDef,Pt=Box2D.Dynamics.Joints.b2MouseJoint,Rt=Box2D.Dynamics.Joints.b2MouseJointDef,Tt=Box2D.Dynamics.Joints.b2PrismaticJoint,kt=Box2D.Dynamics.Joints.b2PrismaticJointDef,Nt=Box2D.Dynamics.Joints.b2PulleyJoint,zt=Box2D.Dynamics.Joints.b2PulleyJointDef,Et=Box2D.Dynamics.Joints.b2RevoluteJoint,jt=Box2D.Dynamics.Joints.b2RevoluteJointDef,Ot=Box2D.Dynamics.Joints.b2WeldJoint,Ut=Box2D.Dynamics.Joints.b2WeldJointDef;W.b2Body=function(){this.m_xf=new s;this.m_sweep=new n;this.m_linearVelocity=new r;this.m_force=new r};W.prototype.connectEdges=function(t,i,o){if(o===undefined)o=0;var n=Math.atan2(i.GetDirectionVector().y,i.GetDirectionVector().x);var s=Math.tan((n-o)*.5);var r=e.MulFV(s,i.GetDirectionVector());r=e.SubtractVV(r,i.GetNormalVector());r=e.MulFV(c.b2_toiSlop,r);r=e.AddVV(r,i.GetVertex1());var a=e.AddVV(t.GetDirectionVector(),i.GetDirectionVector());a.Normalize();var l=e.Dot(t.GetDirectionVector(),i.GetNormalVector())>0;t.SetNextEdge(i,r,a,l);i.SetPrevEdge(t,r,a,l);return n};W.prototype.CreateFixture=function(t){if(this.m_world.IsLocked()==true){return null}var i=new ot;i.Create(this,this.m_xf,t);if(this.m_flags&W.e_activeFlag){var o=this.m_world.m_contactManager.m_broadPhase;i.CreateProxy(o,this.m_xf)}i.m_next=this.m_fixtureList;this.m_fixtureList=i;++this.m_fixtureCount;i.m_body=this;if(i.m_density>0){this.ResetMassData()}this.m_world.m_flags|=rt.e_newFixture;return i};W.prototype.CreateFixture2=function(t,i){if(i===undefined)i=0;var o=new et;o.shape=t;o.density=i;return this.CreateFixture(o)};W.prototype.DestroyFixture=function(t){if(this.m_world.IsLocked()==true){return}var i=this.m_fixtureList;var o=null;var e=false;while(i!=null){if(i==t){if(o)o.m_next=t.m_next;else this.m_fixtureList=t.m_next;e=true;break}o=i;i=i.m_next}var n=this.m_contactList;while(n){var s=n.contact;n=n.next;var r=s.GetFixtureA();var a=s.GetFixtureB();if(t==r||t==a){this.m_world.m_contactManager.Destroy(s)}}if(this.m_flags&W.e_activeFlag){var l=this.m_world.m_contactManager.m_broadPhase;t.DestroyProxy(l)}else{}t.Destroy();t.m_body=null;t.m_next=null;--this.m_fixtureCount;this.ResetMassData()};W.prototype.SetPositionAndAngle=function(t,i){if(i===undefined)i=0;var o;if(this.m_world.IsLocked()==true){return}this.m_xf.R.Set(i);this.m_xf.position.SetV(t);var e=this.m_xf.R;var n=this.m_sweep.localCenter;this.m_sweep.c.x=e.col1.x*n.x+e.col2.x*n.y;this.m_sweep.c.y=e.col1.y*n.x+e.col2.y*n.y;this.m_sweep.c.x+=this.m_xf.position.x;this.m_sweep.c.y+=this.m_xf.position.y;this.m_sweep.c0.SetV(this.m_sweep.c);this.m_sweep.a0=this.m_sweep.a=i;var s=this.m_world.m_contactManager.m_broadPhase;for(o=this.m_fixtureList;o;o=o.m_next){o.Synchronize(s,this.m_xf,this.m_xf)}this.m_world.m_contactManager.FindNewContacts()};W.prototype.SetTransform=function(t){this.SetPositionAndAngle(t.position,t.GetAngle())};W.prototype.GetTransform=function(){return this.m_xf};W.prototype.GetPosition=function(){return this.m_xf.position};W.prototype.SetPosition=function(t){this.SetPositionAndAngle(t,this.GetAngle())};W.prototype.GetAngle=function(){return this.m_sweep.a};W.prototype.SetAngle=function(t){if(t===undefined)t=0;this.SetPositionAndAngle(this.GetPosition(),t)};W.prototype.GetWorldCenter=function(){return this.m_sweep.c};W.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter};W.prototype.SetLinearVelocity=function(t){if(this.m_type==W.b2_staticBody){return}this.m_linearVelocity.SetV(t)};W.prototype.GetLinearVelocity=function(){return this.m_linearVelocity};W.prototype.SetAngularVelocity=function(t){if(t===undefined)t=0;if(this.m_type==W.b2_staticBody){return}this.m_angularVelocity=t};W.prototype.GetAngularVelocity=function(){return this.m_angularVelocity};W.prototype.GetDefinition=function(){var t=new X;t.type=this.GetType();t.allowSleep=(this.m_flags&W.e_allowSleepFlag)==W.e_allowSleepFlag;t.angle=this.GetAngle();t.angularDamping=this.m_angularDamping;t.angularVelocity=this.m_angularVelocity;t.fixedRotation=(this.m_flags&W.e_fixedRotationFlag)==W.e_fixedRotationFlag;t.bullet=(this.m_flags&W.e_bulletFlag)==W.e_bulletFlag;t.awake=(this.m_flags&W.e_awakeFlag)==W.e_awakeFlag;t.linearDamping=this.m_linearDamping;t.linearVelocity.SetV(this.GetLinearVelocity());t.position=this.GetPosition();t.userData=this.GetUserData();return t};W.prototype.ApplyForce=function(t,i){if(this.m_type!=W.b2_dynamicBody){return}if(this.IsAwake()==false){this.SetAwake(true)}this.m_force.x+=t.x;this.m_force.y+=t.y;this.m_torque+=(i.x-this.m_sweep.c.x)*t.y-(i.y-this.m_sweep.c.y)*t.x};W.prototype.ApplyTorque=function(t){if(t===undefined)t=0;if(this.m_type!=W.b2_dynamicBody){return}if(this.IsAwake()==false){this.SetAwake(true)}this.m_torque+=t};W.prototype.ApplyImpulse=function(t,i){if(this.m_type!=W.b2_dynamicBody){return}if(this.IsAwake()==false){this.SetAwake(true)}this.m_linearVelocity.x+=this.m_invMass*t.x;this.m_linearVelocity.y+=this.m_invMass*t.y;this.m_angularVelocity+=this.m_invI*((i.x-this.m_sweep.c.x)*t.y-(i.y-this.m_sweep.c.y)*t.x)};W.prototype.Split=function(t){var i=this.GetLinearVelocity().Copy();var o=this.GetAngularVelocity();var n=this.GetWorldCenter();var s=this;var r=this.m_world.CreateBody(this.GetDefinition());var a;for(var l=s.m_fixtureList;l;){if(t(l)){var m=l.m_next;if(a){a.m_next=m}else{s.m_fixtureList=m}s.m_fixtureCount--;l.m_next=r.m_fixtureList;r.m_fixtureList=l;r.m_fixtureCount++;l.m_body=r;l=m}else{a=l;l=l.m_next}}s.ResetMassData();r.ResetMassData();var c=s.GetWorldCenter();var h=r.GetWorldCenter();var _=e.AddVV(i,e.CrossFV(o,e.SubtractVV(c,n)));var p=e.AddVV(i,e.CrossFV(o,e.SubtractVV(h,n)));s.SetLinearVelocity(_);r.SetLinearVelocity(p);s.SetAngularVelocity(o);r.SetAngularVelocity(o);s.SynchronizeFixtures();r.SynchronizeFixtures();return r};W.prototype.Merge=function(t){var i;for(i=t.m_fixtureList;i;){var o=i.m_next;t.m_fixtureCount--;i.m_next=this.m_fixtureList;this.m_fixtureList=i;this.m_fixtureCount++;i.m_body=n;i=o}e.m_fixtureCount=0;var e=this;var n=t;var s=e.GetWorldCenter();var r=n.GetWorldCenter();var a=e.GetLinearVelocity().Copy();var l=n.GetLinearVelocity().Copy();var m=e.GetAngularVelocity();var c=n.GetAngularVelocity();e.ResetMassData();this.SynchronizeFixtures()};W.prototype.GetMass=function(){return this.m_mass};W.prototype.GetInertia=function(){return this.m_I};W.prototype.GetMassData=function(t){t.mass=this.m_mass;t.I=this.m_I;t.center.SetV(this.m_sweep.localCenter)};W.prototype.SetMassData=function(t){c.b2Assert(this.m_world.IsLocked()==false);if(this.m_world.IsLocked()==true){return}if(this.m_type!=W.b2_dynamicBody){return}this.m_invMass=0;this.m_I=0;this.m_invI=0;this.m_mass=t.mass;if(this.m_mass<=0){this.m_mass=1}this.m_invMass=1/this.m_mass;if(t.I>0&&(this.m_flags&W.e_fixedRotationFlag)==0){this.m_I=t.I-this.m_mass*(t.center.x*t.center.x+t.center.y*t.center.y);this.m_invI=1/this.m_I}var i=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(t.center);this.m_sweep.c0.SetV(e.MulX(this.m_xf,this.m_sweep.localCenter));this.m_sweep.c.SetV(this.m_sweep.c0);this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-i.y);this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-i.x)};W.prototype.ResetMassData=function(){this.m_mass=0;this.m_invMass=0;this.m_I=0;this.m_invI=0;this.m_sweep.localCenter.SetZero();if(this.m_type==W.b2_staticBody||this.m_type==W.b2_kinematicBody){return}var t=r.Make(0,0);for(var i=this.m_fixtureList;i;i=i.m_next){if(i.m_density==0){continue}var o=i.GetMassData();this.m_mass+=o.mass;t.x+=o.center.x*o.mass;t.y+=o.center.y*o.mass;this.m_I+=o.I}if(this.m_mass>0){this.m_invMass=1/this.m_mass;t.x*=this.m_invMass;t.y*=this.m_invMass}else{this.m_mass=1;this.m_invMass=1}if(this.m_I>0&&(this.m_flags&W.e_fixedRotationFlag)==0){this.m_I-=this.m_mass*(t.x*t.x+t.y*t.y);this.m_I*=this.m_inertiaScale;c.b2Assert(this.m_I>0);this.m_invI=1/this.m_I}else{this.m_I=0;this.m_invI=0}var n=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(t);this.m_sweep.c0.SetV(e.MulX(this.m_xf,this.m_sweep.localCenter));this.m_sweep.c.SetV(this.m_sweep.c0);this.m_linearVelocity.x+=this.m_angularVelocity*-(this.m_sweep.c.y-n.y);this.m_linearVelocity.y+=this.m_angularVelocity*+(this.m_sweep.c.x-n.x)};W.prototype.GetWorldPoint=function(t){var i=this.m_xf.R;var o=new r(i.col1.x*t.x+i.col2.x*t.y,i.col1.y*t.x+i.col2.y*t.y);o.x+=this.m_xf.position.x;o.y+=this.m_xf.position.y;return o};W.prototype.GetWorldVector=function(t){return e.MulMV(this.m_xf.R,t)};W.prototype.GetLocalPoint=function(t){return e.MulXT(this.m_xf,t)};W.prototype.GetLocalVector=function(t){return e.MulTMV(this.m_xf.R,t)};W.prototype.GetLinearVelocityFromWorldPoint=function(t){return new r(this.m_linearVelocity.x-this.m_angularVelocity*(t.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(t.x-this.m_sweep.c.x))};W.prototype.GetLinearVelocityFromLocalPoint=function(t){var i=this.m_xf.R;var o=new r(i.col1.x*t.x+i.col2.x*t.y,i.col1.y*t.x+i.col2.y*t.y);o.x+=this.m_xf.position.x;o.y+=this.m_xf.position.y;return new r(this.m_linearVelocity.x-this.m_angularVelocity*(o.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(o.x-this.m_sweep.c.x))};W.prototype.GetLinearDamping=function(){return this.m_linearDamping};W.prototype.SetLinearDamping=function(t){if(t===undefined)t=0;this.m_linearDamping=t};W.prototype.GetAngularDamping=function(){return this.m_angularDamping};W.prototype.SetAngularDamping=function(t){if(t===undefined)t=0;this.m_angularDamping=t};W.prototype.SetType=function(t){if(t===undefined)t=0;if(this.m_type==t){return}this.m_type=t;this.ResetMassData();if(this.m_type==W.b2_staticBody){this.m_linearVelocity.SetZero();this.m_angularVelocity=0}this.SetAwake(true);this.m_force.SetZero();this.m_torque=0;for(var i=this.m_contactList;i;i=i.next){i.contact.FlagForFiltering()}};W.prototype.GetType=function(){return this.m_type};W.prototype.SetBullet=function(t){if(t){this.m_flags|=W.e_bulletFlag}else{this.m_flags&=~W.e_bulletFlag}};W.prototype.IsBullet=function(){return(this.m_flags&W.e_bulletFlag)==W.e_bulletFlag};W.prototype.SetSleepingAllowed=function(t){if(t){this.m_flags|=W.e_allowSleepFlag}else{this.m_flags&=~W.e_allowSleepFlag;this.SetAwake(true)}};W.prototype.SetAwake=function(t){if(t){this.m_flags|=W.e_awakeFlag;this.m_sleepTime=0}else{this.m_flags&=~W.e_awakeFlag;this.m_sleepTime=0;this.m_linearVelocity.SetZero();this.m_angularVelocity=0;this.m_force.SetZero();this.m_torque=0}};W.prototype.IsAwake=function(){return(this.m_flags&W.e_awakeFlag)==W.e_awakeFlag};W.prototype.SetFixedRotation=function(t){if(t){this.m_flags|=W.e_fixedRotationFlag}else{this.m_flags&=~W.e_fixedRotationFlag}this.ResetMassData()};W.prototype.IsFixedRotation=function(){return(this.m_flags&W.e_fixedRotationFlag)==W.e_fixedRotationFlag};W.prototype.SetActive=function(t){if(t==this.IsActive()){return}var i;var o;if(t){this.m_flags|=W.e_activeFlag;i=this.m_world.m_contactManager.m_broadPhase;for(o=this.m_fixtureList;o;o=o.m_next){o.CreateProxy(i,this.m_xf)}}else{this.m_flags&=~W.e_activeFlag;i=this.m_world.m_contactManager.m_broadPhase;for(o=this.m_fixtureList;o;o=o.m_next){o.DestroyProxy(i)}var e=this.m_contactList;while(e){var n=e;e=e.next;this.m_world.m_contactManager.Destroy(n.contact)}this.m_contactList=null}};W.prototype.IsActive=function(){return(this.m_flags&W.e_activeFlag)==W.e_activeFlag};W.prototype.IsSleepingAllowed=function(){return(this.m_flags&W.e_allowSleepFlag)==W.e_allowSleepFlag};W.prototype.GetFixtureList=function(){return this.m_fixtureList};W.prototype.GetJointList=function(){return this.m_jointList};W.prototype.GetControllerList=function(){return this.m_controllerList};W.prototype.GetContactList=function(){return this.m_contactList};W.prototype.GetNext=function(){return this.m_next};W.prototype.GetUserData=function(){return this.m_userData};W.prototype.SetUserData=function(t){this.m_userData=t};W.prototype.GetWorld=function(){return this.m_world};W.prototype.b2Body=function(t,i){this.m_flags=0;if(t.bullet){this.m_flags|=W.e_bulletFlag}if(t.fixedRotation){this.m_flags|=W.e_fixedRotationFlag}if(t.allowSleep){this.m_flags|=W.e_allowSleepFlag}if(t.awake){this.m_flags|=W.e_awakeFlag}if(t.active){this.m_flags|=W.e_activeFlag}this.m_world=i;this.m_xf.position.SetV(t.position);this.m_xf.R.Set(t.angle);this.m_sweep.localCenter.SetZero();this.m_sweep.t0=1;this.m_sweep.a0=this.m_sweep.a=t.angle;var o=this.m_xf.R;var e=this.m_sweep.localCenter;this.m_sweep.c.x=o.col1.x*e.x+o.col2.x*e.y;this.m_sweep.c.y=o.col1.y*e.x+o.col2.y*e.y;this.m_sweep.c.x+=this.m_xf.position.x;this.m_sweep.c.y+=this.m_xf.position.y;this.m_sweep.c0.SetV(this.m_sweep.c);this.m_jointList=null;this.m_controllerList=null;this.m_contactList=null;this.m_controllerCount=0;this.m_prev=null;this.m_next=null;this.m_linearVelocity.SetV(t.linearVelocity);this.m_angularVelocity=t.angularVelocity;this.m_linearDamping=t.linearDamping;this.m_angularDamping=t.angularDamping;this.m_force.Set(0,0);this.m_torque=0;this.m_sleepTime=0;this.m_type=t.type;if(this.m_type==W.b2_dynamicBody){this.m_mass=1;this.m_invMass=1}else{this.m_mass=0;this.m_invMass=0}this.m_I=0;this.m_invI=0;this.m_inertiaScale=t.inertiaScale;this.m_userData=t.userData;this.m_fixtureList=null;this.m_fixtureCount=0};W.prototype.SynchronizeFixtures=function(){var t=W.s_xf1;t.R.Set(this.m_sweep.a0);var i=t.R;var o=this.m_sweep.localCenter;t.position.x=this.m_sweep.c0.x-(i.col1.x*o.x+i.col2.x*o.y);t.position.y=this.m_sweep.c0.y-(i.col1.y*o.x+i.col2.y*o.y);var e;var n=this.m_world.m_contactManager.m_broadPhase;for(e=this.m_fixtureList;e;e=e.m_next){e.Synchronize(n,t,this.m_xf)}};W.prototype.SynchronizeTransform=function(){this.m_xf.R.Set(this.m_sweep.a);var t=this.m_xf.R;var i=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(t.col1.x*i.x+t.col2.x*i.y);this.m_xf.position.y=this.m_sweep.c.y-(t.col1.y*i.x+t.col2.y*i.y)};W.prototype.ShouldCollide=function(t){if(this.m_type!=W.b2_dynamicBody&&t.m_type!=W.b2_dynamicBody){return false}for(var i=this.m_jointList;i;i=i.next){if(i.other==t)if(i.joint.m_collideConnected==false){return false}}return true};W.prototype.Advance=function(t){if(t===undefined)t=0;this.m_sweep.Advance(t);this.m_sweep.c.SetV(this.m_sweep.c0);this.m_sweep.a=this.m_sweep.a0;this.SynchronizeTransform()};Box2D.postDefs.push(function(){Box2D.Dynamics.b2Body.s_xf1=new s;Box2D.Dynamics.b2Body.e_islandFlag=1;Box2D.Dynamics.b2Body.e_awakeFlag=2;Box2D.Dynamics.b2Body.e_allowSleepFlag=4;Box2D.Dynamics.b2Body.e_bulletFlag=8;Box2D.Dynamics.b2Body.e_fixedRotationFlag=16;Box2D.Dynamics.b2Body.e_activeFlag=32;Box2D.Dynamics.b2Body.b2_staticBody=0;Box2D.Dynamics.b2Body.b2_kinematicBody=1;Box2D.Dynamics.b2Body.b2_dynamicBody=2});X.b2BodyDef=function(){this.position=new r;this.linearVelocity=new r};X.prototype.b2BodyDef=function(){this.userData=null;this.position.Set(0,0);this.angle=0;this.linearVelocity.Set(0,0);this.angularVelocity=0;this.linearDamping=0;this.angularDamping=0;this.allowSleep=true;this.awake=true;this.fixedRotation=false;this.bullet=false;this.type=W.b2_staticBody;this.active=true;this.inertiaScale=1};Z.b2ContactFilter=function(){};Z.prototype.ShouldCollide=function(t,i){var o=t.GetFilterData();var e=i.GetFilterData();if(o.groupIndex==e.groupIndex&&o.groupIndex!=0){return o.groupIndex>0}var n=(o.maskBits&e.categoryBits)!=0&&(o.categoryBits&e.maskBits)!=0;return n};Z.prototype.RayCollide=function(t,i){if(!t)return true;return this.ShouldCollide(t instanceof ot?t:null,i)};Box2D.postDefs.push(function(){Box2D.Dynamics.b2ContactFilter.b2_defaultFilter=new Z});H.b2ContactImpulse=function(){this.normalImpulses=new Vector_a2j_Number(c.b2_maxManifoldPoints);this.tangentImpulses=new Vector_a2j_Number(c.b2_maxManifoldPoints)};Y.b2ContactListener=function(){};Y.prototype.BeginContact=function(t){};Y.prototype.EndContact=function(t){};Y.prototype.PreSolve=function(t,i){};Y.prototype.PostSolve=function(t,i){};Box2D.postDefs.push(function(){Box2D.Dynamics.b2ContactListener.b2_defaultListener=new Y});Q.b2ContactManager=function(){};Q.prototype.b2ContactManager=function(){this.m_world=null;this.m_contactCount=0;this.m_contactFilter=Z.b2_defaultFilter;this.m_contactListener=Y.b2_defaultListener;this.m_contactFactory=new _t(this.m_allocator);this.m_broadPhase=new B};Q.prototype.AddPair=function(t,i){var o=t instanceof ot?t:null;var e=i instanceof ot?i:null;var n=o.GetBody();var s=e.GetBody();if(n==s)return;var r=s.GetContactList();while(r){if(r.other==n){var a=r.contact.GetFixtureA();var l=r.contact.GetFixtureB();if(a==o&&l==e)return;if(a==e&&l==o)return}r=r.next}if(s.ShouldCollide(n)==false){return}if(this.m_contactFilter.ShouldCollide(o,e)==false){return}var m=this.m_contactFactory.Create(o,e);o=m.GetFixtureA();e=m.GetFixtureB();n=o.m_body;s=e.m_body;m.m_prev=null;m.m_next=this.m_world.m_contactList;if(this.m_world.m_contactList!=null){this.m_world.m_contactList.m_prev=m}this.m_world.m_contactList=m;m.m_nodeA.contact=m;m.m_nodeA.other=s;m.m_nodeA.prev=null;m.m_nodeA.next=n.m_contactList;if(n.m_contactList!=null){n.m_contactList.prev=m.m_nodeA}n.m_contactList=m.m_nodeA;m.m_nodeB.contact=m;m.m_nodeB.other=n;m.m_nodeB.prev=null;m.m_nodeB.next=s.m_contactList;if(s.m_contactList!=null){s.m_contactList.prev=m.m_nodeB}s.m_contactList=m.m_nodeB;++this.m_world.m_contactCount;return};Q.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(Box2D.generateCallback(this,this.AddPair))};Q.prototype.Destroy=function(t){var i=t.GetFixtureA();var o=t.GetFixtureB();var e=i.GetBody();var n=o.GetBody();if(t.IsTouching()){this.m_contactListener.EndContact(t)}if(t.m_prev){t.m_prev.m_next=t.m_next}if(t.m_next){t.m_next.m_prev=t.m_prev}if(t==this.m_world.m_contactList){this.m_world.m_contactList=t.m_next}if(t.m_nodeA.prev){t.m_nodeA.prev.next=t.m_nodeA.next}if(t.m_nodeA.next){t.m_nodeA.next.prev=t.m_nodeA.prev}if(t.m_nodeA==e.m_contactList){e.m_contactList=t.m_nodeA.next}if(t.m_nodeB.prev){t.m_nodeB.prev.next=t.m_nodeB.next}if(t.m_nodeB.next){t.m_nodeB.next.prev=t.m_nodeB.prev}if(t.m_nodeB==n.m_contactList){n.m_contactList=t.m_nodeB.next}this.m_contactFactory.Destroy(t);--this.m_contactCount};Q.prototype.Collide=function(){var t=this.m_world.m_contactList;while(t){var i=t.GetFixtureA();var o=t.GetFixtureB();var e=i.GetBody();var n=o.GetBody();if(e.IsAwake()==false&&n.IsAwake()==false){t=t.GetNext();continue}if(t.m_flags&lt.e_filterFlag){if(n.ShouldCollide(e)==false){var s=t;t=s.GetNext();this.Destroy(s);continue}if(this.m_contactFilter.ShouldCollide(i,o)==false){s=t;t=s.GetNext();this.Destroy(s);continue}t.m_flags&=~lt.e_filterFlag}var r=i.m_proxy;var a=o.m_proxy;var l=this.m_broadPhase.TestOverlap(r,a);if(l==false){s=t;t=s.GetNext();this.Destroy(s);continue}t.Update(this.m_contactListener);t=t.GetNext()}};Box2D.postDefs.push(function(){Box2D.Dynamics.b2ContactManager.s_evalCP=new x});$.b2DebugDraw=function(){};$.prototype.b2DebugDraw=function(){};$.prototype.SetFlags=function(t){if(t===undefined)t=0};$.prototype.GetFlags=function(){};$.prototype.AppendFlags=function(t){if(t===undefined)t=0};$.prototype.ClearFlags=function(t){if(t===undefined)t=0};$.prototype.SetSprite=function(t){};$.prototype.GetSprite=function(){};$.prototype.SetDrawScale=function(t){if(t===undefined)t=0};$.prototype.GetDrawScale=function(){};$.prototype.SetLineThickness=function(t){if(t===undefined)t=0};$.prototype.GetLineThickness=function(){};$.prototype.SetAlpha=function(t){if(t===undefined)t=0};$.prototype.GetAlpha=function(){};$.prototype.SetFillAlpha=function(t){if(t===undefined)t=0};$.prototype.GetFillAlpha=function(){};$.prototype.SetXFormScale=function(t){if(t===undefined)t=0};$.prototype.GetXFormScale=function(){};$.prototype.DrawPolygon=function(t,i,o){if(i===undefined)i=0};$.prototype.DrawSolidPolygon=function(t,i,o){if(i===undefined)i=0};$.prototype.DrawCircle=function(t,i,o){if(i===undefined)i=0};$.prototype.DrawSolidCircle=function(t,i,o,e){if(i===undefined)i=0};$.prototype.DrawSegment=function(t,i,o){};$.prototype.DrawTransform=function(t){};Box2D.postDefs.push(function(){Box2D.Dynamics.b2DebugDraw.e_shapeBit=1;Box2D.Dynamics.b2DebugDraw.e_jointBit=2;Box2D.Dynamics.b2DebugDraw.e_aabbBit=4;Box2D.Dynamics.b2DebugDraw.e_pairBit=8;Box2D.Dynamics.b2DebugDraw.e_centerOfMassBit=16;Box2D.Dynamics.b2DebugDraw.e_controllerBit=32});tt.b2DestructionListener=function(){};tt.prototype.SayGoodbyeJoint=function(t){};tt.prototype.SayGoodbyeFixture=function(t){};it.b2FilterData=function(){this.categoryBits=1;this.maskBits=65535;this.groupIndex=0};it.prototype.Copy=function(){var t=new it;t.categoryBits=this.categoryBits;t.maskBits=this.maskBits;t.groupIndex=this.groupIndex;return t};ot.b2Fixture=function(){this.m_filter=new it};ot.prototype.GetType=function(){return this.m_shape.GetType()};ot.prototype.GetShape=function(){return this.m_shape};ot.prototype.SetSensor=function(t){if(this.m_isSensor==t)return;this.m_isSensor=t;if(this.m_body==null)return;var i=this.m_body.GetContactList();while(i){var o=i.contact;var e=o.GetFixtureA();var n=o.GetFixtureB();if(e==this||n==this)o.SetSensor(e.IsSensor()||n.IsSensor());i=i.next}};ot.prototype.IsSensor=function(){return this.m_isSensor};ot.prototype.SetFilterData=function(t){this.m_filter=t.Copy();if(this.m_body)return;var i=this.m_body.GetContactList();while(i){var o=i.contact;var e=o.GetFixtureA();var n=o.GetFixtureB();if(e==this||n==this)o.FlagForFiltering();i=i.next}};ot.prototype.GetFilterData=function(){return this.m_filter.Copy()};ot.prototype.GetBody=function(){return this.m_body};ot.prototype.GetNext=function(){return this.m_next};ot.prototype.GetUserData=function(){return this.m_userData};ot.prototype.SetUserData=function(t){this.m_userData=t};ot.prototype.TestPoint=function(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)};ot.prototype.RayCast=function(t,i){return this.m_shape.RayCast(t,i,this.m_body.GetTransform())};ot.prototype.GetMassData=function(t){if(t===undefined)t=null;if(t==null){t=new U}this.m_shape.ComputeMass(t,this.m_density);return t};ot.prototype.SetDensity=function(t){if(t===undefined)t=0;this.m_density=t};ot.prototype.GetDensity=function(){return this.m_density};ot.prototype.GetFriction=function(){return this.m_friction};ot.prototype.SetFriction=function(t){if(t===undefined)t=0;this.m_friction=t};ot.prototype.GetRestitution=function(){return this.m_restitution};ot.prototype.SetRestitution=function(t){if(t===undefined)t=0;this.m_restitution=t};ot.prototype.GetAABB=function(){return this.m_aabb};ot.prototype.b2Fixture=function(){this.m_aabb=new h;this.m_userData=null;this.m_body=null;this.m_next=null;this.m_shape=null;this.m_density=0;this.m_friction=0;this.m_restitution=0};ot.prototype.Create=function(t,i,o){this.m_userData=o.userData;this.m_friction=o.friction;this.m_restitution=o.restitution;this.m_body=t;this.m_next=null;this.m_filter=o.filter.Copy();this.m_isSensor=o.isSensor;this.m_shape=o.shape.Copy();this.m_density=o.density};ot.prototype.Destroy=function(){this.m_shape=null};ot.prototype.CreateProxy=function(t,i){this.m_shape.ComputeAABB(this.m_aabb,i);this.m_proxy=t.CreateProxy(this.m_aabb,this)};ot.prototype.DestroyProxy=function(t){if(this.m_proxy==null){return}t.DestroyProxy(this.m_proxy);this.m_proxy=null};ot.prototype.Synchronize=function(t,i,o){if(!this.m_proxy)return;var n=new h;var s=new h;this.m_shape.ComputeAABB(n,i);this.m_shape.ComputeAABB(s,o);this.m_aabb.Combine(n,s);var r=e.SubtractVV(o.position,i.position);t.MoveProxy(this.m_proxy,this.m_aabb,r)};et.b2FixtureDef=function(){this.filter=new it};et.prototype.b2FixtureDef=function(){this.shape=null;this.userData=null;this.friction=.2;this.restitution=0;this.density=0;this.filter.categoryBits=1;this.filter.maskBits=65535;this.filter.groupIndex=0;this.isSensor=false};nt.b2Island=function(){};nt.prototype.b2Island=function(){this.m_bodies=new Vector;this.m_contacts=new Vector;this.m_joints=new Vector};nt.prototype.Initialize=function(t,i,o,e,n,s){if(t===undefined)t=0;if(i===undefined)i=0;if(o===undefined)o=0;var r=0;this.m_bodyCapacity=t;this.m_contactCapacity=i;this.m_jointCapacity=o;this.m_bodyCount=0;this.m_contactCount=0;this.m_jointCount=0;this.m_allocator=e;this.m_listener=n;this.m_contactSolver=s;for(r=this.m_bodies.length;r<t;r++)this.m_bodies[r]=null;for(r=this.m_contacts.length;r<i;r++)this.m_contacts[r]=null;for(r=this.m_joints.length;r<o;r++)this.m_joints[r]=null};nt.prototype.Clear=function(){this.m_bodyCount=0;this.m_contactCount=0;this.m_jointCount=0};nt.prototype.Solve=function(t,i,o){var n=0;var s=0;var r;var a;for(n=0;n<this.m_bodyCount;++n){r=this.m_bodies[n];if(r.GetType()!=W.b2_dynamicBody)continue;r.m_linearVelocity.x+=t.dt*(i.x+r.m_invMass*r.m_force.x);r.m_linearVelocity.y+=t.dt*(i.y+r.m_invMass*r.m_force.y);r.m_angularVelocity+=t.dt*r.m_invI*r.m_torque;r.m_linearVelocity.Multiply(e.Clamp(1-t.dt*r.m_linearDamping,0,1));r.m_angularVelocity*=e.Clamp(1-t.dt*r.m_angularDamping,0,1)}this.m_contactSolver.Initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var l=this.m_contactSolver;l.InitVelocityConstraints(t);for(n=0;n<this.m_jointCount;++n){a=this.m_joints[n];a.InitVelocityConstraints(t)}for(n=0;n<t.velocityIterations;++n){for(s=0;s<this.m_jointCount;++s){a=this.m_joints[s];a.SolveVelocityConstraints(t)}l.SolveVelocityConstraints()}for(n=0;n<this.m_jointCount;++n){a=this.m_joints[n];a.FinalizeVelocityConstraints()}l.FinalizeVelocityConstraints();for(n=0;n<this.m_bodyCount;++n){r=this.m_bodies[n];if(r.GetType()==W.b2_staticBody)continue;var m=t.dt*r.m_linearVelocity.x;var h=t.dt*r.m_linearVelocity.y;if(m*m+h*h>c.b2_maxTranslationSquared){r.m_linearVelocity.Normalize();r.m_linearVelocity.x*=c.b2_maxTranslation*t.inv_dt;r.m_linearVelocity.y*=c.b2_maxTranslation*t.inv_dt}var _=t.dt*r.m_angularVelocity;if(_*_>c.b2_maxRotationSquared){if(r.m_angularVelocity<0){r.m_angularVelocity=-c.b2_maxRotation*t.inv_dt}else{r.m_angularVelocity=c.b2_maxRotation*t.inv_dt}}r.m_sweep.c0.SetV(r.m_sweep.c);r.m_sweep.a0=r.m_sweep.a;r.m_sweep.c.x+=t.dt*r.m_linearVelocity.x;r.m_sweep.c.y+=t.dt*r.m_linearVelocity.y;r.m_sweep.a+=t.dt*r.m_angularVelocity;r.SynchronizeTransform()}for(n=0;n<t.positionIterations;++n){var p=l.SolvePositionConstraints(c.b2_contactBaumgarte);var y=true;for(s=0;s<this.m_jointCount;++s){a=this.m_joints[s];var u=a.SolvePositionConstraints(c.b2_contactBaumgarte);y=y&&u}if(p&&y){break}}this.Report(l.m_constraints);if(o){var x=Number.MAX_VALUE;var f=c.b2_linearSleepTolerance*c.b2_linearSleepTolerance;var v=c.b2_angularSleepTolerance*c.b2_angularSleepTolerance;for(n=0;n<this.m_bodyCount;++n){r=this.m_bodies[n];if(r.GetType()==W.b2_staticBody){continue}if((r.m_flags&W.e_allowSleepFlag)==0){r.m_sleepTime=0;x=0}if((r.m_flags&W.e_allowSleepFlag)==0||r.m_angularVelocity*r.m_angularVelocity>v||e.Dot(r.m_linearVelocity,r.m_linearVelocity)>f){r.m_sleepTime=0;x=0}else{r.m_sleepTime+=t.dt;x=e.Min(x,r.m_sleepTime)}}if(x>=c.b2_timeToSleep){for(n=0;n<this.m_bodyCount;++n){r=this.m_bodies[n];r.SetAwake(false)}}}};nt.prototype.SolveTOI=function(t){var i=0;var o=0;this.m_contactSolver.Initialize(t,this.m_contacts,this.m_contactCount,this.m_allocator);var e=this.m_contactSolver;for(i=0;i<this.m_jointCount;++i){this.m_joints[i].InitVelocityConstraints(t)}for(i=0;i<t.velocityIterations;++i){e.SolveVelocityConstraints();for(o=0;o<this.m_jointCount;++o){this.m_joints[o].SolveVelocityConstraints(t)}}for(i=0;i<this.m_bodyCount;++i){var n=this.m_bodies[i];if(n.GetType()==W.b2_staticBody)continue;var s=t.dt*n.m_linearVelocity.x;var r=t.dt*n.m_linearVelocity.y;if(s*s+r*r>c.b2_maxTranslationSquared){n.m_linearVelocity.Normalize();n.m_linearVelocity.x*=c.b2_maxTranslation*t.inv_dt;n.m_linearVelocity.y*=c.b2_maxTranslation*t.inv_dt}var a=t.dt*n.m_angularVelocity;if(a*a>c.b2_maxRotationSquared){if(n.m_angularVelocity<0){n.m_angularVelocity=-c.b2_maxRotation*t.inv_dt}else{n.m_angularVelocity=c.b2_maxRotation*t.inv_dt}}n.m_sweep.c0.SetV(n.m_sweep.c);n.m_sweep.a0=n.m_sweep.a;n.m_sweep.c.x+=t.dt*n.m_linearVelocity.x;n.m_sweep.c.y+=t.dt*n.m_linearVelocity.y;n.m_sweep.a+=t.dt*n.m_angularVelocity;n.SynchronizeTransform()}var l=.75;for(i=0;i<t.positionIterations;++i){var m=e.SolvePositionConstraints(l);var h=true;for(o=0;o<this.m_jointCount;++o){var _=this.m_joints[o].SolvePositionConstraints(c.b2_contactBaumgarte);h=h&&_}if(m&&h){break}}this.Report(e.m_constraints)};nt.prototype.Report=function(t){if(this.m_listener==null){return}for(var i=0;i<this.m_contactCount;++i){var o=this.m_contacts[i];var e=t[i];for(var n=0;n<e.pointCount;++n){nt.s_impulse.normalImpulses[n]=e.points[n].normalImpulse;nt.s_impulse.tangentImpulses[n]=e.points[n].tangentImpulse}this.m_listener.PostSolve(o,nt.s_impulse)}};nt.prototype.AddBody=function(t){t.m_islandIndex=this.m_bodyCount;this.m_bodies[this.m_bodyCount++]=t};nt.prototype.AddContact=function(t){this.m_contacts[this.m_contactCount++]=t};nt.prototype.AddJoint=function(t){this.m_joints[this.m_jointCount++]=t};Box2D.postDefs.push(function(){Box2D.Dynamics.b2Island.s_impulse=new H});st.b2TimeStep=function(){};st.prototype.Set=function(t){this.dt=t.dt;this.inv_dt=t.inv_dt;this.positionIterations=t.positionIterations;this.velocityIterations=t.velocityIterations;this.warmStarting=t.warmStarting};rt.b2World=function(){this.s_stack=new Vector;this.m_contactManager=new Q;this.m_contactSolver=new ut;this.m_island=new nt};rt.prototype.b2World=function(t,i){this.m_destructionListener=null;this.m_debugDraw=null;this.m_bodyList=null;this.m_contactList=null;this.m_jointList=null;this.m_controllerList=null;this.m_bodyCount=0;this.m_contactCount=0;this.m_jointCount=0;this.m_controllerCount=0;rt.m_warmStarting=true;rt.m_continuousPhysics=true;this.m_allowSleep=i;this.m_gravity=t;this.m_inv_dt0=0;this.m_contactManager.m_world=this;var o=new X;this.m_groundBody=this.CreateBody(o)};rt.prototype.SetDestructionListener=function(t){this.m_destructionListener=t};rt.prototype.SetContactFilter=function(t){this.m_contactManager.m_contactFilter=t};rt.prototype.SetContactListener=function(t){this.m_contactManager.m_contactListener=t};rt.prototype.SetDebugDraw=function(t){this.m_debugDraw=t};rt.prototype.SetBroadPhase=function(t){var i=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=t;for(var o=this.m_bodyList;o;o=o.m_next){for(var e=o.m_fixtureList;e;e=e.m_next){e.m_proxy=t.CreateProxy(i.GetFatAABB(e.m_proxy),e)}}};rt.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()};rt.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()};rt.prototype.CreateBody=function(t){if(this.IsLocked()==true){return null}var i=new W(t,this);i.m_prev=null;i.m_next=this.m_bodyList;if(this.m_bodyList){this.m_bodyList.m_prev=i}this.m_bodyList=i;++this.m_bodyCount;return i};rt.prototype.DestroyBody=function(t){if(this.IsLocked()==true){return}var i=t.m_jointList;while(i){var o=i;i=i.next;if(this.m_destructionListener){this.m_destructionListener.SayGoodbyeJoint(o.joint)}this.DestroyJoint(o.joint)}var e=t.m_controllerList;while(e){var n=e;e=e.nextController;n.controller.RemoveBody(t)}var s=t.m_contactList;while(s){var r=s;s=s.next;this.m_contactManager.Destroy(r.contact)}t.m_contactList=null;var a=t.m_fixtureList;while(a){var l=a;a=a.m_next;if(this.m_destructionListener){this.m_destructionListener.SayGoodbyeFixture(l)}l.DestroyProxy(this.m_contactManager.m_broadPhase);l.Destroy()}t.m_fixtureList=null;t.m_fixtureCount=0;if(t.m_prev){t.m_prev.m_next=t.m_next}if(t.m_next){t.m_next.m_prev=t.m_prev}if(t==this.m_bodyList){this.m_bodyList=t.m_next}--this.m_bodyCount};rt.prototype.CreateJoint=function(t){var i=It.Create(t,null);i.m_prev=null;i.m_next=this.m_jointList;if(this.m_jointList){this.m_jointList.m_prev=i}this.m_jointList=i;++this.m_jointCount;i.m_edgeA.joint=i;i.m_edgeA.other=i.m_bodyB;i.m_edgeA.prev=null;i.m_edgeA.next=i.m_bodyA.m_jointList;if(i.m_bodyA.m_jointList)i.m_bodyA.m_jointList.prev=i.m_edgeA;i.m_bodyA.m_jointList=i.m_edgeA;i.m_edgeB.joint=i;i.m_edgeB.other=i.m_bodyA;i.m_edgeB.prev=null;i.m_edgeB.next=i.m_bodyB.m_jointList;if(i.m_bodyB.m_jointList)i.m_bodyB.m_jointList.prev=i.m_edgeB;i.m_bodyB.m_jointList=i.m_edgeB;var o=t.bodyA;var e=t.bodyB;if(t.collideConnected==false){var n=e.GetContactList();while(n){if(n.other==o){n.contact.FlagForFiltering()}n=n.next}}return i};rt.prototype.DestroyJoint=function(t){var i=t.m_collideConnected;if(t.m_prev){t.m_prev.m_next=t.m_next}if(t.m_next){t.m_next.m_prev=t.m_prev}if(t==this.m_jointList){this.m_jointList=t.m_next}var o=t.m_bodyA;var e=t.m_bodyB;o.SetAwake(true);e.SetAwake(true);if(t.m_edgeA.prev){t.m_edgeA.prev.next=t.m_edgeA.next}if(t.m_edgeA.next){t.m_edgeA.next.prev=t.m_edgeA.prev}if(t.m_edgeA==o.m_jointList){o.m_jointList=t.m_edgeA.next}t.m_edgeA.prev=null;t.m_edgeA.next=null;if(t.m_edgeB.prev){t.m_edgeB.prev.next=t.m_edgeB.next}if(t.m_edgeB.next){t.m_edgeB.next.prev=t.m_edgeB.prev}if(t.m_edgeB==e.m_jointList){e.m_jointList=t.m_edgeB.next}t.m_edgeB.prev=null;t.m_edgeB.next=null;It.Destroy(t,null);--this.m_jointCount;if(i==false){var n=e.GetContactList();while(n){if(n.other==o){n.contact.FlagForFiltering()}n=n.next}}};rt.prototype.AddController=function(t){t.m_next=this.m_controllerList;t.m_prev=null;this.m_controllerList=t;t.m_world=this;this.m_controllerCount++;return t};rt.prototype.RemoveController=function(t){if(t.m_prev)t.m_prev.m_next=t.m_next;if(t.m_next)t.m_next.m_prev=t.m_prev;if(this.m_controllerList==t)this.m_controllerList=t.m_next;this.m_controllerCount--};rt.prototype.CreateController=function(t){if(t.m_world!=this)throw new Error("Controller can only be a member of one world");t.m_next=this.m_controllerList;t.m_prev=null;if(this.m_controllerList)this.m_controllerList.m_prev=t;this.m_controllerList=t;++this.m_controllerCount;t.m_world=this;return t};rt.prototype.DestroyController=function(t){t.Clear();if(t.m_next)t.m_next.m_prev=t.m_prev;if(t.m_prev)t.m_prev.m_next=t.m_next;if(t==this.m_controllerList)this.m_controllerList=t.m_next;--this.m_controllerCount};rt.prototype.SetWarmStarting=function(t){rt.m_warmStarting=t};rt.prototype.SetContinuousPhysics=function(t){rt.m_continuousPhysics=t};rt.prototype.GetBodyCount=function(){return this.m_bodyCount};rt.prototype.GetJointCount=function(){return this.m_jointCount};rt.prototype.GetContactCount=function(){return this.m_contactCount};rt.prototype.SetGravity=function(t){this.m_gravity=t};rt.prototype.GetGravity=function(){return this.m_gravity};rt.prototype.GetGroundBody=function(){return this.m_groundBody};rt.prototype.Step=function(t,i,o){if(t===undefined)t=0;if(i===undefined)i=0;if(o===undefined)o=0;if(this.m_flags&rt.e_newFixture){this.m_contactManager.FindNewContacts();this.m_flags&=~rt.e_newFixture}this.m_flags|=rt.e_locked;var e=rt.s_timestep2;e.dt=t;e.velocityIterations=i;e.positionIterations=o;if(t>0){e.inv_dt=1/t}else{e.inv_dt=0}e.dtRatio=this.m_inv_dt0*t;e.warmStarting=rt.m_warmStarting;this.m_contactManager.Collide();if(e.dt>0){this.Solve(e)}if(rt.m_continuousPhysics&&e.dt>0){this.SolveTOI(e)}if(e.dt>0){this.m_inv_dt0=e.inv_dt}this.m_flags&=~rt.e_locked};rt.prototype.ClearForces=function(){for(var t=this.m_bodyList;t;t=t.m_next){t.m_force.SetZero();t.m_torque=0}};rt.prototype.DrawDebugData=function(){if(this.m_debugDraw==null){return}this.m_debugDraw.m_sprite.graphics.clear();var t=this.m_debugDraw.GetFlags();var i=0;var o;var e;var n;var s;var a;var m=new r;var c=new r;var _=new r;var p;var y=new h;var u=new h;var x=[new r,new r,new r,new r];var f=new l(0,0,0);if(t&$.e_shapeBit){for(o=this.m_bodyList;o;o=o.m_next){p=o.m_xf;for(e=o.GetFixtureList();e;e=e.m_next){n=e.GetShape();if(o.IsActive()==false){f.Set(.5,.5,.3);this.DrawShape(n,p,f)}else if(o.GetType()==W.b2_staticBody){f.Set(.5,.9,.5);this.DrawShape(n,p,f)}else if(o.GetType()==W.b2_kinematicBody){f.Set(.5,.5,.9);this.DrawShape(n,p,f)}else if(o.IsAwake()==false){f.Set(.6,.6,.6);this.DrawShape(n,p,f)}else{f.Set(.9,.7,.7);this.DrawShape(n,p,f)}}}}if(t&$.e_jointBit){for(s=this.m_jointList;s;s=s.m_next){this.DrawJoint(s)}}if(t&$.e_controllerBit){for(var v=this.m_controllerList;v;v=v.m_next){v.Draw(this.m_debugDraw)}}if(t&$.e_pairBit){f.Set(.3,.9,.9);for(var d=this.m_contactManager.m_contactList;d;d=d.GetNext()){var b=d.GetFixtureA();var D=d.GetFixtureB();var B=b.GetAABB().GetCenter();var C=D.GetAABB().GetCenter();this.m_debugDraw.DrawSegment(B,C,f)}}if(t&$.e_aabbBit){a=this.m_contactManager.m_broadPhase;x=[new r,new r,new r,new r];for(o=this.m_bodyList;o;o=o.GetNext()){if(o.IsActive()==false){continue}for(e=o.GetFixtureList();e;e=e.GetNext()){var A=a.GetFatAABB(e.m_proxy);x[0].Set(A.lowerBound.x,A.lowerBound.y);x[1].Set(A.upperBound.x,A.lowerBound.y);x[2].Set(A.upperBound.x,A.upperBound.y);x[3].Set(A.lowerBound.x,A.upperBound.y);this.m_debugDraw.DrawPolygon(x,4,f)}}}if(t&$.e_centerOfMassBit){for(o=this.m_bodyList;o;o=o.m_next){p=rt.s_xf;p.R=o.m_xf.R;p.position=o.GetWorldCenter();this.m_debugDraw.DrawTransform(p)}}};rt.prototype.QueryAABB=function(t,i){var o=this;var e=o.m_contactManager.m_broadPhase;function n(i){return t(e.GetUserData(i))}e.Query(n,i)};rt.prototype.QueryShape=function(t,i,o){var e=this;if(o===undefined)o=null;if(o==null){o=new s;o.SetIdentity()}var n=e.m_contactManager.m_broadPhase;function r(e){var s=n.GetUserData(e)instanceof ot?n.GetUserData(e):null;if(K.TestOverlap(i,o,s.GetShape(),s.GetBody().GetTransform()))return t(s);return true}var a=new h;i.ComputeAABB(a,o);n.Query(r,a)};rt.prototype.QueryPoint=function(t,i){var o=this;var e=o.m_contactManager.m_broadPhase;function n(o){var n=e.GetUserData(o)instanceof ot?e.GetUserData(o):null;if(n.TestPoint(i))return t(n);return true}var s=new h;s.lowerBound.Set(i.x-c.b2_linearSlop,i.y-c.b2_linearSlop);s.upperBound.Set(i.x+c.b2_linearSlop,i.y+c.b2_linearSlop);e.Query(n,s)};rt.prototype.RayCast=function(t,i,o){var e=this;var n=e.m_contactManager.m_broadPhase;var s=new V;function a(e,a){var l=n.GetUserData(a);var m=l instanceof ot?l:null;var c=m.RayCast(s,e);if(c){var h=s.fraction;var _=new r((1-h)*i.x+h*o.x,(1-h)*i.y+h*o.y);return t(m,_,s.normal,h)}return e.maxFraction}var l=new M(i,o);n.RayCast(a,l)};rt.prototype.RayCastOne=function(t,i){var o=this;var e;function n(t,i,o,n){if(n===undefined)n=0;e=t;return n}o.RayCast(n,t,i);return e};rt.prototype.RayCastAll=function(t,i){var o=this;var e=new Vector;function n(t,i,o,n){if(n===undefined)n=0;e[e.length]=t;return 1}o.RayCast(n,t,i);return e};rt.prototype.GetBodyList=function(){return this.m_bodyList};rt.prototype.GetJointList=function(){return this.m_jointList};rt.prototype.GetContactList=function(){return this.m_contactList};rt.prototype.IsLocked=function(){return(this.m_flags&rt.e_locked)>0};rt.prototype.Solve=function(t){var i;for(var o=this.m_controllerList;o;o=o.m_next){o.Step(t)}var e=this.m_island;e.Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver);for(i=this.m_bodyList;i;i=i.m_next){i.m_flags&=~W.e_islandFlag}for(var n=this.m_contactList;n;n=n.m_next){n.m_flags&=~lt.e_islandFlag}for(var s=this.m_jointList;s;s=s.m_next){s.m_islandFlag=false}var r=parseInt(this.m_bodyCount);var a=this.s_stack;for(var l=this.m_bodyList;l;l=l.m_next){if(l.m_flags&W.e_islandFlag){continue}if(l.IsAwake()==false||l.IsActive()==false){continue}if(l.GetType()==W.b2_staticBody){continue}e.Clear();var m=0;a[m++]=l;l.m_flags|=W.e_islandFlag;while(m>0){i=a[--m];e.AddBody(i);if(i.IsAwake()==false){i.SetAwake(true)}if(i.GetType()==W.b2_staticBody){continue}var c;for(var h=i.m_contactList;h;h=h.next){if(h.contact.m_flags&lt.e_islandFlag){continue}if(h.contact.IsSensor()==true||h.contact.IsEnabled()==false||h.contact.IsTouching()==false){continue}e.AddContact(h.contact);h.contact.m_flags|=lt.e_islandFlag;c=h.other;if(c.m_flags&W.e_islandFlag){continue}a[m++]=c;c.m_flags|=W.e_islandFlag}for(var _=i.m_jointList;_;_=_.next){if(_.joint.m_islandFlag==true){continue}c=_.other;if(c.IsActive()==false){continue}e.AddJoint(_.joint);_.joint.m_islandFlag=true;if(c.m_flags&W.e_islandFlag){continue}a[m++]=c;c.m_flags|=W.e_islandFlag}}e.Solve(t,this.m_gravity,this.m_allowSleep);for(var p=0;p<e.m_bodyCount;++p){i=e.m_bodies[p];if(i.GetType()==W.b2_staticBody){i.m_flags&=~W.e_islandFlag}}}for(p=0;p<a.length;++p){if(!a[p])break;a[p]=null}for(i=this.m_bodyList;i;i=i.m_next){if(i.IsAwake()==false||i.IsActive()==false){continue}if(i.GetType()==W.b2_staticBody){continue}i.SynchronizeFixtures()}this.m_contactManager.FindNewContacts()};rt.prototype.SolveTOI=function(t){var i;var o;var e;var n;var s;var r;var a;var l=this.m_island;l.Initialize(this.m_bodyCount,c.b2_maxTOIContactsPerIsland,c.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var m=rt.s_queue;for(i=this.m_bodyList;i;i=i.m_next){i.m_flags&=~W.e_islandFlag;i.m_sweep.t0=0}var h;for(h=this.m_contactList;h;h=h.m_next){h.m_flags&=~(lt.e_toiFlag|lt.e_islandFlag)}for(a=this.m_jointList;a;a=a.m_next){a.m_islandFlag=false}for(;;){var _=null;var p=1;for(h=this.m_contactList;h;h=h.m_next){if(h.IsSensor()==true||h.IsEnabled()==false||h.IsContinuous()==false){continue}var y=1;if(h.m_flags&lt.e_toiFlag){y=h.m_toi}else{o=h.m_fixtureA;e=h.m_fixtureB;n=o.m_body;s=e.m_body;if((n.GetType()!=W.b2_dynamicBody||n.IsAwake()==false)&&(s.GetType()!=W.b2_dynamicBody||s.IsAwake()==false)){continue}var u=n.m_sweep.t0;if(n.m_sweep.t0<s.m_sweep.t0){u=s.m_sweep.t0;n.m_sweep.Advance(u)}else if(s.m_sweep.t0<n.m_sweep.t0){u=n.m_sweep.t0;s.m_sweep.Advance(u)}y=h.ComputeTOI(n.m_sweep,s.m_sweep);c.b2Assert(0<=y&&y<=1);if(y>0&&y<1){y=(1-y)*u+y;if(y>1)y=1}h.m_toi=y;h.m_flags|=lt.e_toiFlag}if(Number.MIN_VALUE<y&&y<p){_=h;p=y}}if(_==null||1-100*Number.MIN_VALUE<p){break}o=_.m_fixtureA;e=_.m_fixtureB;n=o.m_body;s=e.m_body;rt.s_backupA.Set(n.m_sweep);rt.s_backupB.Set(s.m_sweep);n.Advance(p);s.Advance(p);_.Update(this.m_contactManager.m_contactListener);_.m_flags&=~lt.e_toiFlag;if(_.IsSensor()==true||_.IsEnabled()==false){n.m_sweep.Set(rt.s_backupA);s.m_sweep.Set(rt.s_backupB);n.SynchronizeTransform();s.SynchronizeTransform();continue}if(_.IsTouching()==false){continue}var x=n;if(x.GetType()!=W.b2_dynamicBody){x=s}l.Clear();var f=0;var v=0;m[f+v++]=x;x.m_flags|=W.e_islandFlag;while(v>0){i=m[f++];--v;l.AddBody(i);if(i.IsAwake()==false){i.SetAwake(true)}if(i.GetType()!=W.b2_dynamicBody){continue}for(r=i.m_contactList;r;r=r.next){if(l.m_contactCount==l.m_contactCapacity){break}if(r.contact.m_flags&lt.e_islandFlag){continue}if(r.contact.IsSensor()==true||r.contact.IsEnabled()==false||r.contact.IsTouching()==false){continue}l.AddContact(r.contact);r.contact.m_flags|=lt.e_islandFlag;var d=r.other;if(d.m_flags&W.e_islandFlag){continue}if(d.GetType()!=W.b2_staticBody){d.Advance(p);d.SetAwake(true)}m[f+v]=d;++v;d.m_flags|=W.e_islandFlag}for(var b=i.m_jointList;b;b=b.next){if(l.m_jointCount==l.m_jointCapacity)continue;if(b.joint.m_islandFlag==true)continue;d=b.other;if(d.IsActive()==false){continue}l.AddJoint(b.joint);b.joint.m_islandFlag=true;if(d.m_flags&W.e_islandFlag)continue;if(d.GetType()!=W.b2_staticBody){d.Advance(p);d.SetAwake(true)}m[f+v]=d;++v;d.m_flags|=W.e_islandFlag}}var D=rt.s_timestep;D.warmStarting=false;D.dt=(1-p)*t.dt;D.inv_dt=1/D.dt;D.dtRatio=0;D.velocityIterations=t.velocityIterations;D.positionIterations=t.positionIterations;l.SolveTOI(D);var B=0;for(B=0;B<l.m_bodyCount;++B){i=l.m_bodies[B];i.m_flags&=~W.e_islandFlag;if(i.IsAwake()==false){continue}if(i.GetType()!=W.b2_dynamicBody){continue}i.SynchronizeFixtures();for(r=i.m_contactList;r;r=r.next){r.contact.m_flags&=~lt.e_toiFlag}}for(B=0;B<l.m_contactCount;++B){h=l.m_contacts[B];h.m_flags&=~(lt.e_toiFlag|lt.e_islandFlag)}for(B=0;B<l.m_jointCount;++B){a=l.m_joints[B];a.m_islandFlag=false}this.m_contactManager.FindNewContacts()}};rt.prototype.DrawJoint=function(t){var i=t.GetBodyA();var o=t.GetBodyB();var e=i.m_xf;var n=o.m_xf;var s=e.position;var r=n.position;var a=t.GetAnchorA();var l=t.GetAnchorB();var m=rt.s_jointColor;switch(t.m_type){case It.e_distanceJoint:this.m_debugDraw.DrawSegment(a,l,m);break;case It.e_pulleyJoint:{var c=t instanceof Nt?t:null;var h=c.GetGroundAnchorA();var _=c.GetGroundAnchorB();this.m_debugDraw.DrawSegment(h,a,m);this.m_debugDraw.DrawSegment(_,l,m);this.m_debugDraw.DrawSegment(h,_,m)}break;case It.e_mouseJoint:this.m_debugDraw.DrawSegment(a,l,m);break;default:if(i!=this.m_groundBody)this.m_debugDraw.DrawSegment(s,a,m);this.m_debugDraw.DrawSegment(a,l,m);if(o!=this.m_groundBody)this.m_debugDraw.DrawSegment(r,l,m)}};rt.prototype.DrawShape=function(t,i,o){switch(t.m_type){case K.e_circleShape:{var n=t instanceof E?t:null;var s=e.MulX(i,n.m_p);var r=n.m_radius;var a=i.R.col1;this.m_debugDraw.DrawSolidCircle(s,r,a,o)}break;case K.e_polygonShape:{var l=0;var m=t instanceof q?t:null;var c=parseInt(m.GetVertexCount());var h=m.GetVertices();var _=new Vector(c);for(l=0;l<c;++l){_[l]=e.MulX(i,h[l])}this.m_debugDraw.DrawSolidPolygon(_,c,o)}break;case K.e_edgeShape:{var p=t instanceof O?t:null;this.m_debugDraw.DrawSegment(e.MulX(i,p.GetVertex1()),e.MulX(i,p.GetVertex2()),o)}break}};Box2D.postDefs.push(function(){Box2D.Dynamics.b2World.s_timestep2=new st;Box2D.Dynamics.b2World.s_xf=new s;Box2D.Dynamics.b2World.s_backupA=new n;Box2D.Dynamics.b2World.s_backupB=new n;Box2D.Dynamics.b2World.s_timestep=new st;Box2D.Dynamics.b2World.s_queue=new Vector;Box2D.Dynamics.b2World.s_jointColor=new l(.5,.8,.8);Box2D.Dynamics.b2World.e_newFixture=1;Box2D.Dynamics.b2World.e_locked=2})})();(function(){var t=Box2D.Collision.Shapes.b2CircleShape,i=Box2D.Collision.Shapes.b2EdgeChainDef,o=Box2D.Collision.Shapes.b2EdgeShape,e=Box2D.Collision.Shapes.b2MassData,n=Box2D.Collision.Shapes.b2PolygonShape,s=Box2D.Collision.Shapes.b2Shape,r=Box2D.Dynamics.Contacts.b2CircleContact,a=Box2D.Dynamics.Contacts.b2Contact,l=Box2D.Dynamics.Contacts.b2ContactConstraint,m=Box2D.Dynamics.Contacts.b2ContactConstraintPoint,c=Box2D.Dynamics.Contacts.b2ContactEdge,h=Box2D.Dynamics.Contacts.b2ContactFactory,_=Box2D.Dynamics.Contacts.b2ContactRegister,p=Box2D.Dynamics.Contacts.b2ContactResult,y=Box2D.Dynamics.Contacts.b2ContactSolver,u=Box2D.Dynamics.Contacts.b2EdgeAndCircleContact,x=Box2D.Dynamics.Contacts.b2NullContact,f=Box2D.Dynamics.Contacts.b2PolyAndCircleContact,v=Box2D.Dynamics.Contacts.b2PolyAndEdgeContact,d=Box2D.Dynamics.Contacts.b2PolygonContact,b=Box2D.Dynamics.Contacts.b2PositionSolverManifold,D=Box2D.Dynamics.b2Body,B=Box2D.Dynamics.b2BodyDef,C=Box2D.Dynamics.b2ContactFilter,A=Box2D.Dynamics.b2ContactImpulse,S=Box2D.Dynamics.b2ContactListener,w=Box2D.Dynamics.b2ContactManager,g=Box2D.Dynamics.b2DebugDraw,M=Box2D.Dynamics.b2DestructionListener,V=Box2D.Dynamics.b2FilterData,I=Box2D.Dynamics.b2Fixture,G=Box2D.Dynamics.b2FixtureDef,L=Box2D.Dynamics.b2Island,J=Box2D.Dynamics.b2TimeStep,F=Box2D.Dynamics.b2World,P=Box2D.Common.b2Color,R=Box2D.Common.b2internal,T=Box2D.Common.b2Settings,k=Box2D.Common.Math.b2Mat22,N=Box2D.Common.Math.b2Mat33,z=Box2D.Common.Math.b2Math,E=Box2D.Common.Math.b2Sweep,j=Box2D.Common.Math.b2Transform,O=Box2D.Common.Math.b2Vec2,U=Box2D.Common.Math.b2Vec3,q=Box2D.Collision.b2AABB,K=Box2D.Collision.b2Bound,W=Box2D.Collision.b2BoundValues,X=Box2D.Collision.b2Collision,Z=Box2D.Collision.b2ContactID,H=Box2D.Collision.b2ContactPoint,Y=Box2D.Collision.b2Distance,Q=Box2D.Collision.b2DistanceInput,$=Box2D.Collision.b2DistanceOutput,tt=Box2D.Collision.b2DistanceProxy,it=Box2D.Collision.b2DynamicTree,ot=Box2D.Collision.b2DynamicTreeBroadPhase,et=Box2D.Collision.b2DynamicTreeNode,nt=Box2D.Collision.b2DynamicTreePair,st=Box2D.Collision.b2Manifold,rt=Box2D.Collision.b2ManifoldPoint,at=Box2D.Collision.b2Point,lt=Box2D.Collision.b2RayCastInput,mt=Box2D.Collision.b2RayCastOutput,ct=Box2D.Collision.b2Segment,ht=Box2D.Collision.b2SeparationFunction,_t=Box2D.Collision.b2Simplex,pt=Box2D.Collision.b2SimplexCache,yt=Box2D.Collision.b2SimplexVertex,ut=Box2D.Collision.b2TimeOfImpact,xt=Box2D.Collision.b2TOIInput,ft=Box2D.Collision.b2WorldManifold,vt=Box2D.Collision.ClipVertex,dt=Box2D.Collision.Features,bt=Box2D.Collision.IBroadPhase;Box2D.inherit(r,Box2D.Dynamics.Contacts.b2Contact);r.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype;r.b2CircleContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)};r.Create=function(t){return new r};r.Destroy=function(t,i){};r.prototype.Reset=function(t,i){this.__super.Reset.call(this,t,i)};r.prototype.Evaluate=function(){var i=this.m_fixtureA.GetBody();var o=this.m_fixtureB.GetBody();X.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof t?this.m_fixtureA.GetShape():null,i.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,o.m_xf)};a.b2Contact=function(){this.m_nodeA=new c;this.m_nodeB=new c;this.m_manifold=new st;this.m_oldManifold=new st};a.prototype.GetManifold=function(){return this.m_manifold};a.prototype.GetWorldManifold=function(t){var i=this.m_fixtureA.GetBody();var o=this.m_fixtureB.GetBody();var e=this.m_fixtureA.GetShape();var n=this.m_fixtureB.GetShape();t.Initialize(this.m_manifold,i.GetTransform(),e.m_radius,o.GetTransform(),n.m_radius)};a.prototype.IsTouching=function(){return(this.m_flags&a.e_touchingFlag)==a.e_touchingFlag};a.prototype.IsContinuous=function(){return(this.m_flags&a.e_continuousFlag)==a.e_continuousFlag};a.prototype.SetSensor=function(t){if(t){this.m_flags|=a.e_sensorFlag}else{this.m_flags&=~a.e_sensorFlag}};a.prototype.IsSensor=function(){return(this.m_flags&a.e_sensorFlag)==a.e_sensorFlag};a.prototype.SetEnabled=function(t){if(t){this.m_flags|=a.e_enabledFlag}else{this.m_flags&=~a.e_enabledFlag}};a.prototype.IsEnabled=function(){return(this.m_flags&a.e_enabledFlag)==a.e_enabledFlag};a.prototype.GetNext=function(){return this.m_next};a.prototype.GetFixtureA=function(){return this.m_fixtureA};a.prototype.GetFixtureB=function(){return this.m_fixtureB};a.prototype.FlagForFiltering=function(){this.m_flags|=a.e_filterFlag};a.prototype.b2Contact=function(){};a.prototype.Reset=function(t,i){if(t===undefined)t=null;if(i===undefined)i=null;this.m_flags=a.e_enabledFlag;if(!t||!i){this.m_fixtureA=null;this.m_fixtureB=null;return}if(t.IsSensor()||i.IsSensor()){this.m_flags|=a.e_sensorFlag}var o=t.GetBody();var e=i.GetBody();if(o.GetType()!=D.b2_dynamicBody||o.IsBullet()||e.GetType()!=D.b2_dynamicBody||e.IsBullet()){this.m_flags|=a.e_continuousFlag}this.m_fixtureA=t;this.m_fixtureB=i;this.m_manifold.m_pointCount=0;this.m_prev=null;this.m_next=null;this.m_nodeA.contact=null;this.m_nodeA.prev=null;this.m_nodeA.next=null;this.m_nodeA.other=null;this.m_nodeB.contact=null;this.m_nodeB.prev=null;this.m_nodeB.next=null;this.m_nodeB.other=null};a.prototype.Update=function(t){var i=this.m_oldManifold;this.m_oldManifold=this.m_manifold;this.m_manifold=i;this.m_flags|=a.e_enabledFlag;var o=false;var e=(this.m_flags&a.e_touchingFlag)==a.e_touchingFlag;var n=this.m_fixtureA.m_body;var r=this.m_fixtureB.m_body;var l=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);if(this.m_flags&a.e_sensorFlag){if(l){var m=this.m_fixtureA.GetShape();var c=this.m_fixtureB.GetShape();var h=n.GetTransform();var _=r.GetTransform();o=s.TestOverlap(m,h,c,_)}this.m_manifold.m_pointCount=0}else{if(n.GetType()!=D.b2_dynamicBody||n.IsBullet()||r.GetType()!=D.b2_dynamicBody||r.IsBullet()){this.m_flags|=a.e_continuousFlag}else{this.m_flags&=~a.e_continuousFlag}if(l){this.Evaluate();o=this.m_manifold.m_pointCount>0;for(var p=0;p<this.m_manifold.m_pointCount;++p){var y=this.m_manifold.m_points[p];y.m_normalImpulse=0;y.m_tangentImpulse=0;var u=y.m_id;for(var x=0;x<this.m_oldManifold.m_pointCount;++x){var f=this.m_oldManifold.m_points[x];if(f.m_id.key==u.key){y.m_normalImpulse=f.m_normalImpulse;y.m_tangentImpulse=f.m_tangentImpulse;break}}}}else{this.m_manifold.m_pointCount=0}if(o!=e){n.SetAwake(true);r.SetAwake(true)}}if(o){this.m_flags|=a.e_touchingFlag}else{this.m_flags&=~a.e_touchingFlag}if(e==false&&o==true){t.BeginContact(this)}if(e==true&&o==false){t.EndContact(this)}if((this.m_flags&a.e_sensorFlag)==0){t.PreSolve(this,this.m_oldManifold)}};a.prototype.Evaluate=function(){};a.prototype.ComputeTOI=function(t,i){a.s_input.proxyA.Set(this.m_fixtureA.GetShape());a.s_input.proxyB.Set(this.m_fixtureB.GetShape());a.s_input.sweepA=t;a.s_input.sweepB=i;a.s_input.tolerance=T.b2_linearSlop;return ut.TimeOfImpact(a.s_input)};Box2D.postDefs.push(function(){Box2D.Dynamics.Contacts.b2Contact.e_sensorFlag=1;Box2D.Dynamics.Contacts.b2Contact.e_continuousFlag=2;Box2D.Dynamics.Contacts.b2Contact.e_islandFlag=4;Box2D.Dynamics.Contacts.b2Contact.e_toiFlag=8;Box2D.Dynamics.Contacts.b2Contact.e_touchingFlag=16;Box2D.Dynamics.Contacts.b2Contact.e_enabledFlag=32;Box2D.Dynamics.Contacts.b2Contact.e_filterFlag=64;Box2D.Dynamics.Contacts.b2Contact.s_input=new xt});l.b2ContactConstraint=function(){this.localPlaneNormal=new O;this.localPoint=new O;this.normal=new O;this.normalMass=new k;this.K=new k};l.prototype.b2ContactConstraint=function(){this.points=new Vector(T.b2_maxManifoldPoints);for(var t=0;t<T.b2_maxManifoldPoints;t++){this.points[t]=new m}};m.b2ContactConstraintPoint=function(){this.localPoint=new O;this.rA=new O;this.rB=new O};c.b2ContactEdge=function(){};h.b2ContactFactory=function(){};h.prototype.b2ContactFactory=function(t){this.m_allocator=t;this.InitializeRegisters()};h.prototype.AddType=function(t,i,o,e){if(o===undefined)o=0;if(e===undefined)e=0;this.m_registers[o][e].createFcn=t;this.m_registers[o][e].destroyFcn=i;this.m_registers[o][e].primary=true;if(o!=e){this.m_registers[e][o].createFcn=t;this.m_registers[e][o].destroyFcn=i;this.m_registers[e][o].primary=false}};h.prototype.InitializeRegisters=function(){this.m_registers=new Vector(s.e_shapeTypeCount);for(var t=0;t<s.e_shapeTypeCount;t++){this.m_registers[t]=new Vector(s.e_shapeTypeCount);for(var i=0;i<s.e_shapeTypeCount;i++){this.m_registers[t][i]=new _}}this.AddType(r.Create,r.Destroy,s.e_circleShape,s.e_circleShape);this.AddType(f.Create,f.Destroy,s.e_polygonShape,s.e_circleShape);this.AddType(d.Create,d.Destroy,s.e_polygonShape,s.e_polygonShape);this.AddType(u.Create,u.Destroy,s.e_edgeShape,s.e_circleShape);this.AddType(v.Create,v.Destroy,s.e_polygonShape,s.e_edgeShape)};h.prototype.Create=function(t,i){var o=parseInt(t.GetType());var e=parseInt(i.GetType());var n=this.m_registers[o][e];var s;if(n.pool){s=n.pool;n.pool=s.m_next;n.poolCount--;s.Reset(t,i);return s}var r=n.createFcn;if(r!=null){if(n.primary){s=r(this.m_allocator);s.Reset(t,i);return s}else{s=r(this.m_allocator);s.Reset(i,t);return s}}else{return null}};h.prototype.Destroy=function(t){if(t.m_manifold.m_pointCount>0){t.m_fixtureA.m_body.SetAwake(true);t.m_fixtureB.m_body.SetAwake(true)}var i=parseInt(t.m_fixtureA.GetType());var o=parseInt(t.m_fixtureB.GetType());var e=this.m_registers[i][o];if(true){e.poolCount++;t.m_next=e.pool;e.pool=t}var n=e.destroyFcn;n(t,this.m_allocator)};_.b2ContactRegister=function(){};p.b2ContactResult=function(){this.position=new O;this.normal=new O;this.id=new Z};y.b2ContactSolver=function(){this.m_step=new J;this.m_constraints=new Vector};y.prototype.b2ContactSolver=function(){};y.prototype.Initialize=function(t,i,o,e){if(o===undefined)o=0;var n;this.m_step.Set(t);this.m_allocator=e;var s=0;var r;var a;this.m_constraintCount=o;while(this.m_constraints.length<this.m_constraintCount){this.m_constraints[this.m_constraints.length]=new l}for(s=0;s<o;++s){n=i[s];var m=n.m_fixtureA;var c=n.m_fixtureB;var h=m.m_shape;var _=c.m_shape;var p=h.m_radius;var u=_.m_radius;var x=m.m_body;var f=c.m_body;var v=n.GetManifold();var d=T.b2MixFriction(m.GetFriction(),c.GetFriction());var b=T.b2MixRestitution(m.GetRestitution(),c.GetRestitution());var D=x.m_linearVelocity.x;var B=x.m_linearVelocity.y;var C=f.m_linearVelocity.x;var A=f.m_linearVelocity.y;var S=x.m_angularVelocity;var w=f.m_angularVelocity;T.b2Assert(v.m_pointCount>0);y.s_worldManifold.Initialize(v,x.m_xf,p,f.m_xf,u);var g=y.s_worldManifold.m_normal.x;var M=y.s_worldManifold.m_normal.y;var V=this.m_constraints[s];V.bodyA=x;V.bodyB=f;V.manifold=v;V.normal.x=g;V.normal.y=M;V.pointCount=v.m_pointCount;V.friction=d;V.restitution=b;V.localPlaneNormal.x=v.m_localPlaneNormal.x;V.localPlaneNormal.y=v.m_localPlaneNormal.y;V.localPoint.x=v.m_localPoint.x;V.localPoint.y=v.m_localPoint.y;V.radius=p+u;V.type=v.m_type;for(var I=0;I<V.pointCount;++I){var G=v.m_points[I];var L=V.points[I];L.normalImpulse=G.m_normalImpulse;L.tangentImpulse=G.m_tangentImpulse;L.localPoint.SetV(G.m_localPoint);var J=L.rA.x=y.s_worldManifold.m_points[I].x-x.m_sweep.c.x;var F=L.rA.y=y.s_worldManifold.m_points[I].y-x.m_sweep.c.y;var P=L.rB.x=y.s_worldManifold.m_points[I].x-f.m_sweep.c.x;var R=L.rB.y=y.s_worldManifold.m_points[I].y-f.m_sweep.c.y;var k=J*M-F*g;var N=P*M-R*g;k*=k;N*=N;var z=x.m_invMass+f.m_invMass+x.m_invI*k+f.m_invI*N;L.normalMass=1/z;var E=x.m_mass*x.m_invMass+f.m_mass*f.m_invMass;E+=x.m_mass*x.m_invI*k+f.m_mass*f.m_invI*N;L.equalizedMass=1/E;var j=M;var O=-g;var U=J*O-F*j;var q=P*O-R*j;U*=U;q*=q;var K=x.m_invMass+f.m_invMass+x.m_invI*U+f.m_invI*q;L.tangentMass=1/K;L.velocityBias=0;var W=C+-w*R-D- -S*F;var X=A+w*P-B-S*J;var Z=V.normal.x*W+V.normal.y*X;if(Z<-T.b2_velocityThreshold){L.velocityBias+=-V.restitution*Z}}if(V.pointCount==2){var H=V.points[0];var Y=V.points[1];var Q=x.m_invMass;var $=x.m_invI;var tt=f.m_invMass;var it=f.m_invI;var ot=H.rA.x*M-H.rA.y*g;var et=H.rB.x*M-H.rB.y*g;var nt=Y.rA.x*M-Y.rA.y*g;var st=Y.rB.x*M-Y.rB.y*g;var rt=Q+tt+$*ot*ot+it*et*et;var at=Q+tt+$*nt*nt+it*st*st;var lt=Q+tt+$*ot*nt+it*et*st;var mt=100;if(rt*rt<mt*(rt*at-lt*lt)){V.K.col1.Set(rt,lt);V.K.col2.Set(lt,at);V.K.GetInverse(V.normalMass)}else{V.pointCount=1}}}};y.prototype.InitVelocityConstraints=function(t){var i;var o;var e;for(var n=0;n<this.m_constraintCount;++n){var s=this.m_constraints[n];var r=s.bodyA;var a=s.bodyB;var l=r.m_invMass;var m=r.m_invI;var c=a.m_invMass;var h=a.m_invI;var _=s.normal.x;var p=s.normal.y;var y=p;var u=-_;var x=0;var f=0;var v=0;if(t.warmStarting){v=s.pointCount;for(f=0;f<v;++f){var d=s.points[f];d.normalImpulse*=t.dtRatio;d.tangentImpulse*=t.dtRatio;var b=d.normalImpulse*_+d.tangentImpulse*y;var D=d.normalImpulse*p+d.tangentImpulse*u;r.m_angularVelocity-=m*(d.rA.x*D-d.rA.y*b);r.m_linearVelocity.x-=l*b;r.m_linearVelocity.y-=l*D;a.m_angularVelocity+=h*(d.rB.x*D-d.rB.y*b);a.m_linearVelocity.x+=c*b;a.m_linearVelocity.y+=c*D}}else{v=s.pointCount;for(f=0;f<v;++f){var B=s.points[f];B.normalImpulse=0;B.tangentImpulse=0}}}};y.prototype.SolveVelocityConstraints=function(){var t=0;var i;var o=0;var e=0;var n=0;var s=0;var r=0;var a=0;var l=0;var m=0;var c=0;var h=0;var _=0;var p=0;var y=0;var u=0;var x=0;var f=0;var v=0;var d=0;var b=0;var D;var B;for(var C=0;C<this.m_constraintCount;++C){var A=this.m_constraints[C];var S=A.bodyA;var w=A.bodyB;var g=S.m_angularVelocity;var M=w.m_angularVelocity;var V=S.m_linearVelocity;var I=w.m_linearVelocity;var G=S.m_invMass;var L=S.m_invI;var J=w.m_invMass;var F=w.m_invI;var P=A.normal.x;var R=A.normal.y;var T=R;var k=-P;var N=A.friction;var E=0;for(t=0;t<A.pointCount;t++){i=A.points[t];r=I.x-M*i.rB.y-V.x+g*i.rA.y;a=I.y+M*i.rB.x-V.y-g*i.rA.x;m=r*T+a*k;c=i.tangentMass*-m;h=N*i.normalImpulse;_=z.Clamp(i.tangentImpulse+c,-h,h);c=_-i.tangentImpulse;p=c*T;y=c*k;V.x-=G*p;V.y-=G*y;g-=L*(i.rA.x*y-i.rA.y*p);I.x+=J*p;I.y+=J*y;M+=F*(i.rB.x*y-i.rB.y*p);i.tangentImpulse=_}var j=parseInt(A.pointCount);if(A.pointCount==1){i=A.points[0];r=I.x+-M*i.rB.y-V.x- -g*i.rA.y;a=I.y+M*i.rB.x-V.y-g*i.rA.x;l=r*P+a*R;c=-i.normalMass*(l-i.velocityBias);_=i.normalImpulse+c;_=_>0?_:0;c=_-i.normalImpulse;p=c*P;y=c*R;V.x-=G*p;V.y-=G*y;g-=L*(i.rA.x*y-i.rA.y*p);I.x+=J*p;I.y+=J*y;M+=F*(i.rB.x*y-i.rB.y*p);i.normalImpulse=_}else{var O=A.points[0];var U=A.points[1];var q=O.normalImpulse;var K=U.normalImpulse;var W=I.x-M*O.rB.y-V.x+g*O.rA.y;var X=I.y+M*O.rB.x-V.y-g*O.rA.x;var Z=I.x-M*U.rB.y-V.x+g*U.rA.y;var H=I.y+M*U.rB.x-V.y-g*U.rA.x;var Y=W*P+X*R;var Q=Z*P+H*R;var $=Y-O.velocityBias;var tt=Q-U.velocityBias;D=A.K;$-=D.col1.x*q+D.col2.x*K;tt-=D.col1.y*q+D.col2.y*K;var it=.001;for(;;){D=A.normalMass;var ot=-(D.col1.x*$+D.col2.x*tt);var et=-(D.col1.y*$+D.col2.y*tt);if(ot>=0&&et>=0){u=ot-q;x=et-K;f=u*P;v=u*R;d=x*P;b=x*R;V.x-=G*(f+d);V.y-=G*(v+b);g-=L*(O.rA.x*v-O.rA.y*f+U.rA.x*b-U.rA.y*d);I.x+=J*(f+d);I.y+=J*(v+b);M+=F*(O.rB.x*v-O.rB.y*f+U.rB.x*b-U.rB.y*d);O.normalImpulse=ot;U.normalImpulse=et;break}ot=-O.normalMass*$;et=0;Y=0;Q=A.K.col1.y*ot+tt;if(ot>=0&&Q>=0){u=ot-q;x=et-K;f=u*P;v=u*R;d=x*P;b=x*R;V.x-=G*(f+d);V.y-=G*(v+b);g-=L*(O.rA.x*v-O.rA.y*f+U.rA.x*b-U.rA.y*d);I.x+=J*(f+d);I.y+=J*(v+b);M+=F*(O.rB.x*v-O.rB.y*f+U.rB.x*b-U.rB.y*d);O.normalImpulse=ot;U.normalImpulse=et;break}ot=0;et=-U.normalMass*tt;Y=A.K.col2.x*et+$;Q=0;if(et>=0&&Y>=0){u=ot-q;x=et-K;f=u*P;v=u*R;d=x*P;b=x*R;V.x-=G*(f+d);V.y-=G*(v+b);g-=L*(O.rA.x*v-O.rA.y*f+U.rA.x*b-U.rA.y*d);I.x+=J*(f+d);I.y+=J*(v+b);M+=F*(O.rB.x*v-O.rB.y*f+U.rB.x*b-U.rB.y*d);O.normalImpulse=ot;U.normalImpulse=et;break}ot=0;et=0;Y=$;Q=tt;if(Y>=0&&Q>=0){u=ot-q;x=et-K;f=u*P;v=u*R;d=x*P;b=x*R;V.x-=G*(f+d);V.y-=G*(v+b);g-=L*(O.rA.x*v-O.rA.y*f+U.rA.x*b-U.rA.y*d);I.x+=J*(f+d);I.y+=J*(v+b);M+=F*(O.rB.x*v-O.rB.y*f+U.rB.x*b-U.rB.y*d);O.normalImpulse=ot;U.normalImpulse=et;break}break}}S.m_angularVelocity=g;w.m_angularVelocity=M}};y.prototype.FinalizeVelocityConstraints=function(){for(var t=0;t<this.m_constraintCount;++t){var i=this.m_constraints[t];var o=i.manifold;for(var e=0;e<i.pointCount;++e){var n=o.m_points[e];var s=i.points[e];n.m_normalImpulse=s.normalImpulse;n.m_tangentImpulse=s.tangentImpulse}}};y.prototype.SolvePositionConstraints=function(t){if(t===undefined)t=0;var i=0;for(var o=0;o<this.m_constraintCount;o++){var e=this.m_constraints[o];var n=e.bodyA;var s=e.bodyB;var r=n.m_mass*n.m_invMass;var a=n.m_mass*n.m_invI;var l=s.m_mass*s.m_invMass;var m=s.m_mass*s.m_invI;y.s_psm.Initialize(e);var c=y.s_psm.m_normal;for(var h=0;h<e.pointCount;h++){var _=e.points[h];var p=y.s_psm.m_points[h];var u=y.s_psm.m_separations[h];var x=p.x-n.m_sweep.c.x;var f=p.y-n.m_sweep.c.y;var v=p.x-s.m_sweep.c.x;var d=p.y-s.m_sweep.c.y;i=i<u?i:u;var b=z.Clamp(t*(u+T.b2_linearSlop),-T.b2_maxLinearCorrection,0);var D=-_.equalizedMass*b;var B=D*c.x;var C=D*c.y;n.m_sweep.c.x-=r*B;n.m_sweep.c.y-=r*C;n.m_sweep.a-=a*(x*C-f*B);n.SynchronizeTransform();s.m_sweep.c.x+=l*B;s.m_sweep.c.y+=l*C;s.m_sweep.a+=m*(v*C-d*B);s.SynchronizeTransform()}}return i>-1.5*T.b2_linearSlop};Box2D.postDefs.push(function(){Box2D.Dynamics.Contacts.b2ContactSolver.s_worldManifold=new ft;Box2D.Dynamics.Contacts.b2ContactSolver.s_psm=new b});Box2D.inherit(u,Box2D.Dynamics.Contacts.b2Contact);u.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype;u.b2EdgeAndCircleContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)};u.Create=function(t){return new u};u.Destroy=function(t,i){};u.prototype.Reset=function(t,i){this.__super.Reset.call(this,t,i)};u.prototype.Evaluate=function(){var i=this.m_fixtureA.GetBody();var e=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof o?this.m_fixtureA.GetShape():null,i.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,e.m_xf)};u.prototype.b2CollideEdgeAndCircle=function(t,i,o,e,n){};Box2D.inherit(x,Box2D.Dynamics.Contacts.b2Contact);x.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype;x.b2NullContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)};x.prototype.b2NullContact=function(){this.__super.b2Contact.call(this)};x.prototype.Evaluate=function(){};Box2D.inherit(f,Box2D.Dynamics.Contacts.b2Contact);f.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype;f.b2PolyAndCircleContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)};f.Create=function(t){return new f};f.Destroy=function(t,i){};f.prototype.Reset=function(t,i){this.__super.Reset.call(this,t,i);T.b2Assert(t.GetType()==s.e_polygonShape);T.b2Assert(i.GetType()==s.e_circleShape)};f.prototype.Evaluate=function(){var i=this.m_fixtureA.m_body;var o=this.m_fixtureB.m_body;X.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof n?this.m_fixtureA.GetShape():null,i.m_xf,this.m_fixtureB.GetShape()instanceof t?this.m_fixtureB.GetShape():null,o.m_xf)};Box2D.inherit(v,Box2D.Dynamics.Contacts.b2Contact);v.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype;v.b2PolyAndEdgeContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)};v.Create=function(t){return new v};v.Destroy=function(t,i){};v.prototype.Reset=function(t,i){this.__super.Reset.call(this,t,i);T.b2Assert(t.GetType()==s.e_polygonShape);T.b2Assert(i.GetType()==s.e_edgeShape)};v.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody();var i=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof n?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof o?this.m_fixtureB.GetShape():null,i.m_xf)};v.prototype.b2CollidePolyAndEdge=function(t,i,o,e,n){};Box2D.inherit(d,Box2D.Dynamics.Contacts.b2Contact);d.prototype.__super=Box2D.Dynamics.Contacts.b2Contact.prototype;d.b2PolygonContact=function(){Box2D.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)};d.Create=function(t){return new d};d.Destroy=function(t,i){};d.prototype.Reset=function(t,i){this.__super.Reset.call(this,t,i)};d.prototype.Evaluate=function(){var t=this.m_fixtureA.GetBody();var i=this.m_fixtureB.GetBody();X.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof n?this.m_fixtureA.GetShape():null,t.m_xf,this.m_fixtureB.GetShape()instanceof n?this.m_fixtureB.GetShape():null,i.m_xf)};b.b2PositionSolverManifold=function(){};b.prototype.b2PositionSolverManifold=function(){this.m_normal=new O;this.m_separations=new Vector_a2j_Number(T.b2_maxManifoldPoints);this.m_points=new Vector(T.b2_maxManifoldPoints);for(var t=0;t<T.b2_maxManifoldPoints;t++){this.m_points[t]=new O}};b.prototype.Initialize=function(t){T.b2Assert(t.pointCount>0);var i=0;var o=0;var e=0;var n;var s;var r=0;var a=0;switch(t.type){case st.e_circles:{n=t.bodyA.m_xf.R;s=t.localPoint;var l=t.bodyA.m_xf.position.x+(n.col1.x*s.x+n.col2.x*s.y);var m=t.bodyA.m_xf.position.y+(n.col1.y*s.x+n.col2.y*s.y);n=t.bodyB.m_xf.R;s=t.points[0].localPoint;var c=t.bodyB.m_xf.position.x+(n.col1.x*s.x+n.col2.x*s.y);var h=t.bodyB.m_xf.position.y+(n.col1.y*s.x+n.col2.y*s.y);var _=c-l;var p=h-m;var y=_*_+p*p;if(y>Number.MIN_VALUE*Number.MIN_VALUE){var u=Math.sqrt(y);this.m_normal.x=_/u;this.m_normal.y=p/u}else{this.m_normal.x=1;this.m_normal.y=0}this.m_points[0].x=.5*(l+c);this.m_points[0].y=.5*(m+h);this.m_separations[0]=_*this.m_normal.x+p*this.m_normal.y-t.radius}break;case st.e_faceA:{n=t.bodyA.m_xf.R;s=t.localPlaneNormal;this.m_normal.x=n.col1.x*s.x+n.col2.x*s.y;this.m_normal.y=n.col1.y*s.x+n.col2.y*s.y;n=t.bodyA.m_xf.R;s=t.localPoint;r=t.bodyA.m_xf.position.x+(n.col1.x*s.x+n.col2.x*s.y);a=t.bodyA.m_xf.position.y+(n.col1.y*s.x+n.col2.y*s.y);n=t.bodyB.m_xf.R;for(i=0;i<t.pointCount;++i){s=t.points[i].localPoint;o=t.bodyB.m_xf.position.x+(n.col1.x*s.x+n.col2.x*s.y);e=t.bodyB.m_xf.position.y+(n.col1.y*s.x+n.col2.y*s.y);this.m_separations[i]=(o-r)*this.m_normal.x+(e-a)*this.m_normal.y-t.radius;this.m_points[i].x=o;this.m_points[i].y=e}}break;case st.e_faceB:{n=t.bodyB.m_xf.R;s=t.localPlaneNormal;this.m_normal.x=n.col1.x*s.x+n.col2.x*s.y;this.m_normal.y=n.col1.y*s.x+n.col2.y*s.y;n=t.bodyB.m_xf.R;s=t.localPoint;r=t.bodyB.m_xf.position.x+(n.col1.x*s.x+n.col2.x*s.y);a=t.bodyB.m_xf.position.y+(n.col1.y*s.x+n.col2.y*s.y);n=t.bodyA.m_xf.R;for(i=0;i<t.pointCount;++i){s=t.points[i].localPoint;o=t.bodyA.m_xf.position.x+(n.col1.x*s.x+n.col2.x*s.y);e=t.bodyA.m_xf.position.y+(n.col1.y*s.x+n.col2.y*s.y);this.m_separations[i]=(o-r)*this.m_normal.x+(e-a)*this.m_normal.y-t.radius;this.m_points[i].Set(o,e)}this.m_normal.x*=-1;this.m_normal.y*=-1}break}};Box2D.postDefs.push(function(){Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointA=new O;Box2D.Dynamics.Contacts.b2PositionSolverManifold.circlePointB=new O})})();(function(){var t=Box2D.Dynamics.b2Body,i=Box2D.Dynamics.b2BodyDef,o=Box2D.Dynamics.b2ContactFilter,e=Box2D.Dynamics.b2ContactImpulse,n=Box2D.Dynamics.b2ContactListener,s=Box2D.Dynamics.b2ContactManager,r=Box2D.Dynamics.b2DebugDraw,a=Box2D.Dynamics.b2DestructionListener,l=Box2D.Dynamics.b2FilterData,m=Box2D.Dynamics.b2Fixture,c=Box2D.Dynamics.b2FixtureDef,h=Box2D.Dynamics.b2Island,_=Box2D.Dynamics.b2TimeStep,p=Box2D.Dynamics.b2World,y=Box2D.Common.Math.b2Mat22,u=Box2D.Common.Math.b2Mat33,x=Box2D.Common.Math.b2Math,f=Box2D.Common.Math.b2Sweep,v=Box2D.Common.Math.b2Transform,d=Box2D.Common.Math.b2Vec2,b=Box2D.Common.Math.b2Vec3,D=Box2D.Common.b2Color,B=Box2D.Common.b2internal,C=Box2D.Common.b2Settings,A=Box2D.Collision.Shapes.b2CircleShape,S=Box2D.Collision.Shapes.b2EdgeChainDef,w=Box2D.Collision.Shapes.b2EdgeShape,g=Box2D.Collision.Shapes.b2MassData,M=Box2D.Collision.Shapes.b2PolygonShape,V=Box2D.Collision.Shapes.b2Shape,I=Box2D.Dynamics.Controllers.b2BuoyancyController,G=Box2D.Dynamics.Controllers.b2ConstantAccelController,L=Box2D.Dynamics.Controllers.b2ConstantForceController,J=Box2D.Dynamics.Controllers.b2Controller,F=Box2D.Dynamics.Controllers.b2ControllerEdge,P=Box2D.Dynamics.Controllers.b2GravityController,R=Box2D.Dynamics.Controllers.b2TensorDampingController;Box2D.inherit(I,Box2D.Dynamics.Controllers.b2Controller);I.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype;I.b2BuoyancyController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments);this.normal=new d(0,-1);this.offset=0;this.density=0;this.velocity=new d(0,0);this.linearDrag=2;this.angularDrag=1;this.useDensity=false;this.useWorldGravity=true;this.gravity=null};I.prototype.Step=function(t){if(!this.m_bodyList)return;if(this.useWorldGravity){this.gravity=this.GetWorld().GetGravity().Copy()}for(var i=this.m_bodyList;i;i=i.nextBody){var o=i.body;if(o.IsAwake()==false){continue}var e=new d;var n=new d;var s=0;var r=0;for(var a=o.GetFixtureList();a;a=a.GetNext()){var l=new d;var m=a.GetShape().ComputeSubmergedArea(this.normal,this.offset,o.GetTransform(),l);s+=m;e.x+=m*l.x;e.y+=m*l.y;var c=0;if(this.useDensity){c=1}else{c=1}r+=m*c;n.x+=m*l.x*c;n.y+=m*l.y*c}e.x/=s;e.y/=s;n.x/=r;n.y/=r;if(s<Number.MIN_VALUE)continue;var h=this.gravity.GetNegative();h.Multiply(this.density*s);o.ApplyForce(h,n);var _=o.GetLinearVelocityFromWorldPoint(e);_.Subtract(this.velocity);_.Multiply(-this.linearDrag*s);o.ApplyForce(_,e);o.ApplyTorque(-o.GetInertia()/o.GetMass()*s*o.GetAngularVelocity()*this.angularDrag)}};I.prototype.Draw=function(t){var i=1e3;var o=new d;var e=new d;o.x=this.normal.x*this.offset+this.normal.y*i;o.y=this.normal.y*this.offset-this.normal.x*i;e.x=this.normal.x*this.offset-this.normal.y*i;e.y=this.normal.y*this.offset+this.normal.x*i;var n=new D(0,0,1);t.DrawSegment(o,e,n)};Box2D.inherit(G,Box2D.Dynamics.Controllers.b2Controller);G.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype;G.b2ConstantAccelController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments);this.A=new d(0,0)};G.prototype.Step=function(t){var i=new d(this.A.x*t.dt,this.A.y*t.dt);for(var o=this.m_bodyList;o;o=o.nextBody){var e=o.body;if(!e.IsAwake())continue;e.SetLinearVelocity(new d(e.GetLinearVelocity().x+i.x,e.GetLinearVelocity().y+i.y))}};Box2D.inherit(L,Box2D.Dynamics.Controllers.b2Controller);L.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype;L.b2ConstantForceController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments);this.F=new d(0,0)};L.prototype.Step=function(t){for(var i=this.m_bodyList;i;i=i.nextBody){var o=i.body;if(!o.IsAwake())continue;o.ApplyForce(this.F,o.GetWorldCenter())}};J.b2Controller=function(){};J.prototype.Step=function(t){};J.prototype.Draw=function(t){};J.prototype.AddBody=function(t){var i=new F;i.controller=this;i.body=t;i.nextBody=this.m_bodyList;i.prevBody=null;this.m_bodyList=i;if(i.nextBody)i.nextBody.prevBody=i;this.m_bodyCount++;i.nextController=t.m_controllerList;i.prevController=null;t.m_controllerList=i;if(i.nextController)i.nextController.prevController=i;t.m_controllerCount++};J.prototype.RemoveBody=function(t){var i=t.m_controllerList;while(i&&i.controller!=this)i=i.nextController;if(i.prevBody)i.prevBody.nextBody=i.nextBody;if(i.nextBody)i.nextBody.prevBody=i.prevBody;if(i.nextController)i.nextController.prevController=i.prevController;if(i.prevController)i.prevController.nextController=i.nextController;if(this.m_bodyList==i)this.m_bodyList=i.nextBody;if(t.m_controllerList==i)t.m_controllerList=i.nextController;t.m_controllerCount--;this.m_bodyCount--};J.prototype.Clear=function(){while(this.m_bodyList)this.RemoveBody(this.m_bodyList.body)};J.prototype.GetNext=function(){return this.m_next};J.prototype.GetWorld=function(){return this.m_world};J.prototype.GetBodyList=function(){return this.m_bodyList};F.b2ControllerEdge=function(){};Box2D.inherit(P,Box2D.Dynamics.Controllers.b2Controller);P.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype;P.b2GravityController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments);this.G=1;this.invSqr=true};P.prototype.Step=function(t){var i=null;var o=null;var e=null;var n=0;var s=null;var r=null;var a=null;var l=0;var m=0;var c=0;var h=null;if(this.invSqr){for(i=this.m_bodyList;i;i=i.nextBody){o=i.body;e=o.GetWorldCenter();n=o.GetMass();for(s=this.m_bodyList;s!=i;s=s.nextBody){r=s.body;a=r.GetWorldCenter();l=a.x-e.x;m=a.y-e.y;c=l*l+m*m;if(c<Number.MIN_VALUE)continue;h=new d(l,m);h.Multiply(this.G/c/Math.sqrt(c)*n*r.GetMass());if(o.IsAwake())o.ApplyForce(h,e);h.Multiply(-1);if(r.IsAwake())r.ApplyForce(h,a)}}}else{for(i=this.m_bodyList;i;i=i.nextBody){o=i.body;e=o.GetWorldCenter();n=o.GetMass();for(s=this.m_bodyList;s!=i;s=s.nextBody){r=s.body;a=r.GetWorldCenter();l=a.x-e.x;m=a.y-e.y;c=l*l+m*m;if(c<Number.MIN_VALUE)continue;h=new d(l,m);h.Multiply(this.G/c*n*r.GetMass());if(o.IsAwake())o.ApplyForce(h,e);h.Multiply(-1);if(r.IsAwake())r.ApplyForce(h,a)}}}};Box2D.inherit(R,Box2D.Dynamics.Controllers.b2Controller);R.prototype.__super=Box2D.Dynamics.Controllers.b2Controller.prototype;R.b2TensorDampingController=function(){Box2D.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments);this.T=new y;this.maxTimestep=0};R.prototype.SetAxisAligned=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;this.T.col1.x=-t;this.T.col1.y=0;this.T.col2.x=0;this.T.col2.y=-i;if(t>0||i>0){this.maxTimestep=1/Math.max(t,i)}else{this.maxTimestep=0}};R.prototype.Step=function(t){var i=t.dt;if(i<=Number.MIN_VALUE)return;if(i>this.maxTimestep&&this.maxTimestep>0)i=this.maxTimestep;for(var o=this.m_bodyList;o;o=o.nextBody){var e=o.body;if(!e.IsAwake()){continue}var n=e.GetWorldVector(x.MulMV(this.T,e.GetLocalVector(e.GetLinearVelocity())));e.SetLinearVelocity(new d(e.GetLinearVelocity().x+n.x*i,e.GetLinearVelocity().y+n.y*i))}}})();(function(){var t=Box2D.Common.b2Color,i=Box2D.Common.b2internal,o=Box2D.Common.b2Settings,e=Box2D.Common.Math.b2Mat22,n=Box2D.Common.Math.b2Mat33,s=Box2D.Common.Math.b2Math,r=Box2D.Common.Math.b2Sweep,a=Box2D.Common.Math.b2Transform,l=Box2D.Common.Math.b2Vec2,m=Box2D.Common.Math.b2Vec3,c=Box2D.Dynamics.Joints.b2DistanceJoint,h=Box2D.Dynamics.Joints.b2DistanceJointDef,_=Box2D.Dynamics.Joints.b2FrictionJoint,p=Box2D.Dynamics.Joints.b2FrictionJointDef,y=Box2D.Dynamics.Joints.b2GearJoint,u=Box2D.Dynamics.Joints.b2GearJointDef,x=Box2D.Dynamics.Joints.b2Jacobian,f=Box2D.Dynamics.Joints.b2Joint,v=Box2D.Dynamics.Joints.b2JointDef,d=Box2D.Dynamics.Joints.b2JointEdge,b=Box2D.Dynamics.Joints.b2LineJoint,D=Box2D.Dynamics.Joints.b2LineJointDef,B=Box2D.Dynamics.Joints.b2MouseJoint,C=Box2D.Dynamics.Joints.b2MouseJointDef,A=Box2D.Dynamics.Joints.b2PrismaticJoint,S=Box2D.Dynamics.Joints.b2PrismaticJointDef,w=Box2D.Dynamics.Joints.b2PulleyJoint,g=Box2D.Dynamics.Joints.b2PulleyJointDef,M=Box2D.Dynamics.Joints.b2RevoluteJoint,V=Box2D.Dynamics.Joints.b2RevoluteJointDef,I=Box2D.Dynamics.Joints.b2WeldJoint,G=Box2D.Dynamics.Joints.b2WeldJointDef,L=Box2D.Dynamics.b2Body,J=Box2D.Dynamics.b2BodyDef,F=Box2D.Dynamics.b2ContactFilter,P=Box2D.Dynamics.b2ContactImpulse,R=Box2D.Dynamics.b2ContactListener,T=Box2D.Dynamics.b2ContactManager,k=Box2D.Dynamics.b2DebugDraw,N=Box2D.Dynamics.b2DestructionListener,z=Box2D.Dynamics.b2FilterData,E=Box2D.Dynamics.b2Fixture,j=Box2D.Dynamics.b2FixtureDef,O=Box2D.Dynamics.b2Island,U=Box2D.Dynamics.b2TimeStep,q=Box2D.Dynamics.b2World;Box2D.inherit(c,Box2D.Dynamics.Joints.b2Joint);c.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype;c.b2DistanceJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_localAnchor1=new l;this.m_localAnchor2=new l;this.m_u=new l};c.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)};c.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)};c.prototype.GetReactionForce=function(t){if(t===undefined)t=0;return new l(t*this.m_impulse*this.m_u.x,t*this.m_impulse*this.m_u.y)};c.prototype.GetReactionTorque=function(t){if(t===undefined)t=0;return 0};c.prototype.GetLength=function(){return this.m_length};c.prototype.SetLength=function(t){if(t===undefined)t=0;this.m_length=t};c.prototype.GetFrequency=function(){return this.m_frequencyHz};c.prototype.SetFrequency=function(t){if(t===undefined)t=0;this.m_frequencyHz=t};c.prototype.GetDampingRatio=function(){return this.m_dampingRatio};c.prototype.SetDampingRatio=function(t){if(t===undefined)t=0;this.m_dampingRatio=t};c.prototype.b2DistanceJoint=function(t){this.__super.b2Joint.call(this,t);var i;var o=0;var e=0;this.m_localAnchor1.SetV(t.localAnchorA);this.m_localAnchor2.SetV(t.localAnchorB);this.m_length=t.length;this.m_frequencyHz=t.frequencyHz;this.m_dampingRatio=t.dampingRatio;this.m_impulse=0;this.m_gamma=0;this.m_bias=0};c.prototype.InitVelocityConstraints=function(t){var i;var e=0;var n=this.m_bodyA;var s=this.m_bodyB;i=n.m_xf.R;var r=this.m_localAnchor1.x-n.m_sweep.localCenter.x;var a=this.m_localAnchor1.y-n.m_sweep.localCenter.y;e=i.col1.x*r+i.col2.x*a;a=i.col1.y*r+i.col2.y*a;r=e;i=s.m_xf.R;var l=this.m_localAnchor2.x-s.m_sweep.localCenter.x;var m=this.m_localAnchor2.y-s.m_sweep.localCenter.y;e=i.col1.x*l+i.col2.x*m;m=i.col1.y*l+i.col2.y*m;l=e;this.m_u.x=s.m_sweep.c.x+l-n.m_sweep.c.x-r;this.m_u.y=s.m_sweep.c.y+m-n.m_sweep.c.y-a;var c=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);if(c>o.b2_linearSlop){this.m_u.Multiply(1/c)}else{this.m_u.SetZero()}var h=r*this.m_u.y-a*this.m_u.x;var _=l*this.m_u.y-m*this.m_u.x;var p=n.m_invMass+n.m_invI*h*h+s.m_invMass+s.m_invI*_*_;this.m_mass=p!=0?1/p:0;if(this.m_frequencyHz>0){var y=c-this.m_length;var u=2*Math.PI*this.m_frequencyHz;var x=2*this.m_mass*this.m_dampingRatio*u;var f=this.m_mass*u*u;this.m_gamma=t.dt*(x+t.dt*f);this.m_gamma=this.m_gamma!=0?1/this.m_gamma:0;this.m_bias=y*t.dt*f*this.m_gamma;this.m_mass=p+this.m_gamma;this.m_mass=this.m_mass!=0?1/this.m_mass:0}if(t.warmStarting){this.m_impulse*=t.dtRatio;var v=this.m_impulse*this.m_u.x;var d=this.m_impulse*this.m_u.y;n.m_linearVelocity.x-=n.m_invMass*v;n.m_linearVelocity.y-=n.m_invMass*d;n.m_angularVelocity-=n.m_invI*(r*d-a*v);s.m_linearVelocity.x+=s.m_invMass*v;s.m_linearVelocity.y+=s.m_invMass*d;s.m_angularVelocity+=s.m_invI*(l*d-m*v)}else{this.m_impulse=0}};c.prototype.SolveVelocityConstraints=function(t){var i;var o=this.m_bodyA;var e=this.m_bodyB;i=o.m_xf.R;var n=this.m_localAnchor1.x-o.m_sweep.localCenter.x;var s=this.m_localAnchor1.y-o.m_sweep.localCenter.y;var r=i.col1.x*n+i.col2.x*s;s=i.col1.y*n+i.col2.y*s;n=r;i=e.m_xf.R;var a=this.m_localAnchor2.x-e.m_sweep.localCenter.x;var l=this.m_localAnchor2.y-e.m_sweep.localCenter.y;r=i.col1.x*a+i.col2.x*l;l=i.col1.y*a+i.col2.y*l;a=r;var m=o.m_linearVelocity.x+-o.m_angularVelocity*s;var c=o.m_linearVelocity.y+o.m_angularVelocity*n;var h=e.m_linearVelocity.x+-e.m_angularVelocity*l;var _=e.m_linearVelocity.y+e.m_angularVelocity*a;var p=this.m_u.x*(h-m)+this.m_u.y*(_-c);var y=-this.m_mass*(p+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=y;var u=y*this.m_u.x;var x=y*this.m_u.y;o.m_linearVelocity.x-=o.m_invMass*u;o.m_linearVelocity.y-=o.m_invMass*x;o.m_angularVelocity-=o.m_invI*(n*x-s*u);e.m_linearVelocity.x+=e.m_invMass*u;e.m_linearVelocity.y+=e.m_invMass*x;e.m_angularVelocity+=e.m_invI*(a*x-l*u)};c.prototype.SolvePositionConstraints=function(t){if(t===undefined)t=0;var i;if(this.m_frequencyHz>0){return true}var e=this.m_bodyA;var n=this.m_bodyB;i=e.m_xf.R;var r=this.m_localAnchor1.x-e.m_sweep.localCenter.x;var a=this.m_localAnchor1.y-e.m_sweep.localCenter.y;var l=i.col1.x*r+i.col2.x*a;a=i.col1.y*r+i.col2.y*a;r=l;i=n.m_xf.R;var m=this.m_localAnchor2.x-n.m_sweep.localCenter.x;var c=this.m_localAnchor2.y-n.m_sweep.localCenter.y;l=i.col1.x*m+i.col2.x*c;c=i.col1.y*m+i.col2.y*c;m=l;var h=n.m_sweep.c.x+m-e.m_sweep.c.x-r;var _=n.m_sweep.c.y+c-e.m_sweep.c.y-a;var p=Math.sqrt(h*h+_*_);h/=p;_/=p;var y=p-this.m_length;y=s.Clamp(y,-o.b2_maxLinearCorrection,o.b2_maxLinearCorrection);var u=-this.m_mass*y;this.m_u.Set(h,_);var x=u*this.m_u.x;var f=u*this.m_u.y;e.m_sweep.c.x-=e.m_invMass*x;e.m_sweep.c.y-=e.m_invMass*f;e.m_sweep.a-=e.m_invI*(r*f-a*x);n.m_sweep.c.x+=n.m_invMass*x;n.m_sweep.c.y+=n.m_invMass*f;n.m_sweep.a+=n.m_invI*(m*f-c*x);e.SynchronizeTransform();n.SynchronizeTransform();return s.Abs(y)<o.b2_linearSlop};Box2D.inherit(h,Box2D.Dynamics.Joints.b2JointDef);h.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype;h.b2DistanceJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.localAnchorA=new l;this.localAnchorB=new l};h.prototype.b2DistanceJointDef=function(){this.__super.b2JointDef.call(this);this.type=f.e_distanceJoint;this.length=1;this.frequencyHz=0;this.dampingRatio=0};h.prototype.Initialize=function(t,i,o,e){this.bodyA=t;this.bodyB=i;this.localAnchorA.SetV(this.bodyA.GetLocalPoint(o));this.localAnchorB.SetV(this.bodyB.GetLocalPoint(e));var n=e.x-o.x;var s=e.y-o.y;this.length=Math.sqrt(n*n+s*s);this.frequencyHz=0;this.dampingRatio=0};Box2D.inherit(_,Box2D.Dynamics.Joints.b2Joint);_.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype;_.b2FrictionJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_localAnchorA=new l;this.m_localAnchorB=new l;this.m_linearMass=new e;this.m_linearImpulse=new l};_.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)};_.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)};_.prototype.GetReactionForce=function(t){if(t===undefined)t=0;return new l(t*this.m_linearImpulse.x,t*this.m_linearImpulse.y)};_.prototype.GetReactionTorque=function(t){if(t===undefined)t=0;return t*this.m_angularImpulse};_.prototype.SetMaxForce=function(t){if(t===undefined)t=0;this.m_maxForce=t};_.prototype.GetMaxForce=function(){return this.m_maxForce};_.prototype.SetMaxTorque=function(t){if(t===undefined)t=0;this.m_maxTorque=t};_.prototype.GetMaxTorque=function(){return this.m_maxTorque};_.prototype.b2FrictionJoint=function(t){this.__super.b2Joint.call(this,t);this.m_localAnchorA.SetV(t.localAnchorA);this.m_localAnchorB.SetV(t.localAnchorB);this.m_linearMass.SetZero();this.m_angularMass=0;this.m_linearImpulse.SetZero();this.m_angularImpulse=0;this.m_maxForce=t.maxForce;this.m_maxTorque=t.maxTorque};_.prototype.InitVelocityConstraints=function(t){var i;var o=0;var n=this.m_bodyA;var s=this.m_bodyB;i=n.m_xf.R;var r=this.m_localAnchorA.x-n.m_sweep.localCenter.x;var a=this.m_localAnchorA.y-n.m_sweep.localCenter.y;o=i.col1.x*r+i.col2.x*a;a=i.col1.y*r+i.col2.y*a;r=o;i=s.m_xf.R;var l=this.m_localAnchorB.x-s.m_sweep.localCenter.x;var m=this.m_localAnchorB.y-s.m_sweep.localCenter.y;o=i.col1.x*l+i.col2.x*m;m=i.col1.y*l+i.col2.y*m;l=o;var c=n.m_invMass;var h=s.m_invMass;var _=n.m_invI;var p=s.m_invI;var y=new e;y.col1.x=c+h;y.col2.x=0;y.col1.y=0;y.col2.y=c+h;y.col1.x+=_*a*a;y.col2.x+=-_*r*a;y.col1.y+=-_*r*a;y.col2.y+=_*r*r;y.col1.x+=p*m*m;y.col2.x+=-p*l*m;y.col1.y+=-p*l*m;y.col2.y+=p*l*l;y.GetInverse(this.m_linearMass);this.m_angularMass=_+p;if(this.m_angularMass>0){this.m_angularMass=1/this.m_angularMass}if(t.warmStarting){this.m_linearImpulse.x*=t.dtRatio;this.m_linearImpulse.y*=t.dtRatio;this.m_angularImpulse*=t.dtRatio;var u=this.m_linearImpulse;n.m_linearVelocity.x-=c*u.x;n.m_linearVelocity.y-=c*u.y;n.m_angularVelocity-=_*(r*u.y-a*u.x+this.m_angularImpulse);s.m_linearVelocity.x+=h*u.x;s.m_linearVelocity.y+=h*u.y;s.m_angularVelocity+=p*(l*u.y-m*u.x+this.m_angularImpulse)}else{this.m_linearImpulse.SetZero();this.m_angularImpulse=0}};_.prototype.SolveVelocityConstraints=function(t){var i;var o=0;var e=this.m_bodyA;var n=this.m_bodyB;var r=e.m_linearVelocity;var a=e.m_angularVelocity;var m=n.m_linearVelocity;var c=n.m_angularVelocity;var h=e.m_invMass;var _=n.m_invMass;var p=e.m_invI;var y=n.m_invI;i=e.m_xf.R;var u=this.m_localAnchorA.x-e.m_sweep.localCenter.x;var x=this.m_localAnchorA.y-e.m_sweep.localCenter.y;o=i.col1.x*u+i.col2.x*x;x=i.col1.y*u+i.col2.y*x;u=o;i=n.m_xf.R;var f=this.m_localAnchorB.x-n.m_sweep.localCenter.x;var v=this.m_localAnchorB.y-n.m_sweep.localCenter.y;o=i.col1.x*f+i.col2.x*v;v=i.col1.y*f+i.col2.y*v;f=o;var d=0;{var b=c-a;var D=-this.m_angularMass*b;var B=this.m_angularImpulse;d=t.dt*this.m_maxTorque;this.m_angularImpulse=s.Clamp(this.m_angularImpulse+D,-d,d);D=this.m_angularImpulse-B;a-=p*D;c+=y*D}{var C=m.x-c*v-r.x+a*x;var A=m.y+c*f-r.y-a*u;var S=s.MulMV(this.m_linearMass,new l(-C,-A));var w=this.m_linearImpulse.Copy();this.m_linearImpulse.Add(S);d=t.dt*this.m_maxForce;if(this.m_linearImpulse.LengthSquared()>d*d){this.m_linearImpulse.Normalize();this.m_linearImpulse.Multiply(d)}S=s.SubtractVV(this.m_linearImpulse,w);r.x-=h*S.x;r.y-=h*S.y;a-=p*(u*S.y-x*S.x);m.x+=_*S.x;m.y+=_*S.y;c+=y*(f*S.y-v*S.x)}e.m_angularVelocity=a;n.m_angularVelocity=c};_.prototype.SolvePositionConstraints=function(t){if(t===undefined)t=0;return true};Box2D.inherit(p,Box2D.Dynamics.Joints.b2JointDef);p.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype;p.b2FrictionJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.localAnchorA=new l;this.localAnchorB=new l};p.prototype.b2FrictionJointDef=function(){this.__super.b2JointDef.call(this);this.type=f.e_frictionJoint;this.maxForce=0;this.maxTorque=0};p.prototype.Initialize=function(t,i,o){this.bodyA=t;this.bodyB=i;this.localAnchorA.SetV(this.bodyA.GetLocalPoint(o));this.localAnchorB.SetV(this.bodyB.GetLocalPoint(o))};Box2D.inherit(y,Box2D.Dynamics.Joints.b2Joint);y.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype;y.b2GearJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_groundAnchor1=new l;this.m_groundAnchor2=new l;this.m_localAnchor1=new l;this.m_localAnchor2=new l;this.m_J=new x};y.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)};y.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)};y.prototype.GetReactionForce=function(t){if(t===undefined)t=0;return new l(t*this.m_impulse*this.m_J.linearB.x,t*this.m_impulse*this.m_J.linearB.y)};y.prototype.GetReactionTorque=function(t){if(t===undefined)t=0;var i=this.m_bodyB.m_xf.R;var o=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x;var e=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y;var n=i.col1.x*o+i.col2.x*e;e=i.col1.y*o+i.col2.y*e;o=n;var s=this.m_impulse*this.m_J.linearB.x;var r=this.m_impulse*this.m_J.linearB.y;return t*(this.m_impulse*this.m_J.angularB-o*r+e*s)};y.prototype.GetRatio=function(){return this.m_ratio};y.prototype.SetRatio=function(t){if(t===undefined)t=0;this.m_ratio=t};y.prototype.b2GearJoint=function(t){this.__super.b2Joint.call(this,t);var i=parseInt(t.joint1.m_type);var o=parseInt(t.joint2.m_type);this.m_revolute1=null;this.m_prismatic1=null;this.m_revolute2=null;this.m_prismatic2=null;var e=0;var n=0;this.m_ground1=t.joint1.GetBodyA();this.m_bodyA=t.joint1.GetBodyB();if(i==f.e_revoluteJoint){this.m_revolute1=t.joint1 instanceof M?t.joint1:null;this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1);this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2);e=this.m_revolute1.GetJointAngle()}else{this.m_prismatic1=t.joint1 instanceof A?t.joint1:null;this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1);this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2);e=this.m_prismatic1.GetJointTranslation()}this.m_ground2=t.joint2.GetBodyA();this.m_bodyB=t.joint2.GetBodyB();if(o==f.e_revoluteJoint){this.m_revolute2=t.joint2 instanceof M?t.joint2:null;this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1);this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2);n=this.m_revolute2.GetJointAngle()}else{this.m_prismatic2=t.joint2 instanceof A?t.joint2:null;this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1);this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2);n=this.m_prismatic2.GetJointTranslation()}this.m_ratio=t.ratio;this.m_constant=e+this.m_ratio*n;this.m_impulse=0};y.prototype.InitVelocityConstraints=function(t){var i=this.m_ground1;var o=this.m_ground2;var e=this.m_bodyA;var n=this.m_bodyB;var s=0;var r=0;var a=0;var l=0;var m;var c;var h=0;var _=0;var p=0;this.m_J.SetZero();if(this.m_revolute1){this.m_J.angularA=-1;p+=e.m_invI}else{m=i.m_xf.R;c=this.m_prismatic1.m_localXAxis1;s=m.col1.x*c.x+m.col2.x*c.y;r=m.col1.y*c.x+m.col2.y*c.y;m=e.m_xf.R;a=this.m_localAnchor1.x-e.m_sweep.localCenter.x;l=this.m_localAnchor1.y-e.m_sweep.localCenter.y;_=m.col1.x*a+m.col2.x*l;l=m.col1.y*a+m.col2.y*l;a=_;h=a*r-l*s;this.m_J.linearA.Set(-s,-r);this.m_J.angularA=-h;p+=e.m_invMass+e.m_invI*h*h}if(this.m_revolute2){this.m_J.angularB=-this.m_ratio;p+=this.m_ratio*this.m_ratio*n.m_invI}else{m=o.m_xf.R;c=this.m_prismatic2.m_localXAxis1;s=m.col1.x*c.x+m.col2.x*c.y;r=m.col1.y*c.x+m.col2.y*c.y;m=n.m_xf.R;a=this.m_localAnchor2.x-n.m_sweep.localCenter.x;l=this.m_localAnchor2.y-n.m_sweep.localCenter.y;_=m.col1.x*a+m.col2.x*l;l=m.col1.y*a+m.col2.y*l;a=_;h=a*r-l*s;this.m_J.linearB.Set(-this.m_ratio*s,-this.m_ratio*r);this.m_J.angularB=-this.m_ratio*h;p+=this.m_ratio*this.m_ratio*(n.m_invMass+n.m_invI*h*h)}this.m_mass=p>0?1/p:0;if(t.warmStarting){e.m_linearVelocity.x+=e.m_invMass*this.m_impulse*this.m_J.linearA.x;e.m_linearVelocity.y+=e.m_invMass*this.m_impulse*this.m_J.linearA.y;e.m_angularVelocity+=e.m_invI*this.m_impulse*this.m_J.angularA;n.m_linearVelocity.x+=n.m_invMass*this.m_impulse*this.m_J.linearB.x;n.m_linearVelocity.y+=n.m_invMass*this.m_impulse*this.m_J.linearB.y;n.m_angularVelocity+=n.m_invI*this.m_impulse*this.m_J.angularB}else{this.m_impulse=0}};y.prototype.SolveVelocityConstraints=function(t){var i=this.m_bodyA;var o=this.m_bodyB;var e=this.m_J.Compute(i.m_linearVelocity,i.m_angularVelocity,o.m_linearVelocity,o.m_angularVelocity);var n=-this.m_mass*e;this.m_impulse+=n;i.m_linearVelocity.x+=i.m_invMass*n*this.m_J.linearA.x;i.m_linearVelocity.y+=i.m_invMass*n*this.m_J.linearA.y;i.m_angularVelocity+=i.m_invI*n*this.m_J.angularA;o.m_linearVelocity.x+=o.m_invMass*n*this.m_J.linearB.x;o.m_linearVelocity.y+=o.m_invMass*n*this.m_J.linearB.y;o.m_angularVelocity+=o.m_invI*n*this.m_J.angularB};y.prototype.SolvePositionConstraints=function(t){if(t===undefined)t=0;var i=0;var e=this.m_bodyA;var n=this.m_bodyB;var s=0;var r=0;if(this.m_revolute1){s=this.m_revolute1.GetJointAngle()}else{s=this.m_prismatic1.GetJointTranslation()}if(this.m_revolute2){r=this.m_revolute2.GetJointAngle()}else{r=this.m_prismatic2.GetJointTranslation()}var a=this.m_constant-(s+this.m_ratio*r);var l=-this.m_mass*a;e.m_sweep.c.x+=e.m_invMass*l*this.m_J.linearA.x;e.m_sweep.c.y+=e.m_invMass*l*this.m_J.linearA.y;e.m_sweep.a+=e.m_invI*l*this.m_J.angularA;n.m_sweep.c.x+=n.m_invMass*l*this.m_J.linearB.x;n.m_sweep.c.y+=n.m_invMass*l*this.m_J.linearB.y;n.m_sweep.a+=n.m_invI*l*this.m_J.angularB;e.SynchronizeTransform();n.SynchronizeTransform();return i<o.b2_linearSlop};Box2D.inherit(u,Box2D.Dynamics.Joints.b2JointDef);u.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype;u.b2GearJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments)};u.prototype.b2GearJointDef=function(){this.__super.b2JointDef.call(this);this.type=f.e_gearJoint;this.joint1=null;this.joint2=null;this.ratio=1};x.b2Jacobian=function(){this.linearA=new l;this.linearB=new l};x.prototype.SetZero=function(){this.linearA.SetZero();this.angularA=0;this.linearB.SetZero();this.angularB=0};x.prototype.Set=function(t,i,o,e){if(i===undefined)i=0;if(e===undefined)e=0;this.linearA.SetV(t);this.angularA=i;this.linearB.SetV(o);this.angularB=e};x.prototype.Compute=function(t,i,o,e){if(i===undefined)i=0;if(e===undefined)e=0;return this.linearA.x*t.x+this.linearA.y*t.y+this.angularA*i+(this.linearB.x*o.x+this.linearB.y*o.y)+this.angularB*e};f.b2Joint=function(){this.m_edgeA=new d;this.m_edgeB=new d;this.m_localCenterA=new l;this.m_localCenterB=new l};f.prototype.GetType=function(){return this.m_type};f.prototype.GetAnchorA=function(){return null};f.prototype.GetAnchorB=function(){return null};f.prototype.GetReactionForce=function(t){if(t===undefined)t=0;return null};f.prototype.GetReactionTorque=function(t){if(t===undefined)t=0;return 0};f.prototype.GetBodyA=function(){return this.m_bodyA};f.prototype.GetBodyB=function(){return this.m_bodyB};f.prototype.GetNext=function(){return this.m_next};f.prototype.GetUserData=function(){return this.m_userData};f.prototype.SetUserData=function(t){this.m_userData=t};f.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()};f.Create=function(t,i){var o=null;switch(t.type){case f.e_distanceJoint:{o=new c(t instanceof h?t:null)}break;case f.e_mouseJoint:{o=new B(t instanceof C?t:null)}break;case f.e_prismaticJoint:{o=new A(t instanceof S?t:null)}break;case f.e_revoluteJoint:{o=new M(t instanceof V?t:null)}break;case f.e_pulleyJoint:{o=new w(t instanceof g?t:null)}break;case f.e_gearJoint:{o=new y(t instanceof u?t:null)}break;case f.e_lineJoint:{o=new b(t instanceof D?t:null)}break;case f.e_weldJoint:{o=new I(t instanceof G?t:null)}break;case f.e_frictionJoint:{o=new _(t instanceof p?t:null)}break;default:break}return o};f.Destroy=function(t,i){};f.prototype.b2Joint=function(t){o.b2Assert(t.bodyA!=t.bodyB);this.m_type=t.type;this.m_prev=null;this.m_next=null;this.m_bodyA=t.bodyA;this.m_bodyB=t.bodyB;this.m_collideConnected=t.collideConnected;this.m_islandFlag=false;this.m_userData=t.userData};f.prototype.InitVelocityConstraints=function(t){};f.prototype.SolveVelocityConstraints=function(t){};f.prototype.FinalizeVelocityConstraints=function(){};f.prototype.SolvePositionConstraints=function(t){if(t===undefined)t=0;return false};Box2D.postDefs.push(function(){Box2D.Dynamics.Joints.b2Joint.e_unknownJoint=0;Box2D.Dynamics.Joints.b2Joint.e_revoluteJoint=1;Box2D.Dynamics.Joints.b2Joint.e_prismaticJoint=2;Box2D.Dynamics.Joints.b2Joint.e_distanceJoint=3;Box2D.Dynamics.Joints.b2Joint.e_pulleyJoint=4;Box2D.Dynamics.Joints.b2Joint.e_mouseJoint=5;Box2D.Dynamics.Joints.b2Joint.e_gearJoint=6;Box2D.Dynamics.Joints.b2Joint.e_lineJoint=7;Box2D.Dynamics.Joints.b2Joint.e_weldJoint=8;Box2D.Dynamics.Joints.b2Joint.e_frictionJoint=9;Box2D.Dynamics.Joints.b2Joint.e_inactiveLimit=0;Box2D.Dynamics.Joints.b2Joint.e_atLowerLimit=1;Box2D.Dynamics.Joints.b2Joint.e_atUpperLimit=2;Box2D.Dynamics.Joints.b2Joint.e_equalLimits=3});v.b2JointDef=function(){};v.prototype.b2JointDef=function(){this.type=f.e_unknownJoint;this.userData=null;this.bodyA=null;this.bodyB=null;this.collideConnected=false};d.b2JointEdge=function(){};Box2D.inherit(b,Box2D.Dynamics.Joints.b2Joint);b.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype;b.b2LineJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_localAnchor1=new l;this.m_localAnchor2=new l;this.m_localXAxis1=new l;this.m_localYAxis1=new l;this.m_axis=new l;this.m_perp=new l;this.m_K=new e;this.m_impulse=new l};b.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)};b.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)};b.prototype.GetReactionForce=function(t){if(t===undefined)t=0;return new l(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))};b.prototype.GetReactionTorque=function(t){if(t===undefined)t=0;return t*this.m_impulse.y};b.prototype.GetJointTranslation=function(){var t=this.m_bodyA;var i=this.m_bodyB;var o;var e=t.GetWorldPoint(this.m_localAnchor1);var n=i.GetWorldPoint(this.m_localAnchor2);var s=n.x-e.x;var r=n.y-e.y;var a=t.GetWorldVector(this.m_localXAxis1);var l=a.x*s+a.y*r;return l};b.prototype.GetJointSpeed=function(){var t=this.m_bodyA;var i=this.m_bodyB;var o;o=t.m_xf.R;var e=this.m_localAnchor1.x-t.m_sweep.localCenter.x;var n=this.m_localAnchor1.y-t.m_sweep.localCenter.y;var s=o.col1.x*e+o.col2.x*n;n=o.col1.y*e+o.col2.y*n;e=s;o=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x;var a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;s=o.col1.x*r+o.col2.x*a;a=o.col1.y*r+o.col2.y*a;r=s;var l=t.m_sweep.c.x+e;var m=t.m_sweep.c.y+n;var c=i.m_sweep.c.x+r;var h=i.m_sweep.c.y+a;var _=c-l;var p=h-m;var y=t.GetWorldVector(this.m_localXAxis1);var u=t.m_linearVelocity;var x=i.m_linearVelocity;var f=t.m_angularVelocity;var v=i.m_angularVelocity;var d=_*(-f*y.y)+p*(f*y.x)+(y.x*(x.x+-v*a-u.x- -f*n)+y.y*(x.y+v*r-u.y-f*e));return d};b.prototype.IsLimitEnabled=function(){return this.m_enableLimit};b.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_enableLimit=t};b.prototype.GetLowerLimit=function(){return this.m_lowerTranslation};b.prototype.GetUpperLimit=function(){return this.m_upperTranslation};b.prototype.SetLimits=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_lowerTranslation=t;this.m_upperTranslation=i};b.prototype.IsMotorEnabled=function(){return this.m_enableMotor};b.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_enableMotor=t};b.prototype.SetMotorSpeed=function(t){if(t===undefined)t=0;this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_motorSpeed=t};b.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};b.prototype.SetMaxMotorForce=function(t){if(t===undefined)t=0;this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_maxMotorForce=t};b.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce};b.prototype.GetMotorForce=function(){return this.m_motorImpulse};b.prototype.b2LineJoint=function(t){this.__super.b2Joint.call(this,t);var i;var o=0;var e=0;this.m_localAnchor1.SetV(t.localAnchorA);this.m_localAnchor2.SetV(t.localAnchorB);this.m_localXAxis1.SetV(t.localAxisA);this.m_localYAxis1.x=-this.m_localXAxis1.y;this.m_localYAxis1.y=this.m_localXAxis1.x;this.m_impulse.SetZero();this.m_motorMass=0;this.m_motorImpulse=0;this.m_lowerTranslation=t.lowerTranslation;this.m_upperTranslation=t.upperTranslation;this.m_maxMotorForce=t.maxMotorForce;this.m_motorSpeed=t.motorSpeed;this.m_enableLimit=t.enableLimit;this.m_enableMotor=t.enableMotor;this.m_limitState=f.e_inactiveLimit;this.m_axis.SetZero();this.m_perp.SetZero()};b.prototype.InitVelocityConstraints=function(t){var i=this.m_bodyA;var e=this.m_bodyB;var n;var r=0;this.m_localCenterA.SetV(i.GetLocalCenter());this.m_localCenterB.SetV(e.GetLocalCenter());var a=i.GetTransform();var l=e.GetTransform();n=i.m_xf.R;var m=this.m_localAnchor1.x-this.m_localCenterA.x;var c=this.m_localAnchor1.y-this.m_localCenterA.y;r=n.col1.x*m+n.col2.x*c;c=n.col1.y*m+n.col2.y*c;m=r;n=e.m_xf.R;var h=this.m_localAnchor2.x-this.m_localCenterB.x;var _=this.m_localAnchor2.y-this.m_localCenterB.y;r=n.col1.x*h+n.col2.x*_;_=n.col1.y*h+n.col2.y*_;h=r;var p=e.m_sweep.c.x+h-i.m_sweep.c.x-m;var y=e.m_sweep.c.y+_-i.m_sweep.c.y-c;this.m_invMassA=i.m_invMass;this.m_invMassB=e.m_invMass;this.m_invIA=i.m_invI;this.m_invIB=e.m_invI;{this.m_axis.SetV(s.MulMV(a.R,this.m_localXAxis1));this.m_a1=(p+m)*this.m_axis.y-(y+c)*this.m_axis.x;this.m_a2=h*this.m_axis.y-_*this.m_axis.x;this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2;this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0}{this.m_perp.SetV(s.MulMV(a.R,this.m_localYAxis1));this.m_s1=(p+m)*this.m_perp.y-(y+c)*this.m_perp.x;this.m_s2=h*this.m_perp.y-_*this.m_perp.x;var u=this.m_invMassA;var x=this.m_invMassB;var v=this.m_invIA;var d=this.m_invIB;this.m_K.col1.x=u+x+v*this.m_s1*this.m_s1+d*this.m_s2*this.m_s2;this.m_K.col1.y=v*this.m_s1*this.m_a1+d*this.m_s2*this.m_a2;this.m_K.col2.x=this.m_K.col1.y;this.m_K.col2.y=u+x+v*this.m_a1*this.m_a1+d*this.m_a2*this.m_a2}if(this.m_enableLimit){var b=this.m_axis.x*p+this.m_axis.y*y;if(s.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*o.b2_linearSlop){this.m_limitState=f.e_equalLimits}else if(b<=this.m_lowerTranslation){if(this.m_limitState!=f.e_atLowerLimit){this.m_limitState=f.e_atLowerLimit;this.m_impulse.y=0}}else if(b>=this.m_upperTranslation){if(this.m_limitState!=f.e_atUpperLimit){this.m_limitState=f.e_atUpperLimit;this.m_impulse.y=0}}else{this.m_limitState=f.e_inactiveLimit;this.m_impulse.y=0}}else{this.m_limitState=f.e_inactiveLimit}if(this.m_enableMotor==false){this.m_motorImpulse=0}if(t.warmStarting){this.m_impulse.x*=t.dtRatio;this.m_impulse.y*=t.dtRatio;this.m_motorImpulse*=t.dtRatio;var D=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x;var B=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y;var C=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1;var A=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2;i.m_linearVelocity.x-=this.m_invMassA*D;i.m_linearVelocity.y-=this.m_invMassA*B;i.m_angularVelocity-=this.m_invIA*C;e.m_linearVelocity.x+=this.m_invMassB*D;e.m_linearVelocity.y+=this.m_invMassB*B;e.m_angularVelocity+=this.m_invIB*A}else{this.m_impulse.SetZero();this.m_motorImpulse=0}};b.prototype.SolveVelocityConstraints=function(t){var i=this.m_bodyA;var o=this.m_bodyB;var e=i.m_linearVelocity;var n=i.m_angularVelocity;var r=o.m_linearVelocity;var a=o.m_angularVelocity;var m=0;var c=0;var h=0;var _=0;if(this.m_enableMotor&&this.m_limitState!=f.e_equalLimits){var p=this.m_axis.x*(r.x-e.x)+this.m_axis.y*(r.y-e.y)+this.m_a2*a-this.m_a1*n;var y=this.m_motorMass*(this.m_motorSpeed-p);var u=this.m_motorImpulse;var x=t.dt*this.m_maxMotorForce;this.m_motorImpulse=s.Clamp(this.m_motorImpulse+y,-x,x);y=this.m_motorImpulse-u;m=y*this.m_axis.x;c=y*this.m_axis.y;h=y*this.m_a1;_=y*this.m_a2;e.x-=this.m_invMassA*m;e.y-=this.m_invMassA*c;n-=this.m_invIA*h;r.x+=this.m_invMassB*m;r.y+=this.m_invMassB*c;a+=this.m_invIB*_}var v=this.m_perp.x*(r.x-e.x)+this.m_perp.y*(r.y-e.y)+this.m_s2*a-this.m_s1*n;if(this.m_enableLimit&&this.m_limitState!=f.e_inactiveLimit){var d=this.m_axis.x*(r.x-e.x)+this.m_axis.y*(r.y-e.y)+this.m_a2*a-this.m_a1*n;var b=this.m_impulse.Copy();var D=this.m_K.Solve(new l,-v,-d);this.m_impulse.Add(D);if(this.m_limitState==f.e_atLowerLimit){this.m_impulse.y=s.Max(this.m_impulse.y,0)}else if(this.m_limitState==f.e_atUpperLimit){this.m_impulse.y=s.Min(this.m_impulse.y,0)}var B=-v-(this.m_impulse.y-b.y)*this.m_K.col2.x;var C=0;if(this.m_K.col1.x!=0){C=B/this.m_K.col1.x+b.x}else{C=b.x}this.m_impulse.x=C;D.x=this.m_impulse.x-b.x;D.y=this.m_impulse.y-b.y;m=D.x*this.m_perp.x+D.y*this.m_axis.x;c=D.x*this.m_perp.y+D.y*this.m_axis.y;h=D.x*this.m_s1+D.y*this.m_a1;_=D.x*this.m_s2+D.y*this.m_a2;e.x-=this.m_invMassA*m;e.y-=this.m_invMassA*c;n-=this.m_invIA*h;r.x+=this.m_invMassB*m;r.y+=this.m_invMassB*c;a+=this.m_invIB*_}else{var A=0;if(this.m_K.col1.x!=0){A=-v/this.m_K.col1.x}else{A=0}this.m_impulse.x+=A;m=A*this.m_perp.x;c=A*this.m_perp.y;h=A*this.m_s1;_=A*this.m_s2;e.x-=this.m_invMassA*m;e.y-=this.m_invMassA*c;n-=this.m_invIA*h;r.x+=this.m_invMassB*m;r.y+=this.m_invMassB*c;a+=this.m_invIB*_}i.m_linearVelocity.SetV(e);i.m_angularVelocity=n;o.m_linearVelocity.SetV(r);o.m_angularVelocity=a};b.prototype.SolvePositionConstraints=function(t){if(t===undefined)t=0;var i=0;var n=0;var r=this.m_bodyA;var a=this.m_bodyB;var m=r.m_sweep.c;var c=r.m_sweep.a;var h=a.m_sweep.c;var _=a.m_sweep.a;var p;var y=0;var u=0;var x=0;var f=0;var v=0;var d=0;var b=0;var D=false;var B=0;var C=e.FromAngle(c);var A=e.FromAngle(_);p=C;var S=this.m_localAnchor1.x-this.m_localCenterA.x;var w=this.m_localAnchor1.y-this.m_localCenterA.y;y=p.col1.x*S+p.col2.x*w;w=p.col1.y*S+p.col2.y*w;S=y;p=A;var g=this.m_localAnchor2.x-this.m_localCenterB.x;var M=this.m_localAnchor2.y-this.m_localCenterB.y;y=p.col1.x*g+p.col2.x*M;M=p.col1.y*g+p.col2.y*M;g=y;var V=h.x+g-m.x-S;var I=h.y+M-m.y-w;if(this.m_enableLimit){this.m_axis=s.MulMV(C,this.m_localXAxis1);this.m_a1=(V+S)*this.m_axis.y-(I+w)*this.m_axis.x;this.m_a2=g*this.m_axis.y-M*this.m_axis.x;var G=this.m_axis.x*V+this.m_axis.y*I;if(s.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*o.b2_linearSlop){B=s.Clamp(G,-o.b2_maxLinearCorrection,o.b2_maxLinearCorrection);d=s.Abs(G);D=true}else if(G<=this.m_lowerTranslation){B=s.Clamp(G-this.m_lowerTranslation+o.b2_linearSlop,-o.b2_maxLinearCorrection,0);d=this.m_lowerTranslation-G;D=true}else if(G>=this.m_upperTranslation){B=s.Clamp(G-this.m_upperTranslation+o.b2_linearSlop,0,o.b2_maxLinearCorrection);d=G-this.m_upperTranslation;D=true}}this.m_perp=s.MulMV(C,this.m_localYAxis1);this.m_s1=(V+S)*this.m_perp.y-(I+w)*this.m_perp.x;this.m_s2=g*this.m_perp.y-M*this.m_perp.x;var L=new l;var J=this.m_perp.x*V+this.m_perp.y*I;d=s.Max(d,s.Abs(J));b=0;if(D){u=this.m_invMassA;x=this.m_invMassB;f=this.m_invIA;v=this.m_invIB;this.m_K.col1.x=u+x+f*this.m_s1*this.m_s1+v*this.m_s2*this.m_s2;this.m_K.col1.y=f*this.m_s1*this.m_a1+v*this.m_s2*this.m_a2;this.m_K.col2.x=this.m_K.col1.y;this.m_K.col2.y=u+x+f*this.m_a1*this.m_a1+v*this.m_a2*this.m_a2;this.m_K.Solve(L,-J,-B)}else{u=this.m_invMassA;x=this.m_invMassB;f=this.m_invIA;v=this.m_invIB;var F=u+x+f*this.m_s1*this.m_s1+v*this.m_s2*this.m_s2;var P=0;if(F!=0){P=-J/F}else{P=0}L.x=P;L.y=0}var R=L.x*this.m_perp.x+L.y*this.m_axis.x;var T=L.x*this.m_perp.y+L.y*this.m_axis.y;var k=L.x*this.m_s1+L.y*this.m_a1;var N=L.x*this.m_s2+L.y*this.m_a2;m.x-=this.m_invMassA*R;m.y-=this.m_invMassA*T;c-=this.m_invIA*k;h.x+=this.m_invMassB*R;h.y+=this.m_invMassB*T;_+=this.m_invIB*N;r.m_sweep.a=c;a.m_sweep.a=_;r.SynchronizeTransform();a.SynchronizeTransform();return d<=o.b2_linearSlop&&b<=o.b2_angularSlop};Box2D.inherit(D,Box2D.Dynamics.Joints.b2JointDef);D.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype;D.b2LineJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.localAnchorA=new l;this.localAnchorB=new l;this.localAxisA=new l};D.prototype.b2LineJointDef=function(){this.__super.b2JointDef.call(this);this.type=f.e_lineJoint;this.localAxisA.Set(1,0);this.enableLimit=false;this.lowerTranslation=0;this.upperTranslation=0;this.enableMotor=false;this.maxMotorForce=0;this.motorSpeed=0};D.prototype.Initialize=function(t,i,o,e){this.bodyA=t;this.bodyB=i;this.localAnchorA=this.bodyA.GetLocalPoint(o);this.localAnchorB=this.bodyB.GetLocalPoint(o);this.localAxisA=this.bodyA.GetLocalVector(e)};Box2D.inherit(B,Box2D.Dynamics.Joints.b2Joint);B.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype;B.b2MouseJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.K=new e;this.K1=new e;this.K2=new e;this.m_localAnchor=new l;this.m_target=new l;this.m_impulse=new l;this.m_mass=new e;this.m_C=new l};B.prototype.GetAnchorA=function(){return this.m_target};B.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)};B.prototype.GetReactionForce=function(t){if(t===undefined)t=0;return new l(t*this.m_impulse.x,t*this.m_impulse.y)};B.prototype.GetReactionTorque=function(t){if(t===undefined)t=0;return 0};B.prototype.GetTarget=function(){return this.m_target};B.prototype.SetTarget=function(t){if(this.m_bodyB.IsAwake()==false){this.m_bodyB.SetAwake(true)}this.m_target=t};B.prototype.GetMaxForce=function(){return this.m_maxForce};B.prototype.SetMaxForce=function(t){if(t===undefined)t=0;this.m_maxForce=t};B.prototype.GetFrequency=function(){return this.m_frequencyHz};B.prototype.SetFrequency=function(t){if(t===undefined)t=0;this.m_frequencyHz=t};B.prototype.GetDampingRatio=function(){return this.m_dampingRatio};B.prototype.SetDampingRatio=function(t){if(t===undefined)t=0;this.m_dampingRatio=t};B.prototype.b2MouseJoint=function(t){this.__super.b2Joint.call(this,t);this.m_target.SetV(t.target);var i=this.m_target.x-this.m_bodyB.m_xf.position.x;var o=this.m_target.y-this.m_bodyB.m_xf.position.y;var e=this.m_bodyB.m_xf.R;this.m_localAnchor.x=i*e.col1.x+o*e.col1.y;this.m_localAnchor.y=i*e.col2.x+o*e.col2.y;this.m_maxForce=t.maxForce;this.m_impulse.SetZero();this.m_frequencyHz=t.frequencyHz;this.m_dampingRatio=t.dampingRatio;this.m_beta=0;this.m_gamma=0};B.prototype.InitVelocityConstraints=function(t){var i=this.m_bodyB;var o=i.GetMass();var e=2*Math.PI*this.m_frequencyHz;var n=2*o*this.m_dampingRatio*e;var s=o*e*e;this.m_gamma=t.dt*(n+t.dt*s);this.m_gamma=this.m_gamma!=0?1/this.m_gamma:0;this.m_beta=t.dt*s*this.m_gamma;var r;r=i.m_xf.R;var a=this.m_localAnchor.x-i.m_sweep.localCenter.x;var l=this.m_localAnchor.y-i.m_sweep.localCenter.y;var m=r.col1.x*a+r.col2.x*l;l=r.col1.y*a+r.col2.y*l;a=m;var c=i.m_invMass;var h=i.m_invI;this.K1.col1.x=c;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=c;this.K2.col1.x=h*l*l;this.K2.col2.x=-h*a*l;this.K2.col1.y=-h*a*l;this.K2.col2.y=h*a*a;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.col1.x+=this.m_gamma;this.K.col2.y+=this.m_gamma;this.K.GetInverse(this.m_mass);this.m_C.x=i.m_sweep.c.x+a-this.m_target.x;this.m_C.y=i.m_sweep.c.y+l-this.m_target.y;i.m_angularVelocity*=.98;this.m_impulse.x*=t.dtRatio;this.m_impulse.y*=t.dtRatio;i.m_linearVelocity.x+=c*this.m_impulse.x;i.m_linearVelocity.y+=c*this.m_impulse.y;i.m_angularVelocity+=h*(a*this.m_impulse.y-l*this.m_impulse.x)};B.prototype.SolveVelocityConstraints=function(t){var i=this.m_bodyB;var o;var e=0;var n=0;o=i.m_xf.R;var s=this.m_localAnchor.x-i.m_sweep.localCenter.x;var r=this.m_localAnchor.y-i.m_sweep.localCenter.y;e=o.col1.x*s+o.col2.x*r;r=o.col1.y*s+o.col2.y*r;s=e;var a=i.m_linearVelocity.x+-i.m_angularVelocity*r;var l=i.m_linearVelocity.y+i.m_angularVelocity*s;o=this.m_mass;e=a+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x;n=l+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y;var m=-(o.col1.x*e+o.col2.x*n);var c=-(o.col1.y*e+o.col2.y*n);var h=this.m_impulse.x;var _=this.m_impulse.y;this.m_impulse.x+=m;this.m_impulse.y+=c;var p=t.dt*this.m_maxForce;if(this.m_impulse.LengthSquared()>p*p){this.m_impulse.Multiply(p/this.m_impulse.Length())}m=this.m_impulse.x-h;c=this.m_impulse.y-_;i.m_linearVelocity.x+=i.m_invMass*m;i.m_linearVelocity.y+=i.m_invMass*c;i.m_angularVelocity+=i.m_invI*(s*c-r*m)};B.prototype.SolvePositionConstraints=function(t){if(t===undefined)t=0;return true};Box2D.inherit(C,Box2D.Dynamics.Joints.b2JointDef);C.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype;C.b2MouseJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.target=new l};C.prototype.b2MouseJointDef=function(){this.__super.b2JointDef.call(this);this.type=f.e_mouseJoint;this.maxForce=0;this.frequencyHz=5;this.dampingRatio=.7};Box2D.inherit(A,Box2D.Dynamics.Joints.b2Joint);A.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype;A.b2PrismaticJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_localAnchor1=new l;this.m_localAnchor2=new l;this.m_localXAxis1=new l;this.m_localYAxis1=new l;this.m_axis=new l;this.m_perp=new l;this.m_K=new n;this.m_impulse=new m};A.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)};A.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)};A.prototype.GetReactionForce=function(t){if(t===undefined)t=0;return new l(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))};A.prototype.GetReactionTorque=function(t){if(t===undefined)t=0;return t*this.m_impulse.y};A.prototype.GetJointTranslation=function(){var t=this.m_bodyA;var i=this.m_bodyB;var o;var e=t.GetWorldPoint(this.m_localAnchor1);var n=i.GetWorldPoint(this.m_localAnchor2);var s=n.x-e.x;var r=n.y-e.y;var a=t.GetWorldVector(this.m_localXAxis1);var l=a.x*s+a.y*r;return l};A.prototype.GetJointSpeed=function(){var t=this.m_bodyA;var i=this.m_bodyB;var o;o=t.m_xf.R;var e=this.m_localAnchor1.x-t.m_sweep.localCenter.x;var n=this.m_localAnchor1.y-t.m_sweep.localCenter.y;var s=o.col1.x*e+o.col2.x*n;n=o.col1.y*e+o.col2.y*n;e=s;o=i.m_xf.R;var r=this.m_localAnchor2.x-i.m_sweep.localCenter.x;var a=this.m_localAnchor2.y-i.m_sweep.localCenter.y;s=o.col1.x*r+o.col2.x*a;a=o.col1.y*r+o.col2.y*a;r=s;var l=t.m_sweep.c.x+e;var m=t.m_sweep.c.y+n;var c=i.m_sweep.c.x+r;var h=i.m_sweep.c.y+a;var _=c-l;var p=h-m;var y=t.GetWorldVector(this.m_localXAxis1);var u=t.m_linearVelocity;var x=i.m_linearVelocity;var f=t.m_angularVelocity;var v=i.m_angularVelocity;var d=_*(-f*y.y)+p*(f*y.x)+(y.x*(x.x+-v*a-u.x- -f*n)+y.y*(x.y+v*r-u.y-f*e));return d};A.prototype.IsLimitEnabled=function(){return this.m_enableLimit};A.prototype.EnableLimit=function(t){this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_enableLimit=t};A.prototype.GetLowerLimit=function(){return this.m_lowerTranslation};A.prototype.GetUpperLimit=function(){return this.m_upperTranslation};A.prototype.SetLimits=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_lowerTranslation=t;this.m_upperTranslation=i};A.prototype.IsMotorEnabled=function(){return this.m_enableMotor};A.prototype.EnableMotor=function(t){this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_enableMotor=t};A.prototype.SetMotorSpeed=function(t){if(t===undefined)t=0;this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_motorSpeed=t};A.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};A.prototype.SetMaxMotorForce=function(t){if(t===undefined)t=0;this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_maxMotorForce=t};A.prototype.GetMotorForce=function(){return this.m_motorImpulse};A.prototype.b2PrismaticJoint=function(t){this.__super.b2Joint.call(this,t);var i;var o=0;var e=0;this.m_localAnchor1.SetV(t.localAnchorA);this.m_localAnchor2.SetV(t.localAnchorB);this.m_localXAxis1.SetV(t.localAxisA);this.m_localYAxis1.x=-this.m_localXAxis1.y;this.m_localYAxis1.y=this.m_localXAxis1.x;this.m_refAngle=t.referenceAngle;this.m_impulse.SetZero();this.m_motorMass=0;this.m_motorImpulse=0;this.m_lowerTranslation=t.lowerTranslation;this.m_upperTranslation=t.upperTranslation;this.m_maxMotorForce=t.maxMotorForce;this.m_motorSpeed=t.motorSpeed;this.m_enableLimit=t.enableLimit;this.m_enableMotor=t.enableMotor;this.m_limitState=f.e_inactiveLimit;this.m_axis.SetZero();this.m_perp.SetZero()};A.prototype.InitVelocityConstraints=function(t){var i=this.m_bodyA;var e=this.m_bodyB;var n;var r=0;this.m_localCenterA.SetV(i.GetLocalCenter());this.m_localCenterB.SetV(e.GetLocalCenter());var a=i.GetTransform();var l=e.GetTransform();n=i.m_xf.R;var m=this.m_localAnchor1.x-this.m_localCenterA.x;var c=this.m_localAnchor1.y-this.m_localCenterA.y;r=n.col1.x*m+n.col2.x*c;c=n.col1.y*m+n.col2.y*c;m=r;n=e.m_xf.R;var h=this.m_localAnchor2.x-this.m_localCenterB.x;var _=this.m_localAnchor2.y-this.m_localCenterB.y;r=n.col1.x*h+n.col2.x*_;_=n.col1.y*h+n.col2.y*_;h=r;var p=e.m_sweep.c.x+h-i.m_sweep.c.x-m;var y=e.m_sweep.c.y+_-i.m_sweep.c.y-c;this.m_invMassA=i.m_invMass;this.m_invMassB=e.m_invMass;this.m_invIA=i.m_invI;this.m_invIB=e.m_invI;{this.m_axis.SetV(s.MulMV(a.R,this.m_localXAxis1));this.m_a1=(p+m)*this.m_axis.y-(y+c)*this.m_axis.x;this.m_a2=h*this.m_axis.y-_*this.m_axis.x;this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2;if(this.m_motorMass>Number.MIN_VALUE)this.m_motorMass=1/this.m_motorMass}{this.m_perp.SetV(s.MulMV(a.R,this.m_localYAxis1));this.m_s1=(p+m)*this.m_perp.y-(y+c)*this.m_perp.x;this.m_s2=h*this.m_perp.y-_*this.m_perp.x;var u=this.m_invMassA;var x=this.m_invMassB;var v=this.m_invIA;var d=this.m_invIB;this.m_K.col1.x=u+x+v*this.m_s1*this.m_s1+d*this.m_s2*this.m_s2;this.m_K.col1.y=v*this.m_s1+d*this.m_s2;this.m_K.col1.z=v*this.m_s1*this.m_a1+d*this.m_s2*this.m_a2;this.m_K.col2.x=this.m_K.col1.y;this.m_K.col2.y=v+d;this.m_K.col2.z=v*this.m_a1+d*this.m_a2;this.m_K.col3.x=this.m_K.col1.z;this.m_K.col3.y=this.m_K.col2.z;this.m_K.col3.z=u+x+v*this.m_a1*this.m_a1+d*this.m_a2*this.m_a2}if(this.m_enableLimit){var b=this.m_axis.x*p+this.m_axis.y*y;if(s.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*o.b2_linearSlop){this.m_limitState=f.e_equalLimits}else if(b<=this.m_lowerTranslation){if(this.m_limitState!=f.e_atLowerLimit){this.m_limitState=f.e_atLowerLimit;this.m_impulse.z=0}}else if(b>=this.m_upperTranslation){if(this.m_limitState!=f.e_atUpperLimit){this.m_limitState=f.e_atUpperLimit;this.m_impulse.z=0}}else{this.m_limitState=f.e_inactiveLimit;this.m_impulse.z=0}}else{this.m_limitState=f.e_inactiveLimit}if(this.m_enableMotor==false){this.m_motorImpulse=0}if(t.warmStarting){this.m_impulse.x*=t.dtRatio;this.m_impulse.y*=t.dtRatio;this.m_motorImpulse*=t.dtRatio;var D=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x;var B=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y;var C=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1;var A=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;i.m_linearVelocity.x-=this.m_invMassA*D;i.m_linearVelocity.y-=this.m_invMassA*B;i.m_angularVelocity-=this.m_invIA*C;e.m_linearVelocity.x+=this.m_invMassB*D;e.m_linearVelocity.y+=this.m_invMassB*B;e.m_angularVelocity+=this.m_invIB*A}else{this.m_impulse.SetZero();this.m_motorImpulse=0}};A.prototype.SolveVelocityConstraints=function(t){var i=this.m_bodyA;var o=this.m_bodyB;var e=i.m_linearVelocity;var n=i.m_angularVelocity;var r=o.m_linearVelocity;var a=o.m_angularVelocity;var c=0;var h=0;var _=0;var p=0;if(this.m_enableMotor&&this.m_limitState!=f.e_equalLimits){var y=this.m_axis.x*(r.x-e.x)+this.m_axis.y*(r.y-e.y)+this.m_a2*a-this.m_a1*n;var u=this.m_motorMass*(this.m_motorSpeed-y);var x=this.m_motorImpulse;var v=t.dt*this.m_maxMotorForce;this.m_motorImpulse=s.Clamp(this.m_motorImpulse+u,-v,v);u=this.m_motorImpulse-x;c=u*this.m_axis.x;h=u*this.m_axis.y;_=u*this.m_a1;p=u*this.m_a2;e.x-=this.m_invMassA*c;e.y-=this.m_invMassA*h;n-=this.m_invIA*_;r.x+=this.m_invMassB*c;r.y+=this.m_invMassB*h;a+=this.m_invIB*p}var d=this.m_perp.x*(r.x-e.x)+this.m_perp.y*(r.y-e.y)+this.m_s2*a-this.m_s1*n;var b=a-n;if(this.m_enableLimit&&this.m_limitState!=f.e_inactiveLimit){var D=this.m_axis.x*(r.x-e.x)+this.m_axis.y*(r.y-e.y)+this.m_a2*a-this.m_a1*n;var B=this.m_impulse.Copy();var C=this.m_K.Solve33(new m,-d,-b,-D);this.m_impulse.Add(C);if(this.m_limitState==f.e_atLowerLimit){this.m_impulse.z=s.Max(this.m_impulse.z,0)}else if(this.m_limitState==f.e_atUpperLimit){this.m_impulse.z=s.Min(this.m_impulse.z,0)}var A=-d-(this.m_impulse.z-B.z)*this.m_K.col3.x;var S=-b-(this.m_impulse.z-B.z)*this.m_K.col3.y;var w=this.m_K.Solve22(new l,A,S);w.x+=B.x;w.y+=B.y;this.m_impulse.x=w.x;this.m_impulse.y=w.y;C.x=this.m_impulse.x-B.x;C.y=this.m_impulse.y-B.y;C.z=this.m_impulse.z-B.z;c=C.x*this.m_perp.x+C.z*this.m_axis.x;h=C.x*this.m_perp.y+C.z*this.m_axis.y;_=C.x*this.m_s1+C.y+C.z*this.m_a1;p=C.x*this.m_s2+C.y+C.z*this.m_a2;e.x-=this.m_invMassA*c;e.y-=this.m_invMassA*h;n-=this.m_invIA*_;r.x+=this.m_invMassB*c;r.y+=this.m_invMassB*h;a+=this.m_invIB*p}else{var g=this.m_K.Solve22(new l,-d,-b);this.m_impulse.x+=g.x;this.m_impulse.y+=g.y;c=g.x*this.m_perp.x;h=g.x*this.m_perp.y;_=g.x*this.m_s1+g.y;p=g.x*this.m_s2+g.y;e.x-=this.m_invMassA*c;e.y-=this.m_invMassA*h;n-=this.m_invIA*_;r.x+=this.m_invMassB*c;r.y+=this.m_invMassB*h;a+=this.m_invIB*p}i.m_linearVelocity.SetV(e);i.m_angularVelocity=n;o.m_linearVelocity.SetV(r);o.m_angularVelocity=a};A.prototype.SolvePositionConstraints=function(t){if(t===undefined)t=0;var i=0;var n=0;var r=this.m_bodyA;var a=this.m_bodyB;var c=r.m_sweep.c;var h=r.m_sweep.a;var _=a.m_sweep.c;var p=a.m_sweep.a;var y;var u=0;var x=0;var f=0;var v=0;var d=0;var b=0;var D=0;var B=false;var C=0;var A=e.FromAngle(h);var S=e.FromAngle(p);y=A;var w=this.m_localAnchor1.x-this.m_localCenterA.x;var g=this.m_localAnchor1.y-this.m_localCenterA.y;u=y.col1.x*w+y.col2.x*g;g=y.col1.y*w+y.col2.y*g;w=u;y=S;var M=this.m_localAnchor2.x-this.m_localCenterB.x;var V=this.m_localAnchor2.y-this.m_localCenterB.y;u=y.col1.x*M+y.col2.x*V;V=y.col1.y*M+y.col2.y*V;M=u;var I=_.x+M-c.x-w;var G=_.y+V-c.y-g;if(this.m_enableLimit){this.m_axis=s.MulMV(A,this.m_localXAxis1);this.m_a1=(I+w)*this.m_axis.y-(G+g)*this.m_axis.x;this.m_a2=M*this.m_axis.y-V*this.m_axis.x;var L=this.m_axis.x*I+this.m_axis.y*G;if(s.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*o.b2_linearSlop){C=s.Clamp(L,-o.b2_maxLinearCorrection,o.b2_maxLinearCorrection);b=s.Abs(L);B=true}else if(L<=this.m_lowerTranslation){C=s.Clamp(L-this.m_lowerTranslation+o.b2_linearSlop,-o.b2_maxLinearCorrection,0);b=this.m_lowerTranslation-L;B=true}else if(L>=this.m_upperTranslation){C=s.Clamp(L-this.m_upperTranslation+o.b2_linearSlop,0,o.b2_maxLinearCorrection);b=L-this.m_upperTranslation;B=true}}this.m_perp=s.MulMV(A,this.m_localYAxis1);this.m_s1=(I+w)*this.m_perp.y-(G+g)*this.m_perp.x;this.m_s2=M*this.m_perp.y-V*this.m_perp.x;var J=new m;var F=this.m_perp.x*I+this.m_perp.y*G;var P=p-h-this.m_refAngle;b=s.Max(b,s.Abs(F));D=s.Abs(P);if(B){x=this.m_invMassA;f=this.m_invMassB;v=this.m_invIA;d=this.m_invIB;this.m_K.col1.x=x+f+v*this.m_s1*this.m_s1+d*this.m_s2*this.m_s2;this.m_K.col1.y=v*this.m_s1+d*this.m_s2;this.m_K.col1.z=v*this.m_s1*this.m_a1+d*this.m_s2*this.m_a2;this.m_K.col2.x=this.m_K.col1.y;this.m_K.col2.y=v+d;this.m_K.col2.z=v*this.m_a1+d*this.m_a2;this.m_K.col3.x=this.m_K.col1.z;this.m_K.col3.y=this.m_K.col2.z;this.m_K.col3.z=x+f+v*this.m_a1*this.m_a1+d*this.m_a2*this.m_a2;this.m_K.Solve33(J,-F,-P,-C)}else{x=this.m_invMassA;f=this.m_invMassB;v=this.m_invIA;d=this.m_invIB;var R=x+f+v*this.m_s1*this.m_s1+d*this.m_s2*this.m_s2;var T=v*this.m_s1+d*this.m_s2;var k=v+d;this.m_K.col1.Set(R,T,0);this.m_K.col2.Set(T,k,0);var N=this.m_K.Solve22(new l,-F,-P);J.x=N.x;J.y=N.y;J.z=0}var z=J.x*this.m_perp.x+J.z*this.m_axis.x;var E=J.x*this.m_perp.y+J.z*this.m_axis.y;var j=J.x*this.m_s1+J.y+J.z*this.m_a1;var O=J.x*this.m_s2+J.y+J.z*this.m_a2;c.x-=this.m_invMassA*z;c.y-=this.m_invMassA*E;h-=this.m_invIA*j;_.x+=this.m_invMassB*z;_.y+=this.m_invMassB*E;p+=this.m_invIB*O;r.m_sweep.a=h;a.m_sweep.a=p;r.SynchronizeTransform();a.SynchronizeTransform();return b<=o.b2_linearSlop&&D<=o.b2_angularSlop};Box2D.inherit(S,Box2D.Dynamics.Joints.b2JointDef);S.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype;S.b2PrismaticJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.localAnchorA=new l;this.localAnchorB=new l;this.localAxisA=new l};S.prototype.b2PrismaticJointDef=function(){this.__super.b2JointDef.call(this);this.type=f.e_prismaticJoint;this.localAxisA.Set(1,0);this.referenceAngle=0;this.enableLimit=false;this.lowerTranslation=0;this.upperTranslation=0;this.enableMotor=false;this.maxMotorForce=0;this.motorSpeed=0};S.prototype.Initialize=function(t,i,o,e){this.bodyA=t;this.bodyB=i;this.localAnchorA=this.bodyA.GetLocalPoint(o);this.localAnchorB=this.bodyB.GetLocalPoint(o);this.localAxisA=this.bodyA.GetLocalVector(e);this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};Box2D.inherit(w,Box2D.Dynamics.Joints.b2Joint);w.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype;w.b2PulleyJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_groundAnchor1=new l;this.m_groundAnchor2=new l;this.m_localAnchor1=new l;this.m_localAnchor2=new l;this.m_u1=new l;this.m_u2=new l};w.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)};w.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)};w.prototype.GetReactionForce=function(t){if(t===undefined)t=0;return new l(t*this.m_impulse*this.m_u2.x,t*this.m_impulse*this.m_u2.y)};w.prototype.GetReactionTorque=function(t){if(t===undefined)t=0;return 0};w.prototype.GetGroundAnchorA=function(){var t=this.m_ground.m_xf.position.Copy();t.Add(this.m_groundAnchor1);return t};w.prototype.GetGroundAnchorB=function(){var t=this.m_ground.m_xf.position.Copy();t.Add(this.m_groundAnchor2);return t};w.prototype.GetLength1=function(){var t=this.m_bodyA.GetWorldPoint(this.m_localAnchor1);var i=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x;var o=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y;var e=t.x-i;var n=t.y-o;return Math.sqrt(e*e+n*n)};w.prototype.GetLength2=function(){var t=this.m_bodyB.GetWorldPoint(this.m_localAnchor2);var i=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x;var o=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;var e=t.x-i;var n=t.y-o;return Math.sqrt(e*e+n*n)};w.prototype.GetRatio=function(){return this.m_ratio};w.prototype.b2PulleyJoint=function(t){this.__super.b2Joint.call(this,t);var i;var o=0;var e=0;this.m_ground=this.m_bodyA.m_world.m_groundBody;this.m_groundAnchor1.x=t.groundAnchorA.x-this.m_ground.m_xf.position.x;this.m_groundAnchor1.y=t.groundAnchorA.y-this.m_ground.m_xf.position.y;this.m_groundAnchor2.x=t.groundAnchorB.x-this.m_ground.m_xf.position.x;this.m_groundAnchor2.y=t.groundAnchorB.y-this.m_ground.m_xf.position.y;this.m_localAnchor1.SetV(t.localAnchorA);this.m_localAnchor2.SetV(t.localAnchorB);this.m_ratio=t.ratio;this.m_constant=t.lengthA+this.m_ratio*t.lengthB;this.m_maxLength1=s.Min(t.maxLengthA,this.m_constant-this.m_ratio*w.b2_minPulleyLength);this.m_maxLength2=s.Min(t.maxLengthB,(this.m_constant-w.b2_minPulleyLength)/this.m_ratio);this.m_impulse=0;this.m_limitImpulse1=0;this.m_limitImpulse2=0};w.prototype.InitVelocityConstraints=function(t){var i=this.m_bodyA;var e=this.m_bodyB;var n;n=i.m_xf.R;var s=this.m_localAnchor1.x-i.m_sweep.localCenter.x;var r=this.m_localAnchor1.y-i.m_sweep.localCenter.y;var a=n.col1.x*s+n.col2.x*r;r=n.col1.y*s+n.col2.y*r;s=a;n=e.m_xf.R;var l=this.m_localAnchor2.x-e.m_sweep.localCenter.x;var m=this.m_localAnchor2.y-e.m_sweep.localCenter.y;a=n.col1.x*l+n.col2.x*m;m=n.col1.y*l+n.col2.y*m;l=a;var c=i.m_sweep.c.x+s;var h=i.m_sweep.c.y+r;var _=e.m_sweep.c.x+l;var p=e.m_sweep.c.y+m;var y=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x;var u=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y;var x=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x;var v=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.Set(c-y,h-u);this.m_u2.Set(_-x,p-v);var d=this.m_u1.Length();var b=this.m_u2.Length();if(d>o.b2_linearSlop){this.m_u1.Multiply(1/d)}else{this.m_u1.SetZero()}if(b>o.b2_linearSlop){this.m_u2.Multiply(1/b)}else{this.m_u2.SetZero()}var D=this.m_constant-d-this.m_ratio*b;if(D>0){this.m_state=f.e_inactiveLimit;this.m_impulse=0}else{this.m_state=f.e_atUpperLimit}if(d<this.m_maxLength1){this.m_limitState1=f.e_inactiveLimit;this.m_limitImpulse1=0}else{this.m_limitState1=f.e_atUpperLimit}if(b<this.m_maxLength2){this.m_limitState2=f.e_inactiveLimit;this.m_limitImpulse2=0}else{this.m_limitState2=f.e_atUpperLimit}var B=s*this.m_u1.y-r*this.m_u1.x;var C=l*this.m_u2.y-m*this.m_u2.x;this.m_limitMass1=i.m_invMass+i.m_invI*B*B;this.m_limitMass2=e.m_invMass+e.m_invI*C*C;this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2;this.m_limitMass1=1/this.m_limitMass1;this.m_limitMass2=1/this.m_limitMass2;this.m_pulleyMass=1/this.m_pulleyMass;if(t.warmStarting){this.m_impulse*=t.dtRatio;this.m_limitImpulse1*=t.dtRatio;this.m_limitImpulse2*=t.dtRatio;var A=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.x;var S=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y;var w=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x;var g=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y;i.m_linearVelocity.x+=i.m_invMass*A;i.m_linearVelocity.y+=i.m_invMass*S;i.m_angularVelocity+=i.m_invI*(s*S-r*A);e.m_linearVelocity.x+=e.m_invMass*w;e.m_linearVelocity.y+=e.m_invMass*g;e.m_angularVelocity+=e.m_invI*(l*g-m*w)}else{this.m_impulse=0;this.m_limitImpulse1=0;this.m_limitImpulse2=0}};w.prototype.SolveVelocityConstraints=function(t){var i=this.m_bodyA;var o=this.m_bodyB;var e;e=i.m_xf.R;var n=this.m_localAnchor1.x-i.m_sweep.localCenter.x;var r=this.m_localAnchor1.y-i.m_sweep.localCenter.y;var a=e.col1.x*n+e.col2.x*r;r=e.col1.y*n+e.col2.y*r;n=a;e=o.m_xf.R;var l=this.m_localAnchor2.x-o.m_sweep.localCenter.x;var m=this.m_localAnchor2.y-o.m_sweep.localCenter.y;a=e.col1.x*l+e.col2.x*m;m=e.col1.y*l+e.col2.y*m;l=a;var c=0;var h=0;var _=0;var p=0;var y=0;var u=0;var x=0;var v=0;var d=0;var b=0;var D=0;if(this.m_state==f.e_atUpperLimit){c=i.m_linearVelocity.x+-i.m_angularVelocity*r;h=i.m_linearVelocity.y+i.m_angularVelocity*n;_=o.m_linearVelocity.x+-o.m_angularVelocity*m;p=o.m_linearVelocity.y+o.m_angularVelocity*l;d=-(this.m_u1.x*c+this.m_u1.y*h)-this.m_ratio*(this.m_u2.x*_+this.m_u2.y*p);b=this.m_pulleyMass*-d;D=this.m_impulse;this.m_impulse=s.Max(0,this.m_impulse+b);b=this.m_impulse-D;y=-b*this.m_u1.x;u=-b*this.m_u1.y;x=-this.m_ratio*b*this.m_u2.x;v=-this.m_ratio*b*this.m_u2.y;i.m_linearVelocity.x+=i.m_invMass*y;i.m_linearVelocity.y+=i.m_invMass*u;i.m_angularVelocity+=i.m_invI*(n*u-r*y);o.m_linearVelocity.x+=o.m_invMass*x;o.m_linearVelocity.y+=o.m_invMass*v;o.m_angularVelocity+=o.m_invI*(l*v-m*x)}if(this.m_limitState1==f.e_atUpperLimit){c=i.m_linearVelocity.x+-i.m_angularVelocity*r;h=i.m_linearVelocity.y+i.m_angularVelocity*n;d=-(this.m_u1.x*c+this.m_u1.y*h);b=-this.m_limitMass1*d;D=this.m_limitImpulse1;this.m_limitImpulse1=s.Max(0,this.m_limitImpulse1+b);b=this.m_limitImpulse1-D;y=-b*this.m_u1.x;u=-b*this.m_u1.y;i.m_linearVelocity.x+=i.m_invMass*y;i.m_linearVelocity.y+=i.m_invMass*u;i.m_angularVelocity+=i.m_invI*(n*u-r*y)}if(this.m_limitState2==f.e_atUpperLimit){_=o.m_linearVelocity.x+-o.m_angularVelocity*m;p=o.m_linearVelocity.y+o.m_angularVelocity*l;d=-(this.m_u2.x*_+this.m_u2.y*p);b=-this.m_limitMass2*d;D=this.m_limitImpulse2;this.m_limitImpulse2=s.Max(0,this.m_limitImpulse2+b);b=this.m_limitImpulse2-D;x=-b*this.m_u2.x;v=-b*this.m_u2.y;o.m_linearVelocity.x+=o.m_invMass*x;o.m_linearVelocity.y+=o.m_invMass*v;o.m_angularVelocity+=o.m_invI*(l*v-m*x)}};w.prototype.SolvePositionConstraints=function(t){if(t===undefined)t=0;var i=this.m_bodyA;var e=this.m_bodyB;var n;var r=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x;var a=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y;var l=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x;var m=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;var c=0;var h=0;var _=0;var p=0;var y=0;var u=0;var x=0;var v=0;var d=0;var b=0;var D=0;var B=0;var C=0;var A=0;var S=0;var w=0;if(this.m_state==f.e_atUpperLimit){n=i.m_xf.R;c=this.m_localAnchor1.x-i.m_sweep.localCenter.x;h=this.m_localAnchor1.y-i.m_sweep.localCenter.y;S=n.col1.x*c+n.col2.x*h;h=n.col1.y*c+n.col2.y*h;c=S;n=e.m_xf.R;_=this.m_localAnchor2.x-e.m_sweep.localCenter.x;p=this.m_localAnchor2.y-e.m_sweep.localCenter.y;S=n.col1.x*_+n.col2.x*p;p=n.col1.y*_+n.col2.y*p;_=S;y=i.m_sweep.c.x+c;u=i.m_sweep.c.y+h;x=e.m_sweep.c.x+_;v=e.m_sweep.c.y+p;this.m_u1.Set(y-r,u-a);this.m_u2.Set(x-l,v-m);d=this.m_u1.Length();b=this.m_u2.Length();if(d>o.b2_linearSlop){this.m_u1.Multiply(1/d)}else{this.m_u1.SetZero()}if(b>o.b2_linearSlop){this.m_u2.Multiply(1/b)}else{this.m_u2.SetZero()}D=this.m_constant-d-this.m_ratio*b;w=s.Max(w,-D);D=s.Clamp(D+o.b2_linearSlop,-o.b2_maxLinearCorrection,0);B=-this.m_pulleyMass*D;y=-B*this.m_u1.x;u=-B*this.m_u1.y;x=-this.m_ratio*B*this.m_u2.x;v=-this.m_ratio*B*this.m_u2.y;i.m_sweep.c.x+=i.m_invMass*y;i.m_sweep.c.y+=i.m_invMass*u;i.m_sweep.a+=i.m_invI*(c*u-h*y);e.m_sweep.c.x+=e.m_invMass*x;e.m_sweep.c.y+=e.m_invMass*v;e.m_sweep.a+=e.m_invI*(_*v-p*x);i.SynchronizeTransform();e.SynchronizeTransform()}if(this.m_limitState1==f.e_atUpperLimit){n=i.m_xf.R;c=this.m_localAnchor1.x-i.m_sweep.localCenter.x;h=this.m_localAnchor1.y-i.m_sweep.localCenter.y;S=n.col1.x*c+n.col2.x*h;h=n.col1.y*c+n.col2.y*h;c=S;y=i.m_sweep.c.x+c;u=i.m_sweep.c.y+h;this.m_u1.Set(y-r,u-a);d=this.m_u1.Length();if(d>o.b2_linearSlop){this.m_u1.x*=1/d;this.m_u1.y*=1/d}else{this.m_u1.SetZero()}D=this.m_maxLength1-d;w=s.Max(w,-D);D=s.Clamp(D+o.b2_linearSlop,-o.b2_maxLinearCorrection,0);B=-this.m_limitMass1*D;y=-B*this.m_u1.x;u=-B*this.m_u1.y;i.m_sweep.c.x+=i.m_invMass*y;i.m_sweep.c.y+=i.m_invMass*u;i.m_sweep.a+=i.m_invI*(c*u-h*y);i.SynchronizeTransform()}if(this.m_limitState2==f.e_atUpperLimit){n=e.m_xf.R;_=this.m_localAnchor2.x-e.m_sweep.localCenter.x;p=this.m_localAnchor2.y-e.m_sweep.localCenter.y;S=n.col1.x*_+n.col2.x*p;p=n.col1.y*_+n.col2.y*p;_=S;x=e.m_sweep.c.x+_;v=e.m_sweep.c.y+p;this.m_u2.Set(x-l,v-m);b=this.m_u2.Length();if(b>o.b2_linearSlop){this.m_u2.x*=1/b;this.m_u2.y*=1/b}else{this.m_u2.SetZero()}D=this.m_maxLength2-b;w=s.Max(w,-D);D=s.Clamp(D+o.b2_linearSlop,-o.b2_maxLinearCorrection,0);B=-this.m_limitMass2*D;x=-B*this.m_u2.x;v=-B*this.m_u2.y;e.m_sweep.c.x+=e.m_invMass*x;e.m_sweep.c.y+=e.m_invMass*v;e.m_sweep.a+=e.m_invI*(_*v-p*x);e.SynchronizeTransform()}return w<o.b2_linearSlop};Box2D.postDefs.push(function(){Box2D.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength=2});Box2D.inherit(g,Box2D.Dynamics.Joints.b2JointDef);g.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype;g.b2PulleyJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.groundAnchorA=new l;this.groundAnchorB=new l;this.localAnchorA=new l;this.localAnchorB=new l};g.prototype.b2PulleyJointDef=function(){this.__super.b2JointDef.call(this);this.type=f.e_pulleyJoint;this.groundAnchorA.Set(-1,1);this.groundAnchorB.Set(1,1);this.localAnchorA.Set(-1,0);this.localAnchorB.Set(1,0);this.lengthA=0;this.maxLengthA=0;this.lengthB=0;this.maxLengthB=0;this.ratio=1;this.collideConnected=true};g.prototype.Initialize=function(t,i,o,e,n,s,r){if(r===undefined)r=0;this.bodyA=t;this.bodyB=i;this.groundAnchorA.SetV(o);this.groundAnchorB.SetV(e);this.localAnchorA=this.bodyA.GetLocalPoint(n);this.localAnchorB=this.bodyB.GetLocalPoint(s);var a=n.x-o.x;var l=n.y-o.y;this.lengthA=Math.sqrt(a*a+l*l);var m=s.x-e.x;var c=s.y-e.y;this.lengthB=Math.sqrt(m*m+c*c);this.ratio=r;var h=this.lengthA+this.ratio*this.lengthB;this.maxLengthA=h-this.ratio*w.b2_minPulleyLength;this.maxLengthB=(h-w.b2_minPulleyLength)/this.ratio};Box2D.inherit(M,Box2D.Dynamics.Joints.b2Joint);M.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype;M.b2RevoluteJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.K=new e;this.K1=new e;this.K2=new e;this.K3=new e;this.impulse3=new m;this.impulse2=new l;this.reduced=new l;this.m_localAnchor1=new l;this.m_localAnchor2=new l;this.m_impulse=new m;this.m_mass=new n};M.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)};M.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)};M.prototype.GetReactionForce=function(t){if(t===undefined)t=0;return new l(t*this.m_impulse.x,t*this.m_impulse.y)};M.prototype.GetReactionTorque=function(t){if(t===undefined)t=0;return t*this.m_impulse.z};M.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle};M.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity};M.prototype.IsLimitEnabled=function(){return this.m_enableLimit};M.prototype.EnableLimit=function(t){this.m_enableLimit=t};M.prototype.GetLowerLimit=function(){return this.m_lowerAngle};M.prototype.GetUpperLimit=function(){return this.m_upperAngle};M.prototype.SetLimits=function(t,i){if(t===undefined)t=0;if(i===undefined)i=0;this.m_lowerAngle=t;this.m_upperAngle=i};M.prototype.IsMotorEnabled=function(){this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);return this.m_enableMotor};M.prototype.EnableMotor=function(t){this.m_enableMotor=t};M.prototype.SetMotorSpeed=function(t){if(t===undefined)t=0;this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_motorSpeed=t};M.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};M.prototype.SetMaxMotorTorque=function(t){if(t===undefined)t=0;this.m_maxMotorTorque=t};M.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque};M.prototype.b2RevoluteJoint=function(t){this.__super.b2Joint.call(this,t);this.m_localAnchor1.SetV(t.localAnchorA);this.m_localAnchor2.SetV(t.localAnchorB);this.m_referenceAngle=t.referenceAngle;this.m_impulse.SetZero();this.m_motorImpulse=0;this.m_lowerAngle=t.lowerAngle;this.m_upperAngle=t.upperAngle;this.m_maxMotorTorque=t.maxMotorTorque;this.m_motorSpeed=t.motorSpeed;this.m_enableLimit=t.enableLimit;this.m_enableMotor=t.enableMotor;this.m_limitState=f.e_inactiveLimit};M.prototype.InitVelocityConstraints=function(t){var i=this.m_bodyA;var e=this.m_bodyB;var n;var r=0;if(this.m_enableMotor||this.m_enableLimit){}n=i.m_xf.R;var a=this.m_localAnchor1.x-i.m_sweep.localCenter.x;var l=this.m_localAnchor1.y-i.m_sweep.localCenter.y;r=n.col1.x*a+n.col2.x*l;l=n.col1.y*a+n.col2.y*l;a=r;n=e.m_xf.R;var m=this.m_localAnchor2.x-e.m_sweep.localCenter.x;var c=this.m_localAnchor2.y-e.m_sweep.localCenter.y;r=n.col1.x*m+n.col2.x*c;c=n.col1.y*m+n.col2.y*c;m=r;var h=i.m_invMass;var _=e.m_invMass;var p=i.m_invI;var y=e.m_invI;this.m_mass.col1.x=h+_+l*l*p+c*c*y;this.m_mass.col2.x=-l*a*p-c*m*y;this.m_mass.col3.x=-l*p-c*y;this.m_mass.col1.y=this.m_mass.col2.x;this.m_mass.col2.y=h+_+a*a*p+m*m*y;this.m_mass.col3.y=a*p+m*y;this.m_mass.col1.z=this.m_mass.col3.x;this.m_mass.col2.z=this.m_mass.col3.y;this.m_mass.col3.z=p+y;this.m_motorMass=1/(p+y);if(this.m_enableMotor==false){this.m_motorImpulse=0}if(this.m_enableLimit){var u=e.m_sweep.a-i.m_sweep.a-this.m_referenceAngle;if(s.Abs(this.m_upperAngle-this.m_lowerAngle)<2*o.b2_angularSlop){this.m_limitState=f.e_equalLimits}else if(u<=this.m_lowerAngle){if(this.m_limitState!=f.e_atLowerLimit){this.m_impulse.z=0}this.m_limitState=f.e_atLowerLimit}else if(u>=this.m_upperAngle){if(this.m_limitState!=f.e_atUpperLimit){this.m_impulse.z=0}this.m_limitState=f.e_atUpperLimit}else{this.m_limitState=f.e_inactiveLimit;this.m_impulse.z=0}}else{this.m_limitState=f.e_inactiveLimit}if(t.warmStarting){this.m_impulse.x*=t.dtRatio;this.m_impulse.y*=t.dtRatio;this.m_motorImpulse*=t.dtRatio;var x=this.m_impulse.x;var v=this.m_impulse.y;i.m_linearVelocity.x-=h*x;i.m_linearVelocity.y-=h*v;i.m_angularVelocity-=p*(a*v-l*x+this.m_motorImpulse+this.m_impulse.z);e.m_linearVelocity.x+=_*x;e.m_linearVelocity.y+=_*v;e.m_angularVelocity+=y*(m*v-c*x+this.m_motorImpulse+this.m_impulse.z)}else{this.m_impulse.SetZero();this.m_motorImpulse=0}};M.prototype.SolveVelocityConstraints=function(t){var i=this.m_bodyA;var o=this.m_bodyB;var e;var n=0;var r=0;var a=0;var l=0;var m=0;var c=0;var h=i.m_linearVelocity;var _=i.m_angularVelocity;var p=o.m_linearVelocity;var y=o.m_angularVelocity;var u=i.m_invMass;var x=o.m_invMass;var v=i.m_invI;var d=o.m_invI;if(this.m_enableMotor&&this.m_limitState!=f.e_equalLimits){var b=y-_-this.m_motorSpeed;var D=this.m_motorMass*-b;var B=this.m_motorImpulse;var C=t.dt*this.m_maxMotorTorque;this.m_motorImpulse=s.Clamp(this.m_motorImpulse+D,-C,C);D=this.m_motorImpulse-B;_-=v*D;y+=d*D}if(this.m_enableLimit&&this.m_limitState!=f.e_inactiveLimit){e=i.m_xf.R;a=this.m_localAnchor1.x-i.m_sweep.localCenter.x;l=this.m_localAnchor1.y-i.m_sweep.localCenter.y;n=e.col1.x*a+e.col2.x*l;l=e.col1.y*a+e.col2.y*l;a=n;e=o.m_xf.R;m=this.m_localAnchor2.x-o.m_sweep.localCenter.x;c=this.m_localAnchor2.y-o.m_sweep.localCenter.y;n=e.col1.x*m+e.col2.x*c;c=e.col1.y*m+e.col2.y*c;m=n;var A=p.x+-y*c-h.x- -_*l;var S=p.y+y*m-h.y-_*a;var w=y-_;this.m_mass.Solve33(this.impulse3,-A,-S,-w);if(this.m_limitState==f.e_equalLimits){this.m_impulse.Add(this.impulse3)}else if(this.m_limitState==f.e_atLowerLimit){r=this.m_impulse.z+this.impulse3.z;if(r<0){this.m_mass.Solve22(this.reduced,-A,-S);this.impulse3.x=this.reduced.x;this.impulse3.y=this.reduced.y;this.impulse3.z=-this.m_impulse.z;this.m_impulse.x+=this.reduced.x;this.m_impulse.y+=this.reduced.y;this.m_impulse.z=0}}else if(this.m_limitState==f.e_atUpperLimit){r=this.m_impulse.z+this.impulse3.z;if(r>0){this.m_mass.Solve22(this.reduced,-A,-S);this.impulse3.x=this.reduced.x;this.impulse3.y=this.reduced.y;this.impulse3.z=-this.m_impulse.z;this.m_impulse.x+=this.reduced.x;this.m_impulse.y+=this.reduced.y;this.m_impulse.z=0}}h.x-=u*this.impulse3.x;h.y-=u*this.impulse3.y;_-=v*(a*this.impulse3.y-l*this.impulse3.x+this.impulse3.z);p.x+=x*this.impulse3.x;p.y+=x*this.impulse3.y;y+=d*(m*this.impulse3.y-c*this.impulse3.x+this.impulse3.z)}else{e=i.m_xf.R;a=this.m_localAnchor1.x-i.m_sweep.localCenter.x;l=this.m_localAnchor1.y-i.m_sweep.localCenter.y;n=e.col1.x*a+e.col2.x*l;l=e.col1.y*a+e.col2.y*l;a=n;e=o.m_xf.R;m=this.m_localAnchor2.x-o.m_sweep.localCenter.x;c=this.m_localAnchor2.y-o.m_sweep.localCenter.y;n=e.col1.x*m+e.col2.x*c;c=e.col1.y*m+e.col2.y*c;m=n;var g=p.x+-y*c-h.x- -_*l;var M=p.y+y*m-h.y-_*a;this.m_mass.Solve22(this.impulse2,-g,-M);this.m_impulse.x+=this.impulse2.x;this.m_impulse.y+=this.impulse2.y;h.x-=u*this.impulse2.x;h.y-=u*this.impulse2.y;_-=v*(a*this.impulse2.y-l*this.impulse2.x);p.x+=x*this.impulse2.x;p.y+=x*this.impulse2.y;y+=d*(m*this.impulse2.y-c*this.impulse2.x)}i.m_linearVelocity.SetV(h);i.m_angularVelocity=_;o.m_linearVelocity.SetV(p);o.m_angularVelocity=y};M.prototype.SolvePositionConstraints=function(t){if(t===undefined)t=0;var i=0;var e=0;var n;var r=this.m_bodyA;var a=this.m_bodyB;var l=0;var m=0;var c=0;var h=0;var _=0;if(this.m_enableLimit&&this.m_limitState!=f.e_inactiveLimit){var p=a.m_sweep.a-r.m_sweep.a-this.m_referenceAngle;var y=0;if(this.m_limitState==f.e_equalLimits){e=s.Clamp(p-this.m_lowerAngle,-o.b2_maxAngularCorrection,o.b2_maxAngularCorrection);y=-this.m_motorMass*e;l=s.Abs(e)}else if(this.m_limitState==f.e_atLowerLimit){e=p-this.m_lowerAngle;l=-e;e=s.Clamp(e+o.b2_angularSlop,-o.b2_maxAngularCorrection,0);y=-this.m_motorMass*e}else if(this.m_limitState==f.e_atUpperLimit){e=p-this.m_upperAngle;l=e;e=s.Clamp(e-o.b2_angularSlop,0,o.b2_maxAngularCorrection);y=-this.m_motorMass*e}r.m_sweep.a-=r.m_invI*y;a.m_sweep.a+=a.m_invI*y;r.SynchronizeTransform();a.SynchronizeTransform()}{n=r.m_xf.R;var u=this.m_localAnchor1.x-r.m_sweep.localCenter.x;var x=this.m_localAnchor1.y-r.m_sweep.localCenter.y;c=n.col1.x*u+n.col2.x*x;x=n.col1.y*u+n.col2.y*x;u=c;n=a.m_xf.R;var v=this.m_localAnchor2.x-a.m_sweep.localCenter.x;var d=this.m_localAnchor2.y-a.m_sweep.localCenter.y;c=n.col1.x*v+n.col2.x*d;d=n.col1.y*v+n.col2.y*d;v=c;var b=a.m_sweep.c.x+v-r.m_sweep.c.x-u;var D=a.m_sweep.c.y+d-r.m_sweep.c.y-x;var B=b*b+D*D;var C=Math.sqrt(B);m=C;var A=r.m_invMass;var S=a.m_invMass;var w=r.m_invI;var g=a.m_invI;var V=10*o.b2_linearSlop;if(B>V*V){var I=b/C;var G=D/C;var L=A+S;var J=1/L;h=J*-b;_=J*-D;var F=.5;r.m_sweep.c.x-=F*A*h;r.m_sweep.c.y-=F*A*_;a.m_sweep.c.x+=F*S*h;a.m_sweep.c.y+=F*S*_;b=a.m_sweep.c.x+v-r.m_sweep.c.x-u;D=a.m_sweep.c.y+d-r.m_sweep.c.y-x}this.K1.col1.x=A+S;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=A+S;this.K2.col1.x=w*x*x;this.K2.col2.x=-w*u*x;this.K2.col1.y=-w*u*x;this.K2.col2.y=w*u*u;this.K3.col1.x=g*d*d;this.K3.col2.x=-g*v*d;this.K3.col1.y=-g*v*d;this.K3.col2.y=g*v*v;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.AddM(this.K3);this.K.Solve(M.tImpulse,-b,-D);h=M.tImpulse.x;_=M.tImpulse.y;r.m_sweep.c.x-=r.m_invMass*h;r.m_sweep.c.y-=r.m_invMass*_;r.m_sweep.a-=r.m_invI*(u*_-x*h);a.m_sweep.c.x+=a.m_invMass*h;a.m_sweep.c.y+=a.m_invMass*_;a.m_sweep.a+=a.m_invI*(v*_-d*h);r.SynchronizeTransform();a.SynchronizeTransform()}return m<=o.b2_linearSlop&&l<=o.b2_angularSlop};Box2D.postDefs.push(function(){Box2D.Dynamics.Joints.b2RevoluteJoint.tImpulse=new l});Box2D.inherit(V,Box2D.Dynamics.Joints.b2JointDef);V.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype;V.b2RevoluteJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.localAnchorA=new l;this.localAnchorB=new l};V.prototype.b2RevoluteJointDef=function(){this.__super.b2JointDef.call(this);this.type=f.e_revoluteJoint;this.localAnchorA.Set(0,0);this.localAnchorB.Set(0,0);this.referenceAngle=0;this.lowerAngle=0;this.upperAngle=0;this.maxMotorTorque=0;this.motorSpeed=0;this.enableLimit=false;this.enableMotor=false};V.prototype.Initialize=function(t,i,o){this.bodyA=t;this.bodyB=i;this.localAnchorA=this.bodyA.GetLocalPoint(o);this.localAnchorB=this.bodyB.GetLocalPoint(o);this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};Box2D.inherit(I,Box2D.Dynamics.Joints.b2Joint);I.prototype.__super=Box2D.Dynamics.Joints.b2Joint.prototype;I.b2WeldJoint=function(){Box2D.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_localAnchorA=new l;this.m_localAnchorB=new l;this.m_impulse=new m;this.m_mass=new n};I.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)};I.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)};I.prototype.GetReactionForce=function(t){if(t===undefined)t=0;return new l(t*this.m_impulse.x,t*this.m_impulse.y)};I.prototype.GetReactionTorque=function(t){if(t===undefined)t=0;return t*this.m_impulse.z};I.prototype.b2WeldJoint=function(t){this.__super.b2Joint.call(this,t);this.m_localAnchorA.SetV(t.localAnchorA);this.m_localAnchorB.SetV(t.localAnchorB);this.m_referenceAngle=t.referenceAngle;this.m_impulse.SetZero();this.m_mass=new n};I.prototype.InitVelocityConstraints=function(t){var i;var o=0;var e=this.m_bodyA;var n=this.m_bodyB;i=e.m_xf.R;var s=this.m_localAnchorA.x-e.m_sweep.localCenter.x;var r=this.m_localAnchorA.y-e.m_sweep.localCenter.y;o=i.col1.x*s+i.col2.x*r;r=i.col1.y*s+i.col2.y*r;s=o;i=n.m_xf.R;var a=this.m_localAnchorB.x-n.m_sweep.localCenter.x;var l=this.m_localAnchorB.y-n.m_sweep.localCenter.y;o=i.col1.x*a+i.col2.x*l;l=i.col1.y*a+i.col2.y*l;a=o;var m=e.m_invMass;var c=n.m_invMass;var h=e.m_invI;var _=n.m_invI;this.m_mass.col1.x=m+c+r*r*h+l*l*_;this.m_mass.col2.x=-r*s*h-l*a*_;this.m_mass.col3.x=-r*h-l*_;this.m_mass.col1.y=this.m_mass.col2.x;this.m_mass.col2.y=m+c+s*s*h+a*a*_;this.m_mass.col3.y=s*h+a*_;this.m_mass.col1.z=this.m_mass.col3.x;this.m_mass.col2.z=this.m_mass.col3.y;this.m_mass.col3.z=h+_;if(t.warmStarting){this.m_impulse.x*=t.dtRatio;this.m_impulse.y*=t.dtRatio;this.m_impulse.z*=t.dtRatio;e.m_linearVelocity.x-=m*this.m_impulse.x;e.m_linearVelocity.y-=m*this.m_impulse.y;e.m_angularVelocity-=h*(s*this.m_impulse.y-r*this.m_impulse.x+this.m_impulse.z);n.m_linearVelocity.x+=c*this.m_impulse.x;n.m_linearVelocity.y+=c*this.m_impulse.y;n.m_angularVelocity+=_*(a*this.m_impulse.y-l*this.m_impulse.x+this.m_impulse.z)}else{this.m_impulse.SetZero()}};I.prototype.SolveVelocityConstraints=function(t){var i;var o=0;var e=this.m_bodyA;var n=this.m_bodyB;var s=e.m_linearVelocity;var r=e.m_angularVelocity;var a=n.m_linearVelocity;var l=n.m_angularVelocity;var c=e.m_invMass;var h=n.m_invMass;var _=e.m_invI;var p=n.m_invI;i=e.m_xf.R;var y=this.m_localAnchorA.x-e.m_sweep.localCenter.x;var u=this.m_localAnchorA.y-e.m_sweep.localCenter.y;o=i.col1.x*y+i.col2.x*u;u=i.col1.y*y+i.col2.y*u;y=o;i=n.m_xf.R;var x=this.m_localAnchorB.x-n.m_sweep.localCenter.x;var f=this.m_localAnchorB.y-n.m_sweep.localCenter.y;o=i.col1.x*x+i.col2.x*f;f=i.col1.y*x+i.col2.y*f;x=o;var v=a.x-l*f-s.x+r*u;var d=a.y+l*x-s.y-r*y;var b=l-r;var D=new m;this.m_mass.Solve33(D,-v,-d,-b);this.m_impulse.Add(D);s.x-=c*D.x;s.y-=c*D.y;r-=_*(y*D.y-u*D.x+D.z);a.x+=h*D.x;a.y+=h*D.y;l+=p*(x*D.y-f*D.x+D.z);e.m_angularVelocity=r;n.m_angularVelocity=l};I.prototype.SolvePositionConstraints=function(t){if(t===undefined)t=0;var i;var e=0;var n=this.m_bodyA;var r=this.m_bodyB;i=n.m_xf.R;var a=this.m_localAnchorA.x-n.m_sweep.localCenter.x;var l=this.m_localAnchorA.y-n.m_sweep.localCenter.y;e=i.col1.x*a+i.col2.x*l;l=i.col1.y*a+i.col2.y*l;a=e;i=r.m_xf.R;var c=this.m_localAnchorB.x-r.m_sweep.localCenter.x;var h=this.m_localAnchorB.y-r.m_sweep.localCenter.y;e=i.col1.x*c+i.col2.x*h;h=i.col1.y*c+i.col2.y*h;c=e;var _=n.m_invMass;var p=r.m_invMass;var y=n.m_invI;var u=r.m_invI;var x=r.m_sweep.c.x+c-n.m_sweep.c.x-a;var f=r.m_sweep.c.y+h-n.m_sweep.c.y-l;var v=r.m_sweep.a-n.m_sweep.a-this.m_referenceAngle;var d=10*o.b2_linearSlop;var b=Math.sqrt(x*x+f*f);var D=s.Abs(v);if(b>d){y*=1;u*=1}this.m_mass.col1.x=_+p+l*l*y+h*h*u;this.m_mass.col2.x=-l*a*y-h*c*u;this.m_mass.col3.x=-l*y-h*u;this.m_mass.col1.y=this.m_mass.col2.x;this.m_mass.col2.y=_+p+a*a*y+c*c*u;this.m_mass.col3.y=a*y+c*u;this.m_mass.col1.z=this.m_mass.col3.x;this.m_mass.col2.z=this.m_mass.col3.y;this.m_mass.col3.z=y+u;var B=new m;this.m_mass.Solve33(B,-x,-f,-v);n.m_sweep.c.x-=_*B.x;n.m_sweep.c.y-=_*B.y;n.m_sweep.a-=y*(a*B.y-l*B.x+B.z);r.m_sweep.c.x+=p*B.x;r.m_sweep.c.y+=p*B.y;r.m_sweep.a+=u*(c*B.y-h*B.x+B.z);n.SynchronizeTransform();r.SynchronizeTransform();return b<=o.b2_linearSlop&&D<=o.b2_angularSlop};Box2D.inherit(G,Box2D.Dynamics.Joints.b2JointDef);G.prototype.__super=Box2D.Dynamics.Joints.b2JointDef.prototype;G.b2WeldJointDef=function(){Box2D.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.localAnchorA=new l;this.localAnchorB=new l};G.prototype.b2WeldJointDef=function(){this.__super.b2JointDef.call(this);this.type=f.e_weldJoint;this.referenceAngle=0};G.prototype.Initialize=function(t,i,o){this.bodyA=t;this.bodyB=i;this.localAnchorA.SetV(this.bodyA.GetLocalPoint(o));this.localAnchorB.SetV(this.bodyB.GetLocalPoint(o));this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}})();(function(){var t=Box2D.Dynamics.b2DebugDraw;t.b2DebugDraw=function(){this.m_drawScale=1;this.m_lineThickness=1;this.m_alpha=1;this.m_fillAlpha=1;this.m_xformScale=1;var t=this;this.m_sprite={graphics:{clear:function(){t.m_ctx.clearRect(0,0,t.m_ctx.canvas.width,t.m_ctx.canvas.height)}}}};t.prototype._color=function(t,i){return"rgba("+((t&16711680)>>16)+","+((t&65280)>>8)+","+(t&255)+","+i+")"};t.prototype.b2DebugDraw=function(){this.m_drawFlags=0};t.prototype.SetFlags=function(t){if(t===undefined)t=0;this.m_drawFlags=t};t.prototype.GetFlags=function(){return this.m_drawFlags};t.prototype.AppendFlags=function(t){if(t===undefined)t=0;this.m_drawFlags|=t};t.prototype.ClearFlags=function(t){if(t===undefined)t=0;this.m_drawFlags&=~t};t.prototype.SetSprite=function(t){this.m_ctx=t};t.prototype.GetSprite=function(){return this.m_ctx};t.prototype.SetDrawScale=function(t){if(t===undefined)t=0;this.m_drawScale=t};t.prototype.GetDrawScale=function(){return this.m_drawScale};t.prototype.SetLineThickness=function(t){if(t===undefined)t=0;this.m_lineThickness=t;this.m_ctx.strokeWidth=t};t.prototype.GetLineThickness=function(){return this.m_lineThickness};t.prototype.SetAlpha=function(t){if(t===undefined)t=0;this.m_alpha=t};t.prototype.GetAlpha=function(){return this.m_alpha};t.prototype.SetFillAlpha=function(t){if(t===undefined)t=0;this.m_fillAlpha=t};t.prototype.GetFillAlpha=function(){return this.m_fillAlpha};t.prototype.SetXFormScale=function(t){if(t===undefined)t=0;this.m_xformScale=t};t.prototype.GetXFormScale=function(){return this.m_xformScale};t.prototype.DrawPolygon=function(t,i,o){if(!i)return;var e=this.m_ctx;var n=this.m_drawScale;e.beginPath();e.strokeStyle=this._color(o.color,this.m_alpha);e.moveTo(t[0].x*n,t[0].y*n);for(var s=1;s<i;s++){e.lineTo(t[s].x*n,t[s].y*n)}e.lineTo(t[0].x*n,t[0].y*n);e.closePath();e.stroke()};t.prototype.DrawSolidPolygon=function(t,i,o){if(!i)return;var e=this.m_ctx;var n=this.m_drawScale;e.beginPath();e.strokeStyle=this._color(o.color,this.m_alpha);e.fillStyle=this._color(o.color,this.m_fillAlpha);e.moveTo(t[0].x*n,t[0].y*n);for(var s=1;s<i;s++){e.lineTo(t[s].x*n,t[s].y*n)}e.lineTo(t[0].x*n,t[0].y*n);e.closePath();e.fill();e.stroke()};t.prototype.DrawCircle=function(t,i,o){if(!i)return;var e=this.m_ctx;var n=this.m_drawScale;e.beginPath();e.strokeStyle=this._color(o.color,this.m_alpha);e.arc(t.x*n,t.y*n,i*n,0,Math.PI*2,true);e.closePath();e.stroke()};t.prototype.DrawSolidCircle=function(t,i,o,e){if(!i)return;var n=this.m_ctx,s=this.m_drawScale,r=t.x*s,a=t.y*s;n.moveTo(0,0);n.beginPath();n.strokeStyle=this._color(e.color,this.m_alpha);n.fillStyle=this._color(e.color,this.m_fillAlpha);n.arc(r,a,i*s,0,Math.PI*2,true);n.moveTo(r,a);n.lineTo((t.x+o.x*i)*s,(t.y+o.y*i)*s);n.closePath();n.fill();n.stroke()};t.prototype.DrawSegment=function(t,i,o){var e=this.m_ctx,n=this.m_drawScale;e.strokeStyle=this._color(o.color,this.m_alpha);e.beginPath();e.moveTo(t.x*n,t.y*n);e.lineTo(i.x*n,i.y*n);e.closePath();e.stroke()};t.prototype.DrawTransform=function(t){var i=this.m_ctx,o=this.m_drawScale;i.beginPath();i.strokeStyle=this._color(16711680,this.m_alpha);i.moveTo(t.position.x*o,t.position.y*o);i.lineTo((t.position.x+this.m_xformScale*t.R.col1.x)*o,(t.position.y+this.m_xformScale*t.R.col1.y)*o);i.strokeStyle=this._color(65280,this.m_alpha);i.moveTo(t.position.x*o,t.position.y*o);i.lineTo((t.position.x+this.m_xformScale*t.R.col2.x)*o,(t.position.y+this.m_xformScale*t.R.col2.y)*o);i.closePath();i.stroke()}})();var i;for(i=0;i<Box2D.postDefs.length;++i)Box2D.postDefs[i]();delete Box2D.postDefs;',
	"flush/thirdparty/balls.js":'/*\n* Copyright (c) 2013 gskinner.com, inc\n* Usage with permission of Grant Skinner\n*/\n(function(e,n,i){var t;var a;(e.balls=function(){this.initialize();this.instance=new e.Balls;this.instance.setTransform(267.6,204.1);this.addChild(this.instance)}).prototype=t=new i.Container;t.nominalBounds=a=new i.Rectangle(148.6,122.6,240,165.1);t.frameBounds=[a];(e.Circle=function(){this.initialize();this.shape=new i.Shape;this.shape.graphics.f().s("#CCFFFF").ss(10.1,1,1).de(-60.9,-60.9,122,122);this.shape.setTransform(0,0,.82,.82);this.addChild(this.shape)}).prototype=t=new i.Container;t.nominalBounds=a=new i.Rectangle(-49.9,-49.9,100,100);t.frameBounds=[a];(e.Balls=function(n,t,a){this.initialize(n,t,a,{});this.circle=new e.Circle;this.circle.setTransform(0,0,1.5,1.5);this.timeline.addTween(i.Tween.get(this.circle).wait(1).to({scaleX:1,scaleY:1},0).wait(1).to({scaleX:.3,scaleY:.3},0).wait(6))}).prototype=t=new i.MovieClip;t.nominalBounds=a=new i.Rectangle(-118.9,-81.4,240,165.1);t.frameBounds=[a,new i.Rectangle(-53.3,-56.8,118.6,112.7),new i.Rectangle(-16.3,-18.4,32.7,37),new i.Rectangle(-17,-22.7,34.2,45.6),new i.Rectangle(-16.5,-18.1,33.3,36.4),new i.Rectangle(-14.9,-23,30,46.1),new i.Rectangle(-14.9,-19.2,30,38.6),new i.Rectangle(-15.8,-18,31.8,36.1)]})(lib=lib||{},images=images||{},createjs=createjs||{});var lib,images,createjs;',
	"flush/thirdparty/createjs.min.js":function(){/*!
* @license CreateJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011-2015 gskinner.com, inc.
*
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,s=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(s){i[(e+="_")+"constructor"]=s.constructor;for(var r in s)i.hasOwnProperty(r)&&"function"==typeof s[r]&&(i[e+r]=s[r])}return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,s=t.length;s>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var s;s=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var r=s[t];return r&&this.removeEventListener(t,e,i),r=s[t],r?r.push(e):s[t]=[e],e},e.on=function(t,e,i,s,r,n){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,r),s&&t.remove()},n)},e.removeEventListener=function(t,e,i){var s=i?this._captureListeners:this._listeners;if(s){var r=s[t];if(r)for(var n=0,a=r.length;a>n;n++)if(r[n]==e){1==a?delete s[t]:r.splice(n,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var s=this._listeners;if(!(e||s&&s[t]))return!0;t=new createjs.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var r=this,n=[r];r.parent;)n.push(r=r.parent);var a,o=n.length;for(a=o-1;a>=0&&!t.propagationStopped;a--)n[a]._dispatchEvent(t,1+(0==a));for(a=1;o>a&&!t.propagationStopped;a++)n[a]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,s=1==e?this._captureListeners:this._listeners;if(t&&s){var r=s[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var n=0;i>n&&!t.immediatePropagationStopped;n++){var a=r[n];a.handleEvent?a.handleEvent(t):a(t),t.removed&&(this.off(t.type,a,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval};try{Object.defineProperties(t,{interval:{get:t.getInterval,set:t.setInterval},framerate:{get:t.getFPS,set:t.setFPS}})}catch(t){console.log(t)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,s=t._tickTimes;if(!s||s.length<1)return-1;e=Math.min(s.length,e||0|t.getFPS());for(var r=0;e>r;r++)i+=s[r];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t.getFPS()),1e3/((i[0]-i[e])/e))},t.setPaused=function(e){t.paused=e},t.getPaused=function(){return t.paused},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,i=t._getTime(),s=i-t._lastTime;if(t._lastTime=i,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=s),t.hasEventListener("tick")){var r=new createjs.Event("tick"),n=t.maxDelta;r.delta=n&&s>n?n:s,r.paused=e,r.time=i,r.runTime=i-t._pausedTime,t.dispatchEvent(r)}for(t._tickTimes.unshift(t._getTime()-i);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(i);t._times.length>100;)t._times.pop()};var e=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return(e&&e.call(performance)||(new Date).getTime())-t._startTime},createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"UID cannot be instantiated"}t._nextID=0,t.get=function(){return t._nextID++},createjs.UID=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,s,r,n,a,o,h,c,u){this.Event_constructor(t,e,i),this.stageX=s,this.stageY=r,this.rawX=null==h?s:h,this.rawY=null==c?r:c,this.nativeEvent=n,this.pointerID=a,this.primary=!!o,this.relatedTarget=u}var e=createjs.extend(t,createjs.Event);e._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},e._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},e._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(e,{localX:{get:e._get_localX},localY:{get:e._get_localY},isTouch:{get:e._get_isTouch}})}catch(t){}e.clone=function(){return new t(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},e.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},createjs.MouseEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,s,r,n){this.setValues(t,e,i,s,r,n)}var e=t.prototype;t.DEG_TO_RAD=Math.PI/180,t.identity=null,e.setValues=function(t,e,i,s,r,n){return this.a=null==t?1:t,this.b=e||0,this.c=i||0,this.d=null==s?1:s,this.tx=r||0,this.ty=n||0,this},e.append=function(t,e,i,s,r,n){var a=this.a,o=this.b,h=this.c,c=this.d;return(1!=t||0!=e||0!=i||1!=s)&&(this.a=a*t+h*e,this.b=o*t+c*e,this.c=a*i+h*s,this.d=o*i+c*s),this.tx=a*r+h*n+this.tx,this.ty=o*r+c*n+this.ty,this},e.prepend=function(t,e,i,s,r,n){var a=this.a,o=this.c,h=this.tx;return this.a=t*a+i*this.b,this.b=e*a+s*this.b,this.c=t*o+i*this.d,this.d=e*o+s*this.d,this.tx=t*h+i*this.ty+r,this.ty=e*h+s*this.ty+n,this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.appendTransform=function(e,i,s,r,n,a,o,h,c){if(n%360)var u=n*t.DEG_TO_RAD,l=Math.cos(u),d=Math.sin(u);else l=1,d=0;return a||o?(a*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.append(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),e,i),this.append(l*s,d*s,-d*r,l*r,0,0)):this.append(l*s,d*s,-d*r,l*r,e,i),(h||c)&&(this.tx-=h*this.a+c*this.c,this.ty-=h*this.b+c*this.d),this},e.prependTransform=function(e,i,s,r,n,a,o,h,c){if(n%360)var u=n*t.DEG_TO_RAD,l=Math.cos(u),d=Math.sin(u);else l=1,d=0;return(h||c)&&(this.tx-=h,this.ty-=c),a||o?(a*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.prepend(l*s,d*s,-d*r,l*r,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),e,i)):this.prepend(l*s,d*s,-d*r,l*r,e,i),this},e.rotate=function(e){e*=t.DEG_TO_RAD;var i=Math.cos(e),s=Math.sin(e),r=this.a,n=this.b;return this.a=r*i+this.c*s,this.b=n*i+this.d*s,this.c=-r*s+this.c*i,this.d=-n*s+this.d*i,this},e.skew=function(e,i){return e*=t.DEG_TO_RAD,i*=t.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},e.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},e.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},e.invert=function(){var t=this.a,e=this.b,i=this.c,s=this.d,r=this.tx,n=t*s-e*i;return this.a=s/n,this.b=-e/n,this.c=-i/n,this.d=t/n,this.tx=(i*this.ty-s*r)/n,this.ty=-(t*this.ty-e*r)/n,this},e.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},e.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},e.transformPoint=function(t,e,i){return i=i||{},i.x=t*this.a+e*this.c+this.tx,i.y=t*this.b+e*this.d+this.ty,i},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),s=Math.atan2(this.b,this.a),r=Math.abs(1-i/s);return 1e-5>r?(e.rotation=s/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=i/t.DEG_TO_RAD,e.skewY=s/t.DEG_TO_RAD),e},e.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},t.identity=new t,createjs.Matrix2D=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,s,r){this.setValues(t,e,i,s,r)}var e=t.prototype;e.setValues=function(t,e,i,s,r){return this.visible=null==t?!0:!!t,this.alpha=null==e?1:e,this.shadow=i,this.compositeOperation=s,this.matrix=r||this.matrix&&this.matrix.identity()||new createjs.Matrix2D,this},e.append=function(t,e,i,s,r){return this.alpha*=e,this.shadow=i||this.shadow,this.compositeOperation=s||this.compositeOperation,this.visible=this.visible&&t,r&&this.matrix.appendMatrix(r),this},e.prepend=function(t,e,i,s,r){return this.alpha*=e,this.shadow=this.shadow||i,this.compositeOperation=this.compositeOperation||s,this.visible=this.visible&&t,r&&this.matrix.prependMatrix(r),this},e.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},e.clone=function(){return new t(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},createjs.DisplayProps=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.setValues(t,e)}var e=t.prototype;e.setValues=function(t,e){return this.x=t||0,this.y=e||0,this},e.copy=function(t){return this.x=t.x,this.y=t.y,this},e.clone=function(){return new t(this.x,this.y)},e.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},createjs.Point=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,s){this.setValues(t,e,i,s)}var e=t.prototype;e.setValues=function(t,e,i,s){return this.x=t||0,this.y=e||0,this.width=i||0,this.height=s||0,this},e.extend=function(t,e,i,s){return i=i||0,s=s||0,t+i>this.x+this.width&&(this.width=t+i-this.x),e+s>this.y+this.height&&(this.height=e+s-this.y),t<this.x&&(this.width+=this.x-t,this.x=t),e<this.y&&(this.height+=this.y-e,this.y=e),this},e.pad=function(t,e,i,s){return this.x-=e,this.y-=t,this.width+=e+s,this.height+=t+i,this},e.copy=function(t){return this.setValues(t.x,t.y,t.width,t.height)},e.contains=function(t,e,i,s){return i=i||0,s=s||0,t>=this.x&&t+i<=this.x+this.width&&e>=this.y&&e+s<=this.y+this.height},e.union=function(t){return this.clone().extend(t.x,t.y,t.width,t.height)},e.intersection=function(e){var i=e.x,s=e.y,r=i+e.width,n=s+e.height;return this.x>i&&(i=this.x),this.y>s&&(s=this.y),this.x+this.width<r&&(r=this.x+this.width),this.y+this.height<n&&(n=this.y+this.height),i>=r||s>=n?null:new t(i,s,r-i,n-s)},e.intersects=function(t){return t.x<=this.x+this.width&&this.x<=t.x+t.width&&t.y<=this.y+this.height&&this.y<=t.y+t.height},e.isEmpty=function(){return this.width<=0||this.height<=0},e.clone=function(){return new t(this.x,this.y,this.width,this.height)},e.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},createjs.Rectangle=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,s,r,n,a){t.addEventListener&&(this.target=t,this.overLabel=null==i?"over":i,this.outLabel=null==e?"out":e,this.downLabel=null==s?"down":s,this.play=r,this._isPressed=!1,this._isOver=!1,this._enabled=!1,t.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),n&&(a&&(n.actionsEnabled=!1,n.gotoAndStop&&n.gotoAndStop(a)),t.hitArea=n))}var e=t.prototype;e.setEnabled=function(t){if(t!=this._enabled){var e=this.target;this._enabled=t,t?(e.cursor="pointer",e.addEventListener("rollover",this),e.addEventListener("rollout",this),e.addEventListener("mousedown",this),e.addEventListener("pressup",this),e._reset&&(e.__reset=e._reset,e._reset=this._reset)):(e.cursor=null,e.removeEventListener("rollover",this),e.removeEventListener("rollout",this),e.removeEventListener("mousedown",this),e.removeEventListener("pressup",this),e.__reset&&(e._reset=e.__reset,delete e.__reset))}},e.getEnabled=function(){return this._enabled};try{Object.defineProperties(e,{enabled:{get:e.getEnabled,set:e.setEnabled}})}catch(t){}e.toString=function(){return"[ButtonHelper]"},e.handleEvent=function(t){var e,i=this.target,s=t.type;"mousedown"==s?(this._isPressed=!0,e=this.downLabel):"pressup"==s?(this._isPressed=!1,e=this._isOver?this.overLabel:this.outLabel):"rollover"==s?(this._isOver=!0,e=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,e=this._isPressed?this.overLabel:this.outLabel),this.play?i.gotoAndPlay&&i.gotoAndPlay(e):i.gotoAndStop&&i.gotoAndStop(e)},e._reset=function(){var t=this.paused;this.__reset(),this.paused=t},createjs.ButtonHelper=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,s){this.color=t||"black",this.offsetX=e||0,this.offsetY=i||0,this.blur=s||0}var e=t.prototype;t.identity=new t("transparent",0,0,0),e.toString=function(){return"[Shadow]"},e.clone=function(){return new t(this.color,this.offsetX,this.offsetY,this.blur)},createjs.Shadow=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(t)}var e=createjs.extend(t,createjs.EventDispatcher);e.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(e,{animations:{get:e.getAnimations}})}catch(t){}e.getNumFrames=function(t){if(null==t)return this._frames?this._frames.length:this._numFrames||0;var e=this._data[t];return null==e?0:e.frames.length},e.getAnimation=function(t){return this._data[t]},e.getFrame=function(t){var e;return this._frames&&(e=this._frames[t])?e:null},e.getFrameBounds=function(t,e){var i=this.getFrame(t);return i?(e||new createjs.Rectangle).setValues(-i.regX,-i.regY,i.rect.width,i.rect.height):null},e.toString=function(){return"[SpriteSheet]"},e.clone=function(){throw"SpriteSheet cannot be cloned."},e._parseData=function(t){var e,i,s,r;if(null!=t){if(this.framerate=t.framerate||0,t.images&&(i=t.images.length)>0)for(r=this._images=[],e=0;i>e;e++){var n=t.images[e];if("string"==typeof n){var a=n;n=document.createElement("img"),n.src=a}r.push(n),n.getContext||n.naturalWidth||(this._loadCount++,this.complete=!1,function(t,e){n.onload=function(){t._handleImageLoad(e)}}(this,a),function(t,e){n.onerror=function(){t._handleImageError(e)}}(this,a))}if(null==t.frames);else if(Array.isArray(t.frames))for(this._frames=[],r=t.frames,e=0,i=r.length;i>e;e++){var o=r[e];this._frames.push({image:this._images[o[4]?o[4]:0],rect:new createjs.Rectangle(o[0],o[1],o[2],o[3]),regX:o[5]||0,regY:o[6]||0})}else s=t.frames,this._frameWidth=s.width,this._frameHeight=s.height,this._regX=s.regX||0,this._regY=s.regY||0,this._spacing=s.spacing||0,this._margin=s.margin||0,this._numFrames=s.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(s=t.animations)){this._data={};var h;for(h in s){var c={name:h},u=s[h];if("number"==typeof u)r=c.frames=[u];else if(Array.isArray(u))if(1==u.length)c.frames=[u[0]];else for(c.speed=u[3],c.next=u[2],r=c.frames=[],e=u[0];e<=u[1];e++)r.push(e);else{c.speed=u.speed,c.next=u.next;var l=u.frames;r=c.frames="number"==typeof l?[l]:l.slice(0)}(c.next===!0||void 0===c.next)&&(c.next=h),(c.next===!1||r.length<2&&c.next==h)&&(c.next=null),c.speed||(c.speed=1),this._animations.push(h),this._data[h]=c}}}},e._handleImageLoad=function(t){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},e._handleImageError=function(t){var e=new createjs.Event("error");e.src=t,this.dispatchEvent(e),0==--this._loadCount&&this.dispatchEvent("complete")},e._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var t=this._numFrames||1e5,e=0,i=this._frameWidth,s=this._frameHeight,r=this._spacing,n=this._margin;t:for(var a=0,o=this._images;a<o.length;a++)for(var h=o[a],c=h.width,u=h.height,l=n;u-n-s>=l;){for(var d=n;c-n-i>=d;){if(e>=t)break t;e++,this._frames.push({image:h,rect:new createjs.Rectangle(d,l,i,s),regX:this._regX,regY:this._regY}),d+=i+r}l+=s+r}this._numFrames=e}},createjs.SpriteSheet=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var e=t.prototype,i=t;t.getRGB=function(t,e,i,s){return null!=t&&null==i&&(s=e,i=255&t,e=t>>8&255,t=t>>16&255),null==s?"rgb("+t+","+e+","+i+")":"rgba("+t+","+e+","+i+","+s+")"},t.getHSL=function(t,e,i,s){return null==s?"hsl("+t%360+","+e+"%,"+i+"%)":"hsla("+t%360+","+e+"%,"+i+"%,"+s+")"},t.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},t.STROKE_CAPS_MAP=["butt","round","square"],t.STROKE_JOINTS_MAP=["miter","round","bevel"];var s=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");s.getContext&&(t._ctx=s.getContext("2d"),s.width=s.height=1),e.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(e,{instructions:{get:e.getInstructions}})}catch(t){}e.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},e.draw=function(t,e){this._updateInstructions();for(var i=this._instructions,s=this._storeIndex,r=i.length;r>s;s++)i[s].exec(t,e)},e.drawAsPath=function(t){this._updateInstructions();for(var e,i=this._instructions,s=this._storeIndex,r=i.length;r>s;s++)(e=i[s]).path!==!1&&e.exec(t)},e.moveTo=function(t,e){return this.append(new i.MoveTo(t,e),!0)},e.lineTo=function(t,e){return this.append(new i.LineTo(t,e))},e.arcTo=function(t,e,s,r,n){return this.append(new i.ArcTo(t,e,s,r,n))},e.arc=function(t,e,s,r,n,a){return this.append(new i.Arc(t,e,s,r,n,a))},e.quadraticCurveTo=function(t,e,s,r){return this.append(new i.QuadraticCurveTo(t,e,s,r))},e.bezierCurveTo=function(t,e,s,r,n,a){return this.append(new i.BezierCurveTo(t,e,s,r,n,a))},e.rect=function(t,e,s,r){return this.append(new i.Rect(t,e,s,r))},e.closePath=function(){return this._activeInstructions.length?this.append(new i.ClosePath):this},e.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},e.beginFill=function(t){return this._setFill(t?new i.Fill(t):null)},e.beginLinearGradientFill=function(t,e,s,r,n,a){return this._setFill((new i.Fill).linearGradient(t,e,s,r,n,a))},e.beginRadialGradientFill=function(t,e,s,r,n,a,o,h){return this._setFill((new i.Fill).radialGradient(t,e,s,r,n,a,o,h))},e.beginBitmapFill=function(t,e,s){return this._setFill(new i.Fill(null,s).bitmap(t,e))},e.endFill=function(){return this.beginFill()},e.setStrokeStyle=function(t,e,s,r,n){return this._updateInstructions(!0),this._strokeStyle=this.command=new i.StrokeStyle(t,e,s,r,n),this._stroke&&(this._stroke.ignoreScale=n),this._strokeIgnoreScale=n,this},e.setStrokeDash=function(t,e){return this._updateInstructions(!0),this._strokeDash=this.command=new i.StrokeDash(t,e),this},e.beginStroke=function(t){return this._setStroke(t?new i.Stroke(t):null)},e.beginLinearGradientStroke=function(t,e,s,r,n,a){return this._setStroke((new i.Stroke).linearGradient(t,e,s,r,n,a))},e.beginRadialGradientStroke=function(t,e,s,r,n,a,o,h){return this._setStroke((new i.Stroke).radialGradient(t,e,s,r,n,a,o,h))},e.beginBitmapStroke=function(t,e){return this._setStroke((new i.Stroke).bitmap(t,e))},e.endStroke=function(){return this.beginStroke()},e.curveTo=e.quadraticCurveTo,e.drawRect=e.rect,e.drawRoundRect=function(t,e,i,s,r){return this.drawRoundRectComplex(t,e,i,s,r,r,r,r)},e.drawRoundRectComplex=function(t,e,s,r,n,a,o,h){return this.append(new i.RoundRect(t,e,s,r,n,a,o,h))},e.drawCircle=function(t,e,s){return this.append(new i.Circle(t,e,s))},e.drawEllipse=function(t,e,s,r){return this.append(new i.Ellipse(t,e,s,r))},e.drawPolyStar=function(t,e,s,r,n,a){return this.append(new i.PolyStar(t,e,s,r,n,a))},e.append=function(t,e){return this._activeInstructions.push(t),this.command=t,e||(this._dirty=!0),this},e.decodePath=function(e){for(var i=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],s=[2,2,4,6,0],r=0,n=e.length,a=[],o=0,h=0,c=t.BASE_64;n>r;){var u=e.charAt(r),l=c[u],d=l>>3,_=i[d];if(!_||3&l)throw"bad path data (@"+r+"): "+u;var p=s[d];d||(o=h=0),a.length=0,r++;for(var f=(l>>2&1)+2,g=0;p>g;g++){var m=c[e.charAt(r)],v=m>>5?-1:1;m=(31&m)<<6|c[e.charAt(r+1)],3==f&&(m=m<<6|c[e.charAt(r+2)]),m=v*m/10,g%2?o=m+=o:h=m+=h,a[g]=m,r+=f}_.apply(this,a)}return this},e.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},e.unstore=function(){return this._storeIndex=0,this},e.clone=function(){var e=new t;return e.command=this.command,e._stroke=this._stroke,e._strokeStyle=this._strokeStyle,e._strokeDash=this._strokeDash,e._strokeIgnoreScale=this._strokeIgnoreScale,e._fill=this._fill,e._instructions=this._instructions.slice(),e._commitIndex=this._commitIndex,e._activeInstructions=this._activeInstructions.slice(),e._dirty=this._dirty,e._storeIndex=this._storeIndex,e},e.toString=function(){return"[Graphics]"},e.mt=e.moveTo,e.lt=e.lineTo,e.at=e.arcTo,e.bt=e.bezierCurveTo,e.qt=e.quadraticCurveTo,e.a=e.arc,e.r=e.rect,e.cp=e.closePath,e.c=e.clear,e.f=e.beginFill,e.lf=e.beginLinearGradientFill,e.rf=e.beginRadialGradientFill,e.bf=e.beginBitmapFill,e.ef=e.endFill,e.ss=e.setStrokeStyle,e.sd=e.setStrokeDash,e.s=e.beginStroke,e.ls=e.beginLinearGradientStroke,e.rs=e.beginRadialGradientStroke,e.bs=e.beginBitmapStroke,e.es=e.endStroke,e.dr=e.drawRect,e.rr=e.drawRoundRect,e.rc=e.drawRoundRectComplex,e.dc=e.drawCircle,e.de=e.drawEllipse,e.dp=e.drawPolyStar,e.p=e.decodePath,e._updateInstructions=function(e){var i=this._instructions,s=this._activeInstructions,r=this._commitIndex;if(this._dirty&&s.length){i.length=r,i.push(t.beginCmd);var n=s.length,a=i.length;i.length=a+n;for(var o=0;n>o;o++)i[o+a]=s[o];this._fill&&i.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,i.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,i.push(this._strokeStyle)),i.push(this._stroke)),this._dirty=!1}e&&(s.length=0,this._commitIndex=i.length)},e._setFill=function(t){return this._updateInstructions(!0),this.command=this._fill=t,this},e._setStroke=function(t){return this._updateInstructions(!0),(this.command=this._stroke=t)&&(t.ignoreScale=this._strokeIgnoreScale),this},(i.LineTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.lineTo(this.x,this.y)},(i.MoveTo=function(t,e){this.x=t,this.y=e}).prototype.exec=function(t){t.moveTo(this.x,this.y)},(i.ArcTo=function(t,e,i,s,r){this.x1=t,this.y1=e,this.x2=i,this.y2=s,this.radius=r}).prototype.exec=function(t){t.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(i.Arc=function(t,e,i,s,r,n){this.x=t,this.y=e,this.radius=i,this.startAngle=s,this.endAngle=r,this.anticlockwise=!!n}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(i.QuadraticCurveTo=function(t,e,i,s){this.cpx=t,this.cpy=e,this.x=i,this.y=s}).prototype.exec=function(t){t.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(i.BezierCurveTo=function(t,e,i,s,r,n){this.cp1x=t,this.cp1y=e,this.cp2x=i,this.cp2y=s,this.x=r,this.y=n}).prototype.exec=function(t){t.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(i.Rect=function(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s}).prototype.exec=function(t){t.rect(this.x,this.y,this.w,this.h)},(i.ClosePath=function(){}).prototype.exec=function(t){t.closePath()},(i.BeginPath=function(){}).prototype.exec=function(t){t.beginPath()},e=(i.Fill=function(t,e){this.style=t,this.matrix=e}).prototype,e.exec=function(t){if(this.style){t.fillStyle=this.style;var e=this.matrix;e&&(t.save(),t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty)),t.fill(),e&&t.restore()}},e.linearGradient=function(e,i,s,r,n,a){for(var o=this.style=t._ctx.createLinearGradient(s,r,n,a),h=0,c=e.length;c>h;h++)o.addColorStop(i[h],e[h]);return o.props={colors:e,ratios:i,x0:s,y0:r,x1:n,y1:a,type:"linear"},this},e.radialGradient=function(e,i,s,r,n,a,o,h){for(var c=this.style=t._ctx.createRadialGradient(s,r,n,a,o,h),u=0,l=e.length;l>u;u++)c.addColorStop(i[u],e[u]);return c.props={colors:e,ratios:i,x0:s,y0:r,r0:n,x1:a,y1:o,r1:h,type:"radial"},this},e.bitmap=function(e,i){if(e.naturalWidth||e.getContext||e.readyState>=2){var s=this.style=t._ctx.createPattern(e,i||"");s.props={image:e,repetition:i,type:"bitmap"}}return this},e.path=!1,e=(i.Stroke=function(t,e){this.style=t,this.ignoreScale=e}).prototype,e.exec=function(t){this.style&&(t.strokeStyle=this.style,this.ignoreScale&&(t.save(),t.setTransform(1,0,0,1,0,0)),t.stroke(),this.ignoreScale&&t.restore())},e.linearGradient=i.Fill.prototype.linearGradient,e.radialGradient=i.Fill.prototype.radialGradient,e.bitmap=i.Fill.prototype.bitmap,e.path=!1,e=(i.StrokeStyle=function(t,e,i,s,r){this.width=t,this.caps=e,this.joints=i,this.miterLimit=s,this.ignoreScale=r}).prototype,e.exec=function(e){e.lineWidth=null==this.width?"1":this.width,e.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:t.STROKE_CAPS_MAP[this.caps],e.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:t.STROKE_JOINTS_MAP[this.joints],e.miterLimit=null==this.miterLimit?"10":this.miterLimit,e.ignoreScale=null==this.ignoreScale?!1:this.ignoreScale},e.path=!1,(i.StrokeDash=function(t,e){this.segments=t,this.offset=e||0}).prototype.exec=function(t){t.setLineDash&&(t.setLineDash(this.segments||i.StrokeDash.EMPTY_SEGMENTS),t.lineDashOffset=this.offset||0)},i.StrokeDash.EMPTY_SEGMENTS=[],(i.RoundRect=function(t,e,i,s,r,n,a,o){this.x=t,this.y=e,this.w=i,this.h=s,this.radiusTL=r,this.radiusTR=n,this.radiusBR=a,this.radiusBL=o}).prototype.exec=function(t){var e=(c>h?h:c)/2,i=0,s=0,r=0,n=0,a=this.x,o=this.y,h=this.w,c=this.h,u=this.radiusTL,l=this.radiusTR,d=this.radiusBR,_=this.radiusBL;0>u&&(u*=i=-1),u>e&&(u=e),0>l&&(l*=s=-1),l>e&&(l=e),0>d&&(d*=r=-1),d>e&&(d=e),0>_&&(_*=n=-1),_>e&&(_=e),t.moveTo(a+h-l,o),t.arcTo(a+h+l*s,o-l*s,a+h,o+l,l),t.lineTo(a+h,o+c-d),t.arcTo(a+h+d*r,o+c+d*r,a+h-d,o+c,d),t.lineTo(a+_,o+c),t.arcTo(a-_*n,o+c+_*n,a,o+c-_,_),t.lineTo(a,o+u),t.arcTo(a-u*i,o-u*i,a+u,o,u),t.closePath()},(i.Circle=function(t,e,i){this.x=t,this.y=e,this.radius=i}).prototype.exec=function(t){t.arc(this.x,this.y,this.radius,0,2*Math.PI)},(i.Ellipse=function(t,e,i,s){this.x=t,this.y=e,this.w=i,this.h=s}).prototype.exec=function(t){var e=this.x,i=this.y,s=this.w,r=this.h,n=.5522848,a=s/2*n,o=r/2*n,h=e+s,c=i+r,u=e+s/2,l=i+r/2;t.moveTo(e,l),t.bezierCurveTo(e,l-o,u-a,i,u,i),t.bezierCurveTo(u+a,i,h,l-o,h,l),t.bezierCurveTo(h,l+o,u+a,c,u,c),t.bezierCurveTo(u-a,c,e,l+o,e,l)},(i.PolyStar=function(t,e,i,s,r,n){this.x=t,this.y=e,this.radius=i,this.sides=s,this.pointSize=r,this.angle=n}).prototype.exec=function(t){var e=this.x,i=this.y,s=this.radius,r=(this.angle||0)/180*Math.PI,n=this.sides,a=1-(this.pointSize||0),o=Math.PI/n;t.moveTo(e+Math.cos(r)*s,i+Math.sin(r)*s);for(var h=0;n>h;h++)r+=o,1!=a&&t.lineTo(e+Math.cos(r)*s*a,i+Math.sin(r)*s*a),r+=o,t.lineTo(e+Math.cos(r)*s,i+Math.sin(r)*s);t.closePath()},t.beginCmd=new i.BeginPath,createjs.Graphics=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=createjs.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new createjs.DisplayProps,this._rectangle=new createjs.Rectangle,this._bounds=null}var e=createjs.extend(t,createjs.EventDispatcher);t._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],t.suppressCrossDomainErrors=!1,t._snapToPixelEnabled=!1;var i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._hitTestCanvas=i,t._hitTestContext=i.getContext("2d"),i.width=i.height=1),t._nextCacheID=1,e.getStage=function(){for(var t=this,e=createjs.Stage;t.parent;)t=t.parent;return t instanceof e?t:null};try{Object.defineProperties(e,{stage:{get:e.getStage}})}catch(t){}e.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},e.draw=function(t,e){var i=this.cacheCanvas;if(e||!i)return!1;var s=this._cacheScale;return t.drawImage(i,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,i.width/s,i.height/s),!0},e.updateContext=function(e){var i=this,s=i.mask,r=i._props.matrix;s&&s.graphics&&!s.graphics.isEmpty()&&(s.getMatrix(r),e.transform(r.a,r.b,r.c,r.d,r.tx,r.ty),s.graphics.drawAsPath(e),e.clip(),r.invert(),e.transform(r.a,r.b,r.c,r.d,r.tx,r.ty)),this.getMatrix(r);var n=r.tx,a=r.ty;t._snapToPixelEnabled&&i.snapToPixel&&(n=n+(0>n?-.5:.5)|0,a=a+(0>a?-.5:.5)|0),e.transform(r.a,r.b,r.c,r.d,n,a),e.globalAlpha*=i.alpha,i.compositeOperation&&(e.globalCompositeOperation=i.compositeOperation),i.shadow&&this._applyShadow(e,i.shadow)},e.cache=function(t,e,i,s,r){r=r||1,this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),this._cacheWidth=i,this._cacheHeight=s,this._cacheOffsetX=t,this._cacheOffsetY=e,this._cacheScale=r,this.updateCache()},e.updateCache=function(e){var i=this.cacheCanvas;if(!i)throw"cache() must be called before updateCache()";var s=this._cacheScale,r=this._cacheOffsetX*s,n=this._cacheOffsetY*s,a=this._cacheWidth,o=this._cacheHeight,h=i.getContext("2d"),c=this._getFilterBounds();r+=this._filterOffsetX=c.x,n+=this._filterOffsetY=c.y,a=Math.ceil(a*s)+c.width,o=Math.ceil(o*s)+c.height,a!=i.width||o!=i.height?(i.width=a,i.height=o):e||h.clearRect(0,0,a+1,o+1),h.save(),h.globalCompositeOperation=e,h.setTransform(s,0,0,s,-r,-n),this.draw(h,!0),this._applyFilters(),h.restore(),this.cacheID=t._nextCacheID++},e.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},e.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},e.localToGlobal=function(t,e,i){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(t,e,i||new createjs.Point)},e.globalToLocal=function(t,e,i){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(t,e,i||new createjs.Point)},e.localToLocal=function(t,e,i,s){return s=this.localToGlobal(t,e,s),i.globalToLocal(s.x,s.y,s)},e.setTransform=function(t,e,i,s,r,n,a,o,h){return this.x=t||0,this.y=e||0,this.scaleX=null==i?1:i,this.scaleY=null==s?1:s,this.rotation=r||0,this.skewX=n||0,this.skewY=a||0,this.regX=o||0,this.regY=h||0,this},e.getMatrix=function(t){var e=this,i=t&&t.identity()||new createjs.Matrix2D;return e.transformMatrix?i.copy(e.transformMatrix):i.appendTransform(e.x,e.y,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.regX,e.regY)},e.getConcatenatedMatrix=function(t){for(var e=this,i=this.getMatrix(t);e=e.parent;)i.prependMatrix(e.getMatrix(e._props.matrix));return i},e.getConcatenatedDisplayProps=function(t){t=t?t.identity():new createjs.DisplayProps;var e=this,i=e.getMatrix(t.matrix);do{t.prepend(e.visible,e.alpha,e.shadow,e.compositeOperation),e!=this&&i.prependMatrix(e.getMatrix(e._props.matrix))}while(e=e.parent);return t},e.hitTest=function(e,i){var s=t._hitTestContext;s.setTransform(1,0,0,1,-e,-i),this.draw(s);var r=this._testHit(s);return s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,2,2),r},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var t=this.cacheCanvas;if(t){var e=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,t.width/e,t.height/e)}return null},e.getTransformedBounds=function(){return this._getBounds()},e.setBounds=function(t,e,i,s){null==t&&(this._bounds=t),this._bounds=(this._bounds||new createjs.Rectangle).setValues(t,e,i,s)},e.clone=function(){return this._cloneProps(new t)},e.toString=function(){return"[DisplayObject (name="+this.name+")]"},e._cloneProps=function(t){return t.alpha=this.alpha,t.mouseEnabled=this.mouseEnabled,t.tickEnabled=this.tickEnabled,t.name=this.name,t.regX=this.regX,t.regY=this.regY,t.rotation=this.rotation,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.shadow=this.shadow,t.skewX=this.skewX,t.skewY=this.skewY,t.visible=this.visible,t.x=this.x,t.y=this.y,t.compositeOperation=this.compositeOperation,t.snapToPixel=this.snapToPixel,t.filters=null==this.filters?null:this.filters.slice(0),t.mask=this.mask,t.hitArea=this.hitArea,t.cursor=this.cursor,t._bounds=this._bounds,t},e._applyShadow=function(t,e){e=e||Shadow.identity,t.shadowColor=e.color,t.shadowOffsetX=e.offsetX,t.shadowOffsetY=e.offsetY,t.shadowBlur=e.blur},e._tick=function(t){var e=this._listeners;e&&e.tick&&(t.target=null,t.propagationStopped=t.immediatePropagationStopped=!1,this.dispatchEvent(t))},e._testHit=function(e){try{var i=e.getImageData(0,0,1,1).data[3]>1}catch(e){if(!t.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return i},e._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var t=this.filters.length,e=this.cacheCanvas.getContext("2d"),i=this.cacheCanvas.width,s=this.cacheCanvas.height,r=0;t>r;r++)this.filters[r].applyFilter(e,0,0,i,s)},e._getFilterBounds=function(t){var e,i=this.filters,s=this._rectangle.setValues(0,0,0,0);if(!i||!(e=i.length))return s;for(var r=0;e>r;r++){var n=this.filters[r];n.getBounds&&n.getBounds(s)}return s},e._getBounds=function(t,e){return this._transformBounds(this.getBounds(),t,e)},e._transformBounds=function(t,e,i){if(!t)return t;var s=t.x,r=t.y,n=t.width,a=t.height,o=this._props.matrix;o=i?o.identity():this.getMatrix(o),(s||r)&&o.appendTransform(0,0,1,1,0,0,0,-s,-r),e&&o.prependMatrix(e);var h=n*o.a,c=n*o.b,u=a*o.c,l=a*o.d,d=o.tx,_=o.ty,p=d,f=d,g=_,m=_;return(s=h+d)<p?p=s:s>f&&(f=s),(s=h+u+d)<p?p=s:s>f&&(f=s),(s=u+d)<p?p=s:s>f&&(f=s),(r=c+_)<g?g=r:r>m&&(m=r),(r=c+l+_)<g?g=r:r>m&&(m=r),(r=l+_)<g?g=r:r>m&&(m=r),t.setValues(p,g,f-p,m-g)},e._hasMouseEventListener=function(){for(var e=t._MOUSE_EVENTS,i=0,s=e.length;s>i;i++)if(this.hasEventListener(e[i]))return!0;return!!this.cursor},createjs.DisplayObject=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var e=createjs.extend(t,createjs.DisplayObject);e.getNumChildren=function(){return this.children.length};try{Object.defineProperties(e,{numChildren:{get:e.getNumChildren}})}catch(t){}e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;for(var i=this.children.slice(),s=0,r=i.length;r>s;s++){var n=i[s];n.isVisible()&&(t.save(),n.updateContext(t),n.draw(t),t.restore())}return!0},e.addChild=function(t){if(null==t)return t;var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addChild(arguments[i]);return arguments[e-1]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.push(t),t.dispatchEvent("added"),t},e.addChildAt=function(t,e){var i=arguments.length,s=arguments[i-1];if(0>s||s>this.children.length)return arguments[i-2];if(i>2){for(var r=0;i-1>r;r++)this.addChildAt(arguments[r],s+r);return arguments[i-2]}return t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),t.dispatchEvent("added"),t},e.removeChild=function(t){var e=arguments.length;if(e>1){for(var i=!0,s=0;e>s;s++)i=i&&this.removeChild(arguments[s]);return i}return this.removeChildAt(createjs.indexOf(this.children,t))},e.removeChildAt=function(t){var e=arguments.length;if(e>1){for(var i=[],s=0;e>s;s++)i[s]=arguments[s];i.sort(function(t,e){return e-t});for(var r=!0,s=0;e>s;s++)r=r&&this.removeChildAt(i[s]);return r}if(0>t||t>this.children.length-1)return!1;var n=this.children[t];return n&&(n.parent=null),this.children.splice(t,1),n.dispatchEvent("removed"),!0},e.removeAllChildren=function(){for(var t=this.children;t.length;)this.removeChildAt(0)},e.getChildAt=function(t){return this.children[t]},e.getChildByName=function(t){for(var e=this.children,i=0,s=e.length;s>i;i++)if(e[i].name==t)return e[i];return null},e.sortChildren=function(t){this.children.sort(t)},e.getChildIndex=function(t){return createjs.indexOf(this.children,t)},e.swapChildrenAt=function(t,e){var i=this.children,s=i[t],r=i[e];s&&r&&(i[t]=r,i[e]=s)},e.swapChildren=function(t,e){for(var i,s,r=this.children,n=0,a=r.length;a>n&&(r[n]==t&&(i=n),r[n]==e&&(s=n),null==i||null==s);n++);n!=a&&(r[i]=e,r[s]=t)},e.setChildIndex=function(t,e){var i=this.children,s=i.length;if(!(t.parent!=this||0>e||e>=s)){for(var r=0;s>r&&i[r]!=t;r++);r!=s&&r!=e&&(i.splice(r,1),i.splice(e,0,t))}},e.contains=function(t){for(;t;){if(t==this)return!0;t=t.parent}return!1},e.hitTest=function(t,e){return null!=this.getObjectUnderPoint(t,e)},e.getObjectsUnderPoint=function(t,e,i){var s=[],r=this.localToGlobal(t,e);return this._getObjectsUnderPoint(r.x,r.y,s,i>0,1==i),s},e.getObjectUnderPoint=function(t,e,i){var s=this.localToGlobal(t,e);return this._getObjectsUnderPoint(s.x,s.y,null,i>0,1==i)},e.getBounds=function(){return this._getBounds(null,!0)},e.getTransformedBounds=function(){return this._getBounds()},e.clone=function(e){var i=this._cloneProps(new t);return e&&this._cloneChildren(i),i},e.toString=function(){return"[Container (name="+this.name+")]"},e._tick=function(t){if(this.tickChildren)for(var e=this.children.length-1;e>=0;e--){var i=this.children[e];i.tickEnabled&&i._tick&&i._tick(t)}this.DisplayObject__tick(t)},e._cloneChildren=function(t){t.children.length&&t.removeAllChildren();for(var e=t.children,i=0,s=this.children.length;s>i;i++){var r=this.children[i].clone(!0);r.parent=t,e.push(r)}},e._getObjectsUnderPoint=function(e,i,s,r,n,a){if(a=a||0,!a&&!this._testMask(this,e,i))return null;var o,h=createjs.DisplayObject._hitTestContext;n=n||r&&this._hasMouseEventListener();for(var c=this.children,u=c.length,l=u-1;l>=0;l--){var d=c[l],_=d.hitArea;if(d.visible&&(_||d.isVisible())&&(!r||d.mouseEnabled)&&(_||this._testMask(d,e,i)))if(!_&&d instanceof t){var p=d._getObjectsUnderPoint(e,i,s,r,n,a+1);if(!s&&p)return r&&!this.mouseChildren?this:p}else{if(r&&!n&&!d._hasMouseEventListener())continue;var f=d.getConcatenatedDisplayProps(d._props);if(o=f.matrix,_&&(o.appendMatrix(_.getMatrix(_._props.matrix)),f.alpha=_.alpha),h.globalAlpha=f.alpha,h.setTransform(o.a,o.b,o.c,o.d,o.tx-e,o.ty-i),(_||d).draw(h),!this._testHit(h))continue;if(h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,2,2),!s)return r&&!this.mouseChildren?this:d;s.push(d)}}return null},e._testMask=function(t,e,i){var s=t.mask;if(!s||!s.graphics||s.graphics.isEmpty())return!0;var r=this._props.matrix,n=t.parent;r=n?n.getConcatenatedMatrix(r):r.identity(),r=s.getMatrix(s._props.matrix).prependMatrix(r);var a=createjs.DisplayObject._hitTestContext;return a.setTransform(r.a,r.b,r.c,r.d,r.tx-e,r.ty-i),s.graphics.drawAsPath(a),a.fillStyle="#000",a.fill(),this._testHit(a)?(a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,2,2),!0):!1},e._getBounds=function(t,e){var i=this.DisplayObject_getBounds();if(i)return this._transformBounds(i,t,e);var s=this._props.matrix;s=e?s.identity():this.getMatrix(s),t&&s.prependMatrix(t);for(var r=this.children.length,n=null,a=0;r>a;a++){var o=this.children[a];o.visible&&(i=o._getBounds(s))&&(n?n.extend(i.x,i.y,i.width,i.height):n=i.clone())}return n},createjs.Container=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof t?document.getElementById(t):t,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var e=createjs.extend(t,createjs.Container);e._get_nextStage=function(){return this._nextStage},e._set_nextStage=function(t){this._nextStage&&(this._nextStage._prevStage=null),t&&(t._prevStage=this),this._nextStage=t};try{Object.defineProperties(e,{nextStage:{get:e._get_nextStage,set:e._set_nextStage}})}catch(t){}e.update=function(t){if(this.canvas&&(this.tickOnUpdate&&this.tick(t),this.dispatchEvent("drawstart",!1,!0)!==!1)){createjs.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;var e=this.drawRect,i=this.canvas.getContext("2d");i.setTransform(1,0,0,1,0,0),this.autoClear&&(e?i.clearRect(e.x,e.y,e.width,e.height):i.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),i.save(),this.drawRect&&(i.beginPath(),i.rect(e.x,e.y,e.width,e.height),i.clip()),this.updateContext(i),this.draw(i,!1),i.restore(),this.dispatchEvent("drawend")}},e.tick=function(t){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var e=new createjs.Event("tick");if(t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);this._tick(e),this.dispatchEvent("tickend")}},e.handleEvent=function(t){"tick"==t.type&&this.update(t)},e.clear=function(){if(this.canvas){var t=this.canvas.getContext("2d");t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},e.toDataURL=function(t,e){var i,s=this.canvas.getContext("2d"),r=this.canvas.width,n=this.canvas.height;if(t){i=s.getImageData(0,0,r,n);var a=s.globalCompositeOperation;s.globalCompositeOperation="destination-over",s.fillStyle=t,s.fillRect(0,0,r,n)}var o=this.canvas.toDataURL(e||"image/png");return t&&(s.putImageData(i,0,0),s.globalCompositeOperation=a),o},e.enableMouseOver=function(t){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==t&&this._testMouseOver(!0)),null==t)t=20;else if(0>=t)return;var e=this;this._mouseOverIntervalID=setInterval(function(){e._testMouseOver()},1e3/Math.min(50,t))},e.enableDOMEvents=function(t){null==t&&(t=!0);var e,i,s=this._eventListeners;if(!t&&s){for(e in s)i=s[e],i.t.removeEventListener(e,i.f,!1);this._eventListeners=null}else if(t&&!s&&this.canvas){var r=window.addEventListener?window:document,n=this;s=this._eventListeners={},s.mouseup={t:r,f:function(t){n._handleMouseUp(t)}},s.mousemove={t:r,f:function(t){n._handleMouseMove(t)}},s.dblclick={t:this.canvas,f:function(t){n._handleDoubleClick(t)}},s.mousedown={t:this.canvas,f:function(t){n._handleMouseDown(t)}};for(e in s)i=s[e],i.t.addEventListener(e,i.f,!1)}},e.clone=function(){throw"Stage cannot be cloned."},e.toString=function(){return"[Stage (name="+this.name+")]"},e._getElementRect=function(t){var e;try{e=t.getBoundingClientRect()}catch(i){e={top:t.offsetTop,left:t.offsetLeft,width:t.offsetWidth,height:t.offsetHeight}}var i=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),s=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),r=window.getComputedStyle?getComputedStyle(t,null):t.currentStyle,n=parseInt(r.paddingLeft)+parseInt(r.borderLeftWidth),a=parseInt(r.paddingTop)+parseInt(r.borderTopWidth),o=parseInt(r.paddingRight)+parseInt(r.borderRightWidth),h=parseInt(r.paddingBottom)+parseInt(r.borderBottomWidth);return{left:e.left+i+n,right:e.right+i-o,top:e.top+s+a,bottom:e.bottom+s-h}},e._getPointerData=function(t){var e=this._pointerData[t];return e||(e=this._pointerData[t]={x:0,y:0}),e},e._handleMouseMove=function(t){t||(t=window.event),this._handlePointerMove(-1,t,t.pageX,t.pageY)},e._handlePointerMove=function(t,e,i,s,r){if((!this._prevStage||void 0!==r)&&this.canvas){var n=this._nextStage,a=this._getPointerData(t),o=a.inBounds;this._updatePointerPosition(t,e,i,s),(o||a.inBounds||this.mouseMoveOutside)&&(-1===t&&a.inBounds==!o&&this._dispatchMouseEvent(this,o?"mouseleave":"mouseenter",!1,t,a,e),this._dispatchMouseEvent(this,"stagemousemove",!1,t,a,e),this._dispatchMouseEvent(a.target,"pressmove",!0,t,a,e)),n&&n._handlePointerMove(t,e,i,s,null)}},e._updatePointerPosition=function(t,e,i,s){var r=this._getElementRect(this.canvas);i-=r.left,s-=r.top;var n=this.canvas.width,a=this.canvas.height;i/=(r.right-r.left)/n,s/=(r.bottom-r.top)/a;var o=this._getPointerData(t);(o.inBounds=i>=0&&s>=0&&n-1>=i&&a-1>=s)?(o.x=i,o.y=s):this.mouseMoveOutside&&(o.x=0>i?0:i>n-1?n-1:i,o.y=0>s?0:s>a-1?a-1:s),o.posEvtObj=e,o.rawX=i,o.rawY=s,(t===this._primaryPointerID||-1===t)&&(this.mouseX=o.x,this.mouseY=o.y,this.mouseInBounds=o.inBounds)},e._handleMouseUp=function(t){this._handlePointerUp(-1,t,!1)},e._handlePointerUp=function(t,e,i,s){var r=this._nextStage,n=this._getPointerData(t);if(!this._prevStage||void 0!==s){var a=null,o=n.target;s||!o&&!r||(a=this._getObjectsUnderPoint(n.x,n.y,null,!0)),n.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,t,n,e,a),n.down=!1),a==o&&this._dispatchMouseEvent(o,"click",!0,t,n,e),this._dispatchMouseEvent(o,"pressup",!0,t,n,e),i?(t==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[t]):n.target=null,r&&r._handlePointerUp(t,e,i,s||a&&this)}},e._handleMouseDown=function(t){this._handlePointerDown(-1,t,t.pageX,t.pageY)},e._handlePointerDown=function(t,e,i,s,r){this.preventSelection&&e.preventDefault(),(null==this._primaryPointerID||-1===t)&&(this._primaryPointerID=t),null!=s&&this._updatePointerPosition(t,e,i,s);var n=null,a=this._nextStage,o=this._getPointerData(t);r||(n=o.target=this._getObjectsUnderPoint(o.x,o.y,null,!0)),o.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,t,o,e,n),o.down=!0),this._dispatchMouseEvent(n,"mousedown",!0,t,o,e),a&&a._handlePointerDown(t,e,i,s,r||n&&this)},e._testMouseOver=function(t,e,i){if(!this._prevStage||void 0!==e){var s=this._nextStage;if(!this._mouseOverIntervalID)return void(s&&s._testMouseOver(t,e,i));var r=this._getPointerData(-1);if(r&&(t||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var n,a,o,h=r.posEvtObj,c=i||h&&h.target==this.canvas,u=null,l=-1,d="";!e&&(t||this.mouseInBounds&&c)&&(u=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var _=this._mouseOverTarget||[],p=_[_.length-1],f=this._mouseOverTarget=[];for(n=u;n;)f.unshift(n),d||(d=n.cursor),n=n.parent;for(this.canvas.style.cursor=d,!e&&i&&(i.canvas.style.cursor=d),a=0,o=f.length;o>a&&f[a]==_[a];a++)l=a;for(p!=u&&this._dispatchMouseEvent(p,"mouseout",!0,-1,r,h,u),a=_.length-1;a>l;a--)this._dispatchMouseEvent(_[a],"rollout",!1,-1,r,h,u);for(a=f.length-1;a>l;a--)this._dispatchMouseEvent(f[a],"rollover",!1,-1,r,h,p);p!=u&&this._dispatchMouseEvent(u,"mouseover",!0,-1,r,h,p),s&&s._testMouseOver(t,e||u&&this,i||c&&this)}}},e._handleDoubleClick=function(t,e){var i=null,s=this._nextStage,r=this._getPointerData(-1);e||(i=this._getObjectsUnderPoint(r.x,r.y,null,!0),this._dispatchMouseEvent(i,"dblclick",!0,-1,r,t)),s&&s._handleDoubleClick(t,e||i&&this)},e._dispatchMouseEvent=function(t,e,i,s,r,n,a){if(t&&(i||t.hasEventListener(e))){var o=new createjs.MouseEvent(e,i,!1,r.x,r.y,n,s,s===this._primaryPointerID||-1===s,r.rawX,r.rawY,a);t.dispatchEvent(o)}},createjs.Stage=createjs.promote(t,"Container")}(),this.createjs=this.createjs||{},function(){function t(t){this.DisplayObject_constructor(),"string"==typeof t?(this.image=document.createElement("img"),this.image.src=t):this.image=t,this.sourceRect=null}var e=createjs.extend(t,createjs.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.image,e=this.cacheCanvas||t&&(t.naturalWidth||t.getContext||t.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&e)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e)||!this.image)return!0;var i=this.image,s=this.sourceRect;if(s){var r=s.x,n=s.y,a=r+s.width,o=n+s.height,h=0,c=0,u=i.width,l=i.height;0>r&&(h-=r,r=0),a>u&&(a=u),0>n&&(c-=n,n=0),o>l&&(o=l),t.drawImage(i,r,n,a-r,o-n,h,c,a-r,o-n)}else t.drawImage(i,0,0);return!0},e.getBounds=function(){var t=this.DisplayObject_getBounds();if(t)return t;var e=this.image,i=this.sourceRect||e,s=e&&(e.naturalWidth||e.getContext||e.readyState>=2);return s?this._rectangle.setValues(0,0,i.width,i.height):null},e.clone=function(){var e=new t(this.image);return this.sourceRect&&(e.sourceRect=this.sourceRect.clone()),this._cloneProps(e),e},e.toString=function(){return"[Bitmap (name="+this.name+")]"},createjs.Bitmap=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=t,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,null!=e&&this.gotoAndPlay(e)}var e=createjs.extend(t,createjs.DisplayObject);e.initialize=t,e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;this._normalizeFrame();var i=this.spriteSheet.getFrame(0|this._currentFrame);if(!i)return!1;var s=i.rect;return s.width&&s.height&&t.drawImage(i.image,s.x,s.y,s.width,s.height,-i.regX,-i.regY,s.width,s.height),!0},e.play=function(){this.paused=!1},e.stop=function(){this.paused=!0},e.gotoAndPlay=function(t){this.paused=!1,this._skipAdvance=!0,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.advance=function(t){var e=this.framerate||this.spriteSheet.framerate,i=e&&null!=t?t/(1e3/e):1;this._normalizeFrame(i)},e.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},e.clone=function(){return this._cloneProps(new t(this.spriteSheet))},e.toString=function(){return"[Sprite (name="+this.name+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.currentFrame=this.currentFrame,t.currentAnimation=this.currentAnimation,t.paused=this.paused,t.currentAnimationFrame=this.currentAnimationFrame,t.framerate=this.framerate,t._animation=this._animation,t._currentFrame=this._currentFrame,t._skipAdvance=this._skipAdvance,t},e._tick=function(t){this.paused||(this._skipAdvance||this.advance(t&&t.delta),this._skipAdvance=!1),this.DisplayObject__tick(t)},e._normalizeFrame=function(t){t=t||0;var e,i=this._animation,s=this.paused,r=this._currentFrame;if(i){var n=i.speed||1,a=this.currentAnimationFrame;if(e=i.frames.length,a+t*n>=e){var o=i.next;if(this._dispatchAnimationEnd(i,r,s,o,e-1))return;if(o)return this._goto(o,t-(e-a)/n);this.paused=!0,a=i.frames.length-1}else a+=t*n;this.currentAnimationFrame=a,this._currentFrame=i.frames[0|a]}else if(r=this._currentFrame+=t,e=this.spriteSheet.getNumFrames(),r>=e&&e>0&&!this._dispatchAnimationEnd(i,r,s,e-1)&&(this._currentFrame-=e)>=e)return this._normalizeFrame();r=0|this._currentFrame,this.currentFrame!=r&&(this.currentFrame=r,this.dispatchEvent("change"))},e._dispatchAnimationEnd=function(t,e,i,s,r){var n=t?t.name:null;if(this.hasEventListener("animationend")){var a=new createjs.Event("animationend");a.name=n,a.next=s,this.dispatchEvent(a)}var o=this._animation!=t||this._currentFrame!=e;return o||i||!this.paused||(this.currentAnimationFrame=r,o=!0),o},e._goto=function(t,e){if(this.currentAnimationFrame=0,isNaN(t)){var i=this.spriteSheet.getAnimation(t);i&&(this._animation=i,this.currentAnimation=t,this._normalizeFrame(e))}else this.currentAnimation=this._animation=null,this._currentFrame=t,this._normalizeFrame()},createjs.Sprite=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.DisplayObject_constructor(),this.graphics=t?t:new createjs.Graphics}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){var t=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){return this.DisplayObject_draw(t,e)?!0:(this.graphics.draw(t,this),!0)},e.clone=function(e){var i=e&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new t(i))},e.toString=function(){return"[Shape (name="+this.name+")]"},createjs.Shape=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.DisplayObject_constructor(),this.text=t,this.font=e,this.color=i,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var e=createjs.extend(t,createjs.DisplayObject),i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");i.getContext&&(t._workingContext=i.getContext("2d"),i.width=i.height=1),t.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},t.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},e.isVisible=function(){var t=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&t)},e.draw=function(t,e){if(this.DisplayObject_draw(t,e))return!0;var i=this.color||"#000";return this.outline?(t.strokeStyle=i,t.lineWidth=1*this.outline):t.fillStyle=i,this._drawText(this._prepContext(t)),!0},e.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},e.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},e.getMeasuredHeight=function(){return this._drawText(null,{}).height},e.getBounds=function(){var e=this.DisplayObject_getBounds();if(e)return e;if(null==this.text||""===this.text)return null;var i=this._drawText(null,{}),s=this.maxWidth&&this.maxWidth<i.width?this.maxWidth:i.width,r=s*t.H_OFFSETS[this.textAlign||"left"],n=this.lineHeight||this.getMeasuredLineHeight(),a=n*t.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(r,a,s,i.height)},e.getMetrics=function(){var e={lines:[]};return e.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),e.vOffset=e.lineHeight*t.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,e,e.lines)},e.clone=function(){return this._cloneProps(new t(this.text,this.font,this.color))},e.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},e._cloneProps=function(t){return this.DisplayObject__cloneProps(t),t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.maxWidth=this.maxWidth,t.outline=this.outline,t.lineHeight=this.lineHeight,t.lineWidth=this.lineWidth,t},e._prepContext=function(t){return t.font=this.font||"10px sans-serif",t.textAlign=this.textAlign||"left",t.textBaseline=this.textBaseline||"top",t},e._drawText=function(e,i,s){var r=!!e;r||(e=t._workingContext,e.save(),this._prepContext(e));for(var n=this.lineHeight||this.getMeasuredLineHeight(),a=0,o=0,h=String(this.text).split(/(?:\r\n|\r|\n)/),c=0,u=h.length;u>c;c++){var l=h[c],d=null;if(null!=this.lineWidth&&(d=e.measureText(l).width)>this.lineWidth){var _=l.split(/(\s)/);l=_[0],d=e.measureText(l).width;for(var p=1,f=_.length;f>p;p+=2){var g=e.measureText(_[p]+_[p+1]).width;d+g>this.lineWidth?(r&&this._drawTextLine(e,l,o*n),s&&s.push(l),d>a&&(a=d),l=_[p+1],d=e.measureText(l).width,o++):(l+=_[p]+_[p+1],d+=g)}}r&&this._drawTextLine(e,l,o*n),s&&s.push(l),i&&null==d&&(d=e.measureText(l).width),d>a&&(a=d),o++}return i&&(i.width=a,i.height=o*n),r||e.restore(),i},e._drawTextLine=function(t,e,i){this.outline?t.strokeText(e,0,i,this.maxWidth||65535):t.fillText(e,0,i,this.maxWidth||65535)},e._getMeasuredWidth=function(e){var i=t._workingContext;i.save();var s=this._prepContext(i).measureText(e).width;return i.restore(),s},createjs.Text=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.Container_constructor(),this.text=t||"",this.spriteSheet=e,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var e=createjs.extend(t,createjs.Container);t.maxPoolSize=100,t._spritePool=[],e.draw=function(t,e){this.DisplayObject_draw(t,e)||(this._updateText(),this.Container_draw(t,e))},e.getBounds=function(){return this._updateText(),this.Container_getBounds()},e.isVisible=function(){var t=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&t)},e.clone=function(){return this._cloneProps(new t(this.text,this.spriteSheet))},e.addChild=e.addChildAt=e.removeChild=e.removeChildAt=e.removeAllChildren=function(){},e._cloneProps=function(t){return this.Container__cloneProps(t),t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.spaceWidth=this.spaceWidth,t},e._getFrameIndex=function(t,e){var i,s=e.getAnimation(t);return s||(t!=(i=t.toUpperCase())||t!=(i=t.toLowerCase())||(i=null),i&&(s=e.getAnimation(i))),s&&s.frames[0]},e._getFrame=function(t,e){var i=this._getFrameIndex(t,e);return null==i?i:e.getFrame(i)},e._getLineHeight=function(t){var e=this._getFrame("1",t)||this._getFrame("T",t)||this._getFrame("L",t)||t.getFrame(0);return e?e.rect.height:1},e._getSpaceWidth=function(t){var e=this._getFrame("1",t)||this._getFrame("l",t)||this._getFrame("e",t)||this._getFrame("a",t)||t.getFrame(0);return e?e.rect.width:1},e._updateText=function(){var e,i=0,s=0,r=this._oldProps,n=!1,a=this.spaceWidth,o=this.lineHeight,h=this.spriteSheet,c=t._spritePool,u=this.children,l=0,d=u.length;for(var _ in r)r[_]!=this[_]&&(r[_]=this[_],n=!0);if(n){var p=!!this._getFrame(" ",h);p||a||(a=this._getSpaceWidth(h)),o||(o=this._getLineHeight(h));for(var f=0,g=this.text.length;g>f;f++){var m=this.text.charAt(f);if(" "!=m||p)if("\n"!=m&&"\r"!=m){var v=this._getFrameIndex(m,h);null!=v&&(d>l?e=u[l]:(u.push(e=c.length?c.pop():new createjs.Sprite),e.parent=this,d++),e.spriteSheet=h,e.gotoAndStop(v),e.x=i,e.y=s,l++,i+=e.getBounds().width+this.letterSpacing)}else"\r"==m&&"\n"==this.text.charAt(f+1)&&f++,i=0,s+=o;else i+=a}for(;d>l;)c.push(e=u.pop()),e.parent=null,d--;c.length>t.maxPoolSize&&(c.length=t.maxPoolSize)}},createjs.BitmapText=createjs.promote(t,"Container")}(),this.createjs=this.createjs||{},function(){"use strict";function t(e,i,s,r){this.Container_constructor(),!t.inited&&t.init(),this.mode=e||t.INDEPENDENT,this.startPosition=i||0,this.loop=s,this.currentFrame=0,this.timeline=new createjs.Timeline(null,r,{paused:!0,position:i,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this.framerate=null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._managed={}}function e(){throw"MovieClipPlugin cannot be instantiated."}var i=createjs.extend(t,createjs.Container);t.INDEPENDENT="independent",t.SINGLE_FRAME="single",t.SYNCHED="synched",t.inited=!1,t.init=function(){t.inited||(e.install(),t.inited=!0)},i.getLabels=function(){return this.timeline.getLabels()},i.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()},i.getDuration=function(){return this.timeline.duration};try{Object.defineProperties(i,{labels:{get:i.getLabels},currentLabel:{get:i.getCurrentLabel},totalFrames:{get:i.getDuration},duration:{get:i.getDuration}})}catch(t){}i.initialize=t,i.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},i.draw=function(t,e){return this.DisplayObject_draw(t,e)?!0:(this._updateTimeline(),this.Container_draw(t,e),!0)},i.play=function(){this.paused=!1},i.stop=function(){this.paused=!0},i.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},i.gotoAndStop=function(t){this.paused=!0,this._goto(t)},i.advance=function(e){var i=t.INDEPENDENT;if(this.mode==i){for(var s=this,r=s.framerate;(s=s.parent)&&null==r;)s.mode==i&&(r=s._framerate);this._framerate=r;var n=null!=r&&-1!=r&&null!=e?e/(1e3/r)+this._t:1,a=0|n;for(this._t=n-a;!this.paused&&a--;)this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline()}},i.clone=function(){throw"MovieClip cannot be cloned."},i.toString=function(){return"[MovieClip (name="+this.name+")]"},i._tick=function(t){this.advance(t&&t.delta),this.Container__tick(t)},i._goto=function(t){var e=this.timeline.resolve(t);null!=e&&(-1==this._prevPos&&(this._prevPos=NaN),this._prevPosition=e,this._t=0,this._updateTimeline())},i._reset=function(){this._prevPos=-1,this._t=this.currentFrame=0,this.paused=!1},i._updateTimeline=function(){var e=this.timeline,i=this.mode!=t.INDEPENDENT;e.loop=null==this.loop?!0:this.loop;var s=i?this.startPosition+(this.mode==t.SINGLE_FRAME?0:this._synchOffset):this._prevPos<0?0:this._prevPosition,r=i||!this.actionsEnabled?createjs.Tween.NONE:null;if(this.currentFrame=e._calcPosition(s),e.setPosition(s,r),this._prevPosition=e._prevPosition,this._prevPos!=e._prevPos){this.currentFrame=this._prevPos=e._prevPos;for(var n in this._managed)this._managed[n]=1;for(var a=e._tweens,o=0,h=a.length;h>o;o++){var c=a[o],u=c._target;if(u!=this&&!c.passive){var l=c._stepPosition;u instanceof createjs.DisplayObject?this._addManagedChild(u,l):this._setState(u.state,l)}}var d=this.children;for(o=d.length-1;o>=0;o--){var _=d[o].id;1==this._managed[_]&&(this.removeChildAt(o),delete this._managed[_])}}},i._setState=function(t,e){if(t)for(var i=t.length-1;i>=0;i--){var s=t[i],r=s.t,n=s.p;for(var a in n)r[a]=n[a];this._addManagedChild(r,e)}},i._addManagedChild=function(e,i){e._off||(this.addChildAt(e,0),e instanceof t&&(e._synchOffset=i,e.mode==t.INDEPENDENT&&e.autoReset&&!this._managed[e.id]&&e._reset()),this._managed[e.id]=2)},i._getBounds=function(t,e){var i=this.DisplayObject_getBounds();return i||(this._updateTimeline(),this.frameBounds&&(i=this._rectangle.copy(this.frameBounds[this.currentFrame]))),i?this._transformBounds(i,t,e):this.Container__getBounds(t,e)},createjs.MovieClip=createjs.promote(t,"Container"),e.priority=100,e.install=function(){createjs.Tween.installPlugin(e,["startPosition"])},e.init=function(t,e,i){return i},e.step=function(){},e.tween=function(e,i,s,r,n,a,o,h){return e.target instanceof t?1==a?n[i]:r[i]:s}}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"SpriteSheetUtils cannot be instantiated"}var e=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");e.getContext&&(t._workingCanvas=e,t._workingContext=e.getContext("2d"),e.width=e.height=1),t.addFlippedFrames=function(e,i,s,r){if(i||s||r){var n=0;i&&t._flip(e,++n,!0,!1),s&&t._flip(e,++n,!1,!0),r&&t._flip(e,++n,!0,!0)}},t.extractFrame=function(e,i){isNaN(i)&&(i=e.getAnimation(i).frames[0]);var s=e.getFrame(i);if(!s)return null;var r=s.rect,n=t._workingCanvas;n.width=r.width,n.height=r.height,t._workingContext.drawImage(s.image,r.x,r.y,r.width,r.height,0,0,r.width,r.height);var a=document.createElement("img");return a.src=n.toDataURL("image/png"),a},t.mergeAlpha=function(t,e,i){i||(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas")),i.width=Math.max(e.width,t.width),i.height=Math.max(e.height,t.height);var s=i.getContext("2d");return s.save(),s.drawImage(t,0,0),s.globalCompositeOperation="destination-in",s.drawImage(e,0,0),s.restore(),i},t._flip=function(e,i,s,r){for(var n=e._images,a=t._workingCanvas,o=t._workingContext,h=n.length/i,c=0;h>c;c++){var u=n[c];u.__tmp=c,o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,a.width+1,a.height+1),a.width=u.width,a.height=u.height,o.setTransform(s?-1:1,0,0,r?-1:1,s?u.width:0,r?u.height:0),o.drawImage(u,0,0);var l=document.createElement("img");l.src=a.toDataURL("image/png"),l.width=u.width,l.height=u.height,n.push(l)}var d=e._frames,_=d.length/i;for(c=0;_>c;c++){u=d[c];var p=u.rect.clone();l=n[u.image.__tmp+h*i];var f={image:l,rect:p,regX:u.regX,regY:u.regY};s&&(p.x=l.width-p.x-p.width,f.regX=p.width-u.regX),r&&(p.y=l.height-p.y-p.height,f.regY=p.height-u.regY),d.push(f)}var g="_"+(s?"h":"")+(r?"v":""),m=e._animations,v=e._data,y=m.length/i;for(c=0;y>c;c++){var b=m[c];u=v[b];var E={name:b+g,speed:u.speed,next:u.next,frames:[]};u.next&&(E.next+=g),d=u.frames;for(var j=0,S=d.length;S>j;j++)E.frames.push(d[j]+_*i);v[E.name]=E,m.push(E.name)}},createjs.SpriteSheetUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=t||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var e=createjs.extend(t,createjs.EventDispatcher);t.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",t.ERR_RUNNING="a build is already running",e.addFrame=function(e,i,s,r,n){if(this._data)throw t.ERR_RUNNING;var a=i||e.bounds||e.nominalBounds;return!a&&e.getBounds&&(a=e.getBounds()),a?(s=s||1,this._frames.push({source:e,sourceRect:a,scale:s,funct:r,data:n,index:this._frames.length,height:a.height*s})-1):null},e.addAnimation=function(e,i,s,r){if(this._data)throw t.ERR_RUNNING;this._animations[e]={frames:i,next:s,speed:r}},e.addMovieClip=function(e,i,s,r,n,a){if(this._data)throw t.ERR_RUNNING;var o=e.frameBounds,h=i||e.bounds||e.nominalBounds;if(!h&&e.getBounds&&(h=e.getBounds()),h||o){var c,u,l=this._frames.length,d=e.timeline.duration;for(c=0;d>c;c++){var _=o&&o[c]?o[c]:h;this.addFrame(e,_,s,this._setupMovieClipFrame,{i:c,f:r,d:n})}var p=e.timeline._labels,f=[];for(var g in p)f.push({index:p[g],label:g});if(f.length)for(f.sort(function(t,e){return t.index-e.index}),c=0,u=f.length;u>c;c++){for(var m=f[c].label,v=l+f[c].index,y=l+(c==u-1?d:f[c+1].index),b=[],E=v;y>E;E++)b.push(E);(!a||(m=a(m,e,v,y)))&&this.addAnimation(m,b,!0)}}},e.build=function(){if(this._data)throw t.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},e.buildAsync=function(e){if(this._data)throw t.ERR_RUNNING;this.timeSlice=e,this._startBuild();var i=this;this._timerID=setTimeout(function(){i._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},e.stopAsync=function(){clearTimeout(this._timerID),this._data=null},e.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},e.toString=function(){return"[SpriteSheetBuilder]"},e._startBuild=function(){var e=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var i=[];this._data={images:[],frames:i,framerate:this.framerate,animations:this._animations};var s=this._frames.slice();if(s.sort(function(t,e){return t.height<=e.height?-1:1}),s[s.length-1].height+2*e>this.maxHeight)throw t.ERR_DIMENSIONS;for(var r=0,n=0,a=0;s.length;){var o=this._fillRow(s,r,a,i,e);if(o.w>n&&(n=o.w),r+=o.h,!o.h||!s.length){var h=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas");h.width=this._getSize(n,this.maxWidth),h.height=this._getSize(r,this.maxHeight),this._data.images[a]=h,o.h||(n=r=0,a++)}}},e._setupMovieClipFrame=function(t,e){var i=t.actionsEnabled;t.actionsEnabled=!1,t.gotoAndStop(e.i),t.actionsEnabled=i,e.f&&e.f(t,e.d,e.i)},e._getSize=function(t,e){for(var i=4;Math.pow(2,++i)<t;);return Math.min(e,Math.pow(2,i))},e._fillRow=function(e,i,s,r,n){var a=this.maxWidth,o=this.maxHeight;i+=n;for(var h=o-i,c=n,u=0,l=e.length-1;l>=0;l--){var d=e[l],_=this._scale*d.scale,p=d.sourceRect,f=d.source,g=Math.floor(_*p.x-n),m=Math.floor(_*p.y-n),v=Math.ceil(_*p.height+2*n),y=Math.ceil(_*p.width+2*n);if(y>a)throw t.ERR_DIMENSIONS;v>h||c+y>a||(d.img=s,d.rect=new createjs.Rectangle(c,i,y,v),u=u||v,e.splice(l,1),r[d.index]=[c,i,y,v,s,Math.round(-g+_*f.regX-n),Math.round(-m+_*f.regY-n)],c+=y)}return{w:c,h:u}},e._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},e._run=function(){for(var t=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),e=(new Date).getTime()+t,i=!1;e>(new Date).getTime();)if(!this._drawNext()){i=!0;break}if(i)this._endBuild();else{var s=this;this._timerID=setTimeout(function(){s._run()},50-t)}var r=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){var n=new createjs.Event("progress");n.progress=r,this.dispatchEvent(n)}},e._drawNext=function(){var t=this._frames[this._index],e=t.scale*this._scale,i=t.rect,s=t.sourceRect,r=this._data.images[t.img],n=r.getContext("2d");return t.funct&&t.funct(t.source,t.data),n.save(),n.beginPath(),n.rect(i.x,i.y,i.width,i.height),n.clip(),n.translate(Math.ceil(i.x-s.x*e),Math.ceil(i.y-s.y*e)),n.scale(e,e),t.source.draw(n),n.restore(),++this._index<this._frames.length},createjs.SpriteSheetBuilder=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.DisplayObject_constructor(),"string"==typeof t&&(t=document.getElementById(t)),this.mouseEnabled=!1;var e=t.style;e.position="absolute",e.transformOrigin=e.WebkitTransformOrigin=e.msTransformOrigin=e.MozTransformOrigin=e.OTransformOrigin="0% 0%",this.htmlElement=t,this._oldProps=null}var e=createjs.extend(t,createjs.DisplayObject);e.isVisible=function(){return null!=this.htmlElement},e.draw=function(t,e){return!0},e.cache=function(){},e.uncache=function(){},e.updateCache=function(){},e.hitTest=function(){},e.localToGlobal=function(){},e.globalToLocal=function(){},e.localToLocal=function(){},e.clone=function(){throw"DOMElement cannot be cloned."},e.toString=function(){return"[DOMElement (name="+this.name+")]"},e._tick=function(t){var e=this.getStage();e&&e.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(t)},e._handleDrawEnd=function(t){var e=this.htmlElement;if(e){var i=e.style,s=this.getConcatenatedDisplayProps(this._props),r=s.matrix,n=s.visible?"visible":"hidden";if(n!=i.visibility&&(i.visibility=n),s.visible){var a=this._oldProps,o=a&&a.matrix,h=1e4;if(!o||!o.equals(r)){var c="matrix("+(r.a*h|0)/h+","+(r.b*h|0)/h+","+(r.c*h|0)/h+","+(r.d*h|0)/h+","+(r.tx+.5|0);i.transform=i.WebkitTransform=i.OTransform=i.msTransform=c+","+(r.ty+.5|0)+")",i.MozTransform=c+"px,"+(r.ty+.5|0)+"px)",a||(a=this._oldProps=new createjs.DisplayProps(!0,NaN)),a.matrix.copy(r)}a.alpha!=s.alpha&&(i.opacity=""+(s.alpha*h|0)/h,a.alpha=s.alpha)}}},createjs.DOMElement=createjs.promote(t,"DisplayObject")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){}var e=t.prototype;e.getBounds=function(t){return t},e.applyFilter=function(t,e,i,s,r,n,a,o){n=n||t,null==a&&(a=e),null==o&&(o=i);try{var h=t.getImageData(e,i,s,r)}catch(t){return!1}return this._applyFilter(h)?(n.putImageData(h,a,o),!0):!1},e.toString=function(){return"[Filter]"},e.clone=function(){return new t},e._applyFilter=function(t){return!0},createjs.Filter=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){(isNaN(t)||0>t)&&(t=0),(isNaN(e)||0>e)&&(e=0),(isNaN(i)||1>i)&&(i=1),this.blurX=0|t,this.blurY=0|e,this.quality=0|i}var e=createjs.extend(t,createjs.Filter);t.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],t.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],e.getBounds=function(t){var e=0|this.blurX,i=0|this.blurY;if(0>=e&&0>=i)return t;var s=Math.pow(this.quality,.2);return(t||new createjs.Rectangle).pad(e*s+1,i*s+1,e*s+1,i*s+1)},e.clone=function(){return new t(this.blurX,this.blurY,this.quality)},e.toString=function(){return"[BlurFilter]"},e._applyFilter=function(e){var i=this.blurX>>1;if(isNaN(i)||0>i)return!1;var s=this.blurY>>1;if(isNaN(s)||0>s)return!1;if(0==i&&0==s)return!1;var r=this.quality;(isNaN(r)||1>r)&&(r=1),r|=0,r>3&&(r=3),1>r&&(r=1);var n=e.data,a=0,o=0,h=0,c=0,u=0,l=0,d=0,_=0,p=0,f=0,g=0,m=0,v=0,y=0,b=0,E=i+i+1|0,j=s+s+1|0,S=0|e.width,T=0|e.height,P=S-1|0,w=T-1|0,x=i+1|0,L=s+1|0,A={r:0,b:0,g:0,a:0},I=A;for(h=1;E>h;h++)I=I.n={r:0,b:0,g:0,a:0};I.n=A;var R={r:0,b:0,g:0,a:0},M=R;for(h=1;j>h;h++)M=M.n={r:0,b:0,g:0,a:0};M.n=R;for(var O=null,C=0|t.MUL_TABLE[i],D=0|t.SHG_TABLE[i],N=0|t.MUL_TABLE[s],k=0|t.SHG_TABLE[s];r-- >0;){d=l=0;var F=C,H=D;for(o=T;--o>-1;){for(_=x*(m=n[0|l]),p=x*(v=n[l+1|0]),f=x*(y=n[l+2|0]),g=x*(b=n[l+3|0]),I=A,h=x;--h>-1;)I.r=m,I.g=v,I.b=y,I.a=b,I=I.n;for(h=1;x>h;h++)c=l+((h>P?P:h)<<2)|0,_+=I.r=n[c],p+=I.g=n[c+1],f+=I.b=n[c+2],g+=I.a=n[c+3],I=I.n;for(O=A,a=0;S>a;a++)n[l++]=_*F>>>H,n[l++]=p*F>>>H,n[l++]=f*F>>>H,n[l++]=g*F>>>H,c=d+((c=a+i+1)<P?c:P)<<2,_-=O.r-(O.r=n[c]),p-=O.g-(O.g=n[c+1]),f-=O.b-(O.b=n[c+2]),g-=O.a-(O.a=n[c+3]),O=O.n;d+=S}for(F=N,H=k,a=0;S>a;a++){for(l=a<<2|0,_=L*(m=n[l])|0,p=L*(v=n[l+1|0])|0,f=L*(y=n[l+2|0])|0,g=L*(b=n[l+3|0])|0,M=R,h=0;L>h;h++)M.r=m,M.g=v,M.b=y,M.a=b,M=M.n;for(u=S,h=1;s>=h;h++)l=u+a<<2,_+=M.r=n[l],p+=M.g=n[l+1],f+=M.b=n[l+2],g+=M.a=n[l+3],M=M.n,w>h&&(u+=S);if(l=a,O=R,r>0)for(o=0;T>o;o++)c=l<<2,n[c+3]=b=g*F>>>H,b>0?(n[c]=_*F>>>H,n[c+1]=p*F>>>H,n[c+2]=f*F>>>H):n[c]=n[c+1]=n[c+2]=0,c=a+((c=o+L)<w?c:w)*S<<2,_-=O.r-(O.r=n[c]),p-=O.g-(O.g=n[c+1]),f-=O.b-(O.b=n[c+2]),g-=O.a-(O.a=n[c+3]),O=O.n,l+=S;else for(o=0;T>o;o++)c=l<<2,n[c+3]=b=g*F>>>H,b>0?(b=255/b,n[c]=(_*F>>>H)*b,n[c+1]=(p*F>>>H)*b,n[c+2]=(f*F>>>H)*b):n[c]=n[c+1]=n[c+2]=0,c=a+((c=o+L)<w?c:w)*S<<2,_-=O.r-(O.r=n[c]),p-=O.g-(O.g=n[c+1]),f-=O.b-(O.b=n[c+2]),g-=O.a-(O.a=n[c+3]),O=O.n,l+=S}}return!0},createjs.BlurFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.alphaMap=t,this._alphaMap=null,this._mapData=null}var e=createjs.extend(t,createjs.Filter);e.clone=function(){var e=new t(this.alphaMap);return e._alphaMap=this._alphaMap,e._mapData=this._mapData,e},e.toString=function(){return"[AlphaMapFilter]"},e._applyFilter=function(t){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var e=t.data,i=this._mapData,s=0,r=e.length;r>s;s+=4)e[s+3]=i[s]||0;return!0},e._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var t,e=this._alphaMap=this.alphaMap,i=e;e instanceof HTMLCanvasElement?t=i.getContext("2d"):(i=createjs.createCanvas?createjs.createCanvas():document.createElement("canvas"),i.width=e.width,i.height=e.height,t=i.getContext("2d"),t.drawImage(e,0,0));try{var s=t.getImageData(0,0,e.width,e.height)}catch(t){return!1}return this._mapData=s.data,!0},createjs.AlphaMapFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.mask=t}var e=createjs.extend(t,createjs.Filter);e.applyFilter=function(t,e,i,s,r,n,a,o){return this.mask?(n=n||t,null==a&&(a=e),null==o&&(o=i),n.save(),t!=n?!1:(n.globalCompositeOperation="destination-in",n.drawImage(this.mask,a,o),n.restore(),!0)):!0},e.clone=function(){return new t(this.mask)},e.toString=function(){return"[AlphaMaskFilter]"},createjs.AlphaMaskFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,s,r,n,a,o){this.redMultiplier=null!=t?t:1,this.greenMultiplier=null!=e?e:1,this.blueMultiplier=null!=i?i:1,this.alphaMultiplier=null!=s?s:1,this.redOffset=r||0,this.greenOffset=n||0,this.blueOffset=a||0,this.alphaOffset=o||0}var e=createjs.extend(t,createjs.Filter);e.toString=function(){return"[ColorFilter]"},e.clone=function(){return new t(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},e._applyFilter=function(t){for(var e=t.data,i=e.length,s=0;i>s;s+=4)e[s]=e[s]*this.redMultiplier+this.redOffset,e[s+1]=e[s+1]*this.greenMultiplier+this.greenOffset,e[s+2]=e[s+2]*this.blueMultiplier+this.blueOffset,e[s+3]=e[s+3]*this.alphaMultiplier+this.alphaOffset;return!0},createjs.ColorFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,s){this.setColor(t,e,i,s)}var e=t.prototype;t.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],t.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],t.LENGTH=t.IDENTITY_MATRIX.length,e.setColor=function(t,e,i,s){return this.reset().adjustColor(t,e,i,s)},e.reset=function(){return this.copy(t.IDENTITY_MATRIX)},e.adjustColor=function(t,e,i,s){return this.adjustHue(s),this.adjustContrast(e),this.adjustBrightness(t),this.adjustSaturation(i)},e.adjustBrightness=function(t){return 0==t||isNaN(t)?this:(t=this._cleanValue(t,255),this._multiplyMatrix([1,0,0,0,t,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0,0,0,0,0,1]),this)},e.adjustContrast=function(e){if(0==e||isNaN(e))return this;e=this._cleanValue(e,100);var i;return 0>e?i=127+e/100*127:(i=e%1,i=0==i?t.DELTA_INDEX[e]:t.DELTA_INDEX[e<<0]*(1-i)+t.DELTA_INDEX[(e<<0)+1]*i,i=127*i+127),this._multiplyMatrix([i/127,0,0,0,.5*(127-i),0,i/127,0,0,.5*(127-i),0,0,i/127,0,.5*(127-i),0,0,0,1,0,0,0,0,0,1]),this},e.adjustSaturation=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,100);var e=1+(t>0?3*t/100:t/100),i=.3086,s=.6094,r=.082;return this._multiplyMatrix([i*(1-e)+e,s*(1-e),r*(1-e),0,0,i*(1-e),s*(1-e)+e,r*(1-e),0,0,i*(1-e),s*(1-e),r*(1-e)+e,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.adjustHue=function(t){if(0==t||isNaN(t))return this;t=this._cleanValue(t,180)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t),s=.213,r=.715,n=.072;return this._multiplyMatrix([s+e*(1-s)+i*-s,r+e*-r+i*-r,n+e*-n+i*(1-n),0,0,s+e*-s+.143*i,r+e*(1-r)+.14*i,n+e*-n+i*-.283,0,0,s+e*-s+i*-(1-s),r+e*-r+i*r,n+e*(1-n)+i*n,0,0,0,0,0,1,0,0,0,0,0,1]),this},e.concat=function(e){return e=this._fixMatrix(e),e.length!=t.LENGTH?this:(this._multiplyMatrix(e),this)},e.clone=function(){return(new t).copy(this)},e.toArray=function(){for(var e=[],i=0,s=t.LENGTH;s>i;i++)e[i]=this[i];return e},e.copy=function(e){for(var i=t.LENGTH,s=0;i>s;s++)this[s]=e[s];return this},e.toString=function(){return"[ColorMatrix]"},e._multiplyMatrix=function(t){var e,i,s,r=[];for(e=0;5>e;e++){for(i=0;5>i;i++)r[i]=this[i+5*e];for(i=0;5>i;i++){var n=0;for(s=0;5>s;s++)n+=t[i+5*s]*r[s];this[i+5*e]=n}}},e._cleanValue=function(t,e){return Math.min(e,Math.max(-e,t))},e._fixMatrix=function(e){return e instanceof t&&(e=e.toArray()),e.length<t.LENGTH?e=e.slice(0,e.length).concat(t.IDENTITY_MATRIX.slice(e.length,t.LENGTH)):e.length>t.LENGTH&&(e=e.slice(0,t.LENGTH)),e},createjs.ColorMatrix=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.matrix=t}var e=createjs.extend(t,createjs.Filter);e.toString=function(){return"[ColorMatrixFilter]"},e.clone=function(){return new t(this.matrix)},e._applyFilter=function(t){for(var e,i,s,r,n=t.data,a=n.length,o=this.matrix,h=o[0],c=o[1],u=o[2],l=o[3],d=o[4],_=o[5],p=o[6],f=o[7],g=o[8],m=o[9],v=o[10],y=o[11],b=o[12],E=o[13],j=o[14],S=o[15],T=o[16],P=o[17],w=o[18],x=o[19],L=0;a>L;L+=4)e=n[L],i=n[L+1],s=n[L+2],r=n[L+3],n[L]=e*h+i*c+s*u+r*l+d,n[L+1]=e*_+i*p+s*f+r*g+m,n[L+2]=e*v+i*y+s*b+r*E+j,n[L+3]=e*S+i*T+s*P+r*w+x;return!0},createjs.ColorMatrixFilter=createjs.promote(t,"Filter")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Touch cannot be instantiated"}t.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},t.enable=function(e,i,s){return e&&e.canvas&&t.isSupported()?e.__touch?!0:(e.__touch={pointers:{},multitouch:!i,preventDefault:!s,count:0},"ontouchstart"in window?t._IOS_enable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_enable(e),!0):!1},t.disable=function(e){e&&("ontouchstart"in window?t._IOS_disable(e):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&t._IE_disable(e),delete e.__touch)},t._IOS_enable=function(e){var i=e.canvas,s=e.__touch.f=function(i){t._IOS_handleEvent(e,i)};i.addEventListener("touchstart",s,!1),i.addEventListener("touchmove",s,!1),i.addEventListener("touchend",s,!1),i.addEventListener("touchcancel",s,!1)},t._IOS_disable=function(t){var e=t.canvas;if(e){var i=t.__touch.f;e.removeEventListener("touchstart",i,!1),e.removeEventListener("touchmove",i,!1),e.removeEventListener("touchend",i,!1),e.removeEventListener("touchcancel",i,!1)}},t._IOS_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();for(var i=e.changedTouches,s=e.type,r=0,n=i.length;n>r;r++){var a=i[r],o=a.identifier;a.target==t.canvas&&("touchstart"==s?this._handleStart(t,o,e,a.pageX,a.pageY):"touchmove"==s?this._handleMove(t,o,e,a.pageX,a.pageY):("touchend"==s||"touchcancel"==s)&&this._handleEnd(t,o,e))}}},t._IE_enable=function(e){var i=e.canvas,s=e.__touch.f=function(i){t._IE_handleEvent(e,i)};void 0===window.navigator.pointerEnabled?(i.addEventListener("MSPointerDown",s,!1),window.addEventListener("MSPointerMove",s,!1),window.addEventListener("MSPointerUp",s,!1),window.addEventListener("MSPointerCancel",s,!1),e.__touch.preventDefault&&(i.style.msTouchAction="none")):(i.addEventListener("pointerdown",s,!1),window.addEventListener("pointermove",s,!1),window.addEventListener("pointerup",s,!1),window.addEventListener("pointercancel",s,!1),e.__touch.preventDefault&&(i.style.touchAction="none")),e.__touch.activeIDs={}},t._IE_disable=function(t){var e=t.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",e,!1),window.removeEventListener("MSPointerUp",e,!1),window.removeEventListener("MSPointerCancel",e,!1),t.canvas&&t.canvas.removeEventListener("MSPointerDown",e,!1)):(window.removeEventListener("pointermove",e,!1),window.removeEventListener("pointerup",e,!1),window.removeEventListener("pointercancel",e,!1),t.canvas&&t.canvas.removeEventListener("pointerdown",e,!1))},t._IE_handleEvent=function(t,e){if(t){t.__touch.preventDefault&&e.preventDefault&&e.preventDefault();var i=e.type,s=e.pointerId,r=t.__touch.activeIDs;if("MSPointerDown"==i||"pointerdown"==i){if(e.srcElement!=t.canvas)return;r[s]=!0,this._handleStart(t,s,e,e.pageX,e.pageY)}else r[s]&&("MSPointerMove"==i||"pointermove"==i?this._handleMove(t,s,e,e.pageX,e.pageY):("MSPointerUp"==i||"MSPointerCancel"==i||"pointerup"==i||"pointercancel"==i)&&(delete r[s],this._handleEnd(t,s,e)))}},t._handleStart=function(t,e,i,s,r){var n=t.__touch;if(n.multitouch||!n.count){var a=n.pointers;a[e]||(a[e]=!0,n.count++,t._handlePointerDown(e,i,s,r))}},t._handleMove=function(t,e,i,s,r){t.__touch.pointers[e]&&t._handlePointerMove(e,i,s,r)},t._handleEnd=function(t,e,i){var s=t.__touch,r=s.pointers;r[e]&&(s.count--,t._handlePointerUp(e,i,!0),delete r[e])},createjs.Touch=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.EaselJS=createjs.EaselJS||{};t.version="0.8.2",t.buildDate="Thu, 26 Nov 2015 20:44:34 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.6.2",t.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}var e=createjs.extend(t,createjs.Event);e.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(t){"use strict";function e(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}var i=createjs.extend(e,createjs.Event);i.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),function(){function t(e,s){function n(t){if(n[t]!==g)return n[t];var e;if("bug-string-char-index"==t)e="a"!="a"[0];else if("json"==t)e=n("json-stringify")&&n("json-parse");else{var i,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var h=s.stringify,u="function"==typeof h&&y;if(u){(i=function(){return 1}).toJSON=i;try{u="0"===h(0)&&"0"===h(new a)&&'""'==h(new o)&&h(v)===g&&h(g)===g&&h()===g&&"1"===h(i)&&"[1]"==h([i])&&"[null]"==h([g])&&"null"==h(null)&&"[null,null,null]"==h([g,v,null])&&h({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===h(null,i)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new c(-1))}catch(t){u=!1}}e=u}if("json-parse"==t){var l=s.parse;if("function"==typeof l)try{if(0===l("0")&&!l(!1)){i=l(r);var d=5==i.a.length&&1===i.a[0];if(d){try{d=!l('"\t"')}catch(t){}if(d)try{d=1!==l("01")}catch(t){}if(d)try{d=1!==l("1.")}catch(t){}}}}catch(t){d=!1}e=d}}return n[t]=!!e}e||(e=r.Object()),s||(s=r.Object());var a=e.Number||r.Number,o=e.String||r.String,h=e.Object||r.Object,c=e.Date||r.Date,u=e.SyntaxError||r.SyntaxError,l=e.TypeError||r.TypeError,d=e.Math||r.Math,_=e.JSON||r.JSON;"object"==typeof _&&_&&(s.stringify=_.stringify,s.parse=_.parse);var p,f,g,m=h.prototype,v=m.toString,y=new c(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(t){}if(!n("json")){var b="[object Function]",E="[object Date]",j="[object Number]",S="[object String]",T="[object Array]",P="[object Boolean]",w=n("bug-string-char-index");if(!y)var x=d.floor,L=[0,31,59,90,120,151,181,212,243,273,304,334],A=function(t,e){return L[e]+365*(t-1970)+x((t-1969+(e=+(e>1)))/4)-x((t-1901+e)/100)+x((t-1601+e)/400)};if((p=m.hasOwnProperty)||(p=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=v?p=function(t){var e=this.__proto__,i=t in(this.__proto__=null,this);return this.__proto__=e,i}:(e=i.constructor,p=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,p.call(this,t)}),f=function(t,e){var s,r,n,a=0;(s=function(){this.valueOf=0}).prototype.valueOf=0,r=new s;for(n in r)p.call(r,n)&&a++;return s=r=null,a?f=2==a?function(t,e){var i,s={},r=v.call(t)==b;for(i in t)r&&"prototype"==i||p.call(s,i)||!(s[i]=1)||!p.call(t,i)||e(i)}:function(t,e){var i,s,r=v.call(t)==b;for(i in t)r&&"prototype"==i||!p.call(t,i)||(s="constructor"===i)||e(i);(s||p.call(t,i="constructor"))&&e(i)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],f=function(t,e){var s,n,a=v.call(t)==b,o=!a&&"function"!=typeof t.constructor&&i[typeof t.hasOwnProperty]&&t.hasOwnProperty||p;for(s in t)a&&"prototype"==s||!o.call(t,s)||e(s);for(n=r.length;s=r[--n];o.call(t,s)&&e(s));}),f(t,e)},!n("json-stringify")){var I={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},R="000000",M=function(t,e){return(R+(e||0)).slice(-t)},O="\\u00",C=function(t){for(var e='"',i=0,s=t.length,r=!w||s>10,n=r&&(w?t.split(""):t);s>i;i++){var a=t.charCodeAt(i);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=I[a];break;default:if(32>a){e+=O+M(2,a.toString(16));break}e+=r?n[i]:t.charAt(i)}}return e+'"'},D=function(t,e,i,s,r,n,a){var o,h,c,u,d,_,m,y,b,w,L,I,R,O,N,k;try{o=e[t]}catch(t){}if("object"==typeof o&&o)if(h=v.call(o),h!=E||p.call(o,"toJSON"))"function"==typeof o.toJSON&&(h!=j&&h!=S&&h!=T||p.call(o,"toJSON"))&&(o=o.toJSON(t));else if(o>-1/0&&1/0>o){if(A){for(d=x(o/864e5),c=x(d/365.2425)+1970-1;A(c+1,0)<=d;c++);for(u=x((d-A(c,0))/30.42);A(c,u+1)<=d;u++);d=1+d-A(c,u),_=(o%864e5+864e5)%864e5,m=x(_/36e5)%24,y=x(_/6e4)%60,b=x(_/1e3)%60,w=_%1e3}else c=o.getUTCFullYear(),u=o.getUTCMonth(),d=o.getUTCDate(),m=o.getUTCHours(),y=o.getUTCMinutes(),b=o.getUTCSeconds(),w=o.getUTCMilliseconds();o=(0>=c||c>=1e4?(0>c?"-":"+")+M(6,0>c?-c:c):M(4,c))+"-"+M(2,u+1)+"-"+M(2,d)+"T"+M(2,m)+":"+M(2,y)+":"+M(2,b)+"."+M(3,w)+"Z"}else o=null;if(i&&(o=i.call(e,t,o)),null===o)return"null";if(h=v.call(o),h==P)return""+o;if(h==j)return o>-1/0&&1/0>o?""+o:"null";if(h==S)return C(""+o);if("object"==typeof o){for(O=a.length;O--;)if(a[O]===o)throw l();if(a.push(o),L=[],N=n,n+=r,h==T){for(R=0,O=o.length;O>R;R++)I=D(R,o,i,s,r,n,a),L.push(I===g?"null":I);k=L.length?r?"[\n"+n+L.join(",\n"+n)+"\n"+N+"]":"["+L.join(",")+"]":"[]"}else f(s||o,function(t){var e=D(t,o,i,s,r,n,a);e!==g&&L.push(C(t)+":"+(r?" ":"")+e)}),k=L.length?r?"{\n"+n+L.join(",\n"+n)+"\n"+N+"}":"{"+L.join(",")+"}":"{}";return a.pop(),k}};s.stringify=function(t,e,s){var r,n,a,o;if(i[typeof e]&&e)if((o=v.call(e))==b)n=e;else if(o==T){a={};for(var h,c=0,u=e.length;u>c;h=e[c++],o=v.call(h),(o==S||o==j)&&(a[h]=1));}if(s)if((o=v.call(s))==j){if((s-=s%1)>0)for(r="",s>10&&(s=10);r.length<s;r+=" ");}else o==S&&(r=s.length<=10?s:s.slice(0,10));return D("",(h={},h[""]=t,h),n,a,r,"",[])}}if(!n("json-parse")){var N,k,F=o.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},U=function(){throw N=k=null,u()},B=function(){for(var t,e,i,s,r,n=k,a=n.length;a>N;)switch(r=n.charCodeAt(N)){case 9:case 10:case 13:case 32:N++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=w?n.charAt(N):n[N],N++,t;case 34:for(t="@",N++;a>N;)if(r=n.charCodeAt(N),32>r)U();else if(92==r)switch(r=n.charCodeAt(++N)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=H[r],N++;break;case 117:for(e=++N,i=N+4;i>N;N++)r=n.charCodeAt(N),r>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||U();t+=F("0x"+n.slice(e,N));break;default:U()}else{if(34==r)break;for(r=n.charCodeAt(N),e=N;r>=32&&92!=r&&34!=r;)r=n.charCodeAt(++N);t+=n.slice(e,N)}if(34==n.charCodeAt(N))return N++,t;U();default:if(e=N,45==r&&(s=!0,r=n.charCodeAt(++N)),r>=48&&57>=r){for(48==r&&(r=n.charCodeAt(N+1),r>=48&&57>=r)&&U(),s=!1;a>N&&(r=n.charCodeAt(N),r>=48&&57>=r);N++);if(46==n.charCodeAt(N)){for(i=++N;a>i&&(r=n.charCodeAt(i),r>=48&&57>=r);i++);i==N&&U(),N=i}if(r=n.charCodeAt(N),101==r||69==r){for(r=n.charCodeAt(++N),(43==r||45==r)&&N++,i=N;a>i&&(r=n.charCodeAt(i),r>=48&&57>=r);i++);i==N&&U(),N=i}return+n.slice(e,N)}if(s&&U(),"true"==n.slice(N,N+4))return N+=4,!0;if("false"==n.slice(N,N+5))return N+=5,!1;if("null"==n.slice(N,N+4))return N+=4,null;U()}return"$"},X=function(t){var e,i;if("$"==t&&U(),"string"==typeof t){if("@"==(w?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=B(),"]"!=t;i||(i=!0))i&&(","==t?(t=B(),"]"==t&&U()):U()),","==t&&U(),e.push(X(t));return e}if("{"==t){for(e={};t=B(),"}"!=t;i||(i=!0))i&&(","==t?(t=B(),"}"==t&&U()):U()),(","==t||"string"!=typeof t||"@"!=(w?t.charAt(0):t[0])||":"!=B())&&U(),e[t.slice(1)]=X(B());return e}U()}return t},q=function(t,e,i){var s=Y(t,e,i);s===g?delete t[e]:t[e]=s},Y=function(t,e,i){var s,r=t[e];if("object"==typeof r&&r)if(v.call(r)==T)for(s=r.length;s--;)q(r,s,i);else f(r,function(t){q(r,t,i)});return i.call(t,e,r)};s.parse=function(t,e){var i,s;return N=0,k=""+t,i=X(B()),"$"!=B()&&U(),N=k=null,e&&v.call(e)==b?Y((s={},s[""]=i,s),"",e):i}}}return s.runInContext=t,s}var e="function"==typeof define&&define.amd,i={function:!0,object:!0},s=i[typeof exports]&&exports&&!exports.nodeType&&exports,r=i[typeof window]&&window||this,n=s&&i[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!n||n.global!==n&&n.window!==n&&n.self!==n||(r=n),s&&!e)t(r,s);else{var a=r.JSON,o=r.JSON3,h=!1,c=t(r,r.JSON3={noConflict:function(){return h||(h=!0,r.JSON=a,r.JSON3=o,a=o=null),c}});r.JSON={parse:c.parse,stringify:c.stringify}}e&&define(function(){return c})}.call(this),function(){var t={};t.appendToHead=function(e){t.getHead().appendChild(e)},t.getHead=function(){return document.head||document.getElementsByTagName("head")[0]},t.getBody=function(){return document.body||document.getElementsByTagName("body")[0]},createjs.DomUtils=t}(),function(){var t={};t.parseXML=function(t,e){var i=null;try{if(window.DOMParser){var s=new DOMParser;i=s.parseFromString(t,e)}}catch(t){}if(!i)try{i=new ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(t)}catch(t){i=null}return i},t.parseJSON=function(t){if(null==t)return null;try{return JSON.parse(t)}catch(t){throw t}},createjs.DataUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var s=new t;return s.src=e,s}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={};t.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,t.RELATIVE_PATT=/^[.\/]*?\//i,t.EXTENSION_PATT=/\/?[^\/]+\.(\w{1,5})$/i,t.parseURI=function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var s=e.indexOf("?");s>-1&&(e=e.substr(0,s));var r;return t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(r=e.match(t.EXTENSION_PATT))&&(i.extension=r[1].toLowerCase()),i},t.formatQueryString=function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var s in t)i.push(s+"="+escape(t[s]));return e&&(i=i.concat(e)),i.join("&")},t.buildPath=function(t,e){if(null==e)return t;var i=[],s=t.indexOf("?");if(-1!=s){var r=t.slice(s+1);i=i.concat(r.split("&"))}return-1!=s?t.slice(0,s)+"?"+this.formatQueryString(e,i):t+"?"+this.formatQueryString(e,i)},t.isCrossDomain=function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");i.href=location.href;var s=""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname);return s},t.isLocal=function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},t.isBinary=function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},t.isImageTag=function(t){return t instanceof HTMLImageElement},t.isAudioTag=function(t){return window.HTMLAudioElement?t instanceof HTMLAudioElement:!1},t.isVideoTag=function(t){return window.HTMLVideoElement?t instanceof HTMLVideoElement:!1},t.isText=function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},t.getTypeByExtension=function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,t?this._item=createjs.LoadItem.create(t):this._item=null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(t){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this);e instanceof Function?e.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+t.type.toUpperCase()+"_ERROR"))}},e._resultFormatSuccess=function(t){this._result=t,this._sendComplete()},e._resultFormatFailed=function(t){this._sendError(t)},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._updateXHR=function(t){t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var e=window.URL||window.webkitURL,i=t.getResult(!0);t.getTag().src=e.createObjectURL(i)}return t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null==this._request)return void this._handleError();null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}},e.setResponseType=function(t){"blob"===t&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(t){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder){var i=new BlobBuilder;i.append(this._response),this._response=i.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:case 0:return new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},r=null;if(window.XMLHttpRequest)r=new XMLHttpRequest,e&&void 0===r.withCredentials&&window.XDomainRequest&&(r=new XDomainRequest);else{for(var n=0,a=s.ACTIVEX_VERSIONS.length;a>n;n++){var o=s.ACTIVEX_VERSIONS[n];try{r=new ActiveXObject(o);break}catch(t){}}if(null==r)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&r.overrideMimeType&&r.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof r.responseType?2:1;var h=null;if(h=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,r.open(t.method||createjs.AbstractLoader.GET,h,!0),e&&r instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var c in t.headers)i[c]=t.headers[c];for(c in i)r.setRequestHeader(c,i[c]);return r instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(r.withCredentials=t.withCredentials),this._request=r,!0},e._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(t,e,i)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;e.init=function(t,e,i){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(t),this._paused=!1,this._basePath=e,this._crossOrigin=i,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},i.loadTimeout=8e3,i.LOAD_TIMEOUT=0,i.BINARY=createjs.AbstractLoader.BINARY,i.CSS=createjs.AbstractLoader.CSS,i.IMAGE=createjs.AbstractLoader.IMAGE,i.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,i.JSON=createjs.AbstractLoader.JSON,i.JSONP=createjs.AbstractLoader.JSONP,i.MANIFEST=createjs.AbstractLoader.MANIFEST,i.SOUND=createjs.AbstractLoader.SOUND,i.VIDEO=createjs.AbstractLoader.VIDEO,i.SVG=createjs.AbstractLoader.SVG,i.TEXT=createjs.AbstractLoader.TEXT,i.XML=createjs.AbstractLoader.XML,i.POST=createjs.AbstractLoader.POST,i.GET=createjs.AbstractLoader.GET,e.registerLoader=function(t){if(!t||!t.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(t))throw new Error("loader already exists.");this._availableLoaders.unshift(t)},e.unregisterLoader=function(t){var e=this._availableLoaders.indexOf(t);-1!=e&&e<this._defaultLoaderLength-1&&this._availableLoaders.splice(e,1)},e.setUseXHR=function(t){return this.setPreferXHR(t)},e.setPreferXHR=function(t){return this.preferXHR=0!=t&&null!=window.XMLHttpRequest,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(t&&!Array.isArray(t))e=[t];else if(t)e=t;else if(arguments.length>0)return;var i=!1;if(e){for(;e.length;){var s=e.pop(),r=this.getResult(s);for(n=this._loadQueue.length-1;n>=0;n--)if(a=this._loadQueue[n].getItem(),a.id==s||a.src==s){this._loadQueue.splice(n,1)[0].cancel();break}for(n=this._loadQueueBackup.length-1;n>=0;n--)if(a=this._loadQueueBackup[n].getItem(),a.id==s||a.src==s){this._loadQueueBackup.splice(n,1)[0].cancel();break}if(r)this._disposeItem(this.getItem(s));else for(var n=this._currentLoads.length-1;n>=0;n--){var a=this._currentLoads[n].getItem();if(a.id==s||a.src==s){this._currentLoads.splice(n,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{this.close();for(var o in this._loadItemsById)this._disposeItem(this._loadItemsById[o]);this.init(this.preferXHR,this._basePath)}},e.reset=function(){this.close();for(var t in this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],i=0,s=this._loadQueueBackup.length;s>i;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){this._plugins.push(t);var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var i=0,s=e.types.length;s>i;i++)this._typeCallbacks[e.types[i]]=e;if(null!=e.extensions)for(i=0,s=e.extensions.length;s>i;i++)this._extensionCallbacks[e.extensions[i]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,i){if(null==t){var s=new createjs.ErrorEvent("PRELOAD_NO_FILE");return void this._sendError(s)}this._addItem(t,null,i),e!==!1?this.setPaused(!1):this.setPaused(!0)},e.loadManifest=function(t,e,s){var r=null,n=null;if(Array.isArray(t)){if(0==t.length){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(a)}r=t}else if("string"==typeof t)r=[{src:t,type:i.MANIFEST}];else{if("object"!=typeof t){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(a)}if(void 0!==t.src){if(null==t.type)t.type=i.MANIFEST;else if(t.type!=i.MANIFEST){var a=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(a)}r=[t]}else void 0!==t.manifest&&(r=t.manifest,n=t.path)}for(var o=0,h=r.length;h>o;o++)this._addItem(r[o],n,s);e!==!1?this.setPaused(!1):this.setPaused(!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var i=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==i)return null;var s=i.id;return e&&this._loadedRawResults[s]?this._loadedRawResults[s]:this._loadedResults[s]},e.getItems=function(t){var e=[];for(var i in this._loadItemsById){var s=this._loadItemsById[i],r=this.getResult(i);(t!==!0||null!=r)&&e.push({item:s,result:r,rawResult:this.getResult(i,!0)})}return e},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},e._addItem=function(t,e,i){var s=this._createLoadItem(t,e,i);if(null!=s){var r=this._createLoader(s);null!=r&&("plugins"in r&&(r.plugins=this._plugins),s._loader=r,this._loadQueue.push(r),this._loadQueueBackup.push(r),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&s.type==createjs.LoadQueue.JAVASCRIPT||s.maintainOrder===!0)&&(this._scriptOrder.push(s),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,i){var s=createjs.LoadItem.create(t);if(null==s)return null;var r="",n=i||this._basePath;if(s.src instanceof Object){if(!s.type)return null;if(e){r=e;var a=createjs.RequestUtils.parseURI(e);null==n||a.absolute||a.relative||(r=n+r)}else null!=n&&(r=n)}else{var o=createjs.RequestUtils.parseURI(s.src);o.extension&&(s.ext=o.extension),null==s.type&&(s.type=createjs.RequestUtils.getTypeByExtension(s.ext));var h=s.src;if(!o.absolute&&!o.relative)if(e){r=e;var a=createjs.RequestUtils.parseURI(e);h=e+h,null==n||a.absolute||a.relative||(r=n+r)}else null!=n&&(r=n);s.src=r+s.src}s.path=r,(void 0===s.id||null===s.id||""===s.id)&&(s.id=h);var c=this._typeCallbacks[s.type]||this._extensionCallbacks[s.ext];if(c){var u=c.callback.call(c.scope,s,this);if(u===!1)return null;u===!0||null!=u&&(s._loader=u),o=createjs.RequestUtils.parseURI(s.src),null!=o.extension&&(s.ext=o.extension)}return this._loadItemsById[s.id]=s,this._loadItemsBySrc[s.src]=s,null==s.crossOrigin&&(s.crossOrigin=this._crossOrigin),s},e._createLoader=function(t){if(null!=t._loader)return t._loader;for(var e=this.preferXHR,i=0;i<this._availableLoaders.length;i++){var s=this._availableLoaders[i];if(s&&s.canLoadItem(t))return new s(t,e)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];this._canStartLoad(e)&&(this._loadQueue.splice(t,1),t--,this._loadItem(e))}}},e._loadItem=function(t){t.on("fileload",this._handleFileLoad,this),t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleError,this),t.on("fileerror",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleFileError=function(t){var e=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.item);this._sendError(e)},e._handleError=function(t){var e=t.target;this._numItemsLoaded++,this._finishOrderedItem(e,!0),this._updateProgress();var i=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.getItem());this._sendError(i),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(e),this._cleanLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,i=e.getItem(),s=e.getResult();this._loadedResults[i.id]=s;var r=e.getResult(!0);null!=r&&r!==s&&(this._loadedRawResults[i.id]=r),this._saveLoadedItems(e),this._removeLoadItem(e),this._finishOrderedItem(e)||this._processFinishedLoad(i,e),this._cleanLoadItem(e)},e._saveLoadedItems=function(t){var e=t.getLoadedItems();if(null!==e)for(var i=0;i<e.length;i++){var s=e[i].item;this._loadItemsBySrc[s.src]=s,this._loadItemsById[s.id]=s,this._loadedResults[s.id]=e[i].result,this._loadedRawResults[s.id]=e[i].rawResult}},e._finishOrderedItem=function(t,e){var i=t.getItem();if(this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT||i.maintainOrder){t instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var s=createjs.indexOf(this._scriptOrder,i);return-1==s?!1:(this._loadedScripts[s]=e===!0?!0:i,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var i=this._loadedScripts[e];if(null===i)break;if(i!==!0){var s=this._loadedResults[i.id];i.type==createjs.LoadQueue.JAVASCRIPT&&createjs.DomUtils.appendToHead(s);var r=i._loader;this._processFinishedLoad(i,r),this._loadedScripts[e]=!0}}},e._processFinishedLoad=function(t,e){if(this._numItemsLoaded++,!this.maintainScriptOrder&&t.type==createjs.LoadQueue.JAVASCRIPT){var i=e.getTag();createjs.DomUtils.appendToHead(i)}this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._canStartLoad=function(t){if(!this.maintainScriptOrder||t.preferXHR)return!0;var e=t.getItem();if(e.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var i=this._scriptOrder.indexOf(e),s=0;i>s;){var r=this._loadedScripts[s];if(null==r)return!1;s++}return this._currentlyLoadingScript=!0,!0},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,i=0;e>i;i++)if(this._currentLoads[i]==t){this._currentLoads.splice(i,1);break}},e._cleanLoadItem=function(t){var e=t.getItem();e&&delete e._loader},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var i=0,s=0,r=this._currentLoads.length;r>s;s++)i+=this._currentLoads[s].progress;t+=i/e*(e/this._numItems)}this._lastProgress!=t&&(this._sendProgress(t),this._lastProgress=t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._sendFileProgress=function(t,e){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var i=new createjs.Event("fileprogress");i.progress=e,i.loaded=e,i.total=1,i.item=t,this.dispatchEvent(i)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()&&!this._paused){var i=new createjs.Event("fileload");i.loader=e,i.item=t,i.result=this._loadedResults[t.id],i.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.TEXT)}var e=(createjs.extend(t,createjs.AbstractLoader),t);e.canLoadItem=function(t){return t.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.BINARY},e._updateXHR=function(t){t.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",e?this._tag=document.createElement("style"):this._tag=document.createElement("link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.CSS},e._formatResult=function(t){if(this._preferXHR){var e=t.getTag();if(e.styleSheet)e.styleSheet.cssText=t.getResult(!0);else{var i=document.createTextNode(t.getResult(!0));e.appendChild(i)}}else e=this._tag;return createjs.DomUtils.appendToHead(e),e},createjs.CSSLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(t)?this._tag=t:createjs.RequestUtils.isImageTag(t.src)?this._tag=t.src:createjs.RequestUtils.isImageTag(t.tag)&&(this._tag=t.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.IMAGE},e.load=function(){if(""!=this._tag.src&&this._tag.complete)return void this._sendComplete();var t=this._item.crossOrigin;1==t&&(t="Anonymous"),null==t||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=t),this.AbstractLoader_load()},e._updateXHR=function(t){t.loader.mimeType="text/plain; charset=x-user-defined-binary",t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){return this._formatImage},e._formatImage=function(t,e){var i=this._tag,s=window.URL||window.webkitURL;if(this._preferXHR)if(s){var r=s.createObjectURL(this.getResult(!0));i.src=r,i.addEventListener("load",this._cleanUpURL,!1),i.addEventListener("error",this._cleanUpURL,!1)}else i.src=this._item.src;else;i.complete?t(i):(i.onload=createjs.proxy(function(){t(this._tag)},this),i.onerror=createjs.proxy(function(){e(_this._tag)},this))},e._cleanUpURL=function(t){var e=window.URL||window.webkitURL;e.revokeObjectURL(t.target.src)},createjs.ImageLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JAVASCRIPT},e._formatResult=function(t){var e=t.getTag();return this._preferXHR&&(e.text=t.getResult(!0)),e},createjs.JavaScriptLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSON},e._formatResult=function(t){var e=null;try{e=createjs.DataUtils.parseJSON(t.getResult(!0))}catch(t){var i=new createjs.ErrorEvent("JSON_FORMAT",null,t);return this._sendError(i),t}return e},createjs.JSONLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},e._handleLoad=function(t){this._result=this._rawResult=t,this._sendComplete(),this._dispose()},e._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},e._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.MANIFEST_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var t=this._item.callback;null!=t?this._request=new createjs.JSONPLoader(this._item):this._request=new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.MANIFEST_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(t){if(t&&t.manifest){var e=this._manifestQueue=new createjs.LoadQueue;e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("complete",this._handleManifestComplete,this,!0),e.on("error",this._handleManifestError,this,!0);for(var i=0,s=this.plugins.length;s>i;i++)e.installPlugin(this.plugins[i]);e.loadManifest(t)}else this._sendComplete()},e._handleManifestFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleManifestComplete=function(t){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.MANIFEST_PROGRESS)+i.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.ManifestLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(t)||createjs.RequestUtils.isVideoTag(t.src)?(this.setTag(createjs.RequestUtils.isVideoTag(t)?t:t.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=createjs.extend(t,createjs.AbstractMediaLoader),i=t;e._createTag=function(){return document.createElement("video")},i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.SPRITESHEET_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},e._createRequest=function(){var t=this._item.callback;null!=t?this._request=new createjs.JSONPLoader(this._item):this._request=new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.SPRITESHEET_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e._loadManifest=function(t){if(t&&t.images){var e=this._manifestQueue=new createjs.LoadQueue(this._preferXHR,this._item.path,this._item.crossOrigin);e.on("complete",this._handleManifestComplete,this,!0),e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t.images)}},e._handleManifestFileLoad=function(t){var e=t.result;if(null!=e){var i=this.getResult().images,s=i.indexOf(t.item.src);i[s]=e}},e._handleManifestComplete=function(t){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.SPRITESHEET_PROGRESS)+i.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.SpriteSheetLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",e?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SVG},e._formatResult=function(t){var e=createjs.DataUtils.parseXML(t.getResult(!0),"text/xml"),i=t.getTag();return!this._preferXHR&&document.body.contains(i)&&document.body.removeChild(i),null!=e.documentElement?(i.appendChild(e.documentElement),i.style.visibility="visible",i):e},createjs.SVGLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.XML},e._formatResult=function(t){return createjs.DataUtils.parseXML(t.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="0.6.2",t.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,s=t.length;s>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},e=t.prototype={},i=t;i.create=function(t){if(t instanceof i||t instanceof Object){var e=new createjs.PlayPropsConfig;return e.set(t),e}throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=i}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Sound cannot be instantiated"}function e(t,e){this.init(t,e)}var i=t;i.INTERRUPT_ANY="any",i.INTERRUPT_EARLY="early",i.INTERRUPT_LATE="late",i.INTERRUPT_NONE="none",i.PLAY_INITED="playInited",i.PLAY_SUCCEEDED="playSucceeded",i.PLAY_INTERRUPTED="playInterrupted",i.PLAY_FINISHED="playFinished",i.PLAY_FAILED="playFailed",i.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],i.EXTENSION_MAP={m4a:"mp4"},i.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?((?:[^\/?]+)\.(\w+))(?:\?(\S+)?)?$/,i.defaultInterruptBehavior=i.INTERRUPT_NONE,i.alternateExtensions=[],i.activePlugin=null,i._masterVolume=1,Object.defineProperty(i,"volume",{get:function(){return this._masterVolume},set:function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,s=0,r=e.length;r>s;s++)e[s].setMasterVolume(t)}}),i._masterMute=!1,Object.defineProperty(i,"muted",{get:function(){return this._masterMute},set:function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,s=e.length;s>i;i++)e[i].setMasterMute(t);return!0}}),Object.defineProperty(i,"capabilities",{get:function(){return null==i.activePlugin?null:i.activePlugin._capabilities},set:function(t){return!1}}),i._pluginsRegistered=!1,i._lastID=0,i._instances=[],i._idHash={},i._preloadHash={},i._defaultPlayPropsHash={},i.addEventListener=null,i.removeEventListener=null,i.removeAllEventListeners=null,i.dispatchEvent=null,i.hasEventListener=null,i._listeners=null,createjs.EventDispatcher.initialize(i),i.getPreloadHandlers=function(){return{callback:createjs.proxy(i.initLoad,i),types:["sound"],extensions:i.SUPPORTED_EXTENSIONS}},i._handleLoadComplete=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var s=0,r=i._preloadHash[e].length;r>s;s++){var n=i._preloadHash[e][s];if(i._preloadHash[e][s]=!0,i.hasEventListener("fileload")){var t=new createjs.Event("fileload");t.src=n.src,t.id=n.id,t.data=n.data,t.sprite=n.sprite,i.dispatchEvent(t)}}},i._handleLoadError=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var s=0,r=i._preloadHash[e].length;r>s;s++){var n=i._preloadHash[e][s];if(i._preloadHash[e][s]=!1,i.hasEventListener("fileerror")){var t=new createjs.Event("fileerror");t.src=n.src,t.id=n.id,t.data=n.data,t.sprite=n.sprite,i.dispatchEvent(t)}}},i._registerPlugin=function(t){return t.isSupported()?(i.activePlugin=new t,!0):!1},i.registerPlugins=function(t){i._pluginsRegistered=!0;for(var e=0,s=t.length;s>e;e++)if(i._registerPlugin(t[e]))return!0;return!1},i.initializeDefaultPlugins=function(){return null!=i.activePlugin?!0:i._pluginsRegistered?!1:i.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},i.isReady=function(){return null!=i.activePlugin},i.getCapabilities=function(){return null==i.activePlugin?null:i.activePlugin._capabilities},i.getCapability=function(t){return null==i.activePlugin?null:i.activePlugin._capabilities[t]},i.initLoad=function(t){return i._registerSound(t)},i._registerSound=function(t){if(!i.initializeDefaultPlugins())return!1;var s;if(t.src instanceof Object?(s=i._parseSrc(t.src),s.src=t.path+s.src):s=i._parsePath(t.src),null==s)return!1;t.src=s.src,t.type="sound";var r=t.data,n=null;if(null!=r&&(isNaN(r.channels)?isNaN(r)||(n=parseInt(r)):n=parseInt(r.channels),r.audioSprite))for(var a,o=r.audioSprite.length;o--;)a=r.audioSprite[o],i._idHash[a.id]={src:t.src,startTime:parseInt(a.startTime),duration:parseInt(a.duration)},a.defaultPlayProps&&(i._defaultPlayPropsHash[a.id]=createjs.PlayPropsConfig.create(a.defaultPlayProps));null!=t.id&&(i._idHash[t.id]={src:t.src});var h=i.activePlugin.register(t);return e.create(t.src,n),null!=r&&isNaN(r)?t.data.channels=n||e.maxPerChannel():t.data=n||e.maxPerChannel(),h.type&&(t.type=h.type),t.defaultPlayProps&&(i._defaultPlayPropsHash[t.src]=createjs.PlayPropsConfig.create(t.defaultPlayProps)),h},i.registerSound=function(t,e,s,r,n){var a={src:t,id:e,data:s,defaultPlayProps:n};t instanceof Object&&t.src&&(r=e,a=t),a=createjs.LoadItem.create(a),a.path=r,null==r||a.src instanceof Object||(a.src=r+t);var o=i._registerSound(a);if(!o)return!1;if(i._preloadHash[a.src]||(i._preloadHash[a.src]=[]),i._preloadHash[a.src].push(a),1==i._preloadHash[a.src].length)o.on("complete",createjs.proxy(this._handleLoadComplete,this)),o.on("error",createjs.proxy(this._handleLoadError,this)),i.activePlugin.preload(o);else if(1==i._preloadHash[a.src][0])return!0;return a},i.registerSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var s=0,r=t.length;r>s;s++)i[s]=createjs.Sound.registerSound(t[s].src,t[s].id,t[s].data,e,t[s].defaultPlayProps);return i},i.removeSound=function(t,s){if(null==i.activePlugin)return!1;t instanceof Object&&t.src&&(t=t.src);var r;if(t instanceof Object?r=i._parseSrc(t):(t=i._getSrcById(t).src,r=i._parsePath(t)),null==r)return!1;t=r.src,null!=s&&(t=s+t);for(var n in i._idHash)i._idHash[n].src==t&&delete i._idHash[n];return e.removeSrc(t),delete i._preloadHash[t],i.activePlugin.removeSound(t),!0},i.removeSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var s=0,r=t.length;r>s;s++)i[s]=createjs.Sound.removeSound(t[s].src,e);return i},i.removeAllSounds=function(){i._idHash={},i._preloadHash={},e.removeAll(),i.activePlugin&&i.activePlugin.removeAllSounds()},i.loadComplete=function(t){if(!i.isReady())return!1;var e=i._parsePath(t);return t=e?i._getSrcById(e.src).src:i._getSrcById(t).src,void 0==i._preloadHash[t]?!1:1==i._preloadHash[t][0]},i._parsePath=function(t){"string"!=typeof t&&(t=t.toString());var e=t.match(i.FILE_PATTERN);if(null==e)return!1;for(var s=e[4],r=e[5],n=i.capabilities,a=0;!n[r];)if(r=i.alternateExtensions[a++],a>i.alternateExtensions.length)return null;t=t.replace("."+e[5],"."+r);var o={name:s,src:t,extension:r};return o},i._parseSrc=function(t){var e={name:void 0,src:void 0,extension:void 0},s=i.capabilities;for(var r in t)if(t.hasOwnProperty(r)&&s[r]){e.src=t[r],e.extension=r;break}if(!e.src)return!1;var n=e.src.lastIndexOf("/");return-1!=n?e.name=e.src.slice(n+1):e.name=e.src,e},i.play=function(t,e,s,r,n,a,o,h,c){var u;u=e instanceof Object||e instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(e):createjs.PlayPropsConfig.create({interrupt:e,delay:s,offset:r,loop:n,volume:a,pan:o,startTime:h,duration:c});var l=i.createInstance(t,u.startTime,u.duration),d=i._playInstance(l,u);return d||l._playFailed(),l},i.createInstance=function(t,s,r){if(!i.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(t,s,r);var n=i._defaultPlayPropsHash[t];t=i._getSrcById(t);var a=i._parsePath(t.src),o=null;return null!=a&&null!=a.src?(e.create(a.src),null==s&&(s=t.startTime),o=i.activePlugin.create(a.src,s,r||t.duration),n=n||i._defaultPlayPropsHash[a.src],n&&o.applyPlayProps(n)):o=new createjs.DefaultSoundInstance(t,s,r),o.uniqueId=i._lastID++,o},i.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},i.setVolume=function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,s=0,r=e.length;r>s;s++)e[s].setMasterVolume(t)},i.getVolume=function(){return this._masterVolume},i.setMute=function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,s=e.length;s>i;i++)e[i].setMasterMute(t);return!0},i.getMute=function(){return this._masterMute},i.setDefaultPlayProps=function(t,e){t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]=createjs.PlayPropsConfig.create(e)},i.getDefaultPlayProps=function(t){return t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]},i._playInstance=function(t,e){var s=i._defaultPlayPropsHash[t.src]||{};if(null==e.interrupt&&(e.interrupt=s.interrupt||i.defaultInterruptBehavior),null==e.delay&&(e.delay=s.delay||0),null==e.offset&&(e.offset=t.getPosition()),null==e.loop&&(e.loop=t.loop),null==e.volume&&(e.volume=t.volume),null==e.pan&&(e.pan=t.pan),0==e.delay){var r=i._beginPlaying(t,e);if(!r)return!1}else{var n=setTimeout(function(){i._beginPlaying(t,e)},e.delay);t.delayTimeoutId=n}return this._instances.push(t),!0},i._beginPlaying=function(t,i){if(!e.add(t,i.interrupt))return!1;var s=t._beginPlaying(i);if(!s){var r=createjs.indexOf(this._instances,t);return r>-1&&this._instances.splice(r,1),!1}return!0},i._getSrcById=function(t){return i._idHash[t]||{src:t}},i._playFinished=function(t){e.remove(t);var i=createjs.indexOf(this._instances,t);i>-1&&this._instances.splice(i,1)},createjs.Sound=t,e.channels={},e.create=function(t,i){var s=e.get(t);return null==s?(e.channels[t]=new e(t,i),!0):!1},e.removeSrc=function(t){var i=e.get(t);return null==i?!1:(i._removeAll(),delete e.channels[t],!0)},e.removeAll=function(){for(var t in e.channels)e.channels[t]._removeAll();e.channels={}},e.add=function(t,i){var s=e.get(t.src);return null==s?!1:s._add(t,i)},e.remove=function(t){var i=e.get(t.src);return null==i?!1:(i._remove(t),!0)},e.maxPerChannel=function(){return s.maxDefault},e.get=function(t){return e.channels[t]};var s=e.prototype;s.constructor=e,s.src=null,s.max=null,s.maxDefault=100,s.length=0,s.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},s._get=function(t){return this._instances[t]},s._add=function(t,e){return this._getSlot(e,t)?(this._instances.push(t),this.length++,!0):!1},s._remove=function(t){var e=createjs.indexOf(this._instances,t);return-1==e?!1:(this._instances.splice(e,1),this.length--,!0)},s._removeAll=function(){for(var t=this.length-1;t>=0;t--)this._instances[t].stop()},s._getSlot=function(e,i){var s,r;if(e!=t.INTERRUPT_NONE&&(r=this._get(0),null==r))return!0;for(var n=0,a=this.max;a>n;n++){if(s=this._get(n),null==s)return!0;if(s.playState==t.PLAY_FINISHED||s.playState==t.PLAY_INTERRUPTED||s.playState==t.PLAY_FAILED){r=s;break}e!=t.INTERRUPT_NONE&&(e==t.INTERRUPT_EARLY&&s.getPosition()<r.getPosition()||e==t.INTERRUPT_LATE&&s.getPosition()>r.getPosition())&&(r=s)}return null!=r?(r._interrupt(),this._remove(r),!0):!1},s.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,s){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,e||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,i||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),s!==!1&&s!==!0&&this.setPlaybackResource(s),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},e=createjs.extend(t,createjs.EventDispatcher);e.play=function(t,e,i,s,r,n){var a;return a=t instanceof Object||t instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(t):createjs.PlayPropsConfig.create({interrupt:t,delay:e,offset:i,loop:s,volume:r,pan:n}),this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(a),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,a),this)},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.applyPlayProps=function(t){return null!=t.offset&&this.setPosition(t.offset),null!=t.loop&&this.setLoop(t.loop),null!=t.volume&&this.setVolume(t.volume),null!=t.pan&&this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this},e.toString=function(){return"[AbstractSoundInstance]"},e.getPaused=function(){return this._paused},e.setPaused=function(t){return t!==!0&&t!==!1||this._paused==t||1==t&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},e.setVolume=function(t){return t==this._volume?this:(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume(),this)},e.getVolume=function(){return this._volume},e.setMuted=function(t){return t===!0||t===!1?(this._muted=t,this._updateVolume(),this):void 0},e.getMuted=function(){return this._muted},e.setPan=function(t){return t==this._pan?this:(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan(),this)},e.getPan=function(){return this._pan},e.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},e.setPosition=function(t){return this._position=Math.max(0,t),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e.getStartTime=function(){return this._startTime},e.setStartTime=function(t){return t==this._startTime?this:(this._startTime=Math.max(0,t||0),this._updateStartTime(),this)},e.getDuration=function(){return this._duration},e.setDuration=function(t){return t==this._duration?this:(this._duration=Math.max(0,t||0),this._updateDuration(),this)},e.setPlaybackResource=function(t){return this._playbackResource=t,0==this._duration&&this._setDurationFromSource(),this},e.getPlaybackResource=function(){return this._playbackResource},e.getLoop=function(){return this._loop},e.setLoop=function(t){null!=this._playbackResource&&(0!=this._loop&&0==t?this._removeLooping(t):0==this._loop&&0!=t&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t){return this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(t){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateStartTime=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(t){},e._addLooping=function(t){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(t,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass},e=t.prototype;t._capabilities=null,t.isSupported=function(){return!0},e.register=function(t){var e=this._loaders[t.src];return e&&!e.canceled?this._loaders[t.src]:(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],e=new this._loaderClass(t),e.on("complete",this._handlePreloadComplete,this),this._loaders[t.src]=e,e)},e.preload=function(t){t.on("error",this._handlePreloadError,this),t.load()},e.isPreloadStarted=function(t){return null!=this._audioSources[t]},e.isPreloadComplete=function(t){return!(null==this._audioSources[t]||1==this._audioSources[t])},e.removeSound=function(t){if(this._soundInstances[t]){for(var e=this._soundInstances[t].length;e--;){var i=this._soundInstances[t][e];i.destroy()}delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,e,i){this.isPreloadStarted(t)||this.preload(this.register(t));var s=new this._soundInstanceClass(t,e,i,this._audioSources[t]);return this._soundInstances[t].push(s),s},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(t){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._audioSources[e]=t.result;for(var i=0,s=this._soundInstances[e].length;s>i;i++){var r=this._soundInstances[e][i];r.setPlaybackResource(this._audioSources[e])}},e._handlePreloadError=function(t){},e._updateVolume=function(){},createjs.AbstractPlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.SOUND)}var e=createjs.extend(t,createjs.AbstractLoader);t.context=null,e.toString=function(){return"[WebAudioLoader]"},e._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},e._sendComplete=function(e){t.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},e._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,s,r){this.AbstractSoundInstance_constructor(t,e,s,r),this.gainNode=i.context.createGain(),this.panNode=i.context.createPanner(),this.panNode.panningModel=i._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i.context=null,i._scratchBuffer=null,i.destinationNode=null,i._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(t){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(t){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},e._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(t){if(t){t.stop(0),t.disconnect(0);try{t.buffer=i._scratchBuffer}catch(t){}t=null}return t},e._handleSoundReady=function(t){this.gainNode.connect(i.destinationNode);var e=.001*this._duration,s=.001*this._position;s>e&&(s=e),this.sourceNode=this._createAndPlayAudioNode(i.context.currentTime-e,s),this._playbackStartTime=this.sourceNode.startTime-s,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(e-s)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(t,e){var s=i.context.createBufferSource();s.buffer=this.playbackResource,s.connect(this.panNode);var r=.001*this._duration;return s.startTime=t+r,s.start(s.startTime,e+.001*this._startTime,r-e),s},e._pause=function(){this._position=1e3*(i.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var t=this._muted?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},e._calculateCurrentPosition=function(){return 1e3*(i.context.currentTime-this._playbackStartTime)},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this._panningModel=i._panningModel,this.context=i.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=i._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._capabilities=null,i._panningModel="equalpower",i.context=null,i._scratchBuffer=null,i._unlocked=!1,i.isSupported=function(){var t=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return"file:"!=location.protocol||t||this._isFileXHRSupported()?(i._generateCapabilities(),null==i.context?!1:!0):!1},i.playEmptySound=function(){if(null!=i.context){var t=i.context.createBufferSource();t.buffer=i._scratchBuffer,t.connect(i.context.destination),t.start(0,0,0)}},i._isFileXHRSupported=function(){var t=!0,e=new XMLHttpRequest;try{e.open("GET","WebAudioPluginTest.fail",!1)}catch(e){return t=!1}e.onerror=function(){t=!1},e.onload=function(){t=404==this.status||200==this.status||0==this.status&&""!=this.response};try{e.send()}catch(e){t=!1}return t},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(null==i.context)if(window.AudioContext)i.context=new AudioContext;else{if(!window.webkitAudioContext)return null;i.context=new webkitAudioContext}null==i._scratchBuffer&&(i._scratchBuffer=i.context.createBuffer(1,1,22050)),i._compatibilitySetUp(),"ontouchstart"in window&&"running"!=i.context.state&&(i._unlock(),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,s=createjs.Sound.EXTENSION_MAP,r=0,n=e.length;n>r;r++){var a=e[r],o=s[a]||a;i._capabilities[a]="no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)||"no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)}i.context.destination.numberOfChannels<2&&(i._capabilities.panning=!1)}},i._compatibilitySetUp=function(){if(i._panningModel="equalpower",!i.context.createGain){i.context.createGain=i.context.createGainNode;var t=i.context.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,i._panningModel=0}},i._unlock=function(){i._unlocked||(i.playEmptySound(),"running"==i.context.state&&(document.removeEventListener("mousedown",i._unlock,!0),document.removeEventListener("touchend",i._unlock,!0),i._unlocked=!0))},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var t=this._soundInstanceClass;t.context=this.context,t._scratchBuffer=i._scratchBuffer,t.destinationNode=this.gainNode,t._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},createjs.WebAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"HTMLAudioTagPool cannot be instantiated"}function e(t){this._tags=[]}var i=t;i._tags={},i._tagPool=new e,i._tagUsed={},i.get=function(t){var e=i._tags[t];return null==e?(e=i._tags[t]=i._tagPool.get(),e.src=t):i._tagUsed[t]?(e=i._tagPool.get(),e.src=t):i._tagUsed[t]=!0,e},i.set=function(t,e){e==i._tags[t]?i._tagUsed[t]=!1:i._tagPool.set(e)},i.remove=function(t){var e=i._tags[t];return null==e?!1:(i._tagPool.set(e),delete i._tags[t],delete i._tagUsed[t],!0)},i.getDuration=function(t){var e=i._tags[t];return null!=e&&e.duration?1e3*e.duration:0},createjs.HTMLAudioTagPool=t;var s=e.prototype;s.constructor=e,s.get=function(){var t;return t=0==this._tags.length?this._createTag():this._tags.pop(),null==t.parentNode&&document.body.appendChild(t),t},s.set=function(t){var e=createjs.indexOf(this._tags,t);-1==e&&(this._tags.src=null,this._tags.push(t))},s.toString=function(){return"[TagPool]"},s._createTag=function(){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t}}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,s){this.AbstractSoundInstance_constructor(t,e,i,s),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),i?this._audioSpriteStopTime=.001*(e+i):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(t){this._updateVolume()},e.setMasterMute=function(t){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(null!=t){t.pause(),t.loop=!1,t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch(t){}createjs.HTMLAudioTagPool.set(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(t)},e._handleSoundReady=function(t){if(4!==this._playbackResource.readyState){var e=this._playbackResource;return e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",void e.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(t){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){if(null!=this._playbackResource){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},e._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(t){this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(t){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(t){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(t){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._setDurationFromSource=function(){this._duration=createjs.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},createjs.HTMLAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=i._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i.MAX_INSTANCES=30,i._AUDIO_READY="canplaythrough",i._AUDIO_ENDED="ended",i._AUDIO_SEEKED="seeked",i._AUDIO_STALLED="stalled",i._TIME_UPDATE="timeupdate",i._capabilities=null,i.isSupported=function(){return i._generateCapabilities(),null!=i._capabilities},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;i._capabilities={panning:!1,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,s=createjs.Sound.EXTENSION_MAP,r=0,n=e.length;n>r;r++){var a=e[r],o=s[a]||a;i._capabilities[a]="no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)||"no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)}}},e.register=function(t){var e=createjs.HTMLAudioTagPool.get(t.src),i=this.AbstractPlugin_register(t);return i.setTag(e),i},e.removeSound=function(t){this.AbstractPlugin_removeSound(t),createjs.HTMLAudioTagPool.remove(t)},e.create=function(t,e,i){var s=this.AbstractPlugin_create(t,e,i);return s.setPlaybackResource(null),s},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function t(e,i,s){this.ignoreGlobalPause=!1,this.loop=!1,this.duration=0,this.pluginData=s||{},this.target=e,this.position=null,this.passive=!1,this._paused=!1,this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this._target=e,this._useTicks=!1,this._inited=!1,this._registered=!1,i&&(this._useTicks=i.useTicks,this.ignoreGlobalPause=i.ignoreGlobalPause,this.loop=i.loop,i.onChange&&this.addEventListener("change",i.onChange),i.override&&t.removeTweens(e)),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,t.NONE)}var e=createjs.extend(t,createjs.EventDispatcher);t.NONE=0,t.LOOP=1,t.REVERSE=2,t.IGNORE={},t._tweens=[],t._plugins={},t.get=function(e,i,s,r){return r&&t.removeTweens(e),new t(e,i,s)},t.tick=function(e,i){for(var s=t._tweens.slice(),r=s.length-1;r>=0;r--){var n=s[r];i&&!n.ignoreGlobalPause||n._paused||n.tick(n._useTicks?1:e)}},t.handleEvent=function(t){"tick"==t.type&&this.tick(t.delta,t.paused)},t.removeTweens=function(e){if(e.tweenjs_count){for(var i=t._tweens,s=i.length-1;s>=0;s--){var r=i[s];r._target==e&&(r._paused=!0,i.splice(s,1))}e.tweenjs_count=0}},t.removeAllTweens=function(){for(var e=t._tweens,i=0,s=e.length;s>i;i++){var r=e[i];r._paused=!0,r.target&&(r.target.tweenjs_count=0)}e.length=0},t.hasActiveTweens=function(e){return e?null!=e.tweenjs_count&&!!e.tweenjs_count:t._tweens&&!!t._tweens.length},t.installPlugin=function(e,i){var s=e.priority;null==s&&(e.priority=s=0);for(var r=0,n=i.length,a=t._plugins;n>r;r++){var o=i[r];if(a[o]){for(var h=a[o],c=0,u=h.length;u>c&&!(s<h[c].priority);c++);a[o].splice(c,0,e)}else a[o]=[e]}},t._register=function(e,i){var s=e._target,r=t._tweens;if(i&&!e._registered)s&&(s.tweenjs_count=s.tweenjs_count?s.tweenjs_count+1:1),r.push(e),!t._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",t),t._inited=!0);else if(!i&&e._registered){s&&s.tweenjs_count--;for(var n=r.length;n--;)if(r[n]==e){r.splice(n,1);break}}e._registered=i},e.wait=function(t,e){if(null==t||0>=t)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,e:this._linearEase,p1:i,v:e})},e.to=function(t,e,i){return(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},e.call=function(t,e,i){return this._addAction({f:t,p:e?e:[this],o:i?i:this._target})},e.set=function(t,e){return this._addAction({f:this._set,o:this,p:[t,e?e:this._target]})},e.play=function(t){return t||(t=this),this.call(t.setPaused,[!1],t)},e.pause=function(t){return t||(t=this),this.call(t.setPaused,[!0],t)},e.setPosition=function(t,e){0>t&&(t=0),null==e&&(e=1);var i=t,s=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,s=!0)),i==this._prevPos)return s;var r=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(s)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var n=0,a=this._steps.length;a>n&&!(this._steps[n].t>i);n++);var o=this._steps[n-1];this._updateTargetProps(o,(this._stepPosition=i-o.t)/o.d)}return 0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&r>i?(r!=this.duration&&this._runActions(r,this.duration),this._runActions(0,i,!0)):this._runActions(r,i)),s&&this.setPaused(!0),this.dispatchEvent("change"),s},e.tick=function(t){this._paused||this.setPosition(this._prevPosition+t)},e.setPaused=function(e){return this._paused===!!e?this:(this._paused=!!e,t._register(this,!e),this)},e.w=e.wait,e.t=e.to,e.c=e.call,e.s=e.set,e.toString=function(){return"[Tween]"},e.clone=function(){throw"Tween can not be cloned."},e._updateTargetProps=function(e,i){var s,r,n,a,o,h;if(e||1!=i){if(this.passive=!!e.v,this.passive)return;e.e&&(i=e.e(i,0,1,1)),s=e.p0,r=e.p1}else this.passive=!1,s=r=this._curQueueProps;for(var c in this._initQueueProps){null==(a=s[c])&&(s[c]=a=this._initQueueProps[c]),null==(o=r[c])&&(r[c]=o=a),n=a==o||0==i||1==i||"number"!=typeof a?1==i?o:a:a+(o-a)*i;var u=!1;if(h=t._plugins[c])for(var l=0,d=h.length;d>l;l++){var _=h[l].tween(this,c,n,s,r,i,!!e&&s==r,!e);_==t.IGNORE?u=!0:n=_}u||(this._target[c]=n)}},e._runActions=function(t,e,i){var s=t,r=e,n=-1,a=this._actions.length,o=1;for(t>e&&(s=e,r=t,n=a,a=o=-1);(n+=o)!=a;){var h=this._actions[n],c=h.t;(c==r||c>s&&r>c||i&&c==t)&&h.f.apply(h.o,h.p)}},e._appendQueueProps=function(e){var i,s,r,n,a;for(var o in e)if(void 0===this._initQueueProps[o]){if(s=this._target[o],i=t._plugins[o])for(r=0,n=i.length;n>r;r++)s=i[r].init(this,o,s);this._initQueueProps[o]=this._curQueueProps[o]=void 0===s?null:s}else s=this._curQueueProps[o];for(var o in e){if(s=this._curQueueProps[o],i=t._plugins[o])for(a=a||{},r=0,n=i.length;n>r;r++)i[r].step&&i[r].step(this,o,s,e[o],a);this._curQueueProps[o]=e[o]}return a&&this._appendQueueProps(a),this._curQueueProps},e._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},e._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},e._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},e._set=function(t,e){for(var i in t)e[i]=t[i]},createjs.Tween=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.duration=0,this.loop=!1,this.position=null,this._paused=!1,this._tweens=[],this._labels=null,this._labelList=null,this._prevPosition=0,this._prevPos=-1,this._useTicks=!1,this._registered=!1,i&&(this._useTicks=i.useTicks,this.loop=i.loop,this.ignoreGlobalPause=i.ignoreGlobalPause,i.onChange&&this.addEventListener("change",i.onChange)),t&&this.addTween.apply(this,t),this.setLabels(e),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,createjs.Tween.NONE)}var e=createjs.extend(t,createjs.EventDispatcher);e.addTween=function(t){var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addTween(arguments[i]);return arguments[0]}return 0==e?null:(this.removeTween(t),this._tweens.push(t),t.setPaused(!0),t._paused=!1,t._useTicks=this._useTicks,t.duration>this.duration&&(this.duration=t.duration),this._prevPos>=0&&t.setPosition(this._prevPos,createjs.Tween.NONE),t)},e.removeTween=function(t){var e=arguments.length;if(e>1){for(var i=!0,s=0;e>s;s++)i=i&&this.removeTween(arguments[s]);return i}if(0==e)return!1;for(var r=this._tweens,s=r.length;s--;)if(r[s]==t)return r.splice(s,1),t.duration>=this.duration&&this.updateDuration(),!0;return!1},e.addLabel=function(t,e){this._labels[t]=e;var i=this._labelList;if(i){for(var s=0,r=i.length;r>s&&!(e<i[s].position);s++);i.splice(s,0,{label:t,position:e})}},e.setLabels=function(t){this._labels=t?t:{}},e.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var e=this._labels;for(var i in e)t.push({label:i,position:e[i]});t.sort(function(t,e){return t.position-e.position})}return t},e.getCurrentLabel=function(){var t=this.getLabels(),e=this.position,i=t.length;if(i){for(var s=0;i>s&&!(e<t[s].position);s++);return 0==s?null:t[s-1].label}return null},e.gotoAndPlay=function(t){this.setPaused(!1),this._goto(t)},e.gotoAndStop=function(t){this.setPaused(!0),this._goto(t)},e.setPosition=function(t,e){var i=this._calcPosition(t),s=!this.loop&&t>=this.duration;if(i==this._prevPos)return s;this._prevPosition=t,this.position=this._prevPos=i;for(var r=0,n=this._tweens.length;n>r;r++)if(this._tweens[r].setPosition(i,e),i!=this._prevPos)return!1;return s&&this.setPaused(!0),this.dispatchEvent("change"),s},e.setPaused=function(t){this._paused=!!t,createjs.Tween._register(this,!t)},e.updateDuration=function(){this.duration=0;for(var t=0,e=this._tweens.length;e>t;t++){var i=this._tweens[t];i.duration>this.duration&&(this.duration=i.duration)}},e.tick=function(t){this.setPosition(this._prevPosition+t)},e.resolve=function(t){var e=Number(t);return isNaN(e)&&(e=this._labels[t]),e},e.toString=function(){return"[Timeline]"},e.clone=function(){throw"Timeline can not be cloned."},e._goto=function(t){var e=this.resolve(t);null!=e&&this.setPosition(e)},e._calcPosition=function(t){return 0>t?0:t<this.duration?t:this.loop?t%this.duration:this.duration},createjs.Timeline=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ease cannot be instantiated."}t.linear=function(t){return t},t.none=t.linear,t.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.backIn=t.getBackIn(1.7),t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.backOut=t.getBackOut(1.7),t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},t.backInOut=t.getBackInOut(1.7),t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return.5>e?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var i=2*Math.PI;return function(s){if(0==s||1==s)return s;var r=e/i*Math.asin(1/t);return-(t*Math.pow(2,10*(s-=1))*Math.sin((s-r)*i/e))}},t.elasticIn=t.getElasticIn(1,.3),t.getElasticOut=function(t,e){var i=2*Math.PI;return function(s){if(0==s||1==s)return s;var r=e/i*Math.asin(1/t);return t*Math.pow(2,-10*s)*Math.sin((s-r)*i/e)+1}},t.elasticOut=t.getElasticOut(1,.3),t.getElasticInOut=function(t,e){var i=2*Math.PI;return function(s){var r=e/i*Math.asin(1/t);return(s*=2)<1?-.5*(t*Math.pow(2,10*(s-=1))*Math.sin((s-r)*i/e)):t*Math.pow(2,-10*(s-=1))*Math.sin((s-r)*i/e)*.5+1}},t.elasticInOut=t.getElasticInOut(1,.3*1.5),createjs.Ease=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"MotionGuidePlugin cannot be instantiated."}t.priority=0,t._rotOffS,t._rotOffE,t._rotNormS,t._rotNormE,t.install=function(){return createjs.Tween.installPlugin(t,["guide","x","y","rotation"]),createjs.Tween.IGNORE},t.init=function(t,e,i){var s=t.target;return s.hasOwnProperty("x")||(s.x=0),s.hasOwnProperty("y")||(s.y=0),s.hasOwnProperty("rotation")||(s.rotation=0),"rotation"==e&&(t.__needsRot=!0),"guide"==e?null:i},t.step=function(e,i,s,r,n){if("rotation"==i&&(e.__rotGlobalS=s,e.__rotGlobalE=r,t.testRotData(e,n)),"guide"!=i)return r;var a,o=r;o.hasOwnProperty("path")||(o.path=[]);var h=o.path;if(o.hasOwnProperty("end")||(o.end=1),o.hasOwnProperty("start")||(o.start=s&&s.hasOwnProperty("end")&&s.path===h?s.end:0),o.hasOwnProperty("_segments")&&o._length)return r;var c=h.length,u=10;if(!(c>=6&&(c-2)%4==0))throw"invalid 'path' data, please see documentation for valid paths";o._segments=[],o._length=0;for(var l=2;c>l;l+=4){for(var d,_,p=h[l-2],f=h[l-1],g=h[l+0],m=h[l+1],v=h[l+2],y=h[l+3],b=p,E=f,j=0,S=[],T=1;u>=T;T++){var P=T/u,w=1-P;d=w*w*p+2*w*P*g+P*P*v,_=w*w*f+2*w*P*m+P*P*y,j+=S[S.push(Math.sqrt((a=d-b)*a+(a=_-E)*a))-1],b=d,E=_}o._segments.push(j),o._segments.push(S),o._length+=j}a=o.orient,o.orient=!0;var x={};return t.calc(o,o.start,x),e.__rotPathS=Number(x.rotation.toFixed(5)),t.calc(o,o.end,x),e.__rotPathE=Number(x.rotation.toFixed(5)),o.orient=!1,t.calc(o,o.end,n),o.orient=a,o.orient?(e.__guideData=o,t.testRotData(e,n),r):r},t.testRotData=function(t,e){if(void 0===t.__rotGlobalS||void 0===t.__rotGlobalE){if(t.__needsRot)return;void 0!==t._curQueueProps.rotation?t.__rotGlobalS=t.__rotGlobalE=t._curQueueProps.rotation:t.__rotGlobalS=t.__rotGlobalE=e.rotation=t.target.rotation||0}if(void 0!==t.__guideData){var i=t.__guideData,s=t.__rotGlobalE-t.__rotGlobalS,r=t.__rotPathE-t.__rotPathS,n=s-r;if("auto"==i.orient)n>180?n-=360:-180>n&&(n+=360);else if("cw"==i.orient){for(;0>n;)n+=360;0==n&&s>0&&180!=s&&(n+=360)}else if("ccw"==i.orient){for(n=s-(r>180?360-r:r);n>0;)n-=360;0==n&&0>s&&-180!=s&&(n-=360)}i.rotDelta=n,i.rotOffS=t.__rotGlobalS-t.__rotPathS,t.__rotGlobalS=t.__rotGlobalE=t.__guideData=t.__needsRot=void 0}},t.tween=function(e,i,s,r,n,a,o,h){var c=n.guide;if(void 0==c||c===r.guide)return s;if(c.lastRatio!=a){var u=(c.end-c.start)*(o?c.end:a)+c.start;switch(t.calc(c,u,e.target),c.orient){case"cw":case"ccw":case"auto":e.target.rotation+=c.rotOffS+c.rotDelta*a;break;case"fixed":default:e.target.rotation+=c.rotOffS}c.lastRatio=a}return"rotation"!=i||c.orient&&"false"!=c.orient?e.target[i]:s},t.calc=function(t,e,i){if(void 0==t._segments)throw"Missing critical pre-calculated information, please file a bug";void 0==i&&(i={x:0,y:0,rotation:0});for(var s=t._segments,r=t.path,n=t._length*e,a=s.length-2,o=0;n>s[o]&&a>o;)n-=s[o],o+=2;var h=s[o+1],c=0;for(a=h.length-1;n>h[c]&&a>c;)n-=h[c],c++;var u=c/++a+n/(a*h[c]);o=2*o+2;var l=1-u;return i.x=l*l*r[o-2]+2*l*u*r[o+0]+u*u*r[o+2],i.y=l*l*r[o-1]+2*l*u*r[o+1]+u*u*r[o+3],t.orient&&(i.rotation=57.2957795*Math.atan2((r[o+1]-r[o-1])*l+(r[o+3]-r[o+1])*u,(r[o+0]-r[o-2])*l+(r[o+2]-r[o+0])*u)),i},createjs.MotionGuidePlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.TweenJS=createjs.TweenJS||{};t.version="0.6.2",t.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}();
},
	"flush/thirdparty/dom-to-image.min.js":function(){(function(e){"use strict";var t=w();var n=P();var r=b();var o=A();var i={imagePlaceholder:undefined,cacheBust:false,cache:true};var u={toSvg:a,toPng:l,toPngCacheId:s,toJpeg:f,toBlob:h,toPixelData:c,impl:{fontFaces:r,images:o,util:t,inliner:n,options:{},_res:{}},_pngImages:[]};if(typeof module!=="undefined")module.exports=u;else e.domtoimage=u;function a(e,n){n=n||{};m(n);return Promise.resolve(e).then(function(e){return p(e,n.filter,true)}).then(g).then(v).then(r).then(function(r){return y(r,n.width||t.width(e),n.height||t.height(e))});function r(e){if(n.bgcolor)e.style.backgroundColor=n.bgcolor;if(n.width)e.style.width=n.width+"px";if(n.height)e.style.height=n.height+"px";if(n.style)Object.keys(n.style).forEach(function(t){e.style[t]=n.style[t]});return e}}function c(e,n){return d(e,n||{}).then(function(n){return n.getContext("2d").getImageData(0,0,t.width(e),t.height(e)).data})}function l(e,t){return d(e,t||{}).then(function(e){return e.toDataURL()})}function s(e,t,n){if(u._pngImages[n+e.id]){return u._pngImages[n+e.id]}else{u._pngImages[n+e.id]=l(e,t);return u._pngImages[n+e.id]}}function f(e,t){t=t||{};return d(e,t).then(function(e){return e.toDataURL("image/jpeg",t.quality||1)})}function h(e,n){return d(e,n||{}).then(t.canvasToBlob)}function m(e){if(typeof e.imagePlaceholder==="undefined"){u.impl.options.imagePlaceholder=i.imagePlaceholder}else{u.impl.options.imagePlaceholder=e.imagePlaceholder}if(typeof e.cacheBust==="undefined"){u.impl.options.cacheBust=i.cacheBust}else{u.impl.options.cacheBust=e.cacheBust}if(typeof e.cache==="undefined"){u.impl.options.cache=i.cache}else{u.impl.options.cache=e.cache}}function d(e,n){return a(e,n).then(t.makeImage).then(t.delay(100)).then(function(t){var n=r(e);n.getContext("2d").drawImage(t,0,0);return n});function r(e){var r=document.createElement("canvas");r.width=n.width||t.width(e);r.height=n.height||t.height(e);if(n.bgcolor){var o=r.getContext("2d");o.fillStyle=n.bgcolor;o.fillRect(0,0,r.width,r.height)}return r}}function p(e,n,r){if(!r&&n&&!n(e))return Promise.resolve();return Promise.resolve(e).then(o).then(function(t){return i(e,t,n)}).then(function(t){return u(e,t)});function o(e){if(e instanceof HTMLCanvasElement)return t.makeImage(e.toDataURL());return e.cloneNode(false)}function i(e,n,r){var o=e.childNodes;if(o.length===0)return Promise.resolve(n);return i(n,t.asArray(o),r).then(function(){return n});function i(e,t,n){var r=Promise.resolve();t.forEach(function(t){r=r.then(function(){return p(t,n)}).then(function(t){if(t)e.appendChild(t)})});return r}}function u(e,n){if(!(n instanceof Element))return n;return Promise.resolve().then(r).then(o).then(i).then(u).then(function(){return n});function r(){r(window.getComputedStyle(e),n.style);function r(e,n){if(e.cssText){n.cssText=e.cssText;n.font=e.font}else r(e,n);function r(e,n){t.asArray(e).forEach(function(t){n.setProperty(t,e.getPropertyValue(t),e.getPropertyPriority(t))})}}}function o(){[":before",":after"].forEach(function(e){r(e)});function r(r){var o=window.getComputedStyle(e,r);var i=o.getPropertyValue("content");if(i===""||i==="none")return;var u=t.uid();n.className=n.className+" "+u;var a=document.createElement("style");a.appendChild(c(u,r,o));n.appendChild(a);function c(e,n,r){var o="."+e+":"+n;var i=r.cssText?u(r):a(r);return document.createTextNode(o+"{"+i+"}");function u(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}function a(e){return t.asArray(e).map(n).join("; ")+";";function n(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")}}}}}function i(){if(e instanceof HTMLTextAreaElement)n.innerHTML=e.value;if(e instanceof HTMLInputElement)n.setAttribute("value",e.value)}function u(){if(!(n instanceof SVGElement))return;n.setAttribute("xmlns","http://www.w3.org/2000/svg");if(!(n instanceof SVGRectElement))return;["width","height"].forEach(function(e){var t=n.getAttribute(e);if(!t)return;n.style.setProperty(e,t)})}}}function g(e){return r.resolveAll().then(function(t){var n=document.createElement("style");e.appendChild(n);n.appendChild(document.createTextNode(t));return e})}function v(e){return o.inlineAll(e).then(function(){return e})}function y(e,n,r){return Promise.resolve(e).then(function(e){e.setAttribute("xmlns","http://www.w3.org/1999/xhtml");return(new XMLSerializer).serializeToString(e)}).then(t.escapeXhtml).then(function(e){return'<foreignObject x="0" y="0" width="100%" height="100%">'+e+"</foreignObject>"}).then(function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+n+'" height="'+r+'">'+e+"</svg>"}).then(function(e){return"data:image/svg+xml;charset=utf-8,"+e})}function w(){return{escape:m,parseExtension:t,mimeType:n,dataAsUrl:h,isDataUrl:r,canvasToBlob:i,resolveUrl:a,getAndEncode:f,getAndEncodeCache:s,uid:c(),delay:d,asArray:p,escapeXhtml:g,makeImage:l,width:v,height:y};function e(){var e="application/font-woff";var t="image/jpeg";return{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:t,jpeg:t,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function t(e){var t=/\.([^\.\/]*?)$/g.exec(e);if(t)return t[1];else return""}function n(n){var r=t(n).toLowerCase();return e()[r]||""}function r(e){return e.search(/^(data:)/)!==-1}function o(e){return new Promise(function(t){var n=window.atob(e.toDataURL().split(",")[1]);var r=n.length;var o=new Uint8Array(r);for(var i=0;i<r;i++)o[i]=n.charCodeAt(i);t(new Blob([o],{type:"image/png"}))})}function i(e){if(e.toBlob)return new Promise(function(t){e.toBlob(t)});return o(e)}function a(e,t){var n=document.implementation.createHTMLDocument();var r=n.createElement("base");n.head.appendChild(r);var o=n.createElement("a");n.body.appendChild(o);r.href=t;o.href=e;return o.href}function c(){var e=0;return function(){return"u"+t()+e++;function t(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function l(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)};r.onerror=n;r.src=e})}function s(e){if(!u.impl.options.cache){return f(e)}if(u.impl._res[e]){return u.impl._res[e]}else{u.impl._res[e]=f(e);return u.impl._res[e]}}function f(e){var t=3e4;if(u.impl.options.cacheBust){e+=(/\?/.test(e)?"&":"?")+(new Date).getTime()}return new Promise(function(n){if(/api\/theming/.test(e)){n();return}var r=new XMLHttpRequest;r.onreadystatechange=a;r.ontimeout=c;r.responseType="blob";r.timeout=t;r.open("GET",e,true);r.send();var o;if(u.impl.options.imagePlaceholder){var i=u.impl.options.imagePlaceholder.split(/,/);if(i&&i[1]){o=i[1]}}function a(){if(r.readyState!==4)return;if(r.status!==200){if(o){n(o)}else{l("cannot fetch resource: "+e+", status: "+r.status)}return}var t=new FileReader;t.onloadend=function(){var r=t.result.split(/,/)[1];u.impl._res[e]=r;n(r)};t.readAsDataURL(r.response)}function c(){if(o){n(o)}else{l("timeout of "+t+"ms occured while fetching resource: "+e)}}function l(e){console.error(e);n("")}})}function h(e,t){return"data:"+t+";base64,"+e}function m(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function d(e){return function(t){return new Promise(function(n){setTimeout(function(){n(t)},e)})}}function p(e){var t=[];var n=e.length;for(var r=0;r<n;r++)t.push(e[r]);return t}function g(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")}function v(e){var t=w(e,"border-left-width");var n=w(e,"border-right-width");return e.scrollWidth+t+n}function y(e){var t=w(e,"border-top-width");var n=w(e,"border-bottom-width");return e.scrollHeight+t+n}function w(e,t){var n=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(n.replace("px",""))}}function P(){var e=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:i,shouldProcess:n,impl:{readUrls:r,inline:o}};function n(t){return t.search(e)!==-1}function r(n){var r=[];var o;while((o=e.exec(n))!==null){r.push(o[1])}return r.filter(function(e){return!t.isDataUrl(e)})}function o(e,n,r,o){return Promise.resolve(n).then(function(e){return r?t.resolveUrl(e,r):e}).then(o||t.getAndEncodeCache).then(function(e){return t.dataAsUrl(e,t.mimeType(n))}).then(function(t){return e.replace(i(n),"$1"+t+"$3")});function i(e){return new RegExp("(url\\(['\"]?)("+t.escape(e)+")(['\"]?\\))","g")}}function i(e,t,i){if(u())return Promise.resolve(e);return Promise.resolve(e).then(r).then(function(n){var r=Promise.resolve(e);n.forEach(function(e){r=r.then(function(n){return o(n,e,t,i)})});return r});function u(){return!n(e)}}}function b(){return{resolveAll:e,impl:{readAll:r}};function e(){return r(document).then(function(e){return Promise.all(e.map(function(e){return e.resolve()}))}).then(function(e){return e.join("\n")})}function r(){return Promise.resolve(t.asArray(document.styleSheets)).then(r).then(e).then(function(e){return e.map(o)});function e(e){return e.filter(function(e){return e.type===CSSRule.FONT_FACE_RULE}).filter(function(e){return n.shouldProcess(e.style.getPropertyValue("src"))})}function r(e){var n=[];e.forEach(function(e){try{t.asArray(e.cssRules||[]).forEach(n.push.bind(n))}catch(t){console.log("Error while reading CSS rules from "+e.href,t.toString())}});return n}function o(e){return{resolve:function t(){var r=(e.parentStyleSheet||{}).href;return n.inlineAll(e.cssText,r)},src:function(){return e.style.getPropertyValue("src")}}}}}function A(){return{inlineAll:r,impl:{newImage:e}};function e(e){return{inline:n};function n(n){if(t.isDataUrl(e.src))return Promise.resolve();return Promise.resolve(e.src).then(n||t.getAndEncodeCache).then(function(n){return t.dataAsUrl(n,t.mimeType(e.src))}).then(function(t){return new Promise(function(n,r){e.onload=n;e.onerror=r;e.src=t})})}}function r(o){if(!(o instanceof Element))return Promise.resolve(o);return i(o).then(function(){if(o instanceof HTMLImageElement)return e(o).inline();else return Promise.all(t.asArray(o.childNodes).map(function(e){return r(e)}))});function i(e){var t=e.style.getPropertyValue("background");if(!t)return Promise.resolve(e);return n.inlineAll(t).then(function(t){e.style.setProperty("background",t,e.style.getPropertyPriority("background"))}).then(function(){return e})}}}})(this);
},
	"flush/view/App.view.xml":'<mvc:View\n\tcontrollerName="flush.game.controller.App"\n\tdisplayBlock="true"\n\txmlns="sap.m"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:core="sap.ui.core"><Shell><App\n\t\t\tid="app"\n\t\t\tautoFocus="false"\n\t\t\tclass="flush"/></Shell><core:HTML\n\t\tid="rain"\n\t\tcontent="&lt;div id=\'rain\' class=\'flush rain rainOuter\'&gt;&lt;section&gt;&lt;/section&gt;&lt;/div&gt;"/><core:HTML\n\t\tid="lightning"\n\t\tcontent="&lt;div id=\'lightning\' class=\'flush lightning flashit display-none\'&gt;&lt;/div&gt;"/><core:HTML\n\t\tid="snow"\n\t\tcontent="&lt;canvas id=\'snow\' class=\'flush snow display-none\'&gt;&lt;/canvas &gt;"/></mvc:View>',
	"flush/view/ArcadeBoard.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:layout="sap.ui.layout"\n\txmlns:core="sap.ui.core"><layout:HorizontalLayout\n\t\tvisible="{= !${view>/multi} }"\n\t\tclass="arcadeControls"><layout:HorizontalLayout\n\t\t\tvisible="{= !${device>/system/phone} }"><Button\n\t\t\t\tid="l"\n\t\t\t\tpress=".onArcadeInput"\n\t\t\t\ticon="sap-icon://navigation-left-arrow"\n\t\t\t\ttype="Emphasized"\n\t\t\t\ttooltip="Go left"\n\t\t\t\tclass="arcadeButtonDirection"/><Button\n\t\t\t\tid="u"\n\t\t\t\tpress=".onArcadeInput"\n\t\t\t\ticon="sap-icon://navigation-up-arrow"\n\t\t\t\ttype="Emphasized"\n\t\t\t\ttooltip="Go right"\n\t\t\t\tclass="arcadeButtonDirection"/><Button\n\t\t\t\tid="d"\n\t\t\t\tpress=".onArcadeInput"\n\t\t\t\ticon="sap-icon://navigation-down-arrow"\n\t\t\t\ttype="Emphasized"\n\t\t\t\ttooltip="Jump"\n\t\t\t\tclass="arcadeButtonDirection"/><Button\n\t\t\t\tid="r"\n\t\t\t\tpress=".onArcadeInput"\n\t\t\t\ticon="sap-icon://navigation-right-arrow"\n\t\t\t\ttype="Emphasized"\n\t\t\t\ttooltip="Cover"\n\t\t\t\tclass="arcadeButtonDirection sapUiSmallMarginEnd"/><Button\n\t\t\t\tid="a"\n\t\t\t\tpress=".onArcadeInput"\n\t\t\t\ttext="A"\n\t\t\t\ttype="Emphasized"\n\t\t\t\ttooltip="Fire"\n\t\t\t\tclass="arcadeButton red"/><Button\n\t\t\t\tid="b"\n\t\t\t\tpress=".onArcadeInput"\n\t\t\t\ttext="B"\n\t\t\t\ttype="Emphasized"\n\t\t\t\ttooltip="Bomb"\n\t\t\t\tclass="arcadeButton yellow"/></layout:HorizontalLayout><layout:HorizontalLayout\n\t\t\tvisible="{device>/system/desktop}"\n\t\t\tclass="instructionsLayout"><Text\n\t\t\t\twidth="100%"\n\t\t\t\tvisible="{= ${view>/instructions} !== \'\'}"\n\t\t\t\ttext="{view>/instructions}"\n\t\t\t\ttextAlign="Center"\n\t\t\t\tclass="moodLabel"/><layout:VerticalLayout\n\t\t\t\tvisible="{= ${view>/instructions} === \'\'}"\n\t\t\t\twidth="100%"\n\t\t\t\tclass="centered sapUiTinyMarginTop"><SegmentedButton\n\t\t\t\t\tselectedKey="{appView>/mode}"\n\t\t\t\t\tselectionChange=".onSwitchMode"><items><SegmentedButtonItem key="1player" text="Single Player" icon="sap-icon://person-placeholder"/><SegmentedButtonItem key="2player" text="Multi Player" icon="sap-icon://group"/></items></SegmentedButton></layout:VerticalLayout></layout:HorizontalLayout><layout:HorizontalLayout><Text\n\t\t\t\ttext="Mood:"\n\t\t\t\tclass="sapUiSmallMarginEnd moodLabel"/><ProgressIndicator\n\t\t\t\twidth="200px"\n\t\t\t\theight="3rem"\n\t\t\t\tpercentValue="{appView>/mood}"\n\t\t\t\tdisplayValue="{\n\t\t\t\t\tpath: \'appView>/mood\',\n\t\t\t\t\tformatter: \'.formatter.moodText\'\n\t\t\t\t}"\n\t\t\t\tshowValue="true"\n\t\t\t\tclass="progressGauge"/></layout:HorizontalLayout></layout:HorizontalLayout></core:FragmentDefinition>',
	"flush/view/Credits.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"><Dialog\n\t\tid="Credits"\n\t\tclass="sapUiContentPadding"\n\t\tcontentWidth="500px"\n\t\ttitle="Credits"><content><Image\n\t\t\t\twidth="50%"\n\t\t\t\tsrc="{\n\t\t\t\t\tpath: \'appView>/flushLogo\',\n\t\t\t\t\tformatter: \'.formatter.pictureUrl\'\n\t\t\t\t}"\n\t\t\t\tclass="creditsLogo sapUiTinyMarginBottom"/><Label width="100%" design="Bold" textAlign="Center" text="An innovation project combining OpenUI5 &amp; CreateJS"/><Label width="100%" textAlign="Center" text="Open Sourced by SAP in 2019"/><Link\n\t\t\t\thref="https://github.com/sap/ui5-flush-game"\n\t\t\t\twidth="100%"\n\t\t\t\ttextAlign="Center"\n\t\t\t\ttext="view source code"\n\t\t\t\ttarget="_blank"\n\t\t\t\tclass="sapUiSmallMarginBottom"/><Label\n\t\t\t\tdesign="Bold"\n\t\t\t\twidth="100%"\n\t\t\t\ttextAlign="Center"\n\t\t\t\ttext="Created by"/><Label width="100%" textAlign="Center" text="Michael Graf"/><Label width="100%" textAlign="Center" text="Dominik Garrecht"/><Label width="100%" textAlign="Center" text="Clemens Maier"/><Label width="100%" textAlign="Center" text="Dietrich Mayer-Ullmann"/><Label width="100%" textAlign="Center" text="Adrian Moedebeck"/><Label width="100%" textAlign="Center" text="Ayham Tanbari" class="sapUiSmallMarginBottom"/><Label width="100%" design="Bold" textAlign="Center" text="Level music"/><Label width="100%" textAlign="Center" text=\'"8Bit Introduction song" by\'/><Link\n\t\t\t\thref="http://tristanlohengrin.wixsite.com/studio"\n\t\t\t\twidth="100%"\n\t\t\t\ttextAlign="Center"\n\t\t\t\ttext="Tristan Lohengrin"\n\t\t\t\ttarget="_blank"\n\t\t\t\tclass="sapUiSmallMarginBottom"/><Label width="100%" design="Bold" textAlign="Center" text="Sound Attributions"/><Label width="100%" textAlign="Center" text="This game uses freeware sounds"/><Link\n\t\t\t\thref="https://github.com/sap/ui5-flush-game/Sounds_Credits.md"\n\t\t\t\twidth="100%"\n\t\t\t\ttextAlign="Center"\n\t\t\t\ttext="view all used sounds"\n\t\t\t\ttarget="_blank"\n\t\t\t\tclass="sapUiSmallMarginBottom"/><Label width="100%" design="Bold" textAlign="Center" text="Thirdparty Software"/><Label width="100%" textAlign="Center" text="OpenUI5, CreateJS, Box2D, Animate.css, dom-to-image, UI5 Tooling, balls, eslint"/><Link\n\t\t\t\thref="https://github.com/sap/ui5-flush-game/Thirdparty.md"\n\t\t\t\twidth="100%"\n\t\t\t\ttextAlign="Center"\n\t\t\t\ttext="view all thirdparty libraries"\n\t\t\t\ttarget="_blank"\n\t\t\t\tclass="sapUiSmallMarginBottom"/><Label width="100%" design="Bold" textAlign="Center" text="Thank you for playing Flush"/><Label width="100%" textAlign="Center" text="Now defeat the evil render manager!"/></content><beginButton><Button\n\t\t\t\ttext="Close"\n\t\t\t\tpress=".onCloseDialog"/></beginButton></Dialog></core:FragmentDefinition>',
	"flush/view/Escape.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"><Dialog\n\t\tid="Escape"\n\t\tcontentWidth="500px"\n\t\tclass="sapUiNoContentPadding"\n\t\ttitle="{i18n>escapeTitle}"><content><Image\n\t\t\t\twidth="90%"\n\t\t\t\tsrc="{\n\t\t\t\t\tpath: \'appView>/chickenOut\',\n\t\t\t\t\tformatter: \'.formatter.pictureUrl\'\n\t\t\t\t}"\n\t\t\t\tclass="creditsLogo sapUiTinyMarginBottom"/></content><beginButton><Button\n\t\t\t\ttype="Accept"\n\t\t\t\ttext="Leave"\n\t\t\t\tpress=".onLeave"/></beginButton><endButton><Button\n\t\t\t\ttype="Reject"\n\t\t\t\ttext="Stay"\n\t\t\t\tpress=".onStay"/></endButton></Dialog></core:FragmentDefinition>',
	"flush/view/Game.view.xml":'<mvc:View\n\tcontrollerName="flush.game.controller.Game"\n\tdisplayBlock="true"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:layout="sap.ui.layout"\n\txmlns:unified="sap.ui.unified"\n\txmlns:game="flush.game.controls"><game:Game\n\t\tscore="{appView>/score}"\n\t\tlevel="{view>/level}"\n\t\tdifficulty="{view>/difficulty}"\n\t\ttimeLimit="{view>/timeLimit}"\n\t\tinit=".onLevelInit"\n\t\tend=".onLevelEnd"\n\t\tbusy="{view>/busy}"\n\t\tenableScrolling="false"\n\t\ttitle="{view>/title}"\n\t\tshowNavButton="true"\n\t\tnavButtonPress=".onBack"\n\t\tplayer1Lives="{view>/player1Lives}"\n\t\tplayer2Lives="{view>/player2Lives}"\n\t\tplayer1Energy="{view>/player1Energy}"\n\t\tplayer2Energy="{view>/player2Energy}"\n\t\thit=".onLevelHit"\n\t\tbomb=".onLevelBomb"\n\t\tid="page"><game:headerContent><layout:HorizontalLayout class="sapUiSmallMarginEnd"><ObjectNumber\n\t\t\t\t\tvisible="{= ${view>/remainingTime} !== undefined ? true : false }"\n\t\t\t\t\tid="remainingTime"\n\t\t\t\t\tnumber="Time: {view>/remainingTime}"\n\t\t\t\t\tclass="sapUiSmallMarginEnd"/><ObjectNumber\n\t\t\t\t\tvisible="{= !${view>/multi} }"\n\t\t\t\t\tnumber="Total: {appView>/score}"/></layout:HorizontalLayout></game:headerContent><game:content><core:Fragment id="multiPlayer" fragmentName="flush.game.view.MultiPlayer" type="XML"/><core:Fragment id="arcadeBoard" fragmentName="flush.game.view.ArcadeBoard" type="XML"/><game:ControlManager id="controlManager" class="controlManager"><CheckBox selected="true" valueState="Warning"/><Switch type="AcceptReject" state="false"><layoutData><FlexItemData growFactor="1"/></layoutData></Switch><Button text="OpenUI5" width="100px"/><GenericTile\n\t\t\t\t\tclass="sapUiTinyMarginBegin sapUiTinyMarginTop tileLayout"\n\t\t\t\t\theader="Flush!"\n\t\t\t\t\tsubheader="Defeat the evil rendermanager"\n\t\t\t\t\tpress="press"><TileContent unit="" footer=""><NumericContent value="2342" icon="sap-icon://line-charts"/></TileContent></GenericTile><unified:Calendar id="calendar"/></game:ControlManager></game:content><game:dependents><game:MessageToastStory id="PlopARobot"><game:MessageToastDeluxe message="" duration="2000"/><game:MessageToastDeluxe\n\t\t\t\t\tmessage="Plop the bad guys"\n\t\t\t\t\tspeaker="Render Manager"\n\t\t\t\t\timage="RotRenderManagerDroht.png" duration="5000"\n\t\t\t\t\tposition="end center"/></game:MessageToastStory><game:MessageToastStory id="WhackABug"><game:MessageToastDeluxe message="" duration="2000"/><game:MessageToastDeluxe\n\t\t\t\t\tmessage="Find the bugs in my hardware"\n\t\t\t\t\tspeaker="Render Manager"\n\t\t\t\t\timage="RotRenderManagerDroht.png"\n\t\t\t\t\tduration="5000" position="end center"/></game:MessageToastStory><game:MessageToastStory id="Uncontrollable"><game:MessageToastDeluxe message="" duration="2000"/><game:MessageToastDeluxe\n\t\t\t\t\tmessage="You better evade these controls or you will die, ha ha ha ha ha..."\n\t\t\t\t\tspeaker="Render Manager"\n\t\t\t\t\timage="RotRenderManagerDroht.png"\n\t\t\t\t\tduration="5000"\n\t\t\t\t\tposition="end center"/></game:MessageToastStory></game:dependents></game:Game></mvc:View>',
	"flush/view/Home.view.xml":'<mvc:View\n\tcontrollerName="flush.game.controller.Home"\n\tdisplayBlock="true"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:layout="sap.ui.layout"\n\txmlns:game="flush.game.controls"><Page\n\t\ttitle="{i18n>homeTitle}"\n\t\tclass="homeScreen"\n\t\tid="page"><customHeader><Toolbar><Button icon="sap-icon://video" text="Intro" tooltip="Play Intro" press=".onIntro"/><Button icon="sap-icon://group" text="Credits" tooltip="Show Credits Dialog" press=".onCredits"/><ToolbarSpacer/><Image\n\t\t\t\t\twidth="{= ${device>/system/phone} ? \'200px\' : \'inherit\' }"\n\t\t\t\t\tsrc="{\n\t\t\t\t\t\tpath: \'appView>/flushLogo\',\n\t\t\t\t\t\tformatter: \'.formatter.pictureUrl\'\n\t\t\t\t\t}"\n\t\t\t\t\tclass="flushLogo"/><ToolbarSpacer/><ObjectNumber number="Total: {appView>/score}" class="sapUiSmallMarginEnd"/></Toolbar></customHeader><headerContent></headerContent><content><TileContainer\n\t\t\t\tid="levels"\n\t\t\t\theight="{= ${device>/system/desktop} ? \'720px\' : \'calc(100% - 4.5rem)\'}"><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="1" class="levelNumber"/><Label text="Plop!" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="PlopARobot"/><core:CustomData key="difficulty" value="1"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="2" class="levelNumber"/><Label text="Whack!" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="WhackABug"/><core:CustomData key="difficulty" value="1"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="3" class="levelNumber"/><Label text="Bounce!" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="Uncontrollable"/><core:CustomData key="difficulty" value="1"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="4" class="levelNumber"/><Label text="Plop Deluxe" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="PlopARobot"/><core:CustomData key="difficulty" value="5"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="5" class="levelNumber"/><Label text="Whack Deluxe" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="WhackABug"/><core:CustomData key="difficulty" value="5"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="6" class="levelNumber"/><Label text="Bounce Deluxe" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="Uncontrollable"/><core:CustomData key="difficulty" value="5"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="7" class="levelNumber"/><Label text="Plop Hard" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="PlopARobot"/><core:CustomData key="difficulty" value="10"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="8" class="levelNumber"/><Label text="Whack Hard" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="WhackABug"/><core:CustomData key="difficulty" value="10"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="9" class="levelNumber"/><Label text="Bounce Hard" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="Uncontrollable"/><core:CustomData key="difficulty" value="10"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="10" class="levelNumber"/><Label text="Plop Impossible" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="PlopARobot"/><core:CustomData key="difficulty" value="20"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="11" class="levelNumber"/><Label text="Whack Impossible" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="WhackABug"/><core:CustomData key="difficulty" value="20"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="12" class="levelNumber"/><Label text="Bounce Impossible" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="Uncontrollable"/><core:CustomData key="difficulty" value="20"/></game:customData></game:GameTile></TileContainer><core:Fragment id="arcadeBoard" fragmentName="flush.game.view.ArcadeBoard" type="XML"/></content><dependents><game:MessageToastStory id="intro"><game:MessageToastDeluxe message="" duration="2000"/><game:MessageToastDeluxe message="Choose your poison to defeat me, the mighty Render Manager. Score 10.000 points to calm my mood and win!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="center center"/><game:MessageToastDeluxe message="" duration="5000"/></game:MessageToastStory><game:MessageToastStory id="lucky"><game:MessageToastDeluxe message="" duration="2000"/><game:MessageToastDeluxe message="Wow, i feel much better now, thanks!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="center center"/><game:MessageToastDeluxe message="" duration="5000"/></game:MessageToastStory><game:MessageToastStory id="n00b"><game:MessageToastDeluxe message="" duration="2000"/><game:MessageToastDeluxe message="Really, you scored absolutely no points? Try an easier game maybe..." speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="center center"/><game:MessageToastDeluxe message="" duration="5000"/></game:MessageToastStory><game:MessageToastStory id="fool"><game:MessageToastDeluxe message="" duration="2000"/><game:MessageToastDeluxe message="Seriously? That made my mood even worse, try harder!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="center center"/><game:MessageToastDeluxe message="" duration="5000"/></game:MessageToastStory><game:MessageToastStory\n\t\t\t\tid="randomQuotes"\n\t\t\t\trandom="true"\n\t\t\t\tloop="true"\n\t\t\t\tdelay="3000"><game:MessageToastDeluxe message="Pressing ALT+F4 activates god mode!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="end center"/><game:MessageToastDeluxe message="Forget it, you will never beat me!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="end center"/><game:MessageToastDeluxe message="Catch me if you can or give up!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="begin center"/><game:MessageToastDeluxe message="I am the evil Render Manager, hahahahahahaha!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="begin bottom"/><game:MessageToastDeluxe message="Woe betide you! Don\'t touch my holy circuits!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="end center"/><game:MessageToastDeluxe message="You cannot defeat me, fool!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="end center"/><game:MessageToastDeluxe message="Don\'t bother me and let me render controls like smoke!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="center center"/><game:MessageToastDeluxe message="Let us fight hand in hand, hahahahahahaha!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="center center"/><game:MessageToastDeluxe message="I\'m going to flush you away with my controls!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="begin center"/><game:MessageToastDeluxe message="Try to restore me! I dare you!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="center center"/><game:MessageToastDeluxe message="Must... flush... all... controls... now!!1111!1!11" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="end center"/></game:MessageToastStory></dependents></Page></mvc:View>',
	"flush/view/Intro.view.xml":'<mvc:View\n\tcontrollerName="flush.game.controller.Intro"\n\tdisplayBlock="true"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:game="flush.game.controls"><Page\n\t\tid="page"\n\t\tenableScrolling="false"\n\t\ttitle="{i18n>introTitle}"><headerContent><Button icon="sap-icon://video" text="Skip Intro" press=".onSkip"/></headerContent><content><Carousel\n\t\t\t\tid="introBg"\n\t\t\t\theight="{= ${device>/system/desktop} ? \'720px\' : \'calc(100% - 4.5rem)\'}"\n\t\t\t\tshowPageIndicator="false"\n\t\t\t\tpages="{view>/intro}"\n\t\t\t\tpageChanged=".onCarouselChange"\n\t\t\t\tclass="introCarousel"><Image\n\t\t\t\t\tsrc="{\n\t\t\t\t\t\tpath: \'view>file\',\n\t\t\t\t\t\tformatter: \'.formatter.pictureUrl\'\n\t\t\t\t\t}"\n\t\t\t\t\twidth="{= ${device>/system/desktop} ? \'inherit\' : \'100%\'}"\n\t\t\t\t\theight="{= ${device>/system/desktop} ? \'720px\' : \'inherit\'}"/></Carousel><core:Fragment id="arcadeBoard" fragmentName="flush.game.view.ArcadeBoard" type="XML"/></content><dependents><game:MessageToastStory id="intro0"><game:MessageToastDeluxe message="" duration="2000"/><game:MessageToastDeluxe message="UI5 presents" duration="2000" position="center center"/><game:MessageToastDeluxe message="" image="flush_logo_xl.png" duration="3000" position="center center"/></game:MessageToastStory><game:MessageToastStory id="intro1"><game:MessageToastDeluxe message="" duration="1000"/><game:MessageToastDeluxe message="Oh dear, this Fiori Launchpad is a total mess, all tiles fell down" speaker="Prodi" image="GruenHoffnungsvoll.png" duration="3000" position="begin center"/><game:MessageToastDeluxe message="Poor Render Manager has to tidy up all of them" speaker="Scrummy" image="OrangeBefuerchtet.png" duration="4000" position="end center"/></game:MessageToastStory><game:MessageToastStory id="intro2"><game:MessageToastDeluxe message="" duration="3500"/><game:MessageToastDeluxe message="" image="effect_awesome.png" duration="1" position="begin center"/><game:MessageToastDeluxe message="Damn, he has been hit by a flash!" speaker="Scary" image="LilaDebatiert.png" duration="3000" position="end center"/></game:MessageToastStory><game:MessageToastStory id="intro3"><game:MessageToastDeluxe message="" duration="1500"/><game:MessageToastDeluxe message="" image="effect_plop.png" duration="1" position="center center"/><game:MessageToastDeluxe message="" image="effect_awesome.png" duration="1" position="center center"/><game:MessageToastDeluxe message="Are you ok Render Manager?" speaker="Codi" image="BlauZaehne.png" duration="6000" position="end center"/></game:MessageToastStory><game:MessageToastStory id="intro4"><game:MessageToastDeluxe message="" duration="1000"/><game:MessageToastDeluxe message="Must produce more controls to dominate the world!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="3000" position="begin center"/><game:MessageToastDeluxe message="" duration="3000"/><game:MessageToastDeluxe message="Oh crap, he is flushing millions of controls..." speaker="Prodi" image="GruenHoffnungsvoll.png" duration="3000" position="end center"/></game:MessageToastStory><game:MessageToastStory id="intro5"><game:MessageToastDeluxe message="" duration="1000"/><game:MessageToastDeluxe message="We have to do something or he will make all apps unusable!" speaker="Scary" image="LilaDebatiert.png" duration="4000" position="begin center"/><game:MessageToastDeluxe message="Will you help us turn Render Manager back to normal again?" speaker="Scrummy" image="OrangeBefuerchtet.png" duration="3000" position="end center"/></game:MessageToastStory></dependents></Page></mvc:View>',
	"flush/view/Multi.view.xml":'<mvc:View\n\tcontrollerName="flush.game.controller.Multi"\n\tdisplayBlock="true"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:layout="sap.ui.layout"\n\txmlns:game="flush.game.controls"><Page\n\t\ttitle="{i18n>homeTitle}"\n\t\tclass="homeScreen"\n\t\tid="page"><customHeader><Toolbar><Button icon="sap-icon://video" text="Intro" tooltip="Play Intro" press=".onIntro"/><Button icon="sap-icon://group" text="Credits" tooltip="Show Credits Dialog" press=".onCredits"/><ToolbarSpacer/><Image\n\t\t\t\t\tsrc="{\n\t\t\t\t\t\tpath: \'appView>/flushLogo\',\n\t\t\t\t\t\tformatter: \'.formatter.pictureUrl\'\n\t\t\t\t\t}"\n\t\t\t\t\tclass="flushLogo"/><ToolbarSpacer/><ObjectNumber number="Score: {view>/player1wins} : {view>/player2wins}" class="sapUiSmallMarginEnd"/></Toolbar></customHeader><headerContent></headerContent><content><TileContainer\n\t\t\t\tid="levels"\n\t\t\t\theight="{= ${device>/system/desktop} ? \'720px\' : \'calc(100% - 4.5rem)\'}"><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="1" class="levelNumber"/><Label text="Deathmatch" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="UncontrollableMultiplayer"/><core:CustomData key="difficulty" value="1"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="2" class="levelNumber"/><Label text="Deathmatch" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="UncontrollableMultiplayer"/><core:CustomData key="difficulty" value="2"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="3" class="levelNumber"/><Label text="Deathmatch" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="UncontrollableMultiplayer"/><core:CustomData key="difficulty" value="3"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="4" class="levelNumber"/><Label text="Deathmatch" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="UncontrollableMultiplayer"/><core:CustomData key="difficulty" value="4"/></game:customData></game:GameTile><game:GameTile press=".onLevel"><game:content><layout:VerticalLayout width="100%"><Title titleStyle="H1" text="5" class="levelNumber"/><Label text="Deathmatch" textAlign="Center" class="levelName"/></layout:VerticalLayout></game:content><game:customData><core:CustomData key="level" value="UncontrollableMultiplayer"/><core:CustomData key="difficulty" value="5"/></game:customData></game:GameTile></TileContainer><core:Fragment id="arcadeBoard" fragmentName="flush.game.view.ArcadeBoard" type="XML"/></content><dependents><game:MessageToastStory id="intro"><game:MessageToastDeluxe message="" duration="2000"/><game:MessageToastDeluxe message="Now is your chance to prove yourself! May the better robot win" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="center center"/><game:MessageToastDeluxe message="" duration="5000"/></game:MessageToastStory><game:MessageToastStory id="player1win"><game:MessageToastDeluxe message="" duration="2000"/><game:MessageToastDeluxe message="Well done Player1! You wiped out Player2 this time!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="center center"/><game:MessageToastDeluxe message="" duration="5000"/></game:MessageToastStory><game:MessageToastStory id="player2win"><game:MessageToastDeluxe message="" duration="2000"/><game:MessageToastDeluxe message="Player2 clearly dominated this round and kicked out Player1, good job!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="center center"/><game:MessageToastDeluxe message="" duration="5000"/></game:MessageToastStory><game:MessageToastStory\n\t\t\t\tid="randomQuotes"\n\t\t\t\trandom="true"\n\t\t\t\tloop="true"\n\t\t\t\tdelay="3000"><game:MessageToastDeluxe message="I am excited to see who will loose this match" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="end center"/><game:MessageToastDeluxe message="May the most evil robot win!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="end center"/><game:MessageToastDeluxe message="Who will be the last robot standing this time?" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="begin center"/><game:MessageToastDeluxe message="A competition? How ridiculous you both are!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="begin bottom"/><game:MessageToastDeluxe message="Who will be remaining to become my Padawan, hahahaha?!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="end center"/><game:MessageToastDeluxe message="Who will disgrace him or herself this time?" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="begin center"/><game:MessageToastDeluxe message="The winner of this match will be recruited for my evil army!" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="center center"/><game:MessageToastDeluxe message="Must... flush... all... controls... now!!1111!1!11" speaker="Render Manager" image="RotRenderManagerDroht.png" duration="5000" position="end center"/></game:MessageToastStory></dependents></Page></mvc:View>',
	"flush/view/MultiPlayer.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:layout="sap.ui.layout"\n\txmlns:core="sap.ui.core"><layout:HorizontalLayout\n\t\tvisible="{view>/multi}"\n\t\tclass="arcadeControls multiPlayerControls sapUiContentPadding sapUiSmallMarginBeginEnd"><layout:HorizontalLayout\n\t\t\tclass="lifeBar"\n\t\t\tcontent="{view>/player1LivesArray}"><Image\n\t\t\t\twidth="50px"\n\t\t\t\tsrc="{\n\t\t\t\t\tpath: \'appView>/player1\',\n\t\t\t\t\tformatter: \'.formatter.pictureUrl\'\n\t\t\t\t}"/></layout:HorizontalLayout><layout:HorizontalLayout\n\t\t\tvisible="{device>/system/desktop}"\n\t\t\tclass="instructionsLayout multiplayer"><Text\n\t\t\t\twidth="100%"\n\t\t\t\tvisible="{= ${view>/instructions} !== \'\'}"\n\t\t\t\ttext="{view>/instructions}"\n\t\t\t\ttextAlign="Center"\n\t\t\t\tclass="moodLabel"/></layout:HorizontalLayout><layout:HorizontalLayout\n\t\t\tclass="lifeBar"\n\t\t\tcontent="{view>/player2LivesArray}"><Image\n\t\t\t\twidth="50px"\n\t\t\t\tsrc="{\n\t\t\t\t\tpath: \'appView>/player2\',\n\t\t\t\t\tformatter: \'.formatter.pictureUrl\'\n\t\t\t\t}"/></layout:HorizontalLayout></layout:HorizontalLayout></core:FragmentDefinition>',
	"flush/view/Outro.view.xml":'<mvc:View\n\tcontrollerName="flush.game.controller.Outro"\n\tdisplayBlock="true"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"\n\txmlns:mvc="sap.ui.core.mvc"\n\txmlns:game="flush.game.controls"><Page\n\t\tid="page"\n\t\tenableScrolling="false"\n\t\ttitle="{i18n>outroTitle}"\n\t\tshowNavButton="true"\n\t\tnavButtonPress=".onBack"><headerContent><ObjectNumber number="Total: {appView>/score}" class="sapUiSmallMarginEnd"/></headerContent><content><Image src="{\n\t\t\t\t\tpath: \'view>/outro\',\n\t\t\t\t\tformatter: \'.formatter.pictureUrl\'\n\t\t\t\t}"\n\t\t\t\twidth="{= ${device>/system/desktop} ? \'inherit\' : \'100%\'}"\n\t\t\t\theight="{= ${device>/system/desktop} ? \'720px\' : \'inherit\'}"/><core:Fragment id="arcadeBoard" fragmentName="flush.game.view.ArcadeBoard" type="XML"/></content><dependents><game:MessageToastStory id="outro"><game:MessageToastDeluxe message="" duration="2000"/><game:MessageToastDeluxe message="Congratulations! You have defeated the evil Render Manager and rescued us, you are truly a brave robot" speaker="Scary" image="LilaDebatiert.png" duration="5000" position="center center"/><game:MessageToastDeluxe message="" image="effect_pow.png" duration="1" position="begin center"/><game:MessageToastDeluxe message="" image="effect_awesome.png" duration="1" position="center center"/><game:MessageToastDeluxe message="" image="effect_plop.png" duration="1" position="end center"/><game:MessageToastDeluxe message="Thanks for playing Flush!" duration="2000" position="center center"/><game:MessageToastDeluxe message="" image="flush_logo_xl.png" duration="5000" position="center center"/></game:MessageToastStory></dependents></Page></mvc:View>',
	"flush/view/SwitchMode.fragment.xml":'<core:FragmentDefinition\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core"><Dialog\n\t\tid="SwitchMode"\n\t\tclass="sapUiContentPadding"\n\t\tcontentWidth="500px"\n\t\ttitle="Do you really want to switch the game mode?"><content><Image\n\t\t\t\twidth="100%"\n\t\t\t\tsrc="{\n\t\t\t\t\tpath: \'appView>/switchMode\',\n\t\t\t\t\tformatter: \'.formatter.pictureUrl\'\n\t\t\t\t}"\n\t\t\t\tclass="creditsLogo sapUiTinyMarginBottom"/></content><beginButton><Button\n\t\t\t\ttype="Accept"\n\t\t\t\ttext="Leave"\n\t\t\t\tpress=".onLeave"/></beginButton><endButton><Button\n\t\t\t\ttype="Reject"\n\t\t\t\ttext="Stay"\n\t\t\t\tpress=".onStay"/></endButton></Dialog></core:FragmentDefinition>'
});
